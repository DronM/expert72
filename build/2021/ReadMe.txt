Документ состоит из одного xml-файла и файлов электронных подписей.
Формат наименования conclusion_<GUID>.xml, где:
<GUID> – уникальный набор символов, соответствующий GUID (128 бит). Соответствует значению атрибута GUID корневого элемента Conclusion.

Подпись: conclusion_<GUID>_*.sig, произвольный набор символов для удобной идентификации файла подписи пользователем порядковый номер подписи(?)

Найти схему Conclusion.xsd, возможность как то загружать админу для валидации

О – обязательный элемент
Н – необязательный элемент
ОА – обязательный атрибут
НА – необязательный атрибут
У – символ, обозначающий условие выбора
Комбинации: УО, УНА
М - множественность элемента

Т – <текст (символьная строка)>;
IN – < целое число >;
DN – < десятичное число >;
D – <дата>, дата в формате <ГГГГ-ММ-ДД> (год-месяц-день);
K – <код>, кодовое значение по классификатору, справочнику.
T(n-m) - n- мин.количество символов,m - макс


Атрибуты заключения:
ConclusionGUID - где-то формировать ГУИД, когда присваивать?
SchemaLink - Ссылка на сайте на скачивание постоянная, без пароля, правильно или нет понимаю(?)




1) Классификаторы. Приложение №1
Одна модель на все: conclusion_dictionaries
ConclusionDictionary
id - string
name text
content jsonb
Форма списка - без контента
Форма диалога - шапка + контент в виде таблицы
Модель детального контента
ConclusionDictionaryItem
	code - text
	name - text
Отдельные типы для редактирования: ConclDict_tExaminationTypeEdit - неявное
select json_elements(content) from conclusion_dictionaries where id='tExaminationType'
+добавление фильтра complete content.code LIKE %1% OR content.name LIKE %1%
или
concl_dict_tExaminationType
	id int,
	name - text
	
ConclusionDictionaryH conclusion_dictionaries_h
id - string tExaminationType, name
ConclusionDictionaryT conclusion_dictionaries_t
code, descr, code_gr
18 таблиц всего	
8 - часов структура
8 - часов данные


conclusion_dictionaries
conclusion_dictionary_detail

---
~20 часов
	
2) Шаблоны XML: отдельные структуры + общий, разобрать все
~50
Остановился на tClimateConditions


3) Локальные заключения:
	- Структура
	- Вопросы-ответы
	- история, возможность открыть старую версию (фиксация = при отправке письма и сборе неотвеченных)
~24+24 = 50
	
4) Заключение ->> XML	
	- отдельная закладка, сбор всей структуры, с указанием источника откуда взяли. Что-то редактируется (ТЭПы?), что то нет
	(организация и т.д.). Поля, которые дублируются в контракте - редактируемые, остальные нет, если надо - копировать в контракт
	- печатная форма есть, со стандратным шаблоном XSLT
~25


5) Переписка с использованием шаблонов:
	- шаблон нашего письма с вопросами
	- Подрекление подписей,
	- печатныя форма с подписями
	- PDF
		 Шаблоны LibreOffice всех печатных форм:
			- Исходящее письмо наше. Замечаниея
			- Исходящее клиента. Ответы на замечания
		Возможность конвертации в PDF
		libreoffice --headless --convert-to pdf <filename>.odt

		sudo apt-get install libreoffice-java-common
		lowriter --convert-to filename.docx
	
	- сходящее письмо клиента с ответами - другая форма, таблица, прикрепляет только подписи к файлу

16+8+8+8=50
	
	
6) Акт выполненных работ XML, через СБИС, отправка, печатная форма, подписание, подписание клиентом
50 - СБИС	
+20 прикрутить
+1с = 80


225 часов = 350	-400тр
1,5-2 месяца если делать только это 
2,5 - 3 - 3,5




tDocument
required убрать, добавить поле attr concl_req=true



------------------
Валидация - подсветить ошибки, обязательность/форматы и т.д.
Вывод в XML, убрать служебные тэги
Открыть шаблоном xslt, скачать
заполнение из имеющихся данных
XX Форматирование отображения



ВОПРОСЫ:
1) Связать тип документа (классификатор) и файлами - как? через раздел?
Номер документа

2) Наименование документа?

3) Автор документа?

4) Примечание об изменении

5) Связать сотрудника - Эксперт - удостоверение


ХХХ Кнопка Печать - + XSLT на XML
ХХХ Кнопка выгрузить - чисты XML + xslt
ХХХ Кнока проверить


XX Документация-> Автор организация, косяк 
!!!Свертка панелей



Ошибки валидации:
1) Регионы, 0,1,2 - ожидается 2 знака:01,02, в классификаторе 1 знак
	Исправил согласно схеме
2) Сейсмическая активность схема не соответствует классификатору
Переименовал:
	Код 5 и менее баллов

3) tExpertType схема не соответствует классификатору, точки в схеме есть
	Сделал согласно схеме: где-как, порядка, логики НЕТ
	5.1.1		=> 5.1.1.
	5.2.8		=> 5.2.8.
	5.2.12.1	=> 5.2.12.1.
	5.2.12.2	=> 5.2.12.2.
	5.2.12.3. Мосты и трубы
	5.2.12.4.
	
	2.2.1 - БЕЗ ТОЧКИ!
	2.2.3
	2.4.2
	4.2
	
	
	
	
	




