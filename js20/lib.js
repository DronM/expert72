
(function($){$.fn.EasyTree=function(options){var defaults={selectable:true,deletable:false,editable:false,addable:false,onExpand:null,onCollapse:null,classOpen:"glyphicon-folder-open",classClose:"glyphicon-folder-close",classFile:"glyphicon-file",expanded:false,i18n:{deleteNull:'deleteNull',deleteConfirmation:'Удалить？',confirmButtonLabel:'Удалить',editNull:'editNull',editMultiple:'editMultiple',addMultiple:'addMultiple',collapseTip:'Свернуть',expandTip:'Развернуть',selectTip:null,unselectTip:null,editTip:'editTip',addTip:'addTip',deleteTip:'deleteTip',cancelButtonLabel:'cancelButtonLabel'}};var warningAlert=$('<div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var dangerAlert=$('<div class="alert alert-danger alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong></strong><span class="alert-content"></span> </div> ');var createInput=$('<div class="input-group"><input type="text" class="form-control"><span class="input-group-btn"><button type="button" class="btn btn-default btn-success confirm"></button> </span><span class="input-group-btn"><button type="button" class="btn btn-default cancel"></button> </span> </div> ');options=$.extend(defaults,options);this.each(function(){var easyTree=$(this);$.each($(easyTree).find('ul > li'),function(){var text;if($(this).is('li:has(ul)')){var children=$(this).find(' > ul');$(children).remove();text=$(this).text();$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span>');$(this).find(' > span > span').addClass(options.expanded?options.classOpen:options.classClose);$(this).find(' > span > a').text(text);$(this).append(children);var ch_nodes=children.find(' > li');ch_nodes.hide('fast');}
else{text=$(this).text();$(this).html('<span><span class="glyphicon"></span><a href="javascript: void(0);"></a> </span>');$(this).find(' > span > span').addClass(options.classFile);$(this).find(' > span > a').text(text);}});$(easyTree).find('li:has(ul)').addClass('parent_li').find(' > span').attr('title',options.expanded?options.i18n.collapseTip:options.i18n.expandTip);if(options.deletable||options.editable||options.addable){$(easyTree).prepend('<div class="easy-tree-toolbar"></div> ');}
if(options.addable){$(easyTree).find('.easy-tree-toolbar').append('<div class="create"><button class="btn btn-default btn-sm btn-success"><span class="glyphicon glyphicon-plus"></span></button></div> ');$(easyTree).find('.easy-tree-toolbar .create > button').attr('title',options.i18n.addTip).click(function(){var createBlock=$(easyTree).find('.easy-tree-toolbar .create');$(createBlock).append(createInput);$(createInput).find('input').focus();$(createInput).find('.confirm').text(options.i18n.confirmButtonLabel);$(createInput).find('.confirm').click(function(){if($(createInput).find('input').val()==='')
return;var selected=getSelectedItems();var item=$('<li><span><span class="glyphicon '+options.classFile+'"></span><a href="javascript: void(0);">'+$(createInput).find('input').val()+'</a> </span></li>');$(item).find(' > span > span').attr('title',options.i18n.collapseTip);$(item).find(' > span > a').attr('title',options.i18n.selectTip);if(selected.length<=0){$(easyTree).find(' > ul').append($(item));}else if(selected.length>1){$(easyTree).prepend(warningAlert);$(easyTree).find('.alert .alert-content').text(options.i18n.addMultiple);}else{if($(selected).hasClass('parent_li')){$(selected).find(' > ul').append(item);}else{$(selected).addClass('parent_li').find(' > span > span').addClass(options.classOpen).removeClass(options.classFile);$(selected).append($('<ul></ul>')).find(' > ul').append(item);}}
$(createInput).find('input').val('');if(options.selectable){$(item).find(' > span > a').attr('title',options.i18n.selectTip);$(item).find(' > span > a').click(function(e){var li=$(this).parent().parent();if(li.hasClass('li_selected')){$(this).attr('title',options.i18n.selectTip);$(li).removeClass('li_selected');}
else{$(easyTree).find('li.li_selected').removeClass('li_selected');$(this).attr('title',options.i18n.unselectTip);$(li).addClass('li_selected');}
if(options.deletable||options.editable||options.addable){var selected=getSelectedItems();if(options.editable){if(selected.length<=0||selected.length>1)
$(easyTree).find('.easy-tree-toolbar .edit > button').addClass('disabled');else
$(easyTree).find('.easy-tree-toolbar .edit > button').removeClass('disabled');}
if(options.deletable){if(selected.length<=0||selected.length>1)
$(easyTree).find('.easy-tree-toolbar .remove > button').addClass('disabled');else
$(easyTree).find('.easy-tree-toolbar .remove > button').removeClass('disabled');}}
e.stopPropagation();});}
$(createInput).remove();});$(createInput).find('.cancel').text(options.i18n.cancelButtonLabel);$(createInput).find('.cancel').click(function(){$(createInput).remove();});});}
if(options.editable){$(easyTree).find('.easy-tree-toolbar').append('<div class="edit"><button class="btn btn-default btn-sm btn-primary disabled"><span class="glyphicon glyphicon-edit"></span></button></div> ');$(easyTree).find('.easy-tree-toolbar .edit > button').attr('title',options.i18n.editTip).click(function(){$(easyTree).find('input.easy-tree-editor').remove();$(easyTree).find('li > span > a:hidden').show();var selected=getSelectedItems();if(selected.length<=0){$(easyTree).prepend(warningAlert);$(easyTree).find('.alert .alert-content').html(options.i18n.editNull);}
else if(selected.length>1){$(easyTree).prepend(warningAlert);$(easyTree).find('.alert .alert-content').html(options.i18n.editMultiple);}
else{var value=$(selected).find(' > span > a').text();$(selected).find(' > span > a').hide();$(selected).find(' > span').append('<input type="text" class="easy-tree-editor">');var editor=$(selected).find(' > span > input.easy-tree-editor');$(editor).val(value);$(editor).focus();$(editor).keydown(function(e){if(e.which==13){if($(editor).val()!==''){$(selected).find(' > span > a').text($(editor).val());$(editor).remove();$(selected).find(' > span > a').show();}}});}});}
if(options.deletable){$(easyTree).find('.easy-tree-toolbar').append('<div class="remove"><button class="btn btn-default btn-sm btn-danger disabled"><span class="glyphicon glyphicon-remove"></span></button></div> ');$(easyTree).find('.easy-tree-toolbar .remove > button').attr('title',options.i18n.deleteTip).click(function(){var selected=getSelectedItems();if(selected.length<=0){$(easyTree).prepend(warningAlert);$(easyTree).find('.alert .alert-content').html(options.i18n.deleteNull);}else{$(easyTree).prepend(dangerAlert);$(easyTree).find('.alert .alert-content').html(options.i18n.deleteConfirmation).append('<a style="margin-left: 10px;" class="btn btn-default btn-danger confirm"></a>').find('.confirm').html(options.i18n.confirmButtonLabel);$(easyTree).find('.alert .alert-content .confirm').on('click',function(){$(selected).find(' ul ').remove();if($(selected).parent('ul').find(' > li').length<=1){$(selected).parents('li').removeClass('parent_li').find(' > span > span').removeClass(options.classOpen).addClass(options.classFile);$(selected).parent('ul').remove();}
$(selected).remove();$(dangerAlert).remove();});}});}
$(easyTree).delegate('li.parent_li > span','click',function(e){var children=$(this).parent('li.parent_li').find(' > ul > li');if(children.is(':visible')){children.hide('fast');$(this).attr('title',options.i18n.expandTip).find(' > span.glyphicon').addClass(options.classClose).removeClass(options.classOpen);if(options.onCollapse){options.onCollapse.call(this,e,this.parentNode);}}else{children.show('fast');$(this).attr('title',options.i18n.collapseTip).find(' > span.glyphicon').addClass(options.classOpen).removeClass(options.classClose);if(options.onExpand){options.onExpand.call(this,e,this.parentNode);}}
e.stopPropagation();});if(options.selectable){$(easyTree).find('li > span > a').attr('title',options.i18n.selectTip);$(easyTree).find('li > span > a').click(function(e){var li=$(this).parent().parent();if(li.hasClass('li_selected')){$(this).attr('title',options.i18n.selectTip);$(li).removeClass('li_selected');}
else{$(easyTree).find('li.li_selected').removeClass('li_selected');$(this).attr('title',options.i18n.unselectTip);$(li).addClass('li_selected');}
if(options.deletable||options.editable||options.addable){var selected=getSelectedItems();if(options.editable){if(selected.length<=0||selected.length>1)
$(easyTree).find('.easy-tree-toolbar .edit > button').addClass('disabled');else
$(easyTree).find('.easy-tree-toolbar .edit > button').removeClass('disabled');}
if(options.deletable){if(selected.length<=0||selected.length>1)
$(easyTree).find('.easy-tree-toolbar .remove > button').addClass('disabled');else
$(easyTree).find('.easy-tree-toolbar .remove > button').removeClass('disabled');}}
e.stopPropagation();});}
var getSelectedItems=function(){return $(easyTree).find('li.li_selected');};});};})(jQuery);   
function getPasteEvent(){var el=document.createElement('input'),name='onpaste';el.setAttribute(name,'');return(typeof el[name]==='function')?'paste':'input';}
var pasteEventName=getPasteEvent()+".mask",ua=navigator.userAgent,iPhone=/iphone/i.test(ua),android=/android/i.test(ua),caretTimeoutId;$.mask={definitions:{'9':"[0-9]",'a':"[A-Za-z]",'*':"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:'_',};$.fn.extend({caret:function(begin,end){var range;if(this.length===0||this.is(":hidden")){return;}
if(typeof begin=='number'){end=(typeof end==='number')?end:begin;return this.each(function(){if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}});}else{if(this[0].setSelectionRange){begin=this[0].selectionStart;end=this[0].selectionEnd;}else if(document.selection&&document.selection.createRange){range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}},unmask:function(){return this.trigger("unmask");},mask:function(mask,settings){var input,defs,tests,partialPosition,firstNonMaskPos,len;if(!mask&&this.length>0){input=$(this[0]);var f=input.data($.mask.dataName);return f?f():null;}
settings=$.extend({placeholder:$.mask.placeholder,completed:null},settings);defs=$.mask.definitions;tests=[];partialPosition=len=mask.length;firstNonMaskPos=null;$.each(mask.split(""),function(i,c){if(c=='?'){len--;partialPosition=i;}else if(defs[c]){tests.push(new RegExp(defs[c]));if(firstNonMaskPos===null){firstNonMaskPos=tests.length-1;}}else{tests.push(null);}});return this.trigger("unmask").each(function(){var input=$(this),buffer=$.map(mask.split(""),function(c,i){if(c!='?'){return defs[c]?settings.placeholder:c;}}),focusText=input.val();function seekNext(pos){while(++pos<len&&!tests[pos]);return pos;}
function seekPrev(pos){while(--pos>=0&&!tests[pos]);return pos;}
function shiftL(begin,end){var i,j;if(begin<0){return;}
for(i=begin,j=seekNext(end);i<len;i++){if(tests[i]){if(j<len&&tests[i].test(buffer[j])){buffer[i]=buffer[j];buffer[j]=settings.placeholder;}else{break;}
j=seekNext(j);}}
writeBuffer();input.caret(Math.max(firstNonMaskPos,begin));}
function shiftR(pos){var i,c,j,t;for(i=pos,c=settings.placeholder;i<len;i++){if(tests[i]){j=seekNext(i);t=buffer[i];buffer[i]=c;if(j<len&&tests[j].test(t)){c=t;}else{break;}}}}
function keydownEvent(e){var k=e.which,pos,begin,end;if(k===8||k===46||(iPhone&&k===127)){pos=input.caret();begin=pos.begin;end=pos.end;if(end-begin===0){begin=k!==46?seekPrev(begin):(end=seekNext(begin-1));end=k===46?seekNext(end):end;}
clearBuffer(begin,end);shiftL(begin,end-1);e.preventDefault();}else if(k==27){input.val(focusText);input.caret(0,checkVal());e.preventDefault();}}
function keypressEvent(e){var k=e.which,pos=input.caret(),p,c,next;if(e.ctrlKey||e.altKey||e.metaKey||k<32){return;}else if(k){if(pos.end-pos.begin!==0){clearBuffer(pos.begin,pos.end);shiftL(pos.begin,pos.end-1);}
p=seekNext(pos.begin-1);if(p<len){c=String.fromCharCode(k);if(tests[p].test(c)){shiftR(p);buffer[p]=c;writeBuffer();next=seekNext(p);if(android){setTimeout($.proxy($.fn.caret,input,next),0);}else{input.caret(next);}
if(settings.completed&&next>=len){settings.completed.call(input);}}}
e.preventDefault();}}
function clearBuffer(start,end){var i;for(i=start;i<end&&i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;}}}
function writeBuffer(){input.val(buffer.join(''));}
function checkVal(allow){var test=input.val(),lastMatch=-1,i,c;for(i=0,pos=0;i<len;i++){if(tests[i]){buffer[i]=settings.placeholder;while(pos++<test.length){c=test.charAt(pos-1);if(tests[i].test(c)){buffer[i]=c;lastMatch=i;break;}}
if(pos>test.length){break;}}else if(buffer[i]===test.charAt(pos)&&i!==partialPosition){pos++;lastMatch=i;}}
if(allow){writeBuffer();}else if(lastMatch+1<partialPosition){input.val("");clearBuffer(0,len);}else{writeBuffer();input.val(input.val().substring(0,lastMatch+1));}
return(partialPosition?i:firstNonMaskPos);}
input.data($.mask.dataName,function(){return $.map(buffer,function(c,i){return tests[i]&&c!=settings.placeholder?c:null;}).join('');});if(!input.attr("readonly"))
input.one("unmask",function(){input.unbind(".mask").removeData($.mask.dataName);}).bind("focus.mask",function(){clearTimeout(caretTimeoutId);var pos,moveCaret;focusText=input.val();pos=checkVal();caretTimeoutId=setTimeout(function(){writeBuffer();if(pos==mask.length){input.caret(0,pos);}else{input.caret(pos);}},10);}).bind("blur.mask",function(){checkVal();if(input.val()!=focusText)
input.change();}).bind("keydown.mask",keydownEvent).bind("keypress.mask",keypressEvent).bind(pasteEventName,function(){setTimeout(function(){var pos=checkVal(true);input.caret(pos);if(settings.completed&&pos==input.val().length)
settings.completed.call(input);},0);});checkVal();});}});   
(function(){"use strict";var Resumable=function(opts){if(!(this instanceof Resumable)){return new Resumable(opts);}
this.version=1.0;this.support=((typeof(File)!=='undefined')&&(typeof(Blob)!=='undefined')&&(typeof(FileList)!=='undefined')&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||false));if(!this.support)return(false);var $=this;$.files=[];$.defaults={chunkSize:1*1024*1024,forceChunkSize:false,simultaneousUploads:3,fileParameterName:'file',chunkNumberParameterName:'resumableChunkNumber',chunkSizeParameterName:'resumableChunkSize',currentChunkSizeParameterName:'resumableCurrentChunkSize',totalSizeParameterName:'resumableTotalSize',typeParameterName:'resumableType',identifierParameterName:'resumableIdentifier',fileNameParameterName:'resumableFilename',relativePathParameterName:'resumableRelativePath',totalChunksParameterName:'resumableTotalChunks',throttleProgressCallbacks:0.5,query:{},headers:{},preprocess:null,method:'multipart',uploadMethod:'POST',testMethod:'GET',prioritizeFirstAndLastChunk:false,target:'/',testTarget:null,parameterNamespace:'',testChunks:true,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:100,chunkRetryInterval:undefined,permanentErrors:[400,404,415,500,501],maxFiles:undefined,withCredentials:false,xhrTimeout:0,clearInput:true,chunkFormat:'blob',maxFilesErrorCallback:function(files,errorCount){var maxFiles=$.getOpt('maxFiles');alert('Please upload no more than '+maxFiles+' file'+(maxFiles===1?'':'s')+' at a time.');},minFileSize:1,minFileSizeErrorCallback:function(file,errorCount){alert(file.fileName||file.name+' is too small, please upload files larger than '+$h.formatSize($.getOpt('minFileSize'))+'.');},maxFileSize:undefined,maxFileSizeErrorCallback:function(file,errorCount){alert(file.fileName||file.name+' is too large, please upload files less than '+$h.formatSize($.getOpt('maxFileSize'))+'.');},fileType:[],fileTypeErrorCallback:function(file,errorCount){alert(file.fileName||file.name+' has type not allowed, please upload files of type '+$.getOpt('fileType')+'.');}};$.opts=opts||{};$.getOpt=function(o){var $opt=this;if(o instanceof Array){var options={};$h.each(o,function(option){options[option]=$opt.getOpt(option);});return options;}
if($opt instanceof ResumableChunk){if(typeof $opt.opts[o]!=='undefined'){return $opt.opts[o];}
else{$opt=$opt.fileObj;}}
if($opt instanceof ResumableFile){if(typeof $opt.opts[o]!=='undefined'){return $opt.opts[o];}
else{$opt=$opt.resumableObj;}}
if($opt instanceof Resumable){if(typeof $opt.opts[o]!=='undefined'){return $opt.opts[o];}
else{return $opt.defaults[o];}}};$.events=[];$.on=function(event,callback){$.events.push(event.toLowerCase(),callback);};$.fire=function(){var args=[];for(var i=0;i<arguments.length;i++)args.push(arguments[i]);var event=args[0].toLowerCase();for(var i=0;i<=$.events.length;i+=2){if($.events[i]==event)$.events[i+1].apply($,args.slice(1));if($.events[i]=='catchall')$.events[i+1].apply(null,args);}
if(event=='fileerror')$.fire('error',args[2],args[1]);if(event=='fileprogress')$.fire('progress');};var $h={stopEvent:function(e){e.stopPropagation();e.preventDefault();},each:function(o,callback){if(typeof(o.length)!=='undefined'){for(var i=0;i<o.length;i++){if(callback(o[i])===false)return;}}else{for(i in o){if(callback(i,o[i])===false)return;}}},generateUniqueIdentifier:function(file,event){var custom=$.getOpt('generateUniqueIdentifier');if(typeof custom==='function'){return custom(file,event);}
var relativePath=file.webkitRelativePath||file.fileName||file.name;var size=file.size;return(size+'-'+relativePath.replace(/[^0-9a-zA-Z_-]/img,''));},contains:function(array,test){var result=false;$h.each(array,function(value){if(value==test){result=true;return false;}
return true;});return result;},formatSize:function(size){if(size<1024){return size+' bytes';}else if(size<1024*1024){return(size/1024.0).toFixed(0)+' KB';}else if(size<1024*1024*1024){return(size/1024.0/1024.0).toFixed(1)+' MB';}else{return(size/1024.0/1024.0/1024.0).toFixed(1)+' GB';}},getTarget:function(request,params){var target=$.getOpt('target');if(request==='test'&&$.getOpt('testTarget')){target=$.getOpt('testTarget')==='/'?$.getOpt('target'):$.getOpt('testTarget');}
if(typeof target==='function'){return target(params);}
var separator=target.indexOf('?')<0?'?':'&';var joinedParams=params.join('&');return target+separator+joinedParams;}};var onDrop=function(event){$h.stopEvent(event);if(event.dataTransfer&&event.dataTransfer.items){loadFiles(event.dataTransfer.items,event);}
else if(event.dataTransfer&&event.dataTransfer.files){loadFiles(event.dataTransfer.files,event);}};var preventDefault=function(e){e.preventDefault();};function processItem(item,path,items,cb){var entry;if(item.isFile){return item.file(function(file){file.relativePath=path+file.name;items.push(file);cb();});}else if(item.isDirectory){entry=item;}else if(item instanceof File){items.push(item);}
if('function'===typeof item.webkitGetAsEntry){entry=item.webkitGetAsEntry();}
if(entry&&entry.isDirectory){return processDirectory(entry,path+entry.name+'/',items,cb);}
if('function'===typeof item.getAsFile){item=item.getAsFile();item.relativePath=path+item.name;items.push(item);}
cb();}
function processCallbacks(items,cb){if(!items||items.length===0){return cb();}
items[0](function(){processCallbacks(items.slice(1),cb);});}
function processDirectory(directory,path,items,cb){var dirReader=directory.createReader();dirReader.readEntries(function(entries){if(!entries.length){return cb();}
processCallbacks(entries.map(function(entry){return processItem.bind(null,entry,path,items);}),cb);});}
function loadFiles(items,event){if(!items.length){return;}
$.fire('beforeAdd');var files=[];processCallbacks(Array.prototype.map.call(items,function(item){return processItem.bind(null,item,"",files);}),function(){if(files.length){appendFilesFromFileList(files,event);}});};var appendFilesFromFileList=function(fileList,event){var errorCount=0;var o=$.getOpt(['maxFiles','minFileSize','maxFileSize','maxFilesErrorCallback','minFileSizeErrorCallback','maxFileSizeErrorCallback','fileType','fileTypeErrorCallback']);if(typeof(o.maxFiles)!=='undefined'&&o.maxFiles<(fileList.length+$.files.length)){if(o.maxFiles===1&&$.files.length===1&&fileList.length===1){$.removeFile($.files[0]);}else{o.maxFilesErrorCallback(fileList,errorCount++);return false;}}
var files=[],filesSkipped=[],remaining=fileList.length;var decreaseReamining=function(){if(!--remaining){if(!files.length&&!filesSkipped.length){return;}
window.setTimeout(function(){$.fire('filesAdded',files,filesSkipped);},0);}};$h.each(fileList,function(file){var fileName=file.name;if(o.fileType.length>0){var fileTypeFound=false;for(var index in o.fileType){var extension='.'+o.fileType[index];if(fileName.toLowerCase().indexOf(extension.toLowerCase(),fileName.length-extension.length)!==-1){fileTypeFound=true;break;}}
if(!fileTypeFound){o.fileTypeErrorCallback(file,errorCount++);return false;}}
if(typeof(o.minFileSize)!=='undefined'&&file.size<o.minFileSize){o.minFileSizeErrorCallback(file,errorCount++);return false;}
if(typeof(o.maxFileSize)!=='undefined'&&file.size>o.maxFileSize){o.maxFileSizeErrorCallback(file,errorCount++);return false;}
function addFile(uniqueIdentifier){if(!$.getFromUniqueIdentifier(uniqueIdentifier)){(function(){file.uniqueIdentifier=uniqueIdentifier;var f=new ResumableFile($,file,uniqueIdentifier);$.files.push(f);files.push(f);f.container=(typeof event!='undefined'?event.srcElement:null);window.setTimeout(function(){$.fire('fileAdded',f,event)},0);})()}else{filesSkipped.push(file);};decreaseReamining();}
var uniqueIdentifier=$h.generateUniqueIdentifier(file,event);if(uniqueIdentifier&&typeof uniqueIdentifier.then==='function'){uniqueIdentifier.then(function(uniqueIdentifier){addFile(uniqueIdentifier);},function(){decreaseReamining();});}else{addFile(uniqueIdentifier);}});};function ResumableFile(resumableObj,file,uniqueIdentifier){var $=this;$.opts={};$.getOpt=resumableObj.getOpt;$._prevProgress=0;$.resumableObj=resumableObj;$.file=file;$.fileName=file.fileName||file.name;$.size=file.size;$.relativePath=file.relativePath||file.webkitRelativePath||$.fileName;$.uniqueIdentifier=uniqueIdentifier;$._pause=false;$.container='';var _error=uniqueIdentifier!==undefined;var chunkEvent=function(event,message){switch(event){case'progress':$.resumableObj.fire('fileProgress',$,message);break;case'error':$.abort();_error=true;$.chunks=[];$.resumableObj.fire('fileError',$,message);break;case'success':if(_error)return;$.resumableObj.fire('fileProgress',$);if($.isComplete()){$.resumableObj.fire('fileSuccess',$,message);}
break;case'retry':$.resumableObj.fire('fileRetry',$);break;}};$.chunks=[];$.abort=function(){var abortCount=0;$h.each($.chunks,function(c){if(c.status()=='uploading'){c.abort();abortCount++;}});if(abortCount>0)$.resumableObj.fire('fileProgress',$);};$.cancel=function(){var _chunks=$.chunks;$.chunks=[];$h.each(_chunks,function(c){if(c.status()=='uploading'){c.abort();$.resumableObj.uploadNextChunk();}});$.resumableObj.removeFile($);$.resumableObj.fire('fileProgress',$);};$.retry=function(){$.bootstrap();var firedRetry=false;$.resumableObj.on('chunkingComplete',function(){if(!firedRetry)$.resumableObj.upload();firedRetry=true;});};$.bootstrap=function(){$.abort();_error=false;$.chunks=[];$._prevProgress=0;var round=$.getOpt('forceChunkSize')?Math.ceil:Math.floor;var maxOffset=Math.max(round($.file.size/$.getOpt('chunkSize')),1);for(var offset=0;offset<maxOffset;offset++){(function(offset){window.setTimeout(function(){$.chunks.push(new ResumableChunk($.resumableObj,$,offset,chunkEvent));$.resumableObj.fire('chunkingProgress',$,offset/maxOffset);},0);})(offset)}
window.setTimeout(function(){$.resumableObj.fire('chunkingComplete',$);},0);};$.progress=function(){if(_error)return(1);var ret=0;var error=false;$h.each($.chunks,function(c){if(c.status()=='error')error=true;ret+=c.progress(true);});ret=(error?1:(ret>0.99999?1:ret));ret=Math.max($._prevProgress,ret);$._prevProgress=ret;return(ret);};$.isUploading=function(){var uploading=false;$h.each($.chunks,function(chunk){if(chunk.status()=='uploading'){uploading=true;return(false);}});return(uploading);};$.isComplete=function(){var outstanding=false;$h.each($.chunks,function(chunk){var status=chunk.status();if(status=='pending'||status=='uploading'||chunk.preprocessState===1){outstanding=true;return(false);}});return(!outstanding);};$.pause=function(pause){if(typeof(pause)==='undefined'){$._pause=($._pause?false:true);}else{$._pause=pause;}};$.isPaused=function(){return $._pause;};$.resumableObj.fire('chunkingStart',$);$.bootstrap();return(this);}
function ResumableChunk(resumableObj,fileObj,offset,callback){var $=this;$.opts={};$.getOpt=resumableObj.getOpt;$.resumableObj=resumableObj;$.fileObj=fileObj;$.fileObjSize=fileObj.size;$.fileObjType=fileObj.file.type;$.offset=offset;$.callback=callback;$.lastProgressCallback=(new Date);$.tested=false;$.retries=0;$.pendingRetry=false;$.preprocessState=0;var chunkSize=$.getOpt('chunkSize');$.loaded=0;$.startByte=$.offset*chunkSize;$.endByte=Math.min($.fileObjSize,($.offset+1)*chunkSize);if($.fileObjSize-$.endByte<chunkSize&&!$.getOpt('forceChunkSize')){$.endByte=$.fileObjSize;}
$.xhr=null;$.test=function(){$.xhr=new XMLHttpRequest();var testHandler=function(e){$.tested=true;var status=$.status();if(status=='success'){$.callback(status,$.message());$.resumableObj.uploadNextChunk();}else{$.send();}};$.xhr.addEventListener('load',testHandler,false);$.xhr.addEventListener('error',testHandler,false);$.xhr.addEventListener('timeout',testHandler,false);var params=[];var parameterNamespace=$.getOpt('parameterNamespace');var customQuery=$.getOpt('query');if(typeof customQuery=='function')customQuery=customQuery($.fileObj,$);$h.each(customQuery,function(k,v){params.push([encodeURIComponent(parameterNamespace+k),encodeURIComponent(v)].join('='));});params=params.concat([['chunkNumberParameterName',$.offset+1],['chunkSizeParameterName',$.getOpt('chunkSize')],['currentChunkSizeParameterName',$.endByte-$.startByte],['totalSizeParameterName',$.fileObjSize],['typeParameterName',$.fileObjType],['identifierParameterName',$.fileObj.uniqueIdentifier],['fileNameParameterName',$.fileObj.fileName],['relativePathParameterName',$.fileObj.relativePath],['totalChunksParameterName',$.fileObj.chunks.length]].filter(function(pair){return $.getOpt(pair[0]);}).map(function(pair){return[parameterNamespace+$.getOpt(pair[0]),encodeURIComponent(pair[1])].join('=');}));$.xhr.open($.getOpt('testMethod'),$h.getTarget('test',params));$.xhr.timeout=$.getOpt('xhrTimeout');$.xhr.withCredentials=$.getOpt('withCredentials');var customHeaders=$.getOpt('headers');if(typeof customHeaders==='function'){customHeaders=customHeaders($.fileObj,$);}
$h.each(customHeaders,function(k,v){$.xhr.setRequestHeader(k,v);});$.xhr.send(null);};$.preprocessFinished=function(){$.preprocessState=2;$.send();};$.send=function(){var preprocess=$.getOpt('preprocess');if(typeof preprocess==='function'){switch($.preprocessState){case 0:$.preprocessState=1;preprocess($);return;case 1:return;case 2:break;}}
if($.getOpt('testChunks')&&!$.tested){$.test();return;}
$.xhr=new XMLHttpRequest();$.xhr.upload.addEventListener('progress',function(e){if((new Date)-$.lastProgressCallback>$.getOpt('throttleProgressCallbacks')*1000){$.callback('progress');$.lastProgressCallback=(new Date);}
$.loaded=e.loaded||0;},false);$.loaded=0;$.pendingRetry=false;$.callback('progress');var doneHandler=function(e){var status=$.status();if(status=='success'||status=='error'){$.callback(status,$.message());$.resumableObj.uploadNextChunk();}else{$.callback('retry',$.message());$.abort();$.retries++;var retryInterval=$.getOpt('chunkRetryInterval');if(retryInterval!==undefined){$.pendingRetry=true;setTimeout($.send,retryInterval);}else{$.send();}}};$.xhr.addEventListener('load',doneHandler,false);$.xhr.addEventListener('error',doneHandler,false);$.xhr.addEventListener('timeout',doneHandler,false);var query=[['chunkNumberParameterName',$.offset+1],['chunkSizeParameterName',$.getOpt('chunkSize')],['currentChunkSizeParameterName',$.endByte-$.startByte],['totalSizeParameterName',$.fileObjSize],['typeParameterName',$.fileObjType],['identifierParameterName',$.fileObj.uniqueIdentifier],['fileNameParameterName',$.fileObj.fileName],['relativePathParameterName',$.fileObj.relativePath],['totalChunksParameterName',$.fileObj.chunks.length],].filter(function(pair){return $.getOpt(pair[0]);}).reduce(function(query,pair){query[$.getOpt(pair[0])]=pair[1];return query;},{});var customQuery=$.getOpt('query');if(typeof customQuery=='function')customQuery=customQuery($.fileObj,$);$h.each(customQuery,function(k,v){query[k]=v;});var func=($.fileObj.file.slice?'slice':($.fileObj.file.mozSlice?'mozSlice':($.fileObj.file.webkitSlice?'webkitSlice':'slice')));var bytes=$.fileObj.file[func]($.startByte,$.endByte);var data=null;var params=[];var parameterNamespace=$.getOpt('parameterNamespace');if($.getOpt('method')==='octet'){data=bytes;$h.each(query,function(k,v){params.push([encodeURIComponent(parameterNamespace+k),encodeURIComponent(v)].join('='));});}else{data=new FormData();$h.each(query,function(k,v){data.append(parameterNamespace+k,v);params.push([encodeURIComponent(parameterNamespace+k),encodeURIComponent(v)].join('='));});if($.getOpt('chunkFormat')=='blob'){data.append(parameterNamespace+$.getOpt('fileParameterName'),bytes,$.fileObj.fileName);}
else if($.getOpt('chunkFormat')=='base64'){var fr=new FileReader();fr.onload=function(e){data.append(parameterNamespace+$.getOpt('fileParameterName'),fr.result);$.xhr.send(data);}
fr.readAsDataURL(bytes);}}
var target=$h.getTarget('upload',params);var method=$.getOpt('uploadMethod');$.xhr.open(method,target);if($.getOpt('method')==='octet'){$.xhr.setRequestHeader('Content-Type','application/octet-stream');}
$.xhr.timeout=$.getOpt('xhrTimeout');$.xhr.withCredentials=$.getOpt('withCredentials');var customHeaders=$.getOpt('headers');if(typeof customHeaders==='function'){customHeaders=customHeaders($.fileObj,$);}
$h.each(customHeaders,function(k,v){$.xhr.setRequestHeader(k,v);});if($.getOpt('chunkFormat')=='blob'){$.xhr.send(data);}};$.abort=function(){if($.xhr)$.xhr.abort();$.xhr=null;};$.status=function(){if($.pendingRetry){return('uploading');}else if(!$.xhr){return('pending');}else if($.xhr.readyState<4){return('uploading');}else{if($.xhr.status==200||$.xhr.status==201){return('success');}else if($h.contains($.getOpt('permanentErrors'),$.xhr.status)||$.retries>=$.getOpt('maxChunkRetries')){return('error');}else{$.abort();return('pending');}}};$.message=function(){return($.xhr?$.xhr.responseText:'');};$.progress=function(relative){if(typeof(relative)==='undefined')relative=false;var factor=(relative?($.endByte-$.startByte)/$.fileObjSize:1);if($.pendingRetry)return(0);if(!$.xhr||!$.xhr.status)factor*=.95;var s=$.status();switch(s){case'success':case'error':return(1*factor);case'pending':return(0*factor);default:return($.loaded/($.endByte-$.startByte)*factor);}};return(this);}
$.uploadNextChunk=function(){var found=false;if($.getOpt('prioritizeFirstAndLastChunk')){$h.each($.files,function(file){if(file.chunks.length&&file.chunks[0].status()=='pending'&&file.chunks[0].preprocessState===0){file.chunks[0].send();found=true;return(false);}
if(file.chunks.length>1&&file.chunks[file.chunks.length-1].status()=='pending'&&file.chunks[file.chunks.length-1].preprocessState===0){file.chunks[file.chunks.length-1].send();found=true;return(false);}});if(found)return(true);}
$h.each($.files,function(file){if(file.isPaused()===false){$h.each(file.chunks,function(chunk){if(chunk.status()=='pending'&&chunk.preprocessState===0){chunk.send();found=true;return(false);}});}
if(found)return(false);});if(found)return(true);var outstanding=false;$h.each($.files,function(file){if(!file.isComplete()){outstanding=true;return(false);}});if(!outstanding){$.fire('complete');}
return(false);};$.assignBrowse=function(domNodes,isDirectory){if(typeof(domNodes.length)=='undefined')domNodes=[domNodes];$h.each(domNodes,function(domNode){var input;if(domNode.tagName==='INPUT'&&domNode.type==='file'){input=domNode;}else{input=document.createElement('input');input.setAttribute('type','file');input.style.display='none';domNode.addEventListener('click',function(){input.style.opacity=0;input.style.display='block';input.focus();input.click();input.style.display='none';},false);domNode.appendChild(input);}
var maxFiles=$.getOpt('maxFiles');if(typeof(maxFiles)==='undefined'||maxFiles!=1){input.setAttribute('multiple','multiple');}else{input.removeAttribute('multiple');}
if(isDirectory){input.setAttribute('webkitdirectory','webkitdirectory');}else{input.removeAttribute('webkitdirectory');}
input.addEventListener('change',function(e){appendFilesFromFileList(e.target.files,e);var clearInput=$.getOpt('clearInput');if(clearInput){e.target.value='';}},false);});};$.assignDrop=function(domNodes){if(typeof(domNodes.length)=='undefined')domNodes=[domNodes];$h.each(domNodes,function(domNode){domNode.addEventListener('dragover',preventDefault,false);domNode.addEventListener('dragenter',preventDefault,false);domNode.addEventListener('drop',onDrop,false);});};$.unAssignDrop=function(domNodes){if(typeof(domNodes.length)=='undefined')domNodes=[domNodes];$h.each(domNodes,function(domNode){domNode.removeEventListener('dragover',preventDefault);domNode.removeEventListener('dragenter',preventDefault);domNode.removeEventListener('drop',onDrop);});};$.isUploading=function(){var uploading=false;$h.each($.files,function(file){if(file.isUploading()){uploading=true;return(false);}});return(uploading);};$.upload=function(){if($.isUploading())return;$.fire('uploadStart');for(var num=1;num<=$.getOpt('simultaneousUploads');num++){$.uploadNextChunk();}};$.pause=function(){$h.each($.files,function(file){file.abort();});$.fire('pause');};$.cancel=function(){$.fire('beforeCancel');for(var i=$.files.length-1;i>=0;i--){$.files[i].cancel();}
$.fire('cancel');};$.progress=function(){var totalDone=0;var totalSize=0;$h.each($.files,function(file){totalDone+=file.progress()*file.size;totalSize+=file.size;});return(totalSize>0?totalDone/totalSize:0);};$.addFile=function(file,event){appendFilesFromFileList([file],event);};$.removeFile=function(file){for(var i=$.files.length-1;i>=0;i--){if($.files[i]===file){$.files.splice(i,1);}}};$.getFromUniqueIdentifier=function(uniqueIdentifier){var ret=false;$h.each($.files,function(f){if(f.uniqueIdentifier==uniqueIdentifier)ret=f;});return(ret);};$.getSize=function(){var totalSize=0;$h.each($.files,function(file){totalSize+=file.size;});return(totalSize);};$.handleDropEvent=function(e){onDrop(e);};$.handleChangeEvent=function(e){appendFilesFromFileList(e.target.files,e);e.target.value='';};$.updateQuery=function(query){$.opts.query=query;};return(this);};if(typeof module!='undefined'){module.exports=Resumable;}else if(typeof define==="function"&&define.amd){define(function(){return Resumable;});}else{window.Resumable=Resumable;}})(); 
var DragMaster=(function(){var dragObject;var mouseDownAt;var currentDropTarget;function mouseDown(e){e=EventHelper.fixMouseEvent(e);if(e.which!=1)return;mouseDownAt={x:e.pageX,y:e.pageY,element:this}
addDocumentEventHandlers();return false;}
function mouseMove(e){e=EventHelper.fixMouseEvent(e);if(mouseDownAt){if(Math.abs(mouseDownAt.x-e.pageX)<5&&Math.abs(mouseDownAt.y-e.pageY)<5){return false;}
var elem=mouseDownAt.element;dragObject=elem.dragObject;var mouseOffset=getMouseOffset(elem,mouseDownAt.x,mouseDownAt.y);mouseDownAt=null;dragObject.onDragStart(mouseOffset);}
dragObject.onDragMove(e.pageX,e.pageY);var newTarget=getCurrentTarget(e);if(currentDropTarget!=newTarget){if(currentDropTarget){currentDropTarget.onLeave()}
if(newTarget){newTarget.onEnter();}
currentDropTarget=newTarget;}
return false;}
function mouseUp(){if(!dragObject){mouseDownAt=null;}else{if(currentDropTarget&&currentDropTarget.accept(dragObject)){dragObject.onDragSuccess(currentDropTarget);}else{dragObject.onDragFail(currentDropTarget);}
dragObject=null;}
removeDocumentEventHandlers();}
function getMouseOffset(target,x,y){var docPos=DOMHelper.getOffset(target)
return{x:x-docPos.left,y:y-docPos.top}}
function getCurrentTarget(e){if(navigator.userAgent.match('MSIE')||navigator.userAgent.match('Gecko')){var x=e.clientX,y=e.clientY;}
else{var x=e.pageX,y=e.pageY;}
dragObject.hide()
var elem=document.elementFromPoint(x,y)
dragObject.show()
while(elem){if(elem.dropTarget&&elem.dropTarget.canAccept(dragObject)){return elem.dropTarget}
elem=elem.parentNode}
return null;}
function addDocumentEventHandlers(){document.onmousemove=mouseMove;document.onmouseup=mouseUp;document.ondragstart=document.body.onselectstart=function(){return false};}
function removeDocumentEventHandlers(){document.onmousemove=document.onmouseup=document.ondragstart=document.body.onselectstart=null;}
return{makeDraggable:function(element){EventHelper.add(element,"mousedown",mouseDown,true);}}}()) 
function DragObject(element){element.dragObject=this;this.element=element;DragMaster.makeDraggable(element);}
DragObject.prototype.DRAG_CLASS="dragging";DragObject.prototype.rememberPosition;DragObject.prototype.mouseOffset;DragObject.prototype.onDragStart=function(offset){var s=this.element.style;this.rememberPosition={top:s.top,left:s.left,position:s.position};s.position="absolute";this.mouseOffset=offset;DOMHelper.addClass(this.element,this.DRAG_CLASS);}
DragObject.prototype.hide=function(){this.element.style.display="none";}
DragObject.prototype.show=function(){this.element.style.display="";}
DragObject.prototype.onDragMove=function(x,y){this.element.style.top=y-this.mouseOffset.y+"px";this.element.style.left=x-this.mouseOffset.x+"px";}
DragObject.prototype.onDragSuccess=function(dropTarget){DOMHelper.delClass(this.element,this.DRAG_CLASS);}
DragObject.prototype.onDragFail=function(dropObject){var s=this.element.style;s.top=this.rememberPosition.top;s.left=this.rememberPosition.left;s.position=this.rememberPosition.position;DOMHelper.delClass(this.element,this.DRAG_CLASS);if(dropObject){dropObject.onLeave();}}
DragObject.prototype.toString=function(){return element.id;} 
function DropTarget(element){this.element=element;element.dropTarget=this;}
DropTarget.prototype.CLASS_NAME='uponMe';DropTarget.prototype.canAccept=function(dragObject){return true;}
DropTarget.prototype.accept=function(dragObject){this.onLeave();dragObject.hide();return true;}
DropTarget.prototype.onLeave=function(){DOMHelper.delClass(this.element,this.CLASS_NAME);}
DropTarget.prototype.onEnter=function(){DOMHelper.addClass(this.element,this.CLASS_NAME);}
DropTarget.prototype.toString=function(){return this.element.id;} 
function extend(Child,Parent){var F=function(){};F.prototype=Parent.prototype;Child.prototype=new F();Child.prototype.constructor=Child;Child.superclass=Parent.prototype;} 
function App(id,options){this.setId(id);options=options||{};options.servVars=options.servVars||{};var host=options.servVars.basePath||window.location.hostname||"";this.setHost(host);this.setScript(options.script);this.m_servVars=options.servVars;var con_opts={"host":host};var con;if(this.m_servVars.token&&this.m_servVars.token.length){con_opts.accessToken=this.m_servVars.token;con_opts.refreshToken=this.m_servVars.tokenr;con=new ServConnectorSecure(con_opts);}
else{con=new ServConnector(con_opts);}
this.setServConnector(con);this.m_constantManager=new ConstantManager({"XMLString":options.constantXMLString});this.m_cashData={};this.m_openedForms={};this.m_templateParams={};this.setPaginationClass(options.paginationClass||GridPagination);}
App.prototype.DEF_dateEditMask="99/99/9999";App.prototype.DEF_dateFormat="d/m/Y";App.prototype.DEF_dateTimeEditMask="99/99/9999 99:99:99";App.prototype.DEF_dateTimeFormat="d/m/Y H:i:s";App.prototype.DEF_phoneEditMask="+7-(999)-999-99-99";App.prototype.DEF_timeEditMask="99:99";App.prototype.DEF_timeFormat="H:i:s";App.prototype.DEF_LOCALE="ru";App.prototype.VERSION="2.1.008";App.prototype.m_id;App.prototype.m_host;App.prototype.m_script;App.prototype.m_bsCol;App.prototype.m_winClass;App.prototype.m_servVars;App.prototype.m_constantManager;App.prototype.m_servConnector;App.prototype.m_dateEditMask;App.prototype.m_dateFormat;App.prototype.m_dateTimeEditMask;App.prototype.m_dateTimeFormat;App.prototype.m_timeFormat;App.prototype.m_phoneEditMask;App.prototype.m_timeEditMask;App.prototype.m_locale;App.prototype.m_cashData;App.prototype.m_openedForms;App.prototype.m_templates;App.prototype.m_templateParams;App.prototype.m_paginationClass;App.prototype.m_enums;App.prototype.m_predefinedItems;App.prototype.setHost=function(host){this.m_host=host;}
App.prototype.getHost=function(){return this.m_host;}
App.prototype.setScript=function(v){this.m_script=v;}
App.prototype.getScript=function(){return this.m_script;}
App.prototype.getBsCol=function(v){return window.getBsCol(v);}
App.prototype.setWinClass=function(winClass){this.m_winClass=winClass;}
App.prototype.getWinClass=function(winClass){return this.m_winClass;}
App.prototype.getServVars=function(){return this.m_servVars;}
App.prototype.getServVar=function(id){return this.m_servVars[id];}
App.prototype.getConstantManager=function(){return this.m_constantManager;}
App.prototype.getServConnector=function(){return this.m_servConnector;}
App.prototype.setServConnector=function(v){this.m_servConnector=v;}
App.prototype.getId=function(){return this.m_id;}
App.prototype.setId=function(id){this.m_id=id;}
App.prototype.setDateEditMask=function(v){this.m_dateEditMask=v;}
App.prototype.getDateEditMask=function(){return(this.m_dateEditMask)?this.m_dateEditMask:this.DEF_dateEditMask;}
App.prototype.setDateTimeEditMask=function(v){this.m_dateTimeEditMask=v;}
App.prototype.getDateTimeEditMask=function(){return(this.m_dateTimeEditMask)?this.m_dateTimeEditMask:this.DEF_dateTimeEditMask;}
App.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
App.prototype.getDateFormat=function(){return(this.m_dateFormat)?this.m_dateFormat:this.DEF_dateFormat;}
App.prototype.setDateTimeFormat=function(v){this.m_dateTimeFormat=v;}
App.prototype.getDateTimeFormat=function(){return(this.m_dateTimeFormat)?this.m_dateTimeFormat:this.DEF_dateTimeFormat;}
App.prototype.setTimeFormat=function(v){this.m_timeFormat=v;}
App.prototype.getTimeFormat=function(){return(this.m_timeFormat)?this.m_timeFormat:this.DEF_timeFormat;}
App.prototype.setPhoneEditMask=function(v){this.m_phoneEditMask=v;}
App.prototype.getPhoneEditMask=function(){return(this.m_phoneEditMask)?this.m_phoneEditMask:this.DEF_phoneEditMask;}
App.prototype.setTimeEditMask=function(v){this.m_timeEditMask=v;}
App.prototype.getTimeEditMask=function(){return(this.m_timeEditMask)?this.m_timeEditMask:this.DEF_timeEditMask;}
App.prototype.getLocale=function(){return this.m_servVars["locale_id"]||this.DEF_LOCALE;}
App.prototype.formatError=function(erCode,erStr){return(erStr+(erCode)?(", code:"+erCode):"");}
App.prototype.getCashData=function(id){return this.m_cashData[id];}
App.prototype.setCashData=function(id,val){this.m_cashData[id]=val;}
App.prototype.getOpenedForms=function(){return this.m_openedForms;}
App.prototype.addOpenedForm=function(id,form){this.m_openedForms[id]=form;}
App.prototype.delOpenedForm=function(id){delete this.m_openedForms[id];}
App.prototype.numberFormat=function(val,prec){return CommonHelper.numberFormat(val,prec,CommonHelper.getDecimalSeparator()," ");}
App.prototype.addTemplate=function(id,tmpl){this.m_templates[id]=tmpl;}
App.prototype.getTemplate=function(id){return this.m_templates[id];}
App.prototype.setTemplate=function(id,v){this.m_templates[id]=v;}
App.prototype.getPaginationClass=function(id){return this.m_paginationClass;}
App.prototype.setPaginationClass=function(v){this.m_paginationClass=v;}
App.prototype.getDataTypes=function(){return this.m_dataTypes;}
App.prototype.setDataTypes=function(v){this.m_dataTypes=v;}
App.prototype.getDataType=function(id){return this.m_dataTypes[id];}
App.prototype.setEnums=function(v){this.m_enums=v;}
App.prototype.getEnums=function(){return this.m_enums;}
App.prototype.getEnum=function(enumId,valId){if(!this.m_enums[enumId])throw Error("Enum not found "+enumId)
return this.m_enums[enumId][this.getLocale()+"_"+valId];}
App.prototype.setPredefinedItems=function(v){this.m_predefinedItems=v;}
App.prototype.getPredefinedItems=function(){return this.m_predefinedItems;}
App.prototype.getPredefinedItem=function(dataType,item){return this.m_predefinedItems[dataType][item];}
App.prototype.storageSet=function(id,val){if(localStorage)localStorage.setItem(id,val);}
App.prototype.storageGet=function(id){if(localStorage)return localStorage.getItem(id);}
App.prototype.getTimeZoneOffsetStr=function(){if(!this.m_timeZoneOffsetStr){var h_offset=-(new Date()).getTimezoneOffset()/60;var h_offset_h=Math.floor(h_offset);function to_str(a){return((a.toString().length==1)?"0":"")+a.toString();}
this.m_timeZoneOffsetStr=((h_offset_h<0)?"-":"+")+to_str(Math.abs(h_offset_h))+":"+to_str(Math.abs((h_offset-h_offset_h)*60));}
return this.m_timeZoneOffsetStr;}
App.prototype.showMenuItem=function(c,f,t,extra){window.setGlobalWait(true);var self=this;var par={"c":c,"v":"ViewXML"};if(f)par.f=f;if(extra){var par_ar=extra.split("&");for(var i=0;i<par_ar.length;i++){var par_pair=par_ar[i].split("=");if(par_pair.length==2){par[par_pair[0]]=par_pair[1];}}}
this.m_storedTemplate=this.getTemplate(t)||{"id":t,"template":null,"dataModelId":null,"variantStorage":null};par.t=t;this.getServConnector().sendGet(par,false,function(eN,eS,resp){if(eN!=0){window.setGlobalWait(false);window.showError(eS);}
else{self.renderContentXML(resp);window.setGlobalWait(false);}},"xml");return false;}
App.prototype.renderContentXML=function(resp){try{var data_n=CommonHelper.nd("windowData");if(!data_n)return;if(this.m_view){this.m_view.delDOM();delete this.m_view;}
while(data_n.firstChild){data_n.removeChild(data_n.firstChild);}
var v_opts={"models":{}};var resp_models=resp.getModels();for(var m_id in resp_models){var sys_model=resp_models[m_id].getAttribute("sysModel");if(sys_model=="1"&&resp_models[m_id].getAttribute("templateId")){v_opts.template=resp_models[m_id].innerHTML;}
else if(sys_model=="1"){}
else{var model_constr=eval(m_id);v_opts.models[m_id]=new model_constr({"data":resp.getModelData(m_id)});}}
this.m_storedTemplate.variantStorage={"name":this.m_storedTemplate.id,"model":null};if(v_opts.models.VariantStorage_Model){this.m_storedTemplate.variantStorage.model=v_opts.models.VariantStorage_Model;this.m_storedTemplate.variantStorage.model.getRow(0);}
v_opts.variantStorage=this.m_storedTemplate.variantStorage;var view=eval(this.m_storedTemplate.id+"_View");this.m_view=new view(this.m_storedTemplate.id,v_opts);this.m_view.toDOM(data_n);}
catch(e){window.onerror(e.message,"App.js",369,1);}
return false;}
App.prototype.showAbout=function(){window.setGlobalWait(true);var contr=new About_Controller(this);contr.run("get_object",{"t":"About","ok":function(resp){var v=new About_View("About_View",{"template":resp.getModelData("About-template").innerHTML,"models":{"About_Model":new About_Model({"data":resp.getModelData("About_Model")})}});window.setGlobalWait(false);WindowAbout.show(v);},"fail":function(){window.setGlobalWait(false);}})}
App.prototype.quit=function(){var contr=new User_Controller();contr.getServConnector().quit();contr.run("logout_html");} 
function AppWin(options){options=options||{};this.m_msg=new WindowMessage();var self=this;window.onerror=function(msg,url,line,col,error){self.onError(msg,url,line,col,error);};window.getApp=function(){return options.app;}
window.getBsCol=function(v){return options.bsCol+((v!=undefined)?v.toString():"");};window.showMsg=function(msgType,msg,callBack,timeout){self.m_msg.show({"type":msgType,"text":msg,"callBack":callBack,"timeout":timeout,"bsCol":window.getBsCol()});};window.showError=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_ER,msg,callBack,timeout);};window.showWarn=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_WARN,msg,callBack,timeout);};window.showNote=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_NOTE,msg,callBack,timeout);};window.showOk=function(msg,callBack,timeout){window.showMsg(self.m_msg.TP_OK,msg,callBack,timeout);};window.resetError=function(){};window.setGlobalWait=function(isWait){var n=document.getElementById("waiting");if(n)n.style=isWait?"display:block;":"display:none;"}}
AppWin.prototype.onError=function(msg,url,line,col,error){if(error instanceof FatalException){error.show();}
else{var d=window.getApp().getServVar("debug");var m_debug=(d=="1"||d===true||d===undefined);var str=msg;if(m_debug){str=str+"\nurl: "+url+"\nline: "+line;if(console){console.log(str);if(error&&error.stack)console.log(error.stack);if(console.trace)console.trace();}}
else{var er_pref="Error: ";if(str.substr(0,er_pref.length)==er_pref){str=str.substr(er_pref.length);}
er_pref="Uncaught Error:";if(str.substr(0,er_pref.length)==er_pref){str=str.substr(er_pref.length);}}
window.showError(str);}
return false;} 
var CommonHelper={format:function(str,params){if(!str)return"";var r=str;if(typeof(params)=="string"){params=[params];}
for(var i=0;i<params.length;i++){r=r.replace("%",params[i]);}
return r;},numberFormat:function(number,decimals,dec_point,thousands_sep){var i,j,kw,kd,km;if(isNaN(decimals=Math.abs(decimals))){decimals=2;}
if(dec_point==undefined){dec_point=",";}
if(thousands_sep==undefined){thousands_sep=".";}
i=parseInt(number=(+number||0).toFixed(decimals))+"";if((j=i.length)>3){j=j%3;}else{j=0;}
km=(j?i.substr(0,j)+thousands_sep:"");kw=i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_sep);kd=(decimals?dec_point+Math.abs(number-i).toFixed(decimals).replace(/-/,0).slice(2):"");return km+kw+kd;},byteForamt:function(size,precision){return this.byteFormat(size,precision);},byteFormat:function(size,precision,rightPad){precision=(precision==undefined)?2:precision;var i=Math.floor(Math.log(size)/Math.log(1024));return(size/Math.pow(1024,i)).toFixed(precision)*1+(rightPad?" ":"")+['B','kB','MB','GB','TB'][i];},nd:function(x,docum){if(docum==undefined){docum=window.document;}
return(x)?docum.getElementById(x):null;},isIE:function(){return(navigator.appName=="Microsoft Internet Explorer");},getIEVersion:function(){return parseInt(navigator.userAgent.toLowerCase().split('msie')[1]);},getBrowser:function(){var res="unknown";if(navigator.userAgent.indexOf("Chrome")!=-1){res="chrome";}
else if(navigator.userAgent.indexOf("Opera")!=-1){res="opera";}
else if(navigator.userAgent.indexOf("Firefox")!=-1){res="firefox";}
else if((navigator.userAgent.indexOf("MSIE")!=-1)||(!!document.documentMode==true)){res="ie";}
return res;},createXHR:function(){var xhr;if(window.XMLHttpRequest){xhr=new XMLHttpRequest();}
else{xhr=new ActiveXObject("Microsoft.XMLHTTP");}
return xhr;},createCORS:function(){var xhr=new XMLHttpRequest();if("withCredentials"in xhr){}
else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest();}
else{xhr=null;throw new Error("CORS is not supported by the browser");}
return xhr;},isEmpty:function(x,p){for(p in x)return!1;return!0;},isArray:function(o){if(Array.isArray){return Array.isArray(o);}
else{return(Object.prototype.toString.call(o)==='[object Array]');}},clone:function(obj){var F=function(){};F.prototype=obj;return new F();},uniqid:function(){var chars='0123456789abcdef'.split('');var uuid=[],rnd=Math.random,r;uuid[8]=uuid[13]=uuid[18]=uuid[23]='-';uuid[14]='4';for(var i=0;i<36;i++){if(!uuid[i]){r=0|rnd()*16;uuid[i]=chars[(i==19)?(r&0x3)|0x8:r&0xf];}}
return uuid.join('');},array2json:function(arr){return JSON.stringify(arr);},json2obj:function(json_string){return(json_string)?JSON.parse(json_string):json_string;},serialize:function(o){return JSON.stringify(o);},unserialize:function(json_string){return(json_string&&typeof(json_string)=="string")?JSON.parse(json_string,function(key,val){if(val&&typeof val=="object"&&"descr"in val&&"keys"in val){return new RefType(val);}
else{return val;}}):json_string;},findPosX:function(obj){var curleft=0;if(obj.offsetParent){while(1){curleft+=obj.offsetLeft;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.x){curleft+=obj.x;}
return curleft;},findPosY:function(obj){var curtop=0;if(obj.offsetParent){while(1){curtop+=obj.offsetTop;if(!obj.offsetParent){break;}
obj=obj.offsetParent;}}else if(obj.y){curtop+=obj.y;}
return curtop;},getDecimalSeparator:function(){var n=1.1;n=n.toLocaleString().substring(1,2);return n;},escapeDoubleQuotes:function(str){return str.replace(/\\([\s\S])|(")/g,"\\$1$2");},longString:function(funcWrapper){var funcString=funcWrapper.toString();var funcDefinitionRe=/^function\s*[a-zA-Z0-9_$]*\s*\(\s*\)\s*{\s*\/\*([\s\S]*)\*\/\s*}\s*$/g;var wantedString=funcString.replace(funcDefinitionRe,"$1").trim();return wantedString;},merge:function(o1,o2){for(var id in o2){o1[id]=o2[id];}},getClassName:function(o){return Object.prototype.toString.call(o).match(/^\[object\s(.*)\]$/)[1];},md5:function(s){return hex_md5(s);},inArray:function(v,ar){return $.inArray(v,ar);},var_export:function(o){var output="";if(typeof(o)=="object"){for(var property in o){output+=property+": "+o[property]+"; ";}}
else{output=(o)?o.toString():"<undefined>";}
return output;},log:function(msg){if(console&&console.log){console.log(CommonHelper.var_export(msg));}}} 
var DOMHelper={elem:function(tagName,opts){var e=document.createElement(tagName);opts=opts||{};for(var i in opts){e.setAttribute(i,opts[i]);}
return(e);},setAttr:function(node,attrName,attrValue){if(node){node.setAttribute(attrName,attrValue);}},getAttr:function(node,name){if(node&&node.attributes){return node.getAttribute(name);}},delAttr:function(node,name){if(node){return node.removeAttribute(name);}},addAttr:function(node,name,val){this.setAttr(node,name,val);},delNode:function(node){if(node&&node.parentNode)
node.parentNode.removeChild(node);},delNodesOnClass:function(classVal){this.delNodes("class",classVal)},delNodesOnAttr:function(attrName,attrVal){var body=document.getElementsByTagName("body")[0];var list=this.getElementsByAttr(attrVal,body,attrName);for(var i=0;i<list.length;i++){this.delNode(list[i]);}},getElementsByAttr:function(classStr,node,attrName,uniq,tag){tag=tag||"*";var node=node||document;var list=node.getElementsByTagName(tag);var length=list.length;var classArray=classStr.split(/\s+/);var classes=classArray.length;var result=new Array();for(var i=0;i<length;i++){if(uniq&&result.length>0)break;for(var j=0;j<classes;j++){if(((attrName=='class')&&(list[i].className!=undefined&&typeof list[i].className=='string')&&(list[i].className.search('\\b'+classArray[j]+'\\b')!=-1))||((list[i].attributes!=undefined)&&(list[i].getAttribute(attrName)!=undefined)&&(list[i].getAttribute(attrName).search('\\b'+classArray[j]+'\\b')!=-1))){result.push(list[i]);break;}}}
return result;},swapClasses:function(node,new_class,old_class){if(node)node.className=node.className.replace(old_class,new_class);},addClass:function(node,classToAdd){var re=new RegExp("(^|\\s)"+classToAdd+"(\\s|$)","g");if(!node||re.test(node.className))return;node.className=(node.className+" "+classToAdd).replace(/\s+/g," ").replace(/(^ | $)/g,"");},delClass:function(node,classToRemove){if(!node||!node.className)return;var re=new RegExp("(^|\\s)"+classToRemove+"(\\s|$)","g");node.className=node.className.replace(re,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"");},hasClass:function(node,classToCheck){return(node)?(node.className&&new RegExp("(^|\\s)"+classToCheck+"(\\s|$)").test(node.className)):null;},getParentByTagName:function(node,tagName){var p=node.parentNode;if(p){var tn=tagName.toLowerCase();while(p&&p.nodeName.toLowerCase()!=tn){p=p.parentNode;}
return((p&&p.nodeName.toLowerCase()==tn)?p:null);}},getElementIndex:function(node){var i=0;while(node=node.previousSibling){if(node.nodeType===1){i++;}}
return i;},xmlDocFromString:function(txt){return $.parseXML(txt);},htmlDocFromString:function(txt){return $.parseHTML(txt);},setTagName:function(node,tag){var oHTML=node.outerHTML;var tempTag=document.createElement(tag);var tName={original:node.tagName.toUpperCase(),change:tag.toUpperCase()};if(tName.original==tName.change)return;oHTML=oHTML.replace(RegExp("(^\<"+tName.original+")|("+tName.original+"\>$)","gi"),function(x){return(x.toUpperCase().replace(tName.original,tName.change));});tempTag.innerHTML=oHTML;if(tempTag.firstChild)node.parentElement.replaceChild(tempTag.firstChild,node);},swapNodes:function(a,b){var aParent=a.parentNode;var bParent=b.parentNode;var aHolder=document.createElement("div");var bHolder=document.createElement("div");aParent.replaceChild(aHolder,a);bParent.replaceChild(bHolder,b);aParent.replaceChild(b,aHolder);bParent.replaceChild(a,bHolder);},setParent:function(el,newParent){newParent.appendChild(el);},inViewport:function(el,fullyInView){var pageTop=$(window).scrollTop();var pageBottom=pageTop+$(window).height();var elementTop=$(el).offset().top;var elementBottom=el+$(el).height();if(fullyInView===true){return((pageTop<elementTop)&&(pageBottom>elementBottom));}else{return((elementTop<=pageBottom)&&(elementBottom>=pageTop));}},getViewportHeight:function(){if(window.innerHeight!=window.undefined)return window.innerHeight;if(document.compatMode=='CSS1Compat')return document.documentElement.clientHeight;if(document.body)return document.body.clientHeight;return window.undefined;},getViewportWidth:function(){var offset=17;var width=null;if(window.innerWidth!=window.undefined)return window.innerWidth;if(document.compatMode=='CSS1Compat')return document.documentElement.clientWidth;if(document.body)return document.body.clientWidth;},getOffset:function(elem){if(elem.getBoundingClientRect){return this.getOffsetRect(elem);}
else{return this.getOffsetSum(elem);}},getOffsetRect:function(elem){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{top:Math.round(top),left:Math.round(left)};},getOffsetSum:function(elem){var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop);left=left+parseInt(elem.offsetLeft);elem=elem.offsetParent;}
return{top:top,left:left};},parseTemplate:function(t,nId){var res=t.replace(/{{id}}/g,nId);var matches=res.match(/{{.*}}/g);if(matches){for(var i=0;i<matches.length;i++){res=res.split(matches[i]).join(eval(matches[i].substring(2,matches[i].length-2)));}}
return res;},firstChildElement:function(n,nodeType){if(n&&n.childNodes){nodeType=(nodeType==undefined)?1:nodeType;for(var i=0;i<n.childNodes.length;i++){if(n.childNodes[i].nodeType==nodeType){return n.childNodes[i];}}}},lastChildElement:function(n){if(n&&n.childNodes){for(var i=n.childNodes.length-1;i>=0;i--){if(n.childNodes[i].nodeType==1){return n.childNodes[i];}}}},lastText:function(n){if(n&&n.childNodes){for(var i=n.childNodes.length-1;i>=0;i--){if(n.childNodes[i].nodeType==3){return n.childNodes[i].nodeValue;}}}},insertAfter:function(elem,refElem){var parent=refElem.parentNode;var next=refElem.nextSibling;if(next){return parent.insertBefore(elem,next);}else{return parent.appendChild(elem);}},init:function(){Node=Node||{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};}} 
var DateHelper={DEF_FORMAT:"Y-m-dTH:i:s",time:function(){return new Date();},strtotime:function(dateStr){if(!dateStr||!dateStr.length)return;var d;var ds=dateStr;var t_offset_p=ds.indexOf("+");if(CommonHelper.isIE()){var sep_ps;var d_part="";var t_part="";if(t_offset_p>=0){ds=ds.substr(0,t_offset_p);}
if(ds.indexOf("T")>=0){sep_ps=ds.indexOf("T");d_part=ds.substr(0,sep_ps);t_part=ds.substr(sep_ps+1);}
else if(ds.indexOf(" ")>=0){sep_ps=ds.indexOf(" ");if(sep_ps>=0){d_part=ds.substr(0,sep_ps);t_part=ds.substr(sep_ps+1);}}
else{}
var d_ar=d_part.split("-");if(d_ar.length<1)d_ar.push("01");if(d_ar.length<2)d_ar.push("01");if(d_ar.length<3)d_ar.push("01");ds=d_ar[2]+"/"+d_ar[1]+"/"+d_ar[0]+(t_part?" "+t_part:"");d=this.userStrToDate(ds);}
else{if(ds.length>12&&t_offset_p==-1&&ds.substr(ds.length-1,1)!="Z"){ds+=window.getApp().getTimeZoneOffsetStr();}
else if(t_offset_p!=-1){var t_offset_ar=ds.substr(t_offset_p+1).split(":");for(var i=t_offset_ar.length;i<2;i++){t_offset_ar.push("00");}
ds=ds.substr(0,t_offset_p)+"+"+t_offset_ar.join(":");}
d=new Date(ds);}
return d;},userStrToDate:function(dateStr){var SHORT_YEAR_LEN=8;var FULL_YEAR_LEN=10;var time=new Array(0,0,0);var date=new Array(0,0,0);var time_part='',date_part='';var TIME_DELIM=':';var DATE_DELIM='.';var PARTS_DELIM=' ';var NEXT_MIL_BOUND=40;var str_replace_delim=function(str,delim_ar,new_delim){if(str&&str.length){for(var i=0;i<delim_ar.length;i++){while(str.search(delim_ar[i])>=00){str=str.replace(delim_ar[i],new_delim);}}}
return str;};var date_str_copy=str_replace_delim(dateStr,new Array(/T/),PARTS_DELIM);var separ=date_str_copy.indexOf(PARTS_DELIM);if(separ>=0){date_part=date_str_copy.slice(0,separ);time_part=date_str_copy.substr(separ+1);}
else{if(date_str_copy.indexOf(TIME_DELIM)==-1){date_part=date_str_copy;}
else{time_part=date_str_copy;}}
date_part=str_replace_delim(date_part,new Array(/\//,/-/,/:/),DATE_DELIM);time_part=str_replace_delim(time_part,new Array(/ /,/-/,/\//),TIME_DELIM);if(date_part.length>0){date=date_part.split(DATE_DELIM);}
if(time_part.length>0){time=time_part.split(TIME_DELIM);}
if(date.length&&date[0].length==4){var y=date[0];date[0]=date[2];date[2]=y;}
else if(date.length>=3&&date[2].length==2){date[2]=parseInt(date[2],10);date[2]+=(date[2]<=NEXT_MIL_BOUND)?2000:1900;}
if(time[2]==undefined){time[2]=0;}
date[1]=(date[1]==0)?0:date[1]-1;return(new Date(date[2],date[1],date[0],time[0],time[1],time[2]));},format:function(dt,fs,localeId){var add_zero=function(arg){var s=arg.toString();return((s.length<2)?"0":"")+s;};if(!dt||!dt.getDate){return"";}
if(!fs){fs=this.DEF_FORMAT;}
var s;s=fs.replace(/d/,add_zero(dt.getDate()));s=s.replace(/j/,dt.getDate());s=s.replace(/F/,DateHelper.MON_LIST[dt.getMonth()]);s=s.replace(/l/,DateHelper.WEEK_LIST[dt.getDay()]);s=s.replace(/m/,add_zero(dt.getMonth()+1));s=s.replace(/n/,dt.getMonth()+1);s=s.replace(/Y/,dt.getFullYear());s=s.replace(/y/,dt.getFullYear()-2000);s=s.replace(/H/,add_zero(dt.getHours()));s=s.replace(/i/,add_zero(dt.getMinutes()));s=s.replace(/s/,add_zero(dt.getSeconds()));s=s.replace(/u/,add_zero(dt.getMilliseconds()));return s;},timeToMS:function(timeStr){if(timeStr==undefined){return 0;}
var h,m;var time_ar=timeStr.split(":");var h=0;var m=0;var s=0;var ms=0;if(time_ar.length>=1){h=parseInt(time_ar[0][0],10)*10+
parseInt(time_ar[0][1],10);h=(isNaN(h)?0:h);}
if(time_ar.length>=2){m=parseInt(time_ar[1][0],10)*10+
parseInt(time_ar[1][1],10);m=(isNaN(m)?0:m);}
if(time_ar.length>=3){s=parseInt(time_ar[2][0],10)*10+
parseInt(time_ar[2][1],10);s=(isNaN(s)?0:s);}
return(h*60*60*1000+m*60*1000+s*1000+ms);},weekStart:function(dt){if(!dt)dt=this.time();var dow=dt.getDay();var dif=dow-1;if(dif<0)dif=6;return(new Date(dt.getTime()-dif*24*60*60*1000));},weekEnd:function(dt){return new Date(this.weekStart(dt).getTime()+6*24*60*60*1000);},monthStart:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),dt.getMonth(),1));},monthEnd:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),dt.getMonth()+1,0));},quarterStart:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==1||m==2){m=0;}
else if(m==4||m==5){m=3;}
else if(m==7||m==8){m=6;}
else if(m==10||m==11){m=9;};return(new Date(dt.getFullYear(),m,1));},quarterEnd:function(dt){if(!dt)dt=this.time();var m=dt.getMonth();if(m==0||m==1){m=2;}
else if(m==3||m==4){m=5;}
else if(m==6||m==7){m=8;}
else if(m==9||m==10){m=11;};return this.monthEnd(new Date(dt.getFullYear(),m,1));},yearStart:function(dt){if(!dt)dt=this.time();return new Date(dt.getFullYear(),0,1);},yearEnd:function(dt){if(!dt)dt=this.time();return(new Date(dt.getFullYear(),12,0));},addBusinessDays:function(d,n){d=new Date(d.getTime());var day=d.getDay();d.setDate(d.getDate()+n+(day===6?2:+!day)+(Math.floor((n-1+(day%6||1))/5)*2));return d;}} 
var EventHelper={add:function(obj,evType,fn,capture){if(!fn)return;if(typeof obj=='string'){obj=$(obj);}
if(CommonHelper.isIE()){$(obj).on(evType,fn);}
else{if(obj&&obj.addEventListener){obj.addEventListener(evType,fn,capture);return true;}else if(obj&&obj.attachEvent){var r=obj.attachEvent("on"+evType,fn);return r;}else{return false;}}},del:function(obj,evType,fn,useCapture){if(CommonHelper.isIE()){$(obj).off(evType,fn);}
else{if(obj&&obj.removeEventListener){obj.removeEventListener(evType,fn,useCapture);return true;}else if(obj&&obj.detachEvent){var r=obj.detachEvent("on"+evType,fn);return r;}else{throw new Error(this.DEL_ERR);}}},fixMouseEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.pageX==null&&e.clientX!=null){var html=document.documentElement;var body=document.body;e.pageX=e.clientX+(html&&html.scrollLeft||body&&body.scrollLeft||0)-(html.clientLeft||0);e.pageY=e.clientY+(html&&html.scrollTop||body&&body.scrollTop||0)-(html.clientTop||0);}
if(!e.which&&e.button){e.which=e.button&1?1:(e.button&2?3:(e.button&4?2:0));}
return(e);},fixKeyEvent:function(e){e=e||window.event;if(e.target===undefined){e.target=e.srcElement;}
if(e.which==null&&e.keyCode>=32){e.char=String.fromCharCode(event.keyCode);}
else if(e.which!=0&&e.charCode!=0&&e.which>=32){e.char=String.fromCharCode(e.which);}
return(e);},fixWheelEvent:function(e){e.delta=e.deltaY||e.detail||e.wheelDelta;return(e);},getWheelEventName:function(){var res;if("onwheel"in document){res="wheel";}else if("onmousewheel"in document){res="mousewheel";}else{res="MozMousePixelScroll";}
return(res);},addWheelEvent:function(obj,fn,capture){this.add(obj,this.getWheelEventName(),fn,capture);},delWheelEvent:function(obj,fn,capture){this.del(obj,this.getWheelEventName(),fn,capture);}}; 
function FatalException(options){this.m_code=options.code;this.m_message=options["message"];this.m_cmdOk=options.cmdOk;}
FatalException.prototype.TEMPLATE_ID="FatalException";FatalException.prototype.show=function(){if(CommonHelper.nd("ex_"+this.m_code+":form"))return;var view=new Control("ex_"+this.m_code+":view:body:view","TEMPLATE",{"template":window.getApp().getTemplate(this.TEMPLATE_ID),"templateOptions":{"code":this.m_code,"message":this.m_message,"baseURL":window.getApp().getServVar("basePath")}});var self=this;this.form=new WindowFormModalBS("ex_"+this.m_code+":form",{"cmdCancel":false,"cmdOk":this.m_cmdOk,"content":view,"contentHead":this.HEADER,"onClickOk":!this.m_cmdOk?null:function(){self.form.close();}});this.form.open();} 
function DbException(options){options.cmdOk=true;DbException.superclass.constructor.call(this,options);}
extend(DbException,FatalException);DbException.prototype.TEMPLATE_ID="DbException"; 
function VersException(){options={};options.cmdOk=false;options.cmdCancel=false;VersException.superclass.constructor.call(this,options);}
extend(VersException,FatalException);VersException.prototype.TEMPLATE_ID="VersException"; 
function ConstantManager(options){options=options||{};this.m_values=options.values||{};if(options.XMLString){this.fillFromXML(options.XMLString);}}
ConstantManager.prototype.m_values;ConstantManager.prototype.fillFromXML=function(xml){var m=new ModelXML("ConstantValueList_Model",{"data":xml,"fields":{"id":new FieldString(),"val":new FieldString(),"val_type":new FieldString()}});while(m.getNextRow()){var v_t=m.getFieldValue("val_type");var v=m.getFieldValue("val");var v_class;var v_id=m.getFieldValue("id");if(v_t=="Int"){v_class=FieldInt;}
else if(v_t=="Float"){v_class=FieldFloat;}
else if(v_t=="DateTime"){v_class=FieldDateTime;}
else if(v_t=="Date"){v_class=FieldDate;}
else if(v_t=="JSON"||v_t=="JSONB"){v_class=FieldJSON;}
else{v_class=FieldString;}
this.m_values[v_id]=new v_class(v_id,{"value":v});}}
ConstantManager.prototype.get=function(constants){var not_found="";var not_found_ar=[];var QUERY_SEP=",";for(var id in constants){if(this.m_values[id]){constants[id]=this.m_values[id];}
else{not_found+=(not_found=="")?"":QUERY_SEP;not_found+=id;not_found_ar.push(id);}}
if(not_found!=""){var self=this;var pm=(new Constant_Controller()).getPublicMethod("get_values");pm.setFieldValue("id_list",not_found);pm.run({"async":false,"ok":function(resp){self.fillFromXML(resp.getModelData("ConstantValueList_Model"));for(var i=0;i<not_found_ar.length;i++){constants[not_found_ar[i]]=self.m_values[not_found_ar[i]];}},"fail":function(resp,errCode,errStr){throw Error(errStr);}});}}
ConstantManager.prototype.set=function(constants){} 
function ServConnector(options){options=options||{};this.setHost(options.host||"");this.setScript(options.script||this.DEF_SCRIPT);this.setCORS((options.CORS!==undefined)?options.CORS:false);this.m_xhrStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};}
ServConnector.prototype.DEF_SCRIPT="index.php";ServConnector.prototype.ERR_AUTH=100;ServConnector.prototype.ERR_AUTH_NOT_LOGGED=102;ServConnector.prototype.ERR_AUTH_EXP=101;ServConnector.prototype.ERR_SQL_SERVER=105;ServConnector.prototype.ERR_VERSION=107;ServConnector.prototype.ENCTYPES={ENCODED:"application/x-www-form-urlencoded",MULTIPART:"multipart/form-data",TEXT:"text-plain"};ServConnector.prototype.m_xhrStates;ServConnector.prototype.m_CORS;ServConnector.prototype.m_host;ServConnector.prototype.m_script;ServConnector.prototype.m_port;ServConnector.prototype.m_quit;ServConnector.prototype.getCORS=function(){return this.m_CORS;}
ServConnector.prototype.setCORS=function(v){this.m_CORS=v;}
ServConnector.prototype.getHost=function(){return this.m_host;}
ServConnector.prototype.setHost=function(host){this.m_host=host;}
ServConnector.prototype.getScript=function(){return this.m_script;}
ServConnector.prototype.setScript=function(script){this.m_script=script;}
ServConnector.prototype.queryParamsAsStr=function(params,encode){var paramStr="";for(var par_id in params){paramStr+=(paramStr=="")?"":"&";paramStr+=par_id+"=";paramStr+=(encode)?encodeURIComponent(params[par_id]):params[par_id];}
return paramStr;}
ServConnector.prototype.sendRequest=function(isGet,params,async,onReturn,retContentType,enctype){this.m_requestId=CommonHelper.uniqid();async=(async==undefined)?true:async;var url=this.getHost()+this.getScript();var send_param;var xhr=(this.m_CORS===true)?CommonHelper.createCORS():CommonHelper.createXHR();var self=this;xhr.onreadystatechange=function(){if(xhr.readyState==self.m_xhrStates.HEADERS_RECEIVED){}
else if(xhr.readyState==self.m_xhrStates.DONE){var error_n;var error_s;var resp;if(xhr.status==0){error_s=self.ER_STATUS0;error_n=-1;}
else{error_n=(xhr.status>=200&&xhr.status<300)?0:xhr.status;if(error_n!=0){error_s=xhr.statusText;}
var RESP_MODEL_ID="ModelServResponse";var vers_error=false;try{var tr=xhr.getResponseHeader("content-type");if(tr&&tr.indexOf("xml")>=0){resp=new ResponseXML(xhr.responseXML);if(!resp.modelExists(RESP_MODEL_ID)){throw new Error(self.ER_NO_RESP_MODEL);}
var m=new ModelServRespXML(resp.getModelData(RESP_MODEL_ID));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=window.getApp().getServVar("version"));}
else if(tr&&tr.indexOf("json")>=0){resp=new ResponseJSON(xhr.responseText);var m=new ModelServRespJSON(resp.getModelData(RESP_MODEL_ID));error_n=error_n?error_n:m.result;error_s=m.descr;vers_error=(!error_n&&m.app_version&&m.app_version!=window.getApp().getServVar("version"));}
else{if(retContentType!=undefined&&tr&&tr.indexOf(retContentType)<0){error_n=error_n?error_n:-1;error_s=xhr.responseText;}
else{resp=xhr.responseText;}}}
catch(e){error_n=error_n?error_n:-1;error_s=e.message;}}
if(onReturn){onReturn.call(self,error_n,error_s,resp,self.m_requestId);}
if(error_n==self.ERR_AUTH_NOT_LOGGED||error_n==self.ERR_AUTH_EXP){throw new FatalException({"code":error_n,"message":error_s});}
else if(error_n==self.ERR_SQL_SERVER){throw new DbException({"code":error_n,"message":error_s});}
else if(vers_error){throw new VersException();}}}
if(isGet){url=url+"?"+this.queryParamsAsStr(params,true);if(this.getCORS()){xhr.open("GET",url);}
else{xhr.open("GET",url,async);}
send_param=null;}
else{enctype=enctype||this.ENCTYPES.ENCODED;if(this.getCORS()){xhr.open("POST",url);}
else{xhr.open("POST",url,async);}
if(enctype==this.ENCTYPES.ENCODED){xhr.setRequestHeader("Content-Type",enctype);send_param=this.queryParamsAsStr(params,true);}
if(enctype==this.ENCTYPES.MULTIPART){if(typeof FormData!=='undefined'){send_param=new FormData();for(var par_id in params){if(params[par_id]&&typeof params[par_id]=="object"){for(var fi=0;fi<params[par_id].length;fi++){send_param.append(par_id+"[]",params[par_id][fi]);}}
else{send_param.append(par_id,params[par_id]);}}}
else{var boundary=String(Math.random()).slice(2);var boundaryMiddle='--'+boundary+'\r\n';var boundaryLast='--'+boundary+'--\r\n';send_param=['\r\n'];for(var key in params){send_param.push('Content-Disposition: form-data; name="'+key+'"\r\n\r\n'+params[key]+'\r\n');}
send_param=send_param.join(boundaryMiddle)+boundaryLast;xhr.setRequestHeader('Content-Type','multipart/form-data; boundary='+boundary);}}}
if(!this.getCORS&&xhr.setRequestHeader){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");}
xhr.send(send_param);return this.m_requestId;}
ServConnector.prototype.sendPost=function(params,async,onReturn,retContentType,enctype){if(this.m_quit)return;return this.sendRequest(false,params,async,onReturn,retContentType,enctype);}
ServConnector.prototype.sendGet=function(params,async,onReturn,retContentType){if(this.m_quit)return;return this.sendRequest(true,params,async,onReturn,retContentType);}
ServConnector.prototype.openHref=function(params,winParams){if(this.m_quit)return;winParams=(winParams)?winParams:"location=0,menubar=0,status=0,titlebar=0";window.open(this.getHost()+this.getScript()+"?"+this.queryParamsAsStr(params,true),"_blank",winParams);}
ServConnector.prototype.quit=function(){this.m_quit=true;} 
function Response(resp){this.m_models={};this.setResponse(resp);}
Response.prototype.m_resp;Response.prototype.m_models;Response.prototype.getInitResponse=function(){}
Response.prototype.setResponse=function(resp){this.m_resp=resp?resp:this.getInitResponse();}
Response.prototype.modelExists=function(id){return(this.m_models[id])?true:false;}
Response.prototype.setModelData=function(id,data){this.m_models[id]=data;}
Response.prototype.getModelData=function(id){if(!this.m_models[id]){throw new Error(CommonHelper.format(this.ERR_NO_MODEL,[id]));}
return this.m_models[id];}
Response.prototype.getModels=function(){return this.m_models;}
Response.prototype.getModel=function(id){if(this.modelExists(id)&&window[id]){return new window[id]({"data":this.m_models[id]});}} 
function ResponseXML(resp){ResponseXML.superclass.constructor.call(this,resp);}
extend(ResponseXML,Response);ResponseXML.prototype.TAG_ROOT="document";ResponseXML.prototype.TAG_MODEL="model";ResponseXML.prototype.getInitResponse=function(){return DOMHelper.xmlDocFromString("<"+this.TAG_ROOT+"></"+this.TAG_ROOT+">");}
ResponseXML.prototype.setModelData=function(id,node){this.m_resp.firstChild.appendChild(node);ResponseXML.superclass.setModelData.call(this,id,node);}
ResponseXML.prototype.setResponse=function(resp){ResponseXML.superclass.setResponse.call(this,resp);var models=this.m_resp.documentElement.getElementsByTagName(this.TAG_MODEL);for(var i=0;i<models.length;i++){if(models[i].parentNode==this.m_resp.documentElement){this.m_models[models[i].getAttribute("id")]=models[i];}}} 
function ResponseJSON(resp){ResponseJSON.superclass.constructor.call(this,resp);}
extend(ResponseJSON,Response);ResponseJSON.prototype.getInitResponse=function(){return{"models":[]};}
ResponseJSON.prototype.setResponse=function(resp){var o;if(typeof(resp)=="string"){o=CommonHelper.unserialize(resp);}
else{o=resp;}
ResponseJSON.superclass.setResponse.call(this,o);if(o)this.m_models=o.models;} 
function PublicMethod(id,options){this.setId(id);options=options||{};this.m_fields=options.fields||{};this.setController(options.controller);}
PublicMethod.prototype.m_id;PublicMethod.prototype.m_fields;PublicMethod.prototype.m_controller;PublicMethod.prototype.fieldExists=function(id){return(this.m_fields[id]!=undefined);}
PublicMethod.prototype.getId=function(){return this.m_id;}
PublicMethod.prototype.setId=function(id){this.m_id=id;}
PublicMethod.prototype.addField=function(field){this.m_fields[field.getId()]=field;}
PublicMethod.prototype.checkField=function(id){if(!this.fieldExists(id)){throw Error(CommonHelper.format(this.ER_NO_FIELD,Array(this.m_controller.getId(),this.getId(),id)));}
return true;}
PublicMethod.prototype.getField=function(id){this.checkField(id);return this.m_fields[id];}
PublicMethod.prototype.getFields=function(){return this.m_fields;}
PublicMethod.prototype.setFields=function(v){this.m_fields=v;}
PublicMethod.prototype.setFieldValue=function(id,value){this.checkField(id);this.m_fields[id].setValue(value);}
PublicMethod.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
PublicMethod.prototype.getController=function(){return this.m_controller;}
PublicMethod.prototype.setController=function(c){this.m_controller=c;}
PublicMethod.prototype.run=function(options){} 
function PublicMethodServer(id,options){options=options||{};if(!options.controller){throw Error(CommonHelper.format(this.ER_NO_CONTROLLER,Array(id)));}
this.setRequestType(options.requestType);this.setAsync(options.async);this.setEncType(options.encType);PublicMethodServer.superclass.constructor.call(this,id,options);}
extend(PublicMethodServer,PublicMethod);PublicMethodServer.prototype.m_requestType;PublicMethodServer.prototype.m_sync;PublicMethodServer.prototype.m_encType;PublicMethodServer.prototype.getRequestType=function(){return this.m_requestType;}
PublicMethodServer.prototype.setRequestType=function(v){this.m_requestType=v;}
PublicMethodServer.prototype.getAsync=function(){return this.m_async;}
PublicMethodServer.prototype.setAsync=function(v){this.m_async=v;}
PublicMethodServer.prototype.getEncType=function(){return this.m_encType;}
PublicMethodServer.prototype.setEncType=function(v){this.m_encType=v;}
PublicMethodServer.prototype.download=function(viewId,ind){this.getController().download(this.getId(),viewId,ind);}
PublicMethodServer.prototype.openHref=function(viewId,winParams){this.getController().openHref(this.getId(),viewId,winParams);}
PublicMethodServer.prototype.run=function(options){this.getController().run(this.getId(),options);} 
function Controller(options){this.m_publicMethods=options.publicMethods||{};this.setPublicMethodClass(options.publicMethodClass||PublicMethod);}
Controller.prototype.m_publicMethods;Controller.prototype.getId=function(){return this.constructor.toString().match(/function (\w*)/)[1];}
Controller.prototype.publicMethodExists=function(id){return(this.m_publicMethods[id]!=undefined);}
Controller.prototype.addPublicMethod=function(pm){this.m_publicMethods[pm.getId()]=pm;}
Controller.prototype.checkPublicMethod=function(id){if(!this.publicMethodExists(id)){throw new Error(CommonHelper.format(this.ER_NO_METHOD,[id,this.getId()]));}
return true;}
Controller.prototype.getPublicMethod=function(id){this.checkPublicMethod(id);return this.m_publicMethods[id];}
Controller.prototype.getPublicMethods=function(){return this.m_publicMethods;}
Controller.prototype.run=function(meth,options){this.getPublicMethod(meth).run(options);}
Controller.prototype.getPublicMethodClass=function(){return this.m_publicMethodClass;}
Controller.prototype.setPublicMethodClass=function(v){this.m_publicMethodClass=v;} 
function ControllerObj(options){options=options||{};this.setListModelClass(options.listModelClass);this.setObjModelClass(options.objModelClass);ControllerObj.superclass.constructor.call(this,options);}
extend(ControllerObj,Controller);ControllerObj.prototype.METH_INSERT="insert";ControllerObj.prototype.METH_UPDATE="update";ControllerObj.prototype.METH_GET_OBJ="get_object";ControllerObj.prototype.METH_GET_LIST="get_list";ControllerObj.prototype.METH_DELETE="delete";ControllerObj.prototype.METH_COMPLETE="complete";ControllerObj.prototype.PARAM_COUNT="count";ControllerObj.prototype.PARAM_FROM="from";ControllerObj.prototype.PARAM_IC="ic";ControllerObj.prototype.PARAM_MID="mid";ControllerObj.prototype.PARAM_ORD_FIELDS="ord_fields";ControllerObj.prototype.PARAM_ORD_DIRECTS="ord_directs";ControllerObj.prototype.PARAM_FIELD_SEP_VAL="@";ControllerObj.prototype.PARAM_COND_FIELDS="cond_fields";ControllerObj.prototype.PARAM_COND_SGNS="cond_sgns";ControllerObj.prototype.PARAM_COND_VALS="cond_vals";ControllerObj.prototype.PARAM_COND_ICASE="cond_ic";ControllerObj.prototype.PARAM_SGN_EQUAL="e";ControllerObj.prototype.PARAM_SGN_LESS="l";ControllerObj.prototype.PARAM_SGN_GREATER="g";ControllerObj.prototype.PARAM_SGN_LESS_EQUAL="le";ControllerObj.prototype.PARAM_SGN_GREATER_EQUAL="ge";ControllerObj.prototype.PARAM_SGN_LIKE="lk";ControllerObj.prototype.PARAM_SGN_NOT_EQUAL="ne";ControllerObj.prototype.PARAM_ORD_ASC="a";ControllerObj.prototype.PARAM_ORD_DESC="d";ControllerObj.prototype.PARAM_GRP_FIELDS="grp_fields";ControllerObj.prototype.PARAM_AGG_FIELDS="agg_fields";ControllerObj.prototype.PARAM_AGG_TYPES="agg_types";ControllerObj.prototype.PARAM_RET_ID="ret_id";ControllerObj.prototype.PARAM_FIELD_SEP="field_sep";ControllerObj.prototype.m_listModelClass;ControllerObj.prototype.m_objModelClass;ControllerObj.prototype.addDefParams=function(){}
ControllerObj.prototype.addInsert=function(){return this.addMethod(this.METH_INSERT,"post");}
ControllerObj.prototype.getInsert=function(){return this.getPublicMethod(this.METH_INSERT);}
ControllerObj.prototype.addUpdate=function(){return this.addMethod(this.METH_UPDATE,"post");}
ControllerObj.prototype.getUpdate=function(){return this.getPublicMethod(this.METH_UPDATE);}
ControllerObj.prototype.addDelete=function(){return this.addMethod(this.METH_DELETE);}
ControllerObj.prototype.getDelete=function(){return this.getPublicMethod(this.METH_DELETE);}
ControllerObj.prototype.addGetObject=function(){return this.addMethod(this.METH_GET_OBJ);}
ControllerObj.prototype.getGetObject=function(){return this.getPublicMethod(this.METH_GET_OBJ);}
ControllerObj.prototype.addGetList=function(){var pm=this.addMethod(this.METH_GET_LIST);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_FIELD_SEP));return pm;}
ControllerObj.prototype.getGetList=function(){return this.getPublicMethod(this.METH_GET_LIST,{controller:this});}
ControllerObj.prototype.setObjModelClass=function(v){this.m_objModelClass=v;}
ControllerObj.prototype.getObjModelClass=function(){return this.m_objModelClass;}
ControllerObj.prototype.setListModelClass=function(v){this.m_listModelClass=v;}
ControllerObj.prototype.getListModelClass=function(){return this.m_listModelClass;}
ControllerObj.prototype.addComplete=function(){var pm=this.addMethod(this.METH_COMPLETE);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_IC));pm.addField(new FieldInt(this.PARAM_MID));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));return pm;}
ControllerObj.prototype.getComplete=function(){return this.getPublicMethod(this.METH_COMPLETE);}
ControllerObj.prototype.addMethod=function(methId,requestType){var pm_class=this.getPublicMethodClass();var pm=new pm_class(methId,{"controller":this,"requestType":requestType});this.addDefParams(pm);this.addPublicMethod(pm);return pm;}
ControllerObj.prototype.getPrintList=function(){return null;} 
function ControllerObjServer(options){options=options||{};options.publicMethodClass=options.publicMethodClass||PublicMethodServer;this.setServConnector(options.servConnector);ControllerObjServer.superclass.constructor.call(this,options);}
extend(ControllerObjServer,ControllerObj);ControllerObjServer.prototype.PARAM_DEF_VIEW="ViewXML";ControllerObjServer.prototype.PARAM_CONTROLLER="c";ControllerObjServer.prototype.PARAM_METH="f";ControllerObjServer.prototype.PARAM_VIEW="v";ControllerObjServer.prototype.m_servConnector;ControllerObjServer.prototype.addDefParams=function(pm){pm.addField(new FieldString(this.PARAM_CONTROLLER,{"value":this.getId()}));pm.addField(new FieldString(this.PARAM_METH,{"value":pm.getId()}));pm.addField(new FieldString(this.PARAM_VIEW,{"value":this.PARAM_VIEW_VALUE}));}
ControllerObjServer.prototype.getParams=function(methId,viewId){var params={};var pm=this.getPublicMethod(methId);params[this.PARAM_CONTROLLER]=this.getId();params[this.PARAM_METH]=methId;params[this.PARAM_VIEW]=viewId||this.PARAM_DEF_VIEW;var set_par_cnt=0,par_cnt=0;for(var id in pm.getFields()){var f=pm.getField(id);var is_null=f.isNull();if(is_null&&f.getValidator().getRequired()){throw Error(CommonHelper.format(this.ER_EMPTY,Array(this.getId(),methId,f.getId())));}
if(f.isSet()){params[id]=f.getValueXHR();}
par_cnt++;}
return params;}
ControllerObjServer.prototype.getServConnector=function(){return(this.m_servConnector)?this.m_servConnector:window.getApp().getServConnector();}
ControllerObjServer.prototype.setServConnector=function(v){this.m_servConnector=v;}
ControllerObjServer.prototype.run=function(methId,options){options=options||{};var meth=this.getPublicMethod(methId);if(options.requestType==undefined){options.requestType=(meth.getRequestType()!=undefined)?meth.getRequestType():"get";}
if(options.async==undefined){options.async=(meth.getAsync()!=undefined)?meth.getAsync():true;}
if(options.encType==undefined){options.encType=(meth.getEncType()!=undefined)?meth.getEncType():null;}
options.retContentType=options.retContentType||"xml";var self=this;options.fail=options.fail||function(resp,errCode,errStr){window.showError(errCode+" "+errStr);};var params=this.getParams(methId,options.viewId);if(options.t){params.t=options.t;}
var conn=this.getServConnector();var con_func=(options.requestType=="post")?conn.sendPost:conn.sendGet;this.m_resp=null;if(!options.async){window.setGlobalWait(true);}
return con_func.call(conn,params,options.async,function(errCode,errStr,resp,requestId){if(!options.async){window.setGlobalWait(false);}
if(errCode!=0){options.fail.call(self,resp,errCode,errStr,requestId);}
else if(options.ok){self.m_resp=requestId;options.ok.call(self,resp,requestId);}
else{self.m_resp=resp;}
if(options.all){options.all.call(self,resp,errCode,errStr,requestId);}},options.retContentType,options.encType);}
ControllerObjServer.prototype.download=function(methId,viewId,ind,callBack){ind=(ind!=undefined)?ind:"";var n_id="file_downloader"+ind;var n=document.getElementById(n_id);if(!n){n=document.createElement("iframe");n.id=n_id;n.style="display:none;";n.onerror=window.onerror;n.onload=function(){if(this.contentDocument){var resp=new ResponseXML(this.contentDocument);var m=new ModelServRespXML(resp.getModelData("ModelServResponse"));if(m.result){if(callBack){callBack(1,m.descr);}
else{throw new Error(m.descr);}}}
if(callBack){callBack(0);}};document.body.appendChild(n);}
var params=this.getParams(methId,viewId);var par_str="";for(var id in params){par_str+=(par_str=="")?"":"&";par_str+=id+"="+params[id];}
n.src=window.getApp().getServConnector().getScript()+"?"+par_str;}
ControllerObjServer.prototype.openHref=function(methId,viewId,winParams){var meth=this.getPublicMethod(methId);window.getApp().getServConnector().openHref(this.getParams(methId,viewId),winParams);} 
function ControllerObjClient(options){options=options||{};this.setClientModel(options.clientModel);ControllerObjClient.superclass.constructor.call(this,options);}
extend(ControllerObjClient,ControllerObj);ControllerObjClient.prototype.UPD_PARAM_PREF="old_";ControllerObjClient.prototype.m_clientModel;ControllerObjClient.prototype.addInsert=function(){var pm=this.addMethod(this.METH_INSERT);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.reset();self.publicMethodFieldsToModel(this.getFields(),self.m_clientModel.getFields());self.m_clientModel.recInsert();if(options.ok){var key_model_fields={};var fields=self.m_clientModel.getFields();for(var fid in fields){if(fields[fid].getPrimaryKey()){var ft=fields[fid].getDataType();var fcl;if(ft==fields[fid].DT_INT){fcl=FieldInt;}
else{fcl=FieldString;}
key_model_fields[fid]=new fcl(fid,{"value":fields[fid].getValue()});}}
var resp,model;if(self.m_clientModel instanceof ModelXML){resp=new ResponseXML();model=new ModelXML("InsertedId_Model",{"fields":key_model_fields});}
else if(self.m_clientModel instanceof ModelJSON){resp=new ResponseJSON();model=new ModelJSON("InsertedId_Model",{"fields":key_model_fields});}
else{throw new Error(this.ER_UNSUPPORTED_CLIENT_MODEL);}
model.recInsert();resp.setModelData("InsertedId_Model",model.getData());options.ok(resp);}}}
return pm;}
ControllerObjClient.prototype.addUpdate=function(){var pm=this.addMethod(this.METH_UPDATE);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.reset();var keyFields={};self.publicMethodFieldsToModel(this.getFields(),self.m_clientModel.getFields(),keyFields);self.m_clientModel.recUpdate(keyFields);if(options.ok){options.ok();}}}
return pm;}
ControllerObjClient.prototype.addDelete=function(){var pm=this.addMethod(this.METH_DELETE);var self=this;pm.run=function(options){if(self.m_clientModel){self.m_clientModel.recDelete(this.m_fields);if(options.ok){options.ok();}}}
return pm;}
ControllerObjClient.prototype.addGetList=function(){var pm=this.addMethod(this.METH_GET_LIST);var self=this;pm.run=function(options){if(self.m_clientModel){var rows=[];self.m_clientModel.reset();if(options[self.PARAM_COND_FIELDS]){var keys=options[self.PARAM_COND_FIELDS].split(options[self.PARAM_FIELD_SEP]);var vals=options[self.PARAM_COND_VALS].split(options[self.PARAM_FIELD_SEP]);var sgns=options[self.PARAM_COND_SGNS].split(options[self.PARAM_FIELD_SEP]);var opts={};for(var key in options[self.PARAM_COND_FIELDS]){opts[key]=options[self.PARAM_COND_VALS]}}
else{while(self.m_clientModel.getNextRow()){rows.push(self.m_clientModel.m_currentRow);}}
if(options.ok){options.ok(self.makeResponse(rows));}}}
return pm;}
ControllerObjClient.prototype.addGetObject=function(){var pm=this.addMethod(this.METH_GET_OBJ);var self=this;pm.run=function(options){if(self.m_clientModel){var rows=self.m_clientModel.recLocate(this.m_fields);if(!rows){throw Error(self.m_clientModel.ER_REС_NOT_FOUND);}
if(options.ok){options.ok(self.makeResponse(rows));}}}
return pm;}
ControllerObjClient.prototype.setClientModel=function(v){this.m_clientModel=v;}
ControllerObjClient.prototype.getClientModel=function(){return this.m_clientModel;}
ControllerObjClient.prototype.publicMethodFieldsToModel=function(sFields,tFields,keyFields){for(var id in sFields){if(keyFields&&id.substr(0,this.UPD_PARAM_PREF.length)==this.UPD_PARAM_PREF){keyFields[id.substr(this.UPD_PARAM_PREF.length)]=sFields[id];}
else if(tFields[id]&&sFields[id].isSet()){tFields[id].setValue(sFields[id].getValue());}}}
ControllerObjClient.prototype.makeResponse=function(rows){var resp_class;if(this.m_clientModel instanceof ModelXML){resp_class=ResponseXML;}
else if(this.m_clientModel instanceof ModelJSON){resp_class=ResponseJSON;}
else{throw new Error(this.ER_UNSUPPORTED_CLIENT_MODEL);}
var resp=new resp_class();resp.setModelData(this.m_clientModel.getId(),this.m_clientModel.getData());return resp;} 
function Model(id,options){options=options||{};this.setId(id);this.setFields(options.fields);this.m_indexes={};this.m_sequences=options.sequences||{};if(options.primaryKeyIndex){this.addPrimaryKeyIndex();}
this.setMarkOnDelete((options.markOnDelete!=undefined)?options.markOnDelete:false);this.setData(options.data);}
Model.prototype.m_rowIndex;Model.prototype.m_fields;Model.prototype.m_id;Model.prototype.m_locked;Model.prototype.m_indexes;Model.prototype.m_sequences;Model.prototype.m_currentRow;Model.prototype.m_markOnDelete;Model.prototype.deleteRow=function(row,mark){}
Model.prototype.addRow=function(row){}
Model.prototype.setRowValues=function(row){}
Model.prototype.updateRow=function(row){this.setRowValues(row);}
Model.prototype.resetFields=function(){if(!this.m_fields){throw new Error(CommonHelper.format(this.ER_NO_FIELDS,[this.getId()]));}
for(var id in this.m_fields){this.m_fields[id].unsetValue();}}
Model.prototype.copyRow=function(row){}
Model.prototype.setData=function(data){this.reset();}
Model.prototype.getData=function(){}
Model.prototype.getNextRow=function(){if(this.m_rowIndex+1==this.getRowCount()){return null;}
this.m_rowIndex++;return this.recFetch();}
Model.prototype.getPreviousRow=function(){if(this.m_rowIndex==0){return null;}
this.m_rowIndex--;return this.recFetch();}
Model.prototype.getRows=function(includeDeleted){}
Model.prototype.getRow=function(ind){if(isNaN(ind)||ind<0||ind>=this.getRowCount()){this.reset();return null;}
this.m_rowIndex=ind;return this.recFetch();}
Model.prototype.recFetch=function(){var rows=this.getRows();if(!rows||!rows.length){return;}
this.m_currentRow=rows[this.m_rowIndex];return this.fetchRow(this.m_currentRow);}
Model.prototype.getRowCount=function(includeDeleted){}
Model.prototype.getTotCount=function(){}
Model.prototype.getPageFrom=function(){}
Model.prototype.getPageCount=function(){}
Model.prototype.getFields=function(){return this.m_fields;}
Model.prototype.getRowIndex=function(){return this.m_rowIndex;}
Model.prototype.setRowIndex=function(ind){return this.getRow(ind);}
Model.prototype.fieldExists=function(id){return(this.m_fields&&this.m_fields[id]!=undefined);}
Model.prototype.locate=function(keyIdsHash,valHash){var res;for(var idx in this.m_indexes){if(this.m_indexes[idx].fieldHash==keyIdsHash){res=this.m_indexes[idx].hashes[valHash];break;}}
return res;}
Model.prototype.getField=function(id){if(!this.m_fields){throw new Error(CommonHelper.format(this.ER_NO_FIELDS,[id]));}
if(!this.m_fields[id]){throw new Error(CommonHelper.format(this.ER_NO_FIELD,[id,this.getId()]));}
return this.m_fields[id];}
Model.prototype.setFields=function(v){if(CommonHelper.isArray(v)){this.m_fields={};for(var i=0;i<v.length;i++){if(typeof(v[i])=="object"){this.addField(v[i]);}
else{var f=new FieldString(v[i]);this.addField(f);}}}
else if(typeof(v)=="object"){this.m_fields=v;}}
Model.prototype.addField=function(f){if(!this.m_fields){throw new Error(CommonHelper.format(this.ER_NO_FIELDS,[this.getId()]));}
this.m_fields[f.getId()]=f;}
Model.prototype.getFieldValue=function(id){return this.getField(id).getValue();}
Model.prototype.setFieldValue=function(id,v){this.getField(id).setValue(v);}
Model.prototype.reset=function(){this.resetFields();this.m_rowIndex=-1;this.m_currentRow=undefined;}
Model.prototype.recDelete=function(keyFields,mark){mark=(mark!=undefined)?mark:this.getMarkOnDelete();var row=this.recLocate(keyFields);if(!row||!row.length){throw Error(this.ER_REС_NOT_FOUND);}
this.deleteRow(row[0],mark);}
Model.prototype.recUndelete=function(keyFields){var row=this.recLocate(keyFields);if(!row||!row.length){throw Error(this.ER_REС_NOT_FOUND);}
this.undeleteRow(row[0]);}
Model.prototype.recInsert=function(){for(var sid in this.m_sequences){if(this.m_fields[sid]&&!this.m_fields[sid].isSet()){this.m_sequences[sid]++;this.m_fields[sid].setValue(this.m_sequences[sid]);}}
this.m_currentRow=this.makeRow();this.addRow(this.m_currentRow);this.m_rowIndex=this.getRowCount()-1;this.reindexAllCurrentRow();}
Model.prototype.recUpdate=function(keyFields){var row=this.recLocate(keyFields);if(!row||!row.length){throw Error(this.ER_REС_NOT_FOUND);}
this.updateRow(row[0]);}
Model.prototype.recLocate=function(keyFields){var val="";var ids_hash="";for(var fi in keyFields){if(keyFields[fi].isSet()&&this.m_fields[fi]){val+=keyFields[fi].getValue();ids_hash+=fi;}}
return this.locate(CommonHelper.md5(ids_hash),CommonHelper.md5(val));}
Model.prototype.setLocked=function(v){this.m_locked=v;}
Model.prototype.getLocked=function(){return this.m_locked;}
Model.prototype.setId=function(id){this.m_id=id;}
Model.prototype.getMarkOnDelete=function(){return this.m_markOnDelete;}
Model.prototype.setMarkOnDelete=function(v){this.m_markOnDelete=v;}
Model.prototype.getId=function(){return this.m_id;}
Model.prototype.clear=function(){}
Model.prototype.recMove=function(ind,cnt){}
Model.prototype.recMoveUp=function(ind){this.recMove(ind,-1);}
Model.prototype.recMoveDown=function(ind){this.recMove(ind,1);}
Model.prototype.reindexCurrentRow=function(idx){var val="";for(var idx_f_i=0;idx_f_i<this.m_indexes[idx].fields.length;idx_f_i++){val+=this.m_fields[this.m_indexes[idx].fields[idx_f_i]].getValue();}
var h=CommonHelper.md5(val);if(!this.m_indexes[idx].hashes[h]){this.m_indexes[idx].hashes[h]=[];}
this.m_indexes[idx].hashes[h].push(this.m_currentRow);}
Model.prototype.reindexAllCurrentRow=function(){for(var i in this.m_indexes){this.reindexCurrentRow(i);}}
Model.prototype.reindex=function(specIdx){if(CommonHelper.isEmpty(this.m_indexes))return;this.m_rowIndex=-1;while(this.getNextRow()){if(specIdx){this.reindexCurrentRow(specIdx);}
else{this.reindexAllCurrentRow();}}
this.m_rowIndex=-1;}
Model.prototype.addIndex=function(id,fields){if(this.m_fields){this.m_indexes[id]={};this.m_indexes[id].fields=fields;this.m_indexes[id].fieldHash="";this.m_indexes[id].hashes={};var f_ids="";for(var fi in this.m_fields){if(fields.indexOf(fi)>=0){f_ids+=fi;}}
this.m_indexes[id].fieldHash=CommonHelper.md5(f_ids);}}
Model.prototype.addPrimaryKeyIndex=function(){if(this.m_fields){var fields=[];for(var id in this.m_fields){if(this.m_fields[id].getPrimaryKey()){fields.push(id);}}
this.addIndex("primaryKey",fields);}} 
function ModelXML(id,options){this.setTagModel(options.tagModel||this.DEF_TAG_MODEL);this.setTagRow(options.tagRow||this.DEF_TAG_ROW);this.m_namespace=options.namespace||this.DEF_NAMESPACE;ModelXML.superclass.constructor.call(this,id,options);}
extend(ModelXML,Model);ModelXML.prototype.ATTR_TOT_COUNT="totalCount";ModelXML.prototype.ATTR_PG_COUNT="rowsPerPage";ModelXML.prototype.ATTR_PG_FROM="listFrom";ModelXML.prototype.ATTR_DELETED="deleted";ModelXML.prototype.ATTR_INSERTED="inserted";ModelXML.prototype.ATTR_UPDATED="updated";ModelXML.prototype.DEF_TAG_MODEL="model";ModelXML.prototype.DEF_TAG_ROW="row";ModelXML.prototype.TAG_AT_ID="id";ModelXML.prototype.DEF_NAMESPACE="http://www.w3.org/1999/xhtml";ModelXML.prototype.m_node;ModelXML.prototype.m_tagModel;ModelXML.prototype.m_tagRow;ModelXML.prototype.m_namespace;ModelXML.prototype.fetchRow=function(row){this.resetFields();var f=row.childNodes;for(var i=0;i<f.length;i++){if(f[i].nodeType==1){var fid=f[i].nodeName;if(this.m_fields[fid]){var t_val=null;if(this.m_fields[fid].getDataType()==this.m_fields[fid].DT_ARRAY){if(f[i].childNodes.length){for(var t_ind=0;t_ind<f[i].childNodes.length;t_ind++){if(f[i].childNodes[t_ind].nodeType==3){if(!t_val){t_val="";}
t_val+=f[i].childNodes[t_ind].nodeValue;}
else if(f[i].childNodes[t_ind].nodeType==1){var ar_node=f[i].childNodes[t_ind];for(var j=0;j<ar_node.childNodes.length;j++){if(ar_node.childNodes[j].nodeType==3){if(!t_val){t_val=[];}
t_val.push(ar_node.childNodes[j].nodeValue);}}}}}}
else if(f[i].nodeType==1&&f[i].childNodes.length){if(f[i].childNodes[0].nodeType==3){t_val=f[i].childNodes[0].nodeValue;}
else{t_val=f[i].innerHTML;}}
if(t_val==undefined&&this.m_fields[fid].getValidator()&&this.m_fields[fid].getValidator().getRequired()){}
else if(t_val!==null){this.m_fields[fid].setValue(t_val);}}}}
return true;}
ModelXML.prototype.getRows=function(includeDeleted){includeDeleted=(includeDeleted!=undefined)?includeDeleted:false;var rows=[];for(var i=0;i<this.m_node.childNodes.length;i++){if(this.m_node.childNodes[i].nodeType==1){if(!includeDeleted&&this.m_node.childNodes[i].getAttribute(this.ATTR_DELETED)=="1"){continue;}
rows.push(this.m_node.childNodes[i]);}}
return rows;}
ModelXML.prototype.deleteRow=function(row,mark){ModelXML.superclass.deleteRow.call(this,row,mark);if(mark){row.setAttribute(this.ATTR_DELETED,"1");}
else if(row.parentNode){row.parentNode.removeChild(row);}}
ModelXML.prototype.undeleteRow=function(row){row.removeAttribute(this.ATTR_DELETED);}
ModelXML.prototype.addRow=function(row){row.setAttribute(this.ATTR_INSERTED,"1");this.m_node.appendChild(row);}
ModelXML.prototype.copyRow=function(row){this.addRow(row.cloneNode(true));}
ModelXML.prototype.updateRow=function(row){ModelXML.superclass.updateRow.call(this,row);row.setAttribute(this.ATTR_UPDATED,"1");}
ModelXML.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());for(var fid in this.m_fields){var cell=document.createElement(fid);var v="";if(this.m_fields[fid].isSet()){v=this.m_fields[fid].getValue();}
var cell_t=document.createTextNode(v);cell.appendChild(cell_t);row.appendChild(cell);}
return row;}
ModelXML.prototype.setRowValues=function(row){for(var id in this.m_fields){for(var rcells=0;rcells<row.childNodes.length;rcells++){if(row.childNodes[rcells].nodeName==id&&row.childNodes[rcells].nodeType==1){if(row.childNodes[rcells].firstChild&&this.m_fields[id].isSet()){row.childNodes[rcells].firstChild.nodeValue=this.m_fields[id].getValue();}
break;}}}}
ModelXML.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];var fields=this.m_node.getElementsByTagName(sid);for(var f=0;f<fields.length;f++){if(fields[f].firstChild){var dv=parseInt(fields[f].firstChild.nodeValue,10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}}}}}
ModelXML.prototype.setData=function(data){if(this.getLocked()){throw Error(this.ER_LOCKED);}
var no_data=false;if(!data){data='<'+this.getTagModel()+' '+this.TAG_AT_ID+'="'+this.getId()+'" xmlns="'+this.m_namespace+'"/>';no_data=true;}
if(typeof(data)=="string"){var xml=DOMHelper.xmlDocFromString(data);if(xml.getElementById){this.m_node=xml.getElementById(this.getId());}
if(!this.m_node){var models=xml.getElementsByTagName(this.getTagModel());var id=this.getId();for(var i=0;i<models.length;i++){if(models[i].getAttribute(this.TAG_AT_ID)==id){this.m_node=models[i];break;}}}}
else{this.m_node=data;}
if(!this.m_node){throw new Error(CommonHelper.format(this.ER_NO_MODEL,[this.getId()]));}
if(!this.m_fields&&this.m_node.childNodes&&this.m_node.childNodes.length&&this.m_node.childNodes[0].nodeName==this.getTagRow()&&this.m_node.childNodes[0].childNodes){this.m_fields={};for(var i=0;i<this.m_node.childNodes[0].childNodes.length;i++){var fid=this.m_node.childNodes[0].childNodes[i].nodeName;this.m_fields[fid]=new FieldString(fid);}}
if(this.m_node["toString"]){this.m_node["toString"]=function(){return this.outerHTML;}}
if(!no_data){this.initSequences();this.reindex();}
ModelXML.superclass.setData.call(this,data);}
ModelXML.prototype.getData=function(){return this.m_node;}
ModelXML.prototype.getRowCount=function(includeDeleted){var rows=this.getRows(includeDeleted);if(rows){return rows.length;}}
ModelXML.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelXML.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelXML.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelXML.prototype.getAttr=function(attr){if(this.m_node){return this.m_node.getAttribute(attr);}}
ModelXML.prototype.clear=function(){while(this.m_node.childNodes){this.m_node.removeChild(this.m_node.childNodes[0]);}}
ModelXML.prototype.getTagModel=function(){return this.m_tagModel;}
ModelXML.prototype.setTagModel=function(v){this.m_tagModel=v;}
ModelXML.prototype.getTagRow=function(){return this.m_tagRow;}
ModelXML.prototype.setTagRow=function(v){this.m_tagRow=v;} 
function ModelObjectXML(id,options){ModelObjectXML.superclass.constructor.call(this,id,options);}
extend(ModelObjectXML,ModelXML);ModelObjectXML.prototype.setData=function(data){ModelObjectXML.superclass.setData.call(this,data);this.getNextRow();} 
function ModelServRespXML(data){ModelServRespXML.superclass.constructor.call(this,"ModelServResponse",{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr"),"app_version":new FieldString("app_version")}});}
extend(ModelServRespXML,ModelObjectXML);ModelServRespXML.prototype.result;ModelServRespXML.prototype.descr;ModelServRespXML.prototype.setData=function(data){ModelServRespXML.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");this.app_version=this.fieldExists("app_version")?this.getFieldValue("app_version"):null;} 
function ModelJSON(id,options){this.setTagRow(options.tagRow||this.DEF_TAG_ROW);this.setTagRows(options.tagRows||this.DEF_TAG_ROWS);options.markOnDelete=(options.markOnDelete!=undefined)?options.markOnDelete:false;options.primaryKeyIndex=(options.primaryKeyIndex!=undefined)?options.primaryKeyIndex:true;ModelJSON.superclass.constructor.call(this,id,options);}
extend(ModelJSON,Model);ModelJSON.prototype.ATTR_TOT_COUNT="totalCount";ModelJSON.prototype.ATTR_PG_COUNT="rowsPerPage";ModelJSON.prototype.ATTR_PG_FROM="listFrom";ModelJSON.prototype.ATTR_DELETED="deleted";ModelJSON.prototype.ATTR_INSERTED="inserted";ModelJSON.prototype.ATTR_UPDATED="updated";ModelJSON.prototype.DEF_TAG_ROW="row";ModelJSON.prototype.DEF_TAG_ROWS="rows";ModelJSON.prototype.TAG_AT_ID="id";ModelJSON.prototype.m_model;ModelJSON.prototype.m_tagModel;ModelJSON.prototype.m_tagRow;ModelJSON.prototype.m_tagRows;ModelJSON.prototype.fetchRow=function(row){this.resetFields();for(fid in row.fields){if(this.m_fields[fid]){var t_val=null;if(row.fields[fid]!=undefined){t_val=row.fields[fid];}
if(t_val==""&&this.m_fields[fid].getValidator()&&this.m_fields[fid].getValidator().getRequired()){}
else if(t_val!==null){this.m_fields[fid].setValue(t_val);}}}
return true;}
ModelJSON.prototype.getRows=function(includeDeleted){return this.m_model[this.getTagRows()];}
ModelJSON.prototype.copyRow=function(row){this.m_model[this.getTagRows()].push(JSON.parse(JSON.stringify(row)));}
ModelJSON.prototype.deleteRow=function(row,mark){ModelJSON.superclass.deleteRow.call(this,row,mark);if(mark){row[this.ATTR_DELETED]="1";}
else{var ind=CommonHelper.inArray(row,this.m_model[this.getTagRows()]);if(ind>=0){this.m_model[this.getTagRows()].splice(ind,1);}}}
ModelJSON.prototype.undeleteRow=function(row){row[this.ATTR_DELETED]="0";}
ModelJSON.prototype.addRow=function(row){this.m_model[this.getTagRows()].push(row);}
ModelJSON.prototype.updateRow=function(row){ModelJSON.superclass.updateRow.call(this,row);}
ModelJSON.prototype.makeRow=function(){var row={"fields":{}};for(var fid in this.m_fields){row.fields[fid]=this.m_fields[fid].getValue();}
return row;}
ModelJSON.prototype.setRowValues=function(row){for(var id in this.m_fields){if(this.m_fields[id].isSet()){row.fields[id]=this.m_fields[id].getValue();}}}
ModelJSON.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];if(!this.m_model[this.getTagRows()]){return;}
for(var r=0;r<this.m_model[this.getTagRows()].length;r++){var row=this.m_model[this.getTagRows()][r];for(var c in row.fields){if(c==sid){var dv=parseInt(row.fields[c],10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}
break;}}}}}
ModelJSON.prototype.setData=function(data){var no_data=false;if(!data){data={"id":this.getId()};data[this.getTagRows()]=[];no_data=true;}
if(typeof(data)=="string"){this.m_model=CommonHelper.unserialize(data);}
else{this.m_model=data;}
if(!this.m_model.id){this.m_model.id=this.getId();}
if(!this.m_fields&&this.m_model.rows&&this.m_model.rows.length){if(this.m_model.rows[0].fields){this.m_fields={};for(fid in this.m_model.rows[0].fields){this.m_fields[fid]=new FieldString(fid,{"value":this.m_model.rows[0].fields[fid]});}}}
if(this.m_model["toString"]){var self=this;this.m_model["toString"]=function(){return CommonHelper.serialize(self.m_model);}}
if(!no_data){this.initSequences();this.reindex();}
ModelJSON.superclass.setData.call(this,data);}
ModelJSON.prototype.getData=function(){return this.m_model;}
ModelJSON.prototype.getRowCount=function(includeDeleted){var rows=this.getRows(includeDeleted);return rows?rows.length:0;}
ModelJSON.prototype.getTotCount=function(){return this.getAttr(this.ATTR_TOT_COUNT);}
ModelJSON.prototype.getPageCount=function(){return this.getAttr(this.ATTR_PG_COUNT);}
ModelJSON.prototype.getPageFrom=function(){return this.getAttr(this.ATTR_PG_FROM);}
ModelJSON.prototype.getAttr=function(attr){if(this.m_model){return this.m_model[attr];}}
ModelJSON.prototype.clear=function(){this.m_model[this.getTagRows()]=[];}
ModelJSON.prototype.getTagRow=function(){return this.m_tagRow;}
ModelJSON.prototype.setTagRow=function(v){this.m_tagRow=v;}
ModelJSON.prototype.getTagRows=function(){return this.m_tagRows;}
ModelJSON.prototype.setTagRows=function(v){this.m_tagRows=v;}
ModelJSON.prototype.recMove=function(ind,cnt){var mv_ind=this.getRowIndex()+cnt;if(mv_ind>=0&&mv_ind<this.getRowCount()){var tag=this.getTagRows();var elem=JSON.parse(JSON.stringify(this.m_model[tag][ind]));this.m_model[tag].splice(ind,1);this.m_model[tag].splice(mv_ind,0,elem);}} 
function ModelObjectJSON(id,options){ModelObjectJSON.superclass.constructor.call(this,id,options);}
extend(ModelObjectJSON,ModelJSON);ModelObjectJSON.prototype.setData=function(data){ModelObjectJSON.superclass.setData.call(this,data);this.getNextRow();} 
function ModelServRespJSON(data){ModelServRespXML.superclass.constructor.call(this,"ModelServResponse",{"data":data,"fields":{"result":new FieldInt("result"),"descr":new FieldString("descr"),"app_version":new FieldString("app_version")}});}
extend(ModelServRespJSON,ModelObjectJSON);ModelServRespJSON.prototype.result;ModelServRespJSON.prototype.descr;ModelServRespJSON.prototype.setData=function(data){ModelServRespJSON.superclass.setData.call(this,data);this.result=this.getFieldValue("result");this.descr=this.getFieldValue("descr");this.app_version=this.fieldExists("app_version")?this.getFieldValue("app_version"):null;} 
function ModelXMLTree(id,options){ModelXMLTree.superclass.constructor.call(this,id,options);}
extend(ModelXMLTree,ModelXML);ModelXMLTree.prototype.DEF_TAG_MODEL="root";ModelXMLTree.prototype.DEF_TAG_ROW="item";ModelXMLTree.prototype.m_parentNode;ModelXMLTree.prototype.m_keyField;ModelXMLTree.prototype.getKeyField=function(){if(!this.m_keyField){for(var fid in this.m_fields){if(this.m_fields[fid].getPrimaryKey()){this.m_keyField=this.m_fields[fid];break;}}}
return this.m_keyField;}
ModelXMLTree.prototype.getRow=function(ind){ModelXMLTree.superclass.getRow.call(this,ind);this.m_parentNode=(this.m_currentRow)?this.m_currentRow:this.m_node;}
ModelXMLTree.prototype.addRow=function(row){this.m_parentNode.appendChild(row);}
ModelXMLTree.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow.parentNode&&this.m_currentRow.parentNode!=this.m_node){var key_id=this.getKeyField().getId();var na=this.m_currentRow.parentNode.getElementsByTagName(key_id);if(na&&na.length){var tn=DOMHelper.firstChildElement(na[0],3);if(tn)par_id=tn.nodeValue;}}
return par_id;}
ModelXMLTree.prototype.getRows=function(includeDeleted){return this.m_node.getElementsByTagName(this.getTagRow());}
ModelXMLTree.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());var key_field=this.getKeyField();var key_id=key_field.getId();for(var fid in this.m_fields){var cell=document.createElement(fid);var v="";var f_set=this.m_fields[fid].isSet();if(!f_set&&fid==key_id&&!this.m_sequences[fid]){v=CommonHelper.uniqid();}
else if(f_set){v=this.m_fields[fid].getValue();}
cell.appendChild(document.createTextNode(v));row.appendChild(cell);}
return row;} 
function ModelJSONTree(id,options){this.setTagParent(options.tagParent||this.DEF_TAG_PARENT);ModelJSONTree.superclass.constructor.call(this,id,options);}
extend(ModelJSONTree,ModelJSON);ModelJSONTree.prototype.DEF_TAG_MODEL="root";ModelJSONTree.prototype.DEF_TAG_ROW="item";ModelJSONTree.prototype.DEF_TAG_ROWS="items";ModelJSONTree.prototype.DEF_TAG_PARENT="parent_id";ModelJSONTree.prototype.m_parentNode;ModelJSONTree.prototype.m_keyField;ModelJSONTree.prototype.m_tagParent;ModelJSONTree.prototype.getKeyField=function(){if(!this.m_keyField){for(var fid in this.m_fields){if(this.m_fields[fid].getPrimaryKey()){this.m_keyField=this.m_fields[fid];break;}}}
return this.m_keyField;}
ModelJSONTree.prototype.getRow=function(ind){ModelJSONTree.superclass.getRow.call(this,ind);this.m_parentNode=(this.m_currentRow)?this.m_currentRow:this.m_model;}
ModelJSONTree.prototype.addRow=function(row){var tags=this.getTagRows();this.m_parentNode[tags]=this.m_parentNode[tags]||[];this.m_parentNode[tags].push(row);}
ModelJSONTree.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow[this.getTagParent()]){par_id=this.m_currentRow[this.getTagParent()];}
return par_id;}
ModelJSONTree.prototype.fillRows=function(arToFill,row){var t=this.getTagRows();for(row_id in row[t]){arToFill.push(row[t][row_id]);if(row[t][row_id][t]){this.fillRows(arToFill,row[t][row_id]);}}}
ModelJSONTree.prototype.getRows=function(includeDeleted){var rows=[];this.fillRows(rows,this.m_model);return rows;}
ModelJSONTree.prototype.makeRow=function(){var key_field=this.getKeyField();var key_id=key_field.getId();var row={"fields":{}};for(var fid in this.m_fields){var v="";var f_set=this.m_fields[fid].isSet();if(!f_set&&fid==key_id&&!this.m_sequences[fid]){v=CommonHelper.uniqid();}
else if(f_set){v=this.m_fields[fid].getValue();}
row.fields[fid]=v;}
row[this.getTagParent()]=(this.m_parentNode&&this.m_parentNode.fields)?this.m_parentNode.fields[this.getKeyField().getId()]:null;return row;}
ModelJSONTree.prototype.getTagParent=function(){return this.m_tagParent;}
ModelJSONTree.prototype.setTagParent=function(v){this.m_tagParent=v;} 
function Validator(options){options=options||{};this.setRequired(options.required);this.setMinLength(options.minLength);this.setFixLength(options.fixLength);this.setMaxLength(options.maxLength);}
Validator.prototype.m_required;Validator.prototype.m_minLength;Validator.prototype.m_maxLength;Validator.prototype.m_fixLength;Validator.prototype.setRequired=function(v){this.m_required=v;}
Validator.prototype.getRequired=function(){return this.m_required;}
Validator.prototype.setMinLength=function(v){this.m_minLength=v;}
Validator.prototype.getMinLength=function(){return this.m_minLength;}
Validator.prototype.setMaxLength=function(v){this.m_maxLength=v;}
Validator.prototype.getMaxLength=function(){return this.m_maxLength;}
Validator.prototype.setFixLength=function(v){this.m_fixLength=v;}
Validator.prototype.getFixLength=function(){return this.m_fixLength;}
Validator.prototype.isTooLong=function(val){return(val&&this.m_maxLength&&val.length&&val.length>this.m_maxLength);}
Validator.prototype.isTooShort=function(val){return(val&&this.m_minLength&&val.length&&val.length<this.m_minLength);}
Validator.prototype.isNotFixed=function(val){return(val&&this.m_fixLength&&val.length&&val.length!=this.m_maxLength);}
Validator.prototype.validate=function(val){if(this.getRequired()&&val===null){throw new Error(this.ER_EMPTY);}
if(this.isTooLong(val)){throw new Error(this.ER_TOO_LONG);}
if(this.isTooShort(val)){throw new Error(this.ER_TOO_SHORT);}
if(this.isNotFixed(val)){throw new Error(this.ER_INVALID);}}
Validator.prototype.correctValue=function(v){return v;} 
function ValidatorString(options){ValidatorString.superclass.constructor.call(this,options);}
extend(ValidatorString,Validator);ValidatorString.prototype.validate=function(val){ValidatorString.superclass.validate.call(this,val);if(this.getRequired()&&val==""){console.trace();throw new Error(this.ER_EMPTY);}} 
function ValidatorBool(options){this.TRUE_VALS=[];ValidatorBool.superclass.constructor.call(this,options);this.TRUE_VALS.push("1");this.TRUE_VALS.push("true");this.TRUE_VALS.push("t");this.TRUE_VALS.push("yes");this.TRUE_VALS.push("y");}
extend(ValidatorBool,Validator);ValidatorBool.prototype.correctValue=function(v){return(v===null||v===undefined||v===true||v===false)?v:((!isNaN(v)&&v>0)?true:(jQuery.inArray(v.toString().toLowerCase(),this.TRUE_VALS)>=0));} 
function ValidatorDate(options){ValidatorDate.superclass.constructor.call(this,options);}
extend(ValidatorDate,Validator);ValidatorDate.prototype.correctValue=function(v){var ret;if(!v){ret=DateHelper.time();}
else if(typeof v=="object"){ret=v;}
else{ret=DateHelper.strtotime(v);}
return ret;} 
function ValidatorDateTime(options){ValidatorDateTime.superclass.constructor.call(this,options);}
extend(ValidatorDateTime,ValidatorDate); 
function ValidatorTime(options){ValidatorTime.superclass.constructor.call(this,options);}
extend(ValidatorTime,ValidatorDate);ValidatorTime.prototype.correctValue=function(v){if(!v)return DateHelper.time();if(v instanceof Date)return v;return DateHelper.strtotime("1970-01-01T"+v);} 
function ValidatorInterval(options){ValidatorInterval.superclass.constructor.call(this,options);}
extend(ValidatorInterval,ValidatorString); 
function ValidatorInt(options){ValidatorInt.superclass.constructor.call(this,options);if(options.maxValue){this.setMaxValue(options.maxValue);}
if(options.minValue){this.setMinValue(options.minValue);}
if(options.notZero!=undefined){this.setNotZero(options.notZero);}
if(options.unsigned!=undefined){this.setUnsigned(options.unsigned);}}
extend(ValidatorInt,Validator);ValidatorInt.prototype.m_maxValue;ValidatorInt.prototype.m_minValue;ValidatorInt.prototype.m_notZero;ValidatorInt.prototype.m_unsigned;ValidatorInt.prototype.correctValue=function(v){v=parseInt(v);if(isNaN(v))v=null;return v;}
ValidatorInt.prototype.validate=function(v){var n=parseInt(v);if(this.getRequired()&&isNaN(n)){throw new Error(this.ER_INVALID);}
if(this.m_maxValue&&n>this.m_maxValue){throw new Error(CommonHelper.format(this.ER_VIOL_MAX,[n]));}
if(this.m_minValue&&n<this.m_minValue){throw new Error(CommonHelper.format(this.ER_VIOL_MIN,[n]));}
if(this.m_notZero&&n==0){throw new Error(this.ER_VIOL_NOT_ZERO);}
if(this.m_unsigned&&n<0){throw new Error(this.ER_VIOL_UNSIGNED);}
return n;}
ValidatorInt.prototype.getMaxValue=function(){return this.m_maxValue;}
ValidatorInt.prototype.setMaxValue=function(v){this.m_maxValue=v;}
ValidatorInt.prototype.getMinValue=function(){return this.m_minValue;}
ValidatorInt.prototype.setMinValue=function(v){this.m_minValue=v;}
ValidatorInt.prototype.getUnsigned=function(){return this.m_unsigned;}
ValidatorInt.prototype.setUnsigned=function(v){this.m_unsigned=v;}
ValidatorInt.prototype.getNotZero=function(){return this.m_notZero;}
ValidatorInt.prototype.setNotZero=function(v){this.m_notZero=v;} 
function ValidatorFloat(options){ValidatorFloat.superclass.constructor.call(this,options);}
extend(ValidatorFloat,ValidatorInt);ValidatorFloat.prototype.correctValue=function(v){var sep=CommonHelper.getDecimalSeparator();if(sep!="."){v=String(v).replace(sep,".");}
return parseFloat(v);} 
function ValidatorEnum(options){options=options||{};this.setEnumValues(options.enumValues);ValidatorEnum.superclass.constructor.call(this,options);}
extend(ValidatorEnum,Validator);ValidatorEnum.prototype.m_enumValues;ValidatorEnum.prototype.setEnumValues=function(v){this.m_enumValues=v;}
ValidatorEnum.prototype.getEnumValues=function(){return this.m_enumValues;}
ValidatorEnum.prototype.validate=function(val){ValidatorEnum.superclass.validate.call(this,val);var vals=this.getEnumValues();if(vals!==undefined&&val!=undefined&&vals.indexOf(val)<0){throw new Error(this.ER_INVALID);}} 
function ValidatorJSON(options){ValidatorJSON.superclass.constructor.call(this,options);}
extend(ValidatorJSON,Validator);ValidatorJSON.prototype.correctValue=function(v){return CommonHelper.unserialize(v);} 
function ValidatorArray(options){ValidatorArray.superclass.constructor.call(this,options);}
extend(ValidatorArray,Validator);ValidatorArray.prototype.correctValue=function(v){return eval(v);} 
function ValidatorEmail(options){ValidatorEmail.superclass.constructor.call(this,options);}
extend(ValidatorEmail,ValidatorString);ValidatorEmail.prototype.validate=function(val){ValidatorEmail.superclass.validate.call(this,val);var re=/\S+@\S+\.\S+/;if(!re.test(val)){throw new Error(this.ER_INVALID);}} 
function ValidatorXML(options){ValidatorXML.superclass.constructor.call(this,options);}
extend(ValidatorXML,Validator);ValidatorXML.prototype.correctValue=function(v){return v;} 
function Field(id,options){options=options||{};if(!options.validator){throw new Error(CommonHelper.format(this.ER_NO_VALIDATOR,[id]));}
this.setId(id);this.setValidator(options.validator);this.setDataType(options.dataType);this.setAlias(options.alias);if(options.defValue!=undefined){this.setDefValue(options.defValue);}
else{this.m_defValue=undefined;}
if(options.value!=undefined){this.setValue(options.value);}
else{this.m_value=undefined;}
this.setPrimaryKey((options.primaryKey!=undefined)?options.primaryKey:false);this.setAutoInc((options.autoInc!=undefined)?options.autoInc:false);}
Field.prototype.DT_INT=0;Field.prototype.DT_INT_UNSIGNED=1;Field.prototype.DT_STRING=2;Field.prototype.DT_FLOAT_UNSIGNED=3;Field.prototype.DT_FLOAT=4;Field.prototype.DT_CUR_RUR=5;Field.prototype.DT_CUR_USD=6;Field.prototype.DT_BOOL=7;Field.prototype.DT_TEXT=8;Field.prototype.DT_DATETIME=9;Field.prototype.DT_DATE=10;Field.prototype.DT_TIME=11;Field.prototype.DT_OBJECT=12;Field.prototype.DT_FILE=13;Field.prototype.DT_PWD=14;Field.prototype.DT_EMAIL=15;Field.prototype.DT_ENUM=16;Field.prototype.DT_GEOM_POLYGON=17;Field.prototype.DT_GEOM_POINT=18;Field.prototype.DT_INTERVAL=19;Field.prototype.DT_DATETIMETZ=20;Field.prototype.DT_JSON=21;Field.prototype.DT_JSONB=22;Field.prototype.DT_ARRAY=23;Field.prototype.DT_XML=24;Field.prototype.DT_INT_BIG=25;Field.prototype.DT_INT_SMALL=26;Field.prototype.DT_BYTEA=27;Field.prototype.OLD_PREF="old_";Field.prototype.m_id;Field.prototype.m_alias;Field.prototype.m_value;Field.prototype.m_primaryKey;Field.prototype.m_defValue;Field.prototype.m_validator;Field.prototype.m_dataType;Field.prototype.setId=function(id){this.m_id=id;}
Field.prototype.getId=function(){return this.m_id;}
Field.prototype.getOldId=function(){return this.OLD_PREF+this.m_id;}
Field.prototype.setPrimaryKey=function(v){this.m_primaryKey=v;}
Field.prototype.getPrimaryKey=function(){return this.m_primaryKey;}
Field.prototype.setDefValue=function(v){v=this.m_validator.correctValue(v);this.m_validator.validate(v);this.m_defValue=v;}
Field.prototype.getDefValue=function(){return this.m_defValue;}
Field.prototype.setAlias=function(v){this.m_alias=v;}
Field.prototype.getAlias=function(){return this.m_alias||this.m_id;}
Field.prototype.setValidator=function(v){this.m_validator=v;}
Field.prototype.getValidator=function(){return this.m_validator;}
Field.prototype.setDataType=function(v){this.m_dataType=v;}
Field.prototype.getDataType=function(){return this.m_dataType;}
Field.prototype.setValue=function(v){try{v=this.m_validator.correctValue(v);this.m_validator.validate(v);}
catch(e){throw new Error(CommonHelper.format(this.ER_SET_VAL,[this.getAlias(),e.message]));}
this.m_value=v;}
Field.prototype.resetValue=function(){var req=this.m_validator.getRequired();if(req)this.m_validator.setRequired(false);this.setValue(null);this.m_validator.setRequired(req);}
Field.prototype.validate=function(value){this.getValidator().validate(value);}
Field.prototype.getValue=function(arInd){if(arInd&&this.m_value&&this.m_value.length>arInd){return this.m_value[arInd];}
else{return this.m_value;}}
Field.prototype.getValueXHR=function(){return this.getValue();}
Field.prototype.isNull=function(){return((this.getValue()===null)&&(this.getDefValue()===null));}
Field.prototype.isSet=function(){return(this.getValue()!==undefined||this.getDefValue()!==undefined);}
Field.prototype.setAutoInc=function(v){this.m_autoInc=v;}
Field.prototype.getAutoInc=function(){return this.m_autoInc;}
Field.prototype.unsetValue=function(){this.m_value=undefined;} 
function FieldString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);options.dataType=this.DT_STRING;FieldString.superclass.constructor.call(this,id,options);}
extend(FieldString,Field); 
function FieldEnum(id,options){options.dataType=this.DT_ENUM;options.validator=options.validator||new ValidatorEnum(options);options.dataType=this.DT_ENUM;FieldEnum.superclass.constructor.call(this,id,options);}
extend(FieldEnum,FieldString); 
function FieldBool(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.dataType=this.DT_BOOL;FieldBool.superclass.constructor.call(this,id,options);}
extend(FieldBool,Field);FieldBool.prototype.getValueXHR=function(){return((this.getValue())?"1":"0");} 
function FieldDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.dataType=options.dataType||this.DT_DATE;FieldDate.superclass.constructor.call(this,id,options);}
extend(FieldDate,Field);FieldDate.prototype.XHR_FORMAT="Y-m-d";FieldDate.prototype.getValueXHR=function(){return DateHelper.format(this.getValue(),this.XHR_FORMAT);} 
function FieldDateTime(id,options){options=options||{};options.dataType=options.dataType||this.DT_DATETIME;FieldDateTime.superclass.constructor.call(this,id,options);}
extend(FieldDateTime,FieldDate);FieldDateTime.prototype.XHR_FORMAT="Y-m-dTH:i:s"; 
function FieldDateTimeTZ(id,options){options=options||{};options.dataType=this.DT_DATETIMETZ;this.XHR_FORMAT="Y-m-dTH:i:s"+window.getApp().getTimeZoneOffsetStr();FieldDateTimeTZ.superclass.constructor.call(this,id,options);}
extend(FieldDateTimeTZ,FieldDateTime); 
function FieldTime(id,options){options=options||{};options.dataType=this.DT_TIME;options.validator=options.validator||new ValidatorTime(options);FieldTime.superclass.constructor.call(this,id,options);}
extend(FieldTime,FieldDate);FieldTime.prototype.XHR_FORMAT="H:i:s"; 
function FieldInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT;FieldInt.superclass.constructor.call(this,id,options);}
extend(FieldInt,Field); 
function FieldBigInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT_BIG;FieldBigInt.superclass.constructor.call(this,id,options);}
extend(FieldBigInt,Field); 
function FieldSmallInt(id,options){options=options||{};options.validator=options.validator||new ValidatorInt(options);options.dataType=this.DT_INT_SMALL;FieldSmallInt.superclass.constructor.call(this,id,options);}
extend(FieldSmallInt,Field); 
function FieldFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);options.dataType=this.DT_FLOAT;FieldFloat.superclass.constructor.call(this,id,options);}
extend(FieldFloat,Field); 
function FieldPassword(id,options){options=options||{};options.dataType=this.DT_PWD;FieldPassword.superclass.constructor.call(this,id,options);}
extend(FieldPassword,FieldString); 
function FieldText(id,options){options=options||{};options.dataType=this.DT_TEXT;FieldText.superclass.constructor.call(this,id,options);}
extend(FieldText,FieldString); 
function FieldInterval(id,options){options=options||{};options.dataType=this.DT_INTERVAL;FieldInterval.superclass.constructor.call(this,id,options);}
extend(FieldInterval,FieldString); 
function FieldJSON(id,options){options=options||{};options.validator=options.validator||new ValidatorJSON(options);options.dataType=this.DT_JSON;FieldJSON.superclass.constructor.call(this,id,options);}
extend(FieldJSON,Field);FieldJSON.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));}
FieldJSON.prototype.setValue=function(id,v){if(!v&&typeof(id)=="object"){this.m_value=id;}
else if(!v&&typeof(id)=="string"&&id.length){this.m_value=CommonHelper.unserialize(id);}
else if(v){this.m_value=this.m_value||{};this.m_value[id]=v;}}
FieldJSON.prototype.isEmpty=function(val,checkNull){val=(val&&val.getKeys)?val.getKeys():val;var r=(val==undefined);if(!r){r=true;for(v in val){if(checkNull&&val[v]!==null||!checkNull&&val[v]!==undefined){r=false;break;}}}
return r;}
FieldJSON.prototype.isNull=function(){var r=this.isEmpty(this.getValue(),true);if(r){r=this.isEmpty(this.getDefValue(),true);}
return r;}
FieldJSON.prototype.isSet=function(){var r=this.isEmpty(this.getValue(),false);if(r){r=this.isEmpty(this.getDefValue(),false);}
return!r;} 
function FieldJSONB(id,options){options=options||{};options.dataType=this.DT_JSONB;FieldJSONB.superclass.constructor.call(this,id,options);}
extend(FieldJSONB,FieldJSON); 
function FieldArray(id,options){options=options||{};options.validator=options.validator||new ValidatorArray(options);options.dataType=this.DT_ARRAY;FieldArray.superclass.constructor.call(this,id,options);}
extend(FieldArray,Field);FieldJSON.prototype.getValueXHR=function(){return(CommonHelper.serialize(this.getValue()));} 
function FieldXML(id,options){options=options||{};options.validator=options.validator||new ValidatorXML(options);options.dataType=this.DT_XML;FieldXML.superclass.constructor.call(this,id,options);}
extend(FieldXML,Field); 
function FieldBytea(id,options){options=options||{};options.validator=options.validator||new Validator(options);options.dataType=this.DT_BYTEA;FieldBytea.superclass.constructor.call(this,id,options);}
extend(FieldBytea,Field); 
function ModelFilter(options){options=options||{};this.setFilters(options.filters);}
ModelFilter.prototype.m_filters;ModelFilter.prototype.getFilterVal=function(filter){var ctrl=filter.binding.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[id]));}
var f=filter.binding.getField();var res={"field":f.getId(),"sign":filter.sign,"val":undefined,"icase":undefined,"incorrect_val":false};if(!ctrl.isNull()){ctrl.setValid();try{var fv;if(!ctrl.getIsRef()){fv=ctrl.getValue();}
else{var keys=ctrl.getKeys();for(var kid in keys){fv=keys[kid];break;}}
if(ctrl.getValidator()instanceof ValidatorDate&&(f instanceof FieldDateTime||f instanceof FieldDateTimeTZ)&&ctrl.getTimeValueStr&&ctrl.getTimeValueStr()){fv=new Date(fv.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr()));}
f.setValue(fv);}
catch(e){ctrl.setNotValid(e.message);res.incorrect_val=true;}
res.val=f.getValueXHR();if(filter.sign=="lk"){res.val=(filter.lwcards?"%":"")+res.val+(filter.rwcards?"%":"")}
res.icase=filter.icase?"1":"0";}
else if(ctrl.getRequired()||f.getValidator().getRequired()){ctrl.setNotValid(f.getValidator().ER_EMPTY);res.incorrect_val=true;}
return res;}
ModelFilter.prototype.setFilter=function(id,filter){this.m_filters[id]=filter;}
ModelFilter.prototype.getFilter=function(id){return this.m_filters[id];}
ModelFilter.prototype.getFilters=function(){return this.m_filters;}
ModelFilter.prototype.setFilters=function(v){this.m_filters=v;}
ModelFilter.prototype.applyFilters=function(grid){var set_cnt=0;for(var id in this.m_filters){if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var struc=this.getFilterVal(this.m_filters[id].bindings[i]);if(!struc.incorrect_val&&struc.val!==undefined){grid.setFilter(struc);set_cnt++;}
else{grid.unsetFilter(struc);}}}
else{var struc=this.getFilterVal(this.m_filters[id]);if(!struc.incorrect_val&&struc.val!==undefined){grid.setFilter(struc);set_cnt++;}
else{grid.unsetFilter(struc);}}}
return set_cnt;}
ModelFilter.prototype.applyFiltersToPublicMethod=function(pm){var set_cnt=0;var contr=pm.getController();var s_fields,s_signs,s_vals,s_icases;var sep=contr.PARAM_FIELD_SEP_VAL;var incorrect_val=false;for(var id in this.m_filters){if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var struc=this.getFilterVal(this.m_filters[id].bindings[i]);if(struc.incorrect_val){incorrect_val=true;}
else{s_fields=((!s_fields)?"":s_fields+sep)+struc.field;s_signs=((!s_signs)?"":s_signs+sep)+struc.sign;s_vals=((!s_vals)?"":s_vals+sep)+struc.val;s_icases=((!s_icases)?"":s_icases+sep)+(struc.icase||"0");set_cnt++;}}}
else{var struc=this.getFilterVal(this.m_filters[id]);if(struc.incorrect_val){incorrect_val=true;}
else{s_fields=((!s_fields)?"":s_fields+sep)+struc.field;s_signs=((!s_signs)?"":s_signs+sep)+struc.sign;s_vals=((!s_vals)?"":s_vals+sep)+struc.val;s_icases=((!s_icases)?"":s_icases+sep)+(struc.icase||"0");set_cnt++;}}}
if(incorrect_val){throw Error(this.ER_INVALID_CTRL);}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);pm.setFieldValue(contr.PARAM_FIELD_SEP,sep);return set_cnt;}
ModelFilter.prototype.resetFilters=function(grid){for(var id in this.m_filters){var bind=this.m_filters[id].binding;var ctrl=bind.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[id]));}
ctrl.reset();if(this.m_filters[id].bindings){for(var i=0;i<this.m_filters[id].bindings.length;i++){var filter=this.m_filters[id].bindings[i];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}
else{var filter=this.m_filters[id];grid.unsetFilter({"field":filter.binding.getField().getId(),"sign":filter.sign});}}}
ModelFilter.prototype.serialize=function(){return CommonHelper.serialize(this.getValue());}
ModelFilter.prototype.getValue=function(){var o={};for(var id in this.m_filters){var ctrl=this.m_filters[id].binding.getControl();if(ctrl&&!ctrl.isNull()){if(this.m_filters[id].bindings){o[id]={"value":ctrl.getValue()};o[id].bindings=[];for(var i=0;i<this.m_filters[id].bindings.length;i++){var ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl&&!ctrl.isNull()){var v=ctrl.getValue();if(v instanceof Date){v=DateHelper.format(v,FieldDateTime.XHR_FORMAT);}
o[id].bindings[i]={"field":this.m_filters[id].bindings[i].binding.getField().getId(),"sign":this.m_filters[id].bindings[i].sign,"value":v};}}}
else{var v=ctrl.getValue();if(v instanceof Date){v=DateHelper.format(v,FieldDateTime.XHR_FORMAT);}
o[id]={"field":this.m_filters[id].binding.getField().getId(),"sign":this.m_filters[id].sign,"value":v};}}}
return o;}
ModelFilter.prototype.unserialize=function(str){return this.setValue(CommonHelper.unserialize(str));}
ModelFilter.prototype.setValue=function(o){var set_cnt=0;for(var id in this.m_filters){var ctrl=this.m_filters[id].binding.getControl();if(ctrl){if(o[id]){if(this.m_filters[id].bindings){if(o[id].value.period)ctrl.setValue(o[id].value.period);for(var i=0;i<this.m_filters[id].bindings.length;i++){ctrl=this.m_filters[id].bindings[i].binding.getControl();if(ctrl){if(o[id].bindings[i]){ctrl.setInitValue(o[id].bindings[i].value);set_cnt++;}
else{ctrl.reset();}}}}
else{ctrl.setInitValue(o[id].value);set_cnt++;}}
else{ctrl.reset();}}}
return set_cnt;} 
function RefType(options){options=options||{};this.setKeys(options.keys);this.setDescr(options.descr);this.setDataType(options.dataType);}
RefType.prototype.m_keys;RefType.prototype.m_descr;RefType.prototype.m_dataType;RefType.prototype.setKeys=function(v){this.m_keys=v;}
RefType.prototype.getKeys=function(){return this.m_keys;}
RefType.prototype.setDescr=function(v){this.m_descr=v;}
RefType.prototype.getDescr=function(){return this.m_descr;}
RefType.prototype.setDataType=function(v){this.m_dataType=v;}
RefType.prototype.getDataType=function(){return this.m_dataType;}
RefType.prototype.getKey=function(v){var val;if(this.m_keys&&v){val=this.m_keys[v];}
else if(this.m_keys&&!v){for(var k in this.m_keys){val=this.m_keys[k];break;}}
return val;}
RefType.prototype.isNull=function(){var k=this.getKeys();var r=(k==undefined||CommonHelper.isEmpty(k));if(!r){for(v in k){r=(k[v]===null);if(r){break;}}}
return r;}
RefType.prototype.toJSON=function(){return{"keys":this.getKeys(),"descr":this.getDescr(),"dataType":this.getDataType()};} 
FatalException.prototype.HEADER="Критическая ошибка";ServConnector.prototype.ER_STATUS0="Попытка соединения не удалась";ServConnector.prototype.ER_NO_RESP_MODEL="Неверный ответ сервера";Model.prototype.ER_NO_MODEL="Модель % не найдена.";Model.prototype.ER_NO_FIELD="Поле % модели % не найдено.";Model.prototype.ER_NO_FIELDS="Поля модели % не определены.";Model.prototype.ER_LOCKED="Модель заблокирована.";Model.prototype.ER_REС_NOT_FOUND="Запись не найдена.";Validator.prototype.ER_EMPTY="пустое значение";Validator.prototype.ER_TOO_LONG="значение слишком длинное";Validator.prototype.ER_TOO_SHORT="значение слишком короткое";Validator.prototype.ER_INVALID="неверное значение.";ValidatorBool.prototype.TRUE_VALS=["да","д","истина"];ValidatorInt.prototype.ER_VIOL_NOT_ZERO="значение равно нулю";ValidatorInt.prototype.ER_VIOL_MAX="значение больше %";ValidatorInt.prototype.ER_VIOL_MIN="значение меньше %";ValidatorInt.prototype.ER_VIOL_UNSIGNED="значение меньше нуля";Field.prototype.ER_NO_VALIDATOR="Поле:%, не задан валидатор.";Field.prototype.ER_SET_VAL="Ошибка установки значения, поле:%, %";DateHelper.MON_LIST=Array("Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря");DateHelper.WEEK_LIST=Array("Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота");DateHelper.FORMAT_STR="d/m/Y H:i:s";EventHelper.DEL_ERR="Невозможно удалить событие.";Response.prototype.ERR_NO_MODEL="Модель % не найдена.";PublicMethod.prototype.ER_NO_FIELD="Контроллер %, метод %, поле % не найдено.";PublicMethod.prototype.ER_NO_CONTROLLER="Метод %, не задан контроллер.";Controller.prototype.ER_NO_METHOD="Метод % контроллера % не найден.";Controller.prototype.ER_EMPTY="Контроллер %, метод %, поле %, не задано обязательное значение.";ControllerObjClient.prototype.ER_UNSUPPORTED_CLIENT_MODEL="Не поддерживоемый тип клиентской модели.";ModelFilter.prototype.ER_NO_CTRL="Фильтр %, не указан контрол.";ModelFilter.prototype.ER_INVALID_CTRL="Есть неправильные значения в фильтре."; 
function DataBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_model=options.model;this.m_keyIds=options.keyIds;}
DataBinding.prototype.m_control;DataBinding.prototype.m_field;DataBinding.prototype.m_fieldId;DataBinding.prototype.m_model;DataBinding.prototype.m_keyIds;DataBinding.prototype.getControl=function(){return this.m_control;}
DataBinding.prototype.setControl=function(v){this.m_control=v;}
DataBinding.prototype.getField=function(){return this.m_field;}
DataBinding.prototype.setField=function(v){this.m_field=v;}
DataBinding.prototype.getFieldId=function(){return this.m_fieldId;}
DataBinding.prototype.setFieldId=function(v){this.m_fieldId=v;}
DataBinding.prototype.getModel=function(){return this.m_model;}
DataBinding.prototype.setModel=function(v){this.m_model=v;}
DataBinding.prototype.getKeyIds=function(){return(this.m_keyIds)?this.m_keyIds:((this.m_control&&this.m_control.getKeyIds)?this.m_control.getKeyIds():null);}
DataBinding.prototype.setKeyIds=function(v){this.m_keyIds=v;} 
function Command(id,options){if(typeof(id)=="object"){options=id;if(!options.id){options.id=options.publicMethod.getId();}}
else{options=options||{};options.id=id;}
this.setId(options.id);this.setControl(options.control);this.setPublicMethod(options.publicMethod);this.setBindings(options.bindings||[]);this.setAsync(options.async);}
Command.prototype.m_id;Command.prototype.m_control;Command.prototype.m_publicMethod;Command.prototype.m_bindings;Command.prototype.m_async;Command.prototype.getPublicMethod=function(){return this.m_publicMethod;}
Command.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
Command.prototype.getBindings=function(){return this.m_bindings;}
Command.prototype.setBindings=function(v){this.m_bindings=v;}
Command.prototype.addBinding=function(binding){this.m_bindings.push(binding);}
Command.prototype.getAsync=function(){return this.m_async;}
Command.prototype.setAsync=function(v){this.m_async=v;}
Command.prototype.getControl=function(){return this.m_control;}
Command.prototype.setControl=function(v){this.m_control=v;}
Command.prototype.getId=function(){return this.m_id;}
Command.prototype.setId=function(v){this.m_id=v;} 
function CommandBinding(options){options=options||{};this.m_control=options.control;this.m_field=options.field;this.m_fieldId=options.fieldId;if(!this.m_fieldId&&!this.m_field&&this.m_control){if(this.m_control.getKeyIds&&this.m_control.getKeyIds().length){this.m_fieldId=this.m_control.getKeyIds()[0];}
else{this.m_fieldId=this.m_control.getName();}}}
CommandBinding.prototype.m_control;CommandBinding.prototype.m_field;CommandBinding.prototype.m_fieldId;CommandBinding.prototype.getControl=function(){return this.m_control;}
CommandBinding.prototype.setControl=function(v){this.m_control=v;}
CommandBinding.prototype.getField=function(){return this.m_field;}
CommandBinding.prototype.setField=function(v){this.m_field=v;}
CommandBinding.prototype.getFieldId=function(){return this.m_fieldId;}
CommandBinding.prototype.setFieldId=function(v){this.m_fieldId=v;} 
function Control(id,tagName,options){options=options||{};tagName=tagName||this.DEF_TAG_NAME;options.template=options.template||window.getApp().getTemplate(this.constructor.name);this.setTemplateOptions(options.templateOptions);options.attrs=options.attrs||{};this.m_node=(id)?CommonHelper.nd(id,this.getWinObjDocument()):null;if(this.m_node){for(var i=0;i<this.m_node.attributes.length;i++){if(this.m_node.attributes[i].name.toLowerCase()=="options"){var html_opts=JSON.parse(this.m_node.attributes[i].value.replace(new RegExp("'",'g'),'"'));for(var html_opt_id in html_opts){options[html_opt_id]=html_opts[html_opt_id];}}
else{options.attrs[this.m_node.attributes[i].name]=this.m_node.attributes[i].value;}}
if(options.template||options.html){var _html=(options.html!=undefined)?options.html:this.getTemplateHTML(options.template,id);var tempDiv=document.createElement("DIV");tempDiv.className=this.CLASS_INVISIBLE;tempDiv.innerHTML=(options.html!=undefined)?options.html:this.getTemplateHTML(options.template,id);var new_node=DOMHelper.firstChildElement(tempDiv);this.m_node.parentNode.insertBefore(new_node,this.m_node);this.m_node.parentNode.removeChild(this.m_node);this.m_node=new_node;}}
else if(options.template==undefined&&options.html==undefined){try{this.m_node=document.createElement(tagName);}
catch(e){this.m_node=document.createElement("DIV");}
this.setId(id);}
else{this.m_tempDiv=document.createElement("DIV");this.m_tempDiv.className=this.CLASS_INVISIBLE;this.m_tempDiv.innerHTML=(options.html!=undefined)?options.html:this.getTemplateHTML(options.template,id);this.m_node=DOMHelper.lastChildElement(this.m_tempDiv);document.body.appendChild(this.m_tempDiv);}
this.setClassName(options.className);if(options.value!=undefined){this.setValue(options.value);}
if(options.name){options.attrs.name=options.name;}
if(!options.attrs.name&&id){var id_ar=id.split(this.NAMESPACE_SEP);if(id_ar.length){options.attrs.name=id_ar[id_ar.length-1];}
else{options.attrs.name=id;}}
options.attrs.maxlength=options.attrs.maxlength||options.maxLength||options.maxlength;options.attrs.placeholder=options.attrs.placeholder||options.placeholder;options.attrs.title=options.attrs.title||options.title;options.attrs.autofocus=options.attrs.autofocus||((options.focus||options.autofocus||options.focused)?"autofocus":undefined);options.attrs.tabIndex=options.attrs.tabIndex||options.tabIndex;if(options.attrs.disabled&&options.attrs.disabled==this.ATTR_DISABLED){options.enabled=false;}
this.setEnabled((options.enabled!=undefined)?options.enabled:true);this.setVisible((options.visible!=undefined)?options.visible:true);if(options.required!=undefined){this.setRequired(options.required);}
for(var attr in options.attrs){if(attr!="disabled"){var av;if(attr=="class"){av=DOMHelper.getAttr("class")||"";av=av+((av=="")?"":" ")+options.attrs[attr];}
else if(attr=="style"){av=DOMHelper.getAttr("style")||"";av=av+options.attrs[attr];}
else{av=options.attrs[attr];}
this.setAttr(attr,av);}}
this.setOnValueChange(options.onValueChange);this.setEvents(options.events);}
Control.prototype.DEF_TAG_NAME="DIV";Control.prototype.ATTR_DISABLED="disabled";Control.prototype.ATTR_REQ="required";Control.prototype.CLASS_INVISIBLE="hidden";Control.prototype.NAMESPACE_SEP=":";Control.prototype.m_node;Control.prototype.m_events;Control.prototype.m_eventFuncs;Control.prototype.m_onValueChange;Control.prototype.m_locked;Control.prototype.m_beforeLockEnabled;Control.prototype.m_html;Control.prototype.correctEvId=function(ev){var id=ev.toLowerCase();if(id.substring(0,2)=="on"){id=id.substring(2);}
return id;}
Control.prototype.eventsToDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);var self=this;if(this.m_eventFuncs[id]){EventHelper.del(this.m_node,id,this.m_eventFuncs[id],true);}
this.m_eventFuncs[id]=function(e){self.m_events[ev].call(self,e);};EventHelper.add(this.m_node,id,this.m_eventFuncs[id],true);}}
Control.prototype.eventsFromDOM=function(){for(var ev in this.m_events){var id=this.correctEvId(ev);if(this.m_eventFuncs[id]){EventHelper.del(this.m_node,id,this.m_eventFuncs[id],true);}}}
Control.prototype.nodeToDOM=function(parent,beforeNode){if(this.m_tempDiv){DOMHelper.setParent(this.m_node,parent);DOMHelper.delNode(this.m_tempDiv);}
else{var n=CommonHelper.nd(this.getId(),this.getWinObjDocument());if(!n&&!parent){throw new Error("Neither node nor parent found! ID="+this.getId());}
else if(!n){if(beforeNode){parent.insertBefore(this.m_node,beforeNode);}
else{parent.appendChild(this.m_node);}}}
if(this.getAttr("autofocus")){this.focus();}}
Control.prototype.setText=function(val){if(this.m_node.childNodes!=undefined&&this.m_node.childNodes.length){this.m_node.childNodes[0].nodeValue=val;}
else{var tn=document.createTextNode(val);if(this.m_node.nodeName=="IMG"){}
else{this.m_node.appendChild(tn);}}}
Control.prototype.getText=function(){if(this.m_node.childNodes&&this.m_node.childNodes.length){return this.m_node.childNodes[0].nodeValue;}}
Control.prototype.valueChanged=function(){if(this.m_onValueChange){this.m_onValueChange.call(this);}}
Control.prototype.setId=function(id){if(id)this.m_node.id=id;}
Control.prototype.getId=function(){return DOMHelper.getAttr(this.getNode(),"id");}
Control.prototype.setTagName=function(v){if(this.m_node.nodeName!=v){this.m_node.nodeName=v;}}
Control.prototype.setName=function(v){DOMHelper.setAttr(this.getNode(),"name",v);}
Control.prototype.getName=function(){return DOMHelper.getAttr(this.getNode(),"name");}
Control.prototype.setTabIndex=function(v){DOMHelper.setAttr(this.getNode(),"tabindex",v);}
Control.prototype.getTabIndex=function(){return DOMHelper.getAttr(this.getNode(),"tabindex");}
Control.prototype.setEnabled=function(v){if(v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}}
Control.prototype.getEnabled=function(){return!(DOMHelper.getAttr(this.getNode(),this.ATTR_DISABLED));}
Control.prototype.setVisible=function(v){if(v){DOMHelper.delClass(this.m_node,this.CLASS_INVISIBLE);}
else{DOMHelper.addClass(this.m_node,this.CLASS_INVISIBLE);}}
Control.prototype.setRequired=function(v){if(!v){DOMHelper.delAttr(this.m_node,this.ATTR_REQ);}
else{DOMHelper.addAttr(this.m_node,this.ATTR_REQ,this.ATTR_REQ);}}
Control.prototype.getRequired=function(){return(DOMHelper.getAttr(this.m_node,this.ATTR_REQ)!=undefined);}
Control.prototype.getVisible=function(){return!DOMHelper.hasClass(this.m_node,this.CLASS_INVISIBLE);}
Control.prototype.getNode=function(){return this.m_node;}
Control.prototype.appendToNode=function(parent){parent.appendChild(this.m_node);}
Control.prototype.setValue=function(val){this.setText(val);this.valueChanged();}
Control.prototype.getValue=function(){return this.getText();}
Control.prototype.toDOMBefore=function(node){this.nodeToDOM(node.parentNode,node);this.eventsToDOM();}
Control.prototype.toDOMAfter=function(node){var sibl=node.nextSibling;var p=node.parentNode;if(p&&sibl){p.insertBefore(this.m_node,sibl);}
else if(p){p.appendChild(this.m_node);}
this.eventsToDOM();}
Control.prototype.toDOMInstead=function(node){node.parentNode.replaceChild(this.m_node,node);this.eventsToDOM();}
Control.prototype.toDOM=function(parent){this.nodeToDOM(parent);this.eventsToDOM();}
Control.prototype.setAttr=function(name,value){if(value!=undefined){DOMHelper.setAttr(this.m_node,name,value);}}
Control.prototype.getAttr=function(name){return DOMHelper.getAttr(this.m_node,name);}
Control.prototype.delAttr=function(name){DOMHelper.delAttr(name);}
Control.prototype.setClassName=function(className){if(className&&className.length>0){DOMHelper.addClass(this.m_node,className);}}
Control.prototype.getClassName=function(){return this.m_node.className;}
Control.prototype.delDOM=function(){DOMHelper.delNode(this.m_node);}
Control.prototype.setWinObj=function(winObj){this.m_winObj=winObj;}
Control.prototype.getWinObj=function(winObj){return this.m_winObj;}
Control.prototype.getWinObjDocument=function(){if(this.m_winObj&&this.m_winObj.getWindowForm){return this.m_winObj.getWindowForm().document;}
else{return window.document;}}
Control.prototype.setEvents=function(e){this.m_events=e;this.m_eventFuncs={};}
Control.prototype.getEvents=function(){return this.m_events;}
Control.prototype.getEvent=function(id){return this.m_events[id];}
Control.prototype.focus=function(){if(this.m_node.focus&&this.getEnabled()){this.m_node.focus();}}
Control.prototype.serialize=function(o){var o=o||{};o.value=this.getValue();for(var a in this.m_node.attributes){if(typeof this.m_node.attributes[a]!="object"&&typeof this.m_node.attributes[a]!="function"){o[a]=this.m_node.attributes[a];}}
return CommonHelper.serialize(o);}
Control.prototype.unserialize=function(str){var o=CommonHelper.unserialize(str);for(var a in o){if(a=="value")continue;this.m_node.attributes[a]=o[a];}
if(o.value){this.setValue(o.value);}
return o;}
Control.prototype.getHtml=function(){return this.m_node.innerHTML;}
Control.prototype.setHtml=function(v){if(v){this.m_node.innerHTML=v;this.m_html=v;}}
Control.prototype.getTemplateHTML=function(t,nId){var v_opts=(this.m_templateOptions)?CommonHelper.clone(this.m_templateOptions):{};v_opts.id=((nId)?nId:this.getId());v_opts.bsCol=window.getBsCol(),Mustache.parse(t);return Mustache.render(t,v_opts);}
Control.prototype.setTemplate=function(v){if(v){this.setHtml(this.getTemplateHTML(v));}}
Control.prototype.getTemplateOptions=function(){return this.m_templateOptions;}
Control.prototype.setTemplateOptions=function(v){this.m_templateOptions=v;}
Control.prototype.getOnValueChange=function(){return this.m_onValueChange;}
Control.prototype.setOnValueChange=function(v){this.m_onValueChange=v;}
Control.prototype.setLocked=function(v){if(v){this.m_beforeLockEnabled=this.getEnabled();}
if((v&&this.m_beforeLockEnabled)||(!v&&this.m_beforeLockEnabled)){if(!v){DOMHelper.delAttr(this.getNode(),this.ATTR_DISABLED);}
else{DOMHelper.setAttr(this.getNode(),this.ATTR_DISABLED,this.ATTR_DISABLED);}}
this.m_locked=v;}
Control.prototype.getLocked=function(){return this.m_locked;} 
Control.prototype.ER_NO_PARENT="Контрол %, родитель не определен.";Control.prototype.ER_NO_AP="Контрол %, параметр app не задан."; 
function ControlContainer(id,tagName,options){if(!id){id=CommonHelper.uniqid();}
options=options||{};ControlContainer.superclass.constructor.call(this,id,tagName,options);this.m_elements={};if(options.elements){this.addElements(options.elements);}
if(options.addElement){options.addElement.call(this);}}
extend(ControlContainer,Control);ControlContainer.prototype.m_elements;ControlContainer.prototype.elementExists=function(id){return(this.m_elements[id]!=undefined);}
ControlContainer.prototype.checkElement=function(id){if(!this.elementExists(id)){throw new Error(CommonHelper.format(this.ER_NO_ELEMENT,Array(id,this.getId())));}
return true;}
ControlContainer.prototype.isEmpty=function(){return CommonHelper.isEmpty(this.m_elements);}
ControlContainer.prototype.getElement=function(id){return this.m_elements[id];}
ControlContainer.prototype.getElements=function(){return this.m_elements;}
ControlContainer.prototype.getElementByIndex=function(ind){var i=0;for(var k in this.m_elements){if(i==ind){return this.m_elements[k];}
i++;}}
ControlContainer.prototype.setElement=function(id,elem){this.m_elements[id||CommonHelper.uniqid()]=elem;}
ControlContainer.prototype.delElement=function(elName){var res=false;for(var elem_id in this.m_elements){if(this.m_elements[elem_id]){if(this.m_elements[elem_id].getName()==elName){this.m_elements[elem_id].delDOM();delete this.m_elements[elem_id];this.m_elements[elem_id]=undefined;res=true;break;}}}
return res;}
ControlContainer.prototype.addElement=function(ctrl){if(ctrl)this.setElement(ctrl.getName(),ctrl);}
ControlContainer.prototype.addElements=function(a){for(var i=0;i<a.length;i++){this.addElement(a[i]);}}
ControlContainer.prototype.appendToNode=function(parent){for(var elem_id in this.m_elements){this.m_elements[elem_id].appendToNode(this.m_node);}
parent.appendChild(this.m_node);}
ControlContainer.prototype.elementsToDOM=function(){var elem;var focus_elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];if(elem){elem.toDOM(this.m_node);if(!focus_elem&&elem.getAttr("autofocus")){focus_elem=elem;}}}
return focus_elem;}
ControlContainer.prototype.toDOMAfter=function(node){ControlContainer.superclass.toDOMAfter.call(this,node);this.elementsToDOM();}
ControlContainer.prototype.toDOMBefore=function(node){ControlContainer.superclass.toDOMBefore.call(this,node);this.elementsToDOM();}
ControlContainer.prototype.toDOM=function(parent){var focus_elem=this.elementsToDOM();this.nodeToDOM(parent);if(focus_elem)focus_elem.focus();this.eventsToDOM();}
ControlContainer.prototype.clear=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].delDOM();}
this.m_elements={};}
ControlContainer.prototype.getCount=function(){var len=0;for(var k in this.m_elements)if(this.m_elements[k])len++;return len;}
ControlContainer.prototype.delDOM=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].delDOM();}
ControlContainer.superclass.delDOM.call(this);}
ControlContainer.prototype.setEnabled=function(v){for(var elem_id in this.m_elements){this.m_elements[elem_id].setEnabled(v);}
ControlContainer.superclass.setEnabled.call(this,v);}
ControlContainer.prototype.setLocked=function(v){for(var elem_id in this.m_elements){if(this.m_elements[elem_id])this.m_elements[elem_id].setLocked(v);}
ControlContainer.superclass.setLocked.call(this,v);}
ControlContainer.prototype.serialize=function(){var o={};o.elements={};for(var elem_id in this.m_elements){if(this.m_elements[elem_id]){o.elements[elem_id]=this.m_elements[elem_id].serialize();}}
return ControlContainer.superclass.serialize.call(this,o);}
ControlContainer.prototype.unserialize=function(str){var o=ControlContainer.superclass.unserialize.call(this,str);for(var id in o.elements){if(this.m_elements[id]){this.m_elements[id].unserialize(o.elements[id]);}}} 
ControlContainer.prototype.ER_NO_ELEMENT="Элемент % контейнера % не найден."; 
function View(id,options){options=options||{};if(this.HEAD_TITLE){options.templateOptions=options.templateOptions||{};options.templateOptions.HEAD_TITLE=this.HEAD_TITLE;}
this.setDataBindings(options.dataBindings||[]);this.m_editResult={"newKeys":null,"updated":false};View.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(View,ControlContainer);View.prototype.DEF_TAG_NAME="DIV";View.prototype.m_controlStates;View.prototype.m_dataBindings;View.prototype.m_editResult;View.prototype.onGetData=function(resp){}
View.prototype.setFocus=function(){var set=false,cnt=0;for(var id in this.m_elements){cnt++;if(this.m_elements[id].getAttr("autofocus")){this.m_elements[id].focus();set=true;break;}}
if(!set&&cnt){this.getElementByIndex(0).focus();}}
View.prototype.setReadTempDisabled=function(){this.m_controlStates=[];if(this.m_dataBindings){for(var i=0;i<this.m_dataBindings.length;i++){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){this.m_controlStates.push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":ctrl.getInputEnabled?ctrl.getInputEnabled():true});ctrl.setEnabled(false);}}}}
View.prototype.setReadTempEnabled=function(){if(this.m_controlStates){for(var i=0;i<this.m_controlStates.length;i++){if(this.m_controlStates[i].enabled){this.m_controlStates[i].ctrl.setEnabled(true);}
if(this.m_controlStates[i].ctrl.setInputEnabled)this.m_controlStates[i].ctrl.setInputEnabled(this.m_controlStates[i].inputEnabled);}}}
View.prototype.setError=function(s,delay){window.showError(s,null,delay);}
View.prototype.resetError=function(){window.resetError();}
View.prototype.toDOM=function(parent){View.superclass.toDOM.call(this,parent);this.setFocus();}
View.prototype.getDataBindings=function(){return this.m_dataBindings;}
View.prototype.setDataBindings=function(v){this.m_dataBindings=v;}
View.prototype.addDataBinding=function(binding){this.m_dataBindings.push(binding);}
View.prototype.clearDataBinding=function(){this.setDataBindings([]);} 
function ViewAjx(id,options){options=options||{};this.setCommands(options.commands||{});this.setOnBeforeExecCommand(options.onBeforeExecCommand);ViewAjx.superclass.constructor.call(this,id,options);}
extend(ViewAjx,View);ViewAjx.prototype.m_commands;ViewAjx.prototype.m_cmdCtrlState;ViewAjx.prototype.m_onBeforeExecCommand;ViewAjx.prototype.defineField=function(i){var f=this.m_dataBindings[i].getField();var m=this.m_dataBindings[i].getModel();if(!f&&this.m_dataBindings[i].getFieldId()&&m.fieldExists(this.m_dataBindings[i].getFieldId())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getFieldId()));}
else if(!f&&this.m_dataBindings[i].getControl()&&m.fieldExists(this.m_dataBindings[i].getControl().getName())){this.m_dataBindings[i].setField(m.getField(this.m_dataBindings[i].getControl().getName()));}}
ViewAjx.prototype.onGetData=function(resp,cmd){cmd=(cmd===true)?"copy":cmd;var cmdCopy=(cmd=="copy");var cmdInsert=(cmd=="insert");var models={};for(var i=0;i<this.m_dataBindings.length;i++){var m=this.m_dataBindings[i].getModel();if(!m){throw new Error(CommonHelper.format(this.ER_NO_BINDING_MODEL,[i]));}
var m_id=m.getId();if(models[m_id]==undefined&&resp&&resp.modelExists(m_id)){m.setData(resp.getModelData(m_id));models[m_id]=m.getRowCount();m.getNextRow();}
else if(models[m_id]==undefined&&!resp){models[m_id]=m.getRowCount();if(models[m_id]){m.getNextRow();}}
if(models[m_id]>0){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var init_val=null;var ctrl_format_f=(ctrl.getFormatFunction)?ctrl.getFormatFunction():null;if(ctrl_format_f){init_val=ctrl_format_f.call(ctrl,this.m_dataBindings[i].getModel().getFields());}
else{this.defineField(i);if(this.m_dataBindings[i].getField()&&!(cmdCopy&&this.m_dataBindings[i].getField().getPrimaryKey())){init_val=this.m_dataBindings[i].getField().getValue();}}
if(init_val!=undefined&&(!ctrl.getIsRef||!ctrl.getIsRef())){if(ctrl.setInitValue&&!cmdCopy&&!cmdInsert){ctrl.setInitValue(init_val);}
else{ctrl.setValue(init_val);}}
else if(ctrl.getIsRef&&ctrl.getIsRef()&&this.m_dataBindings[i].getKeyIds()){var init_val_o;if(init_val!=undefined&&typeof(init_val)=="object"){init_val_o=init_val;}
else{var key_ids=this.m_dataBindings[i].getKeyIds();if(!key_ids){throw Error(CommonHelper.format(this.ER_CTRL_KEYS_NOT_BOUND,[ctrl.getName()]));}
var m_keys;if(ctrl.getModelKeyFields){m_keys=ctrl.getModelKeyFields();}
var keys={};for(var n=0;n<key_ids.length;n++){var k_id;if(m_keys){k_id=m_keys[n].getId();}
else{k_id=key_ids[n];}
keys[k_id]=m.getFieldValue(key_ids[n]);}
init_val_o=new RefType({"keys":keys,"descr":init_val,"dataType":undefined});}
if(ctrl.setInitValue&&!cmdCopy&&!cmdInsert){ctrl.setInitValue(init_val_o);}
else{ctrl.setValue(init_val_o);}}}}}
this.setReadTempEnabled();}
ViewAjx.prototype.setTempDisabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl){this.m_cmdCtrlState=cmd_ctrl.getEnabled();cmd_ctrl.setEnabled(false);}}
this.m_controlStates={};this.m_controlStates[cmd]=[];if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();for(var i=0;i<b.length;i++){var ctrl=b[i].getControl();this.m_controlStates[cmd].push({"ctrl":ctrl,"enabled":ctrl.getEnabled(),"inputEnabled":(ctrl.getInputEnabled)?ctrl.getInputEnabled():true});ctrl.setEnabled(false);}}}
ViewAjx.prototype.setTempEnabled=function(cmd){if(this.m_commands[cmd]){var cmd_ctrl=this.m_commands[cmd].getControl();if(cmd_ctrl&&this.m_cmdCtrlState){cmd_ctrl.setEnabled(true);}}
if(this.m_controlStates&&this.m_controlStates[cmd]){for(var i=0;i<this.m_controlStates[cmd].length;i++){if(this.m_controlStates[cmd][i].enabled){this.m_controlStates[cmd][i].ctrl.setEnabled(true);}
if(this.m_controlStates[cmd][i].ctrl.setInputEnabled){this.m_controlStates[cmd][i].ctrl.setInputEnabled(this.m_controlStates[cmd][i].inputEnabled);}}}}
ViewAjx.prototype.getModified=function(cmd){if(this.m_commands[cmd].getBindings()){var b=this.m_commands[cmd].getBindings();for(var i=0;i<b.length;i++){if(b[i].getControl()&&b[i].getControl().getModified()){return true;}}}}
ViewAjx.prototype.validate=function(cmd,validate_res){validate_res=validate_res||{};validate_res.incorrect_vals=false;var pm=this.m_commands[cmd].getPublicMethod();if(!pm){throw Error(this.ER_NO_PM);}
var bindings=this.m_commands[cmd].getBindings();if(bindings&&bindings.length){this.resetError();for(var i=0;i<bindings.length;i++){var bind=bindings[i];var ctrl=bind.getControl();if(!ctrl){throw Error(CommonHelper.format(this.ER_NO_CTRL,[cmd,i]));}
var f=bind.getField();if(!f&&bind.getFieldId()){f=pm.getField(bind.getFieldId());}
else if(!f&&pm.fieldExists(ctrl.getName())){f=pm.getField(ctrl.getName());}
else if(!f){throw Error(CommonHelper.format(this.ER_CTRL_NOT_BOUND,[ctrl.getName()]));}
if(ctrl.getModified&&ctrl.getModified()){if(ctrl.getIsRef&&ctrl.getIsRef()&&!(f.getDataType()==Field.prototype.DT_JSON||f.getDataType()==Field.prototype.DT_JSONB)){var keyIds=ctrl.getKeyIds();if(keyIds.length>=1){f.setValue(ctrl.getKeys()[keyIds[0]]);modified=true;}}
else{var val=ctrl.getValue();if(ctrl.setValid)ctrl.setValid();try{if(ctrl.getValidator&&ctrl.getValidator())ctrl.getValidator().validate(val);if(ctrl.getRequired&&ctrl.getRequired()&&val===null){throw new Error(f.getValidator().ER_EMPTY);}
f.setValue(val);modified=true;}
catch(e){if(ctrl.setNotValid)ctrl.setNotValid(e.message);validate_res.incorrect_vals=true;}}}
else if(ctrl.isNull&&ctrl.isNull()&&(ctrl.getRequired()||f.getValidator().getRequired())&&ctrl.setNotValid){ctrl.setNotValid(f.getValidator().ER_EMPTY);validate_res.incorrect_vals=true;}
else if(ctrl instanceof EditFile){f.resetValue();}
if(validate_res.old_keys&&!validate_res.incorrect_vals&&f.getPrimaryKey()&&pm.fieldExists(f.getOldId())){var init_val=ctrl.getInitValue();if(typeof init_val=="object"){if(init_val instanceof RefType){init_val=init_val.getKey();}
else{for(var init_val_id in init_val){init_val=init_val[init_val_id];break;}}}
validate_res.old_keys[f.getOldId()]=init_val;}}}
return!validate_res.incorrect_vals;}
ViewAjx.prototype.execCommand=function(cmd,sucFunc,failFunc,allFunc){if(!this.m_commands[cmd]){throw Error(this.ER_CMD_NOT_FOUND);}
var pm=this.m_commands[cmd].getPublicMethod();if(!pm){throw Error(this.ER_NO_PM);}
var validate_res={"incorrect_vals":false,"modified":this.getModified(cmd),"old_keys":{}};if(!validate_res.modified){var pm_fields=pm.getFields();for(var fid in pm_fields){if(pm_fields[fid].isSet()){validate_res.modified=true;break;}}}
if(validate_res.modified){this.validate(cmd,validate_res);}
if(validate_res.incorrect_vals){if(failFunc){failFunc.call(this,null,null,this.ER_ERRORS);}
if(allFunc){allFunc.call(this);}}
else if(validate_res.modified){if(!this.m_commands[cmd].getAsync()){this.setTempDisabled(cmd);}
for(oldid in validate_res.old_keys){pm.setFieldValue(oldid,validate_res.old_keys[oldid]);}
var self=this;try{this.beforeExecCommand(cmd,pm);var pm_opts={"async":this.m_commands[cmd].getAsync(),"fail":function(resp,errCode,errStr){self.onRequestFail(failFunc,cmd,resp,errCode,errStr);}};if(!this.m_commands[cmd].getAsync()&&allFunc){pm_opts.all=function(){self.setTempEnabled(cmd);allFunc.call(this);}}
else if(!this.m_commands[cmd].getAsync()&&!allFunc){pm_opts.all=function(){self.setTempEnabled(cmd);}}
else if(this.m_commands[cmd].getAsync()&&allFunc){pm_opts.all=function(){allFunc.call(this);}}
if(sucFunc){pm_opts.ok=function(resp){sucFunc.call(this,resp);}}
pm.run(pm_opts);}
catch(e){this.onRequestFail(failFunc,cmd,null,null,e.message);if(allFunc){allFunc.call(this);}}}
else{if(sucFunc){sucFunc.call(this,null);}
if(allFunc){allFunc.call(this);}}}
ViewAjx.prototype.onRequestFail=function(failFunc,cmd,resp,errCode,errStr){if(failFunc){failFunc.call(this,resp,errCode,errStr);}
else{this.setError(window.getApp().formatError(errCode,errStr));}}
ViewAjx.prototype.getCommands=function(){return this.m_commands;}
ViewAjx.prototype.setCommands=function(v){this.m_commands=v;}
ViewAjx.prototype.addCommand=function(cmd){this.m_commands[cmd.getId()]=cmd;}
ViewAjx.prototype.getCommand=function(id){return this.m_commands[id];}
ViewAjx.prototype.toDOM=function(parent,cmd){cmd=(cmd===true)?"copy":cmd;ViewAjx.superclass.toDOM.call(this,parent);this.onGetData(null,cmd);}
ViewAjx.prototype.beforeExecCommand=function(cmd,pm){if(this.getOnBeforeExecCommand()){this.getOnBeforeExecCommand().call(this,cmd,pm);}}
ViewAjx.prototype.setOnBeforeExecCommand=function(v){this.m_onBeforeExecCommand=v;}
ViewAjx.prototype.getOnBeforeExecCommand=function(v){return this.m_onBeforeExecCommand;} 
ViewAjx.prototype.ER_KEY_NOT_FOUND="Ключ % не найден у контрола %";ViewAjx.prototype.ER_ERRORS="Обнаружены ошибки.";ViewAjx.prototype.ER_NO_PM="Серверный метод не задан.";ViewAjx.prototype.ER_CTRL_NOT_BOUND="Элемент управления % не привязан к полю модели контроллера.";ViewAjx.prototype.ER_NO_CTRL="Команда % с индексом % не имеет связи с элементом формы.";ViewAjx.prototype.ER_CTRL_KEYS_NOT_BOUND="Не заданы ключи ссылочного элемента формы %.";ViewAjx.prototype.ER_NO_BINDING_MODEL="Для связывания с индексом % модель не определена."; 
function ViewAjxList(id,options){options=options||{};if(window.onSelect){var self=this;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;if(options.controlSelect||options.cmdSelect){this.setControlSelect(options.controlSelect||new ButtonMakeSelection(id+":cmdSelect",{"onClick":function(){var list=self.getElements();for(var i=0;i<list.length;i++){console.log(list[i].getId())
if(list[i].onSelect){list[i].onSelect();break;}}}}));}
options.cmdCancel=(options.cmdCancel!=undefined)?options.cmdCancel:true;if(options.controlCancel||options.cmdCancel){this.setControlCancel(options.controlCancel||new ButtonCancel(id+":cmdCancel",{"onClick":function(){window.closeResult=false;window.close();}}));}
if(options.commandContainer||options.commandElements||options.cmdSelect||options.cmdCancel){this.m_commandContainer=options.commandContainer||new ControlContainer(id+":cmd-cont","DIV",{"elements":options.commandElements});}}
ViewAjxList.superclass.constructor.call(this,id,options);this.addControls();}
extend(ViewAjxList,ViewAjx);ViewAjxList.prototype.m_controlCancel;ViewAjxList.prototype.m_controlSelect;ViewAjxList.prototype.m_onClose;ViewAjxList.prototype.m_commandContainer;ViewAjxList.prototype.addControls=function(){if(this.m_commandContainer){if(this.m_controlSelect)this.m_commandContainer.addElement(this.m_controlSelect);if(this.m_controlCancel)this.m_commandContainer.addElement(this.m_controlCancel);}}
ViewAjxList.prototype.toDOM=function(parent){ViewAjxList.superclass.toDOM.call(this,parent);if(this.m_commandContainer)this.m_commandContainer.toDOM(parent);}
ViewAjxList.prototype.delDOM=function(){if(this.m_commandContainer)this.m_commandContainer.delDOM();ViewAjxList.superclass.delDOM.call(this);}
ViewAjxList.prototype.setControlSelect=function(v){this.m_controlSelect=v;}
ViewAjxList.prototype.getControlSelect=function(){return this.m_controlSelect;}
ViewAjxList.prototype.setControlCancel=function(v){this.m_controlCancel=v;}
ViewAjxList.prototype.getControlCancel=function(){return this.m_controlCancel;} 
function Calculator(options){options=options||{};if(!options.editControl){throw Error(this.ER_NO_EDIT_CONTROL);}
this.m_winObj=options.winObj;this.m_editControl=options.editControl;this.resetVars();}
Calculator.prototype.CALC_CLASS="calc";Calculator.prototype.m_editControl;Calculator.prototype.getVal=function(){return CommonHelper.nd("ekran",this.getWinObjDocument()).value;}
Calculator.prototype.setVal=function(val){CommonHelper.nd("ekran",this.getWinObjDocument()).value=val;}
Calculator.prototype.close=function(cancel){if(!cancel){this.m_editControl.setValue(this.getVal());this.m_editControl.focus();}
if(this.calcNode){this.calcNode.parentNode.removeChild(this.calcNode);}}
Calculator.prototype.wynik=0;Calculator.prototype.op;Calculator.prototype.nowe=0;Calculator.prototype.nowe2=0;Calculator.prototype.done=1;Calculator.prototype.oset=0;Calculator.prototype.kropka;Calculator.prototype.temp;Calculator.prototype.resetVars=function(){this.wynik=0,this.op=0,this.nowe=0,this.nowe2=0,this.done=1,this.oset=0;}
Calculator.prototype.reset=function(value){this.setVal(value);this.resetVars();}
Calculator.prototype.wspolna=function(new_temp){this.kropka=1;if(this.nowe||this.done){this.nowe=0;this.done=0;this.temp=new_temp;}
for(var i=0;i<this.temp.length;i++)if(this.temp[i]=='.')this.kropka=0;}
Calculator.prototype.calcButton=function(ktory,ktory2){this.temp=this.getVal();if(ktory2=='.'){this.wspolna('0');if(this.kropka){this.temp+=ktory2;this.setVal(this.temp);this.oset=0;}}
if(ktory>=0&&ktory<=9){this.wspolna('');if(this.temp==0&&this.kropka==1)this.temp='';this.temp+=ktory;this.setVal(this.temp);this.oset=1;}
if(ktory2=='-'||ktory2=='+'||ktory2=='/'||ktory2=='*'){if(this.nowe)this.op=ktory2
else{if(!this.nowe2){this.op=ktory2;this.wynik=this.temp;this.nowe2=1;}
else{this.wynik=eval(this.wynik+this.op+this.temp);this.op=ktory2;this.setVal(wynik);}
this.oset=0;this.nowe=1;}}
if(ktory2=='1/x'){this.wynik=eval(1/this.temp);this.reset(this.wynik);}
if(ktory2=='sqrt'){this.wynik=Math.sqrt(this.temp);this.reset(this.wynik);}
if(ktory2=='exp'){this.wynik=Math.exp(this.temp);this.reset(this.wynik);}
if(ktory2=='+/-')this.setVal(eval(-this.temp));if(ktory2=='='&&this.oset&&this.op!='0')this.reset(eval(this.wynik+this.op+this.temp));if(ktory2=='C')this.reset(0);if(this.getVal()[0]=='.')
this.setVal('0')+this.getVal();}
Calculator.prototype.getHTML=function(){var input_id=this.m_editControl.getId();var calc_html='<table cellPadding="0" cellSpacing="5">'+'<tbody>'+'<tr align="left">'+'<td colSpan="5" align="right"><div id="'+input_id+':calc_cancel"><img src="img/modal/close.gif"></div></td></tr>'+'<td colSpan="5"><input style="width:100%;" id="ekran" value="0" size="20"/></td></tr>'+'<tr align="middle">'+'<td colSpan="3">'+this.TITLE+'</td>'+'<td><input id="'+input_id+':calc_btn_C" type="button" value="C"/></td>'+'<td><input id="'+input_id+':calc_btn_OK" type="button" value="OK"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_7" class="calc_ctrl" type="button" value="  7  "/></td>'+'<td><input id="calc_btn_8" class="calc_ctrl" type="button" value="  8  "/></td>'+'<td><input id="calc_btn_9" class="calc_ctrl" type="button" value="  9  "/></td>'+'<td><input id="calc_btn_/" class="calc_ctrl" type="button" value="  /  "/></td>'+'<td><input id="calc_btn_sqrt" class="calc_ctrl" type="button" value="sqrt"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_4" class="calc_ctrl" type="button" value="  4  "/></td>'+'<td><input id="calc_btn_5" class="calc_ctrl" type="button" value="  5  "/></td>'+'<td><input id="calc_btn_6" class="calc_ctrl" type="button" value="  6  "/></td>'+'<td><input id="calc_btn_*" class="calc_ctrl" type="button" value=" *  "/></td>'+'<td><input id="calc_btn_exp" class="calc_ctrl" type="button" value="exp"/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_1" class="calc_ctrl" type="button" value="  1  "/></td>'+'<td><input id="calc_btn_2" class="calc_ctrl" type="button" value="  2  "/></td>'+'<td><input id="calc_btn_3" class="calc_ctrl" type="button" value="  3  "/></td>'+'<td><input id="calc_btn_-" class="calc_ctrl" type="button" value="  -  "/></td>'+'<td><input id="calc_btn_1/x" class="calc_ctrl" type="button" value="1/x "/></td></tr>'+'<tr align="middle">'+'<td><input id="calc_btn_0" class="calc_ctrl" type="button" value="  0  "/></td>'+'<td><input id="calc_btn_+/-" class="calc_ctrl" class="calc_ctrl" type="button" value=" +/- "/></td>'+'<td><input id="calc_btn_." class="calc_ctrl" type="button" value="  ,  "/></td>'+'<td><input id="calc_btn_+" class="calc_ctrl" type="button" value="  +  "/></td>'+'<td><input id="calc_btn_=" class="calc_ctrl" type="button" value="  =  "/></td>'+'</tr>'+'</tbody>'+'</table>';return calc_html;}
Calculator.prototype.assignControls=function(){var input_id=this.m_editControl.getId();var self=this;CommonHelper.nd(input_id+":calc_cancel",this.getWinObjDocument()).onclick=function(){self.close(true);};CommonHelper.nd(input_id+":calc_btn_OK",this.getWinObjDocument()).onclick=function(){self.close(false);};CommonHelper.nd(input_id+":calc_btn_C",this.getWinObjDocument()).onclick=function(){self.calcButton(11,"C");};var list=DOMHelper.getElementsByAttr('calc_ctrl',this.calcNode,'class');var id;for(var i=0;i<list.length;i++){list[i].onclick=function(event){event=EventHelper.fixMouseEvent(event);id=event.target.id.replace(/calc_btn_/,'');self.calcButton(id,id);};}}
Calculator.prototype.show=function(){var input_id=this.m_editControl.getId();var node=this.m_editControl.getNode();if(node!=undefined&&CommonHelper.nd(input_id+":calc",this.getWinObjDocument())==undefined){this.calcNode=document.createElement('div');this.calcNode.id=input_id+":calc";this.calcNode.className=this.CALC_CLASS;this.calcNode.style.border="1px solid gray";this.calcNode.style.background='#FFFFFF';this.calcNode.style.color='#000000';this.calcNode.style.position='absolute';this.calcNode.style.display='block';this.calcNode.style.padding='2px';this.calcNode.style.cursor='default';this.calcNode.innerHTML=this.getHTML();this.calcNode.style.top=(CommonHelper.findPosY(node)+node.offsetHeight+2)+"px";this.calcNode.style.left=(CommonHelper.findPosX(node)+node.offsetWidth+2)+"px";this.getWinObjDocument().body.appendChild(this.calcNode);this.assignControls();this.setVal(node.value);}}
Calculator.prototype.refresh=function(){if(this.calcNode!=undefined){this.calcNode.innerHTML=this.getHTML();this.assignControls();}}
Calculator.prototype.getWinObjDocument=function(){if(this.m_winObj){return this.m_winObj.getWindowForm().document;}
else{return window.document;}} 
Calculator.prototype.TITLE="Калькулятор";Calculator.prototype.ER_NO_EDIT_CONTROL="Не задан контрол."; 
function Button(id,options){options=options||{};this.m_colorClass=options.colorClass||this.DEF_COLOR_CLASS;options.className=options.className||this.DEF_CLASS;options.attrs=options.attrs||{};options.title=options.title||options.attrs.title||options.hint||this.DEF_TITLE;Button.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setCaption(options.caption);this.setGlyph(options.glyph||options.attrs.glyph);this.setGlyphPopUp(options.glyphPopUp);var self=this;this.m_clickFunc=function(e){if(self.getEnabled()&&self.m_onClick){e=EventHelper.fixMouseEvent(e);self.m_onClick.call(self,e);}}
if(options.onClick!=undefined){this.setOnClick(options.onClick);}}
extend(Button,Control);Button.prototype.DEF_TAG_NAME="DIV";Button.prototype.DEF_CLASS="btn btn-default";Button.prototype.DEF_COLOR_CLASS="btn-default";Button.prototype.DEF_TITLE;Button.prototype.m_glyph;Button.prototype.m_glyphPopUp;Button.prototype.m_colorClass;Button.prototype.setCaption=function(caption){if(caption){if(this.m_node.childNodes.length==0){this.m_node.appendChild(document.createTextNode(caption));}
else{this.m_node.childNodes[0].nodeValue=caption;}}}
Button.prototype.getCaption=function(){return(this.m_node&&this.m_node.childNodes&&this.m_node.childNodes[0])?this.m_node.childNodes[0].nodeValue:"";}
Button.prototype.getGlyph=function(){return this.m_glyph;}
Button.prototype.setGlyph=function(glyph){this.m_glyph=glyph;if(glyph){var n;if(this.m_node){var ar=DOMHelper.getElementsByAttr("glyphicon",this.m_node,"class",true,"i");if(ar&&ar.length){n=ar[0];n.className="glyphicon "+glyph;}}
if(!n){n=document.createElement("I");n.className=(glyph.indexOf("glyphicon-")>=0)?("glyphicon "+glyph):glyph;this.m_node.appendChild(n);}}}
Button.prototype.getGlyphPopUp=function(){return this.m_glyphPopUp;}
Button.prototype.setGlyphPopUp=function(v){this.m_glyphPopUp=v;}
Button.prototype.setOnClick=function(onClick){var self=this;this.m_onClick=function(e){onClick.call(self,e);}
this.addClick();}
Button.prototype.getOnClick=function(){return this.m_onClick;}
Button.prototype.addClick=function(){var self=this;EventHelper.add(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.removeClick=function(){var self=this;EventHelper.del(this.m_node,"click",this.m_clickFunc,false);}
Button.prototype.click=function(){this.m_clickFunc.call(this,null);}
Button.prototype.getColorClass=function(){return this.m_colorClass;} 
function ButtonCtrl(id,options){options=options||{};options.className="btn btn-default";this.setEditControl(options.editControl);ButtonCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonCtrl,Button);ButtonCtrl.prototype.m_editControl;ButtonCtrl.prototype.setEditControl=function(v){this.m_editControl=v;}
ButtonCtrl.prototype.getEditControl=function(){return this.m_editControl;} 
function ButtonEditCtrl(id,options){options=options||{};options.glyph=options.glyph||"glyphicon-menu-hamburger";options.editControl=options.editControl||options.control;var self=this;options.onClick=options.onClick||function(e){self.onClickEvent(EventHelper.fixKeyEvent(e));}
this.setWinClass(options.winClass||WindowForm);this.setWinParams(options.winParams);ButtonEditCtrl.superclass.constructor.call(this,id,options);}
extend(ButtonEditCtrl,ButtonCtrl);ButtonEditCtrl.prototype.m_winObj;ButtonEditCtrl.prototype.m_winClass;ButtonEditCtrl.prototype.m_winParams;ButtonEditCtrl.prototype.closeWinObj=function(){this.m_winObj.close();delete this.m_winObj;}
ButtonEditCtrl.prototype.setWinClass=function(v){this.m_winClass=v;}
ButtonEditCtrl.prototype.getWinClass=function(v){return this.m_winClass;}
ButtonEditCtrl.prototype.setWinParams=function(v){this.m_winParams=v;}
ButtonEditCtrl.prototype.getWinParams=function(v){return this.m_winParams;}
ButtonEditCtrl.prototype.onClickEvent=function(e){var win_opts={};win_opts.app=window.getApp();var self=this;win_opts.onClose=function(){self.closeWinObj();};win_opts.URLParams=this.getWinParams();temp_o=new this.m_winClass(win_opts);var ctrl=this.getEditControl();if(ctrl){if(ctrl.getIsRef()){win_opts.keys={};var ctrl_keys=ctrl.getKeys()||{};var ctrl_key_ids=ctrl.getKeyIds();var form_keys={};var form_key_ids=temp_o.getKeyIds();var o_set=false;for(var n=0;n<ctrl_key_ids.length;n++){if(ctrl_keys[ctrl_key_ids[n]]){form_keys[form_key_ids[n]]=ctrl_keys[ctrl_key_ids[n]];o_set=true;}}
if(!o_set){return;}
temp_o.setKeys(form_keys);}}
this.m_winObj=temp_o;this.m_winObj.open();} 
ButtonEditCtrl.prototype.DEF_TITLE="выбрать"; 
function ButtonCalc(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;var self=this;options.onClick=options.onClick||function(event){(new Calculator({"editControl":self.getEditControl()}).show());};ButtonCalc.superclass.constructor.call(this,id,options);}
extend(ButtonCalc,ButtonCtrl);ButtonCalc.prototype.DEF_GLYPH="glyphicon-th"; 
ButtonCalc.prototype.DEF_TITLE="открыть калькулятор"; 
function ButtonCalendar(id,options){options=options||{};options.glyph=options.glyph||this.DEF_GLYPH;this.setTimeValueStr(options.timeValueStr||"00:00:00");this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());var self=this;options.onClick=options.onClick||function(event){var p=$(self.getEditControl().getNode());p.datepicker({format:{toDisplay:function(date,format,language){var tm;if(!self.m_editControl.isNull()){var ctrl_val=self.getEditControl().getValue();tm=ctrl_val.getSeconds()*1000+ctrl_val.getMinutes()*60*1000+ctrl_val.getHours()*60*60*1000;}
else{tm=self.m_time;}
var d=new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0,tm);var fv=DateHelper.format(d,self.m_dateFormat);return fv;},toValue:function(date,format,language){var v=DateHelper.userStrToDate(date);return v;}},language:"ru",daysOfWeekHighlighted:"0,6",autoclose:true,todayHighlight:true,orientation:"bottom right",showOnFocus:false,clearBtn:true});p.on('hide',function(ev){self.getEditControl().applyMask();});p.datepicker("show");};ButtonCalendar.superclass.constructor.call(this,id,options);}
extend(ButtonCalendar,ButtonCtrl);ButtonCalendar.prototype.DEF_GLYPH="glyphicon-calendar";ButtonCalendar.prototype.m_time;ButtonCalendar.prototype.m_dateFormat;ButtonCalendar.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;}
ButtonCalendar.prototype.setTimeValueStr=function(v){this.m_time=DateHelper.timeToMS(v);}
ButtonCalendar.prototype.getDateFormat=function(){return this.m_dateFormat;} 
ButtonCalendar.prototype.DEF_TITLE="открыть календарь";ButtonCalendar.prototype.DEF_ALT="кал."; 
function ButtonClear(id,options){options=options||{};options.glyph="glyphicon-remove";var self=this;options.onClick=options.onClick||function(event){self.getEditControl().reset();};ButtonClear.superclass.constructor.call(this,id,options);}
extend(ButtonClear,ButtonCtrl); 
ButtonClear.prototype.DEF_TITLE="очистить значение"; 
function ButtonCmd(id,options){options=options||{};options.colorClass="bg-"+window.getApp().getColorClass();options.className="btn "+options.colorClass+" btn-cmd";options.caption=options.caption||this.DEF_CAPTION;ButtonCmd.superclass.constructor.call(this,id,options);}
extend(ButtonCmd,Button);ButtonCmd.prototype.DEF_CAPTION=""; 
function ButtonExpToExcel(id,options){options=options||{};ButtonExpToExcel.superclass.constructor.call(this,id,options);}
extend(ButtonExpToExcel,ButtonCmd); 
ButtonExpToExcel.prototype.DEF_TITLE="экспорт в Excel";ButtonExpToExcel.prototype.DEF_CAPTION="Excel"; 
function ButtonExpToPDF(id,options){options=options||{};ButtonExpToPDF.superclass.constructor.call(this,id,options);}
extend(ButtonExpToPDF,ButtonCmd); 
ButtonExpToPDF.prototype.DEF_TITLE="экспорт в PDF";ButtonExpToPDF.prototype.DEF_CAPTION="PDF"; 
function ButtonOpen(id,options){options=options||{};options.glyph="glyphicon-pencil";ButtonOpen.superclass.constructor.call(this,id,options);}
extend(ButtonOpen,ButtonEditCtrl); 
ButtonOpen.prototype.DEF_TITLE="открыть"; 
function ButtonInsert(id,options){options=options||{};options.glyph="glyphicon-plus";var self=this;options.onClick=options.onClick||function(event){self.doInsert(EventHelper.fixMouseEvent(event));};ButtonInsert.superclass.constructor.call(this,id,options);}
extend(ButtonInsert,ButtonCtrl);ButtonInsert.prototype.doInsert=function(e){console.log("ButtonInsert.prototype.openInsert");} 
ButtonInsert.prototype.DEF_TITLE="добавить"; 
function ButtonPrint(id,options){options=options||{};var self=this;options.onClick=options.onClick||function(){self.onClick();};this.m_fieldId=options.fieldId;this.m_DOMId=options.DOMId;this.m_controller=options.controller;this.m_methodId=options.methodId||this.DEF_METH;ButtonPrint.superclass.constructor.call(this,id,options);}
extend(ButtonPrint,ButtonCmd);ButtonPrint.prototype.onClick=function(){if(this.m_DOMId){var pm=this.m_controller.getPublicMethod();pm.setFieldValue(this.m_paramId,CommonHelper.nd(this.m_DOMId).getAttribute("old_id"));}
this.m_controller.run(this.m_methodId,{xml:false,ok:function(resp){WindowPrint.show({content:resp});}});}
ButtonPrint.prototype.DEF_METH="get_print"; 
ButtonPrint.prototype.DEF_TITLE="напечатать";ButtonPrint.prototype.DEF_CAPTION="Печать"; 
function ButtonPrintList(id,options){options=options||{};options.className=options.className||this.DEF_CLASS;var btn_class=(options.buttonClassName||this.DEF_BTN_CLASS)+" dropdown-toggle";this.m_button=new ControlContainer(CommonHelper.uniqid(),"button",{"className":btn_class,"value":this.DEF_CAPTION,"title":this.DEF_TITLE,"attrs":{"type":"button","data-toggle":"dropdown"},"elements":[new Control(CommonHelper.uniqid(),"i",{"className":"glyphicon "+this.DEF_GLYPH})]});this.m_keyIds=options.keyIds;var print_ctrls=[];this.m_objList=[];this.m_buttons=new ControlContainer(CommonHelper.uniqid(),"ul",{"className":"dropdown-menu"});this.setPrintList(options.printList);options.elements=[this.m_button,this.m_buttons];ButtonPrintList.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(ButtonPrintList,ControlContainer);ButtonPrintList.prototype.DEF_TAG_NAME="div";ButtonPrintList.prototype.DEF_CLASS="btn dropdown";ButtonPrintList.prototype.DEF_BTN_CLASS="btn btn-primary";ButtonPrintList.prototype.DEF_GLYPH="glyphicon-triangle-bottom";ButtonPrintList.prototype.m_buttons;ButtonPrintList.prototype.m_button;ButtonPrintList.prototype.m_objList;ButtonPrintList.prototype.m_keyIds;ButtonPrintList.prototype.getObjList=function(){return this.m_objList;}
ButtonPrintList.prototype.addToList=function(obj){this.m_buttons.addElement(obj.getControl());this.m_objList.push(obj);}
ButtonPrintList.prototype.setGrid=function(v){for(var i=0;i<this.m_objList.length;i++){this.m_objList[i].setGrid(v);this.m_objList[i].setKeyIds(this.m_keyIds);}}
ButtonPrintList.prototype.getKeyIds=function(v){return this.m_keyIds;}
ButtonPrintList.prototype.setPrintList=function(printList){this.m_buttons.clear();if(printList&&printList.length){for(var i=0;i<printList.length;i++){this.m_buttons.addElement(printList[i].getControl());this.m_objList.push(printList[i]);}}} 
ButtonPrintList.prototype.DEF_CAPTION="Печать";ButtonPrintList.prototype.DEF_TITLE="Показать список печатных форм"; 
function ButtonSelectRef(id,options){options=options||{};this.setMultySelect((options.multySelect==undefined)?false:options.multySelect);this.m_descrIds=options.descrIds;this.m_keyIds=options.keyIds;this.setOnSelect(options.onSelect);this.setFormatFunction(options.formatFunction);ButtonSelectRef.superclass.constructor.call(this,id,options);}
extend(ButtonSelectRef,ButtonEditCtrl);ButtonSelectRef.prototype.m_multySelect;ButtonSelectRef.prototype.m_descrIds;ButtonSelectRef.prototype.m_keyIds;ButtonSelectRef.prototype.m_onSelect;ButtonSelectRef.prototype.getMultySelect=function(){return this.m_multySelect;}
ButtonSelectRef.prototype.setMultySelect=function(v){this.m_multySelect=v;}
ButtonSelectRef.prototype.onClickEvent=function(e){var win_opts={};var self=this;win_opts.app=window.getApp();win_opts.onClose=function(){self.closeWinObj();};win_opts.URLParams=this.getWinParams();this.m_winObj=new this.m_winClass(win_opts);var win=this.m_winObj.open();win.onSelect=function(fields){self.onSelect(fields);}}
ButtonSelectRef.prototype.onSelect=function(fields){var ctrl=this.getEditControl();if(ctrl){var ctrl_keys={};var ctrl_key_ids=ctrl.getKeyIds();var model_key_ids;if(this.m_keyIds){model_key_ids=this.m_keyIds;}
else{model_key_ids=this.m_winObj.getKeyIds();}
for(var n=0;n<ctrl_key_ids.length;n++){if(fields[model_key_ids[n]]){ctrl_keys[ctrl_key_ids[n]]=fields[model_key_ids[n]].getValue();}}
var ctrl_descr="";var format_f=this.getFormatFunction();if(format_f){ctrl_descr=format_f.call(ctrl,fields);}
else if(this.m_descrIds){for(var n=0;n<this.m_descrIds.length;n++){if(fields[this.m_descrIds[n]]){var f_val=fields[this.m_descrIds[n]].getValue();ctrl_descr+=(ctrl_descr=="")?"":" ";if(typeof f_val=="object"&&f_val.getDescr){ctrl_descr+=f_val.getDescr();}
else{ctrl_descr+=f_val;}}}}
else{for(var fid in fields){if(!fields[fid].getPrimaryKey()){ctrl_descr+=(ctrl_descr=="")?"":" ";ctrl_descr+=fields[fid].getValue();}}}
ctrl.setValue(new RefType({"keys":ctrl_keys,"descr":ctrl_descr}));ctrl.focus();}
if(!this.getMultySelect()){this.m_winObj.close();}
if(this.m_onSelect){this.m_onSelect.call(this,fields);}}
ButtonSelectRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
ButtonSelectRef.prototype.getOnSelect=function(){return this.m_onSelect;}
ButtonSelectRef.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
ButtonSelectRef.prototype.getFormatFunction=function(){return this.m_formatFunction;} 
ButtonSelectRef.prototype.DEF_TITLE="выбрать из списка";ButtonSelectRef.prototype.DEF_SEL_FORM_TITLE="Выбор"; 
function ButtonSelectDataType(id,options){options=options||{};this.m_compoundControl=options.compoundControl;options.glyph=options.glyph||"glyphicon-random";var self=this;options.onClick=options.onClick||function(event){self.doSelect(EventHelper.fixMouseEvent(event));}
ButtonSelectDataType.superclass.constructor.call(this,id,options);}
extend(ButtonSelectDataType,ButtonCtrl);ButtonSelectDataType.prototype.m_form;ButtonSelectDataType.prototype.m_compoundControl;ButtonSelectDataType.prototype.doSelect=function(e){var data_types=this.m_compoundControl.getPossibleDataTypes();var rows=[];for(var t in data_types){rows.push({"fields":{"dataTypeDescrLoc":data_types[t].dataTypeDescrLoc,"dataType":t}});}
var model=new ModelJSON("dataTypeList",{"fields":["dataType","dataTypeDescrLoc"],"data":{"rows":rows}});var self=this;var ctrl_id=this.getId()+":selectDataType:form:body:view:grid";var view=new View(this.getId()+":selectDataType:form:body:view",{"elements":[new Grid(ctrl_id,{"keyIds":["dataType"],"showHead":false,"model":model,"head":new GridHead(ctrl_id+":head",{"elements":[new GridRow(ctrl_id+":head:row0",{"elements":[new GridCellHead(ctrl_id+":head:dataTypeDescrLoc",{"columns":[new GridColumn({"field":model.getField("dataTypeDescrLoc")})]})]})]}),"onSelect":function(fields){self.onSelect(fields);}})]});this.m_form=new WindowFormModalBS(this.getId()+":selectDataType:form",{"cmdCancel":true,"cmdOk":true,"onClickCancel":function(){self.m_form.close();},"onClickOk":function(){self.onSelect();},"content":view,"contentHead":this.HEAD_TITLE});this.m_form.open();}
ButtonSelectDataType.prototype.onSelect=function(fields){this.m_compoundControl.setDataType(fields.dataType.getValue());this.m_form.close();} 
ButtonSelectDataType.prototype.HEAD_TITLE="Выберите тип данных";ButtonSelectDataType.prototype.DEF_TITLE="Выбрать тип данных";ButtonSelectDataType.prototype.TXT_UNASSIGNED_TYPE="<тип не задан>"; 
function ButtonMakeSelection(id,options){options=options||{};options.glyph=options.glyph||"glyphicon-save-file";ButtonMakeSelection.superclass.constructor.call(this,id,options);}
extend(ButtonMakeSelection,ButtonCmd); 
ButtonMakeSelection.prototype.DEF_CAPTION="Выбрать ";ButtonMakeSelection.prototype.DEF_TITLE="выбрать и закрыть форму"; 
function ButtonToggle(id,options){options=options||{};options.className="btn btn-link";options.glyph="glyphicon-triangle-bottom";options.attrs=options.attrs||{};options.attrs["data-toggle"]="collapse";options.attrs["data-target"]=("#"+options.dataTarget);ButtonToggle.superclass.constructor.call(this,id,options);}
extend(ButtonToggle,Button); 
function Label(id,options){options=options||{};options.className=(options.className!==undefined)?options.className:(this.DEF_CLASS+" "+window.getBsCol(this.DEF_COL_WD));options.value=options.value||options.caption;Label.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(Label,Control);Label.prototype.DEF_TAG_NAME="label";Label.prototype.DEF_CLASS="control-label";Label.prototype.DEF_COL_WD="4"; 
function Edit(id,options){options=options||{};options.attrs=options.attrs||{};if(id&&(options.html==undefined&&options.template==undefined)){var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}}
else if(!id){id=CommonHelper.uniqid();}
if(options.inline===true){options.contClassName="";options.editContClassName="";options.className="";options.btnContClassName="";options.contTagName="SPAN";options.editContTagName="SPAN";}
options.className=(options.className!==undefined)?options.className:this.DEF_CLASS;options.attrs.type=options.attrs.type||options.type||this.DEF_INPUT_TYPE;options.attrs.maxlength=options.attrs.maxlength||options.maxlength||((options.editMask)?options.editMask.length:undefined);this.setValidator(options.validator);if(options.cmdAutoComplete!=undefined&&!options.cmdAutoComplete){options.inputEnabled=false;}
Edit.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);if(options.editMask){this.setEditMask(options.editMask);}
this.setRegExpression(options.regExpression);if(options.label){this.setLabel(options.label);}
else if(options.labelCaption||options.labelOptions){options.labelOptions=options.labelOptions||{"attrs":{"for":id}};options.labelOptions.value=options.labelOptions.value||options.labelCaption;options.labelOptions.className=options.labelOptions.className||options.labelClassName;options.labelOptions.visible=this.getVisible();this.setLabel(new Label(id+":label",options.labelOptions));}
this.setErrorControl((options.errorControl!==undefined)?options.errorControl:((this.m_html)?null:new ErrorControl(id+":error")));this.setButtonOpen(options.buttonOpen);this.setButtonSelect(options.buttonSelect);this.setButtonClear(options.buttonClear);this.setBtnContClassName((options.btnContClassName!=undefined)?options.btnContClassName:this.BTNS_CONTAINER_CLASS);var btn_opt="button";for(opt in options){if(opt.substring(0,btn_opt.length)==btn_opt&&opt.length>btn_opt.length){this.addButtonContainer();break;}}
this.setFormatFunction(options.formatFunction);this.setLabelAlign(options.labelAlign||this.DEF_LABEl_ALIGN);this.setContClassName((options.contClassName!==undefined)?options.contClassName:this.DEF_CONT_CLASS);this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.setEditContClassName((options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(8)));this.setEditContTagName(options.editContTagName||this.DEF_EDIT_CONT_TAG);if(options.inputEnabled!=undefined&&!options.inputEnabled&&this.getEnabled()){this.setInputEnabled(false);}
if(options.cmdAutoComplete||options.autoComplete){if(!options.acPublicMethod&&options.acController){options.acPublicMethod=options.acController.getPublicMethod("complete");}
options.autoComplete=options.autoComplete||(new actbAJX({"minLengthForQuery":options.acMinLengthForQuery,"onSelect":options.onSelect,"model":options.acModel,"publicMethod":options.acPublicMethod,"patternFieldId":options.acPatternFieldId,"control":this,"keyFields":options.acKeyFields,"descrFields":options.acDescrFields,"descrFunction":options.acDescrFunction,"icase":options.acICase,"mid":options.acMid}));actb(this.m_node,options.winObj,options.autoComplete);}
this.setAutoComplete(options.autoComplete);}
extend(Edit,Control);Edit.prototype.DEF_TAG_NAME="INPUT";Edit.prototype.DEF_INPUT_TYPE="text";Edit.prototype.DEF_CLASS="form-control";Edit.prototype.BTNS_CONTAINER_CLASS="input-group-btn";Edit.prototype.INCORRECT_VAL_CLASS="error";Edit.prototype.DEF_CONT_CLASS="form-group";Edit.prototype.DEF_EDIT_CONT_CLASS="input-group";Edit.prototype.DEF_CONT_TAG="DIV";Edit.prototype.DEF_EDIT_CONT_TAG="DIV";Edit.prototype.VAL_INIT_ATTR="initValue";Edit.prototype.DEF_LABEl_ALIGN="left";Edit.prototype.m_editMask;Edit.prototype.m_regExpression;Edit.prototype.m_buttons;Edit.prototype.m_value;Edit.prototype.m_label;Edit.prototype.m_container;Edit.prototype.m_editContainer;Edit.prototype.m_errorControl;Edit.prototype.m_contTagName;Edit.prototype.m_contClassName;Edit.prototype.m_buttonOpen;Edit.prototype.m_buttonSelect;Edit.prototype.m_buttonClear;Edit.prototype.m_formatFunction;Edit.prototype.m_editContTagName;Edit.prototype.m_enabled;Edit.prototype.m_labelAlign;Edit.prototype.m_btnContClassName;Edit.prototype.m_onKeyPress;Edit.prototype.m_autoComplete;Edit.prototype.addButtonContainer=function(){this.m_buttons=new ControlContainer(this.getId()+":btn-cont","SPAN",{"className":this.m_btnContClassName,"enabled":this.getEnabled()});this.addButtonControls();}
Edit.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
Edit.prototype.setRegExpression=function(v){this.m_regExpression=v}
Edit.prototype.getRegExpression=function(mask){return this.m_regExpression;}
Edit.prototype.setEditMask=function(mask){this.m_editMask=mask}
Edit.prototype.getEditMask=function(mask){return this.m_editMask;}
Edit.prototype.applyMask=function(){if(this.getEditMask()){$(this.getNode()).mask(this.getEditMask());}}
Edit.prototype.formatOutputValue=function(val){return val;}
Edit.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=this.formatOutputValue(val);this.applyMask();if(this.m_eventFuncs&&this.m_eventFuncs.change){this.m_eventFuncs.change();}}
Edit.prototype.getValue=function(){if(this.m_node){var v=this.getEditMask()?$(this.m_node).mask():this.m_node.value;if(!v||v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}}
Edit.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
Edit.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
Edit.prototype.setLabel=function(label){if(typeof label=="string"){throw Error(this.ER_LABEL_OBJECT);}
this.m_label=label;}
Edit.prototype.getLabel=function(){return this.m_label;}
Edit.prototype.setValidator=function(v){this.m_validator=v;}
Edit.prototype.getValidator=function(){return this.m_validator;}
Edit.prototype.validate=function(){if(this.m_validator){try{this.setValid();var v=this.getValue();this.m_validator.validate(v);if(v&&v.length&&this.m_regExpression&&!this.m_regExpression.test(v)){throw new Error(this.ER_REGEXP_INVALID);}}
catch(e){this.setNotValid(e.message);}}}
Edit.prototype.setButtonOpen=function(v){this.m_buttonOpen=v;if(this.m_buttonOpen&&this.m_buttonOpen.setEditControl){this.m_buttonOpen.setEditControl(this);}}
Edit.prototype.getButtonOpen=function(){return this.m_buttonOpen;}
Edit.prototype.setButtonClear=function(v){this.m_buttonClear=v;if(this.m_buttonClear&&this.m_buttonClear.setEditControl){this.m_buttonClear.setEditControl(this);}}
Edit.prototype.getButtonClear=function(){return this.m_buttonClear;}
Edit.prototype.setButtonSelect=function(v){this.m_buttonSelect=v;if(this.m_buttonSelect&&this.m_buttonSelect.setEditControl){this.m_buttonSelect.setEditControl(this);}}
Edit.prototype.getButtonSelect=function(){return this.m_buttonSelect;}
Edit.prototype.getButtons=function(){return this.m_buttons;}
Edit.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl()){this.getErrorControl().setValue(erStr);}
else{throw new Error(erStr);}}
Edit.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
Edit.prototype.toDOM=function(parent){var node_parent;if(!this.m_html){var id=this.getId();this.m_container=new ControlContainer((id?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control((id?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);node_parent=this.m_editContainer.getNode();}
Edit.superclass.toDOM.call(this,node_parent);if(this.m_errorControl){this.m_errorControl.toDOM(node_parent);}
this.applyMask();if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}
if(this.m_label&&this.m_labelAlign=="right"){this.m_label.toDOMAfter(this.getNode());}}
Edit.prototype.toDOMBefore=function(node){var node_parent;if(!this.m_html){var id=this.getId();this.m_container=new ControlContainer(((id)?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control(((id)?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOMBefore(node);node_parent=this.m_editContainer.getNode();}
Edit.superclass.toDOM.call(this,node_parent);if(this.m_errorControl){this.m_errorControl.toDOM(node_parent);}
this.applyMask();if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}
if(this.m_label&&this.m_labelAlign=="right"){this.m_label.toDOMAfter(this.getNode());}}
Edit.prototype.delDOM=function(){if(this.m_autoComplete){this.m_autoComplete.delDOM();}
Edit.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
Edit.prototype.setVisible=function(v){Edit.superclass.setVisible.call(this,v);if(this.m_container){this.m_container.setVisible(v);}
if(this.m_label){this.m_label.setVisible(v);}
if(this.m_buttons){this.m_buttons.setVisible(v);}}
Edit.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);if(this.getButtonOpen()&&!enabled){this.getButtonOpen().setEnabled(true);}}
this.setInputEnabled(enabled);this.m_enabled=enabled;}
Edit.prototype.getEnabled=function(){return this.m_enabled;}
Edit.prototype.reset=function(){this.setValue("");this.focus();}
Edit.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
Edit.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
Edit.prototype.getIsRef=function(){return false;}
Edit.prototype.getFormatFunction=function(){return this.m_formatFunction;}
Edit.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
Edit.prototype.getContTagName=function(){return this.m_contTagName;}
Edit.prototype.setContTagName=function(v){this.m_contTagName=v;}
Edit.prototype.getContClassName=function(){return this.m_contClassName;}
Edit.prototype.setContClassName=function(v){this.m_contClassName=v;}
Edit.prototype.getEditContClassName=function(){return this.m_editContClassName;}
Edit.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
Edit.prototype.setBtnContClassName=function(v){this.m_btnContClassName=v;}
Edit.prototype.getEditContTagName=function(){return this.m_editContTagName;}
Edit.prototype.setEditContTagName=function(v){this.m_editContTagName=v;}
Edit.prototype.setInputEnabled=function(enabled){Edit.superclass.setEnabled.call(this,enabled);}
Edit.prototype.getInputEnabled=function(){return Edit.superclass.getEnabled.call(this);}
Edit.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Edit.prototype.getErrorControl=function(){return this.m_errorControl;}
Edit.prototype.setLabelAlign=function(v){this.m_labelAlign=v;}
Edit.prototype.getLabelAlign=function(){return this.m_labelAlign;}
Edit.prototype.setAutoComplete=function(v){this.m_autoComplete=v;}
Edit.prototype.getAutoComplete=function(){return this.m_autoComplete;}
Edit.prototype.setOnValueChange=function(v){Edit.superclass.setOnValueChange.call(this,v);if(v){EventHelper.add(this.getNode(),"keypress",this.m_onKeyPress,true);}
else{EventHelper.del(this.getNode(),"keypress",this.m_onKeyPress,true);}}
Edit.prototype.focus=function(){if(this.getNode().focus)this.getNode().focus();} 
Edit.prototype.ER_LABEL_OBJECT="Неверный параметр label";Edit.prototype.ER_REGEXP_INVALID="Неверное значение"; 
function EditRef(id,options){options=options||{};if(options.keys){this.setKeys(options.keys);}
if(options.keyIds){this.setKeyIds(options.keyIds);}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:true;options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:true;options.cmdAutoComplete=(options.cmdAutoComplete!=undefined)?options.cmdAutoComplete:true;if(options.cmdInsert){options.buttonInsert=options.buttonInsert||new ButtonInsert(id+":btn_insert",{"editControl":this});}
if(options.cmdSelect&&!options.buttonSelect&&options.selectWinClass){options.buttonSelect=new ButtonSelectRef(id+':btn_select',{"winClass":options.selectWinClass,"winParams":options.selectWinParams,"descrIds":options.selectDescrIds,"keyIds":options.selectKeyIds,"control":this,"onSelect":options.onSelect,"formatFunction":options.selectFormatFunction,"multySelect":options.selectMultySelect,"enabled":options.enabled});}
if(options.cmdOpen&&!options.buttonOpen&&options.editWinClass){options.buttonOpen=new ButtonOpen(id+':btn_open',{"winClass":options.editWinClass,"winParams":options.editWinParams,"keyIds":options.openKeyIds,"control":this});}
if(options.cmdClear){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"enabled":options.enabled});}
this.setOnSelect(options.onSelect);EditRef.superclass.constructor.call(this,id,options);if(!this.getKeyIds().length){throw Error(CommonHelper.format(this.ER_NO_KEY,Array[this.getName()]));}
this.setButtonInsert(options.buttonInsert);}
extend(EditRef,Edit);EditRef.prototype.KEY_ATTR="keys";EditRef.prototype.KEY_INIT_ATTR="initKeys";EditRef.prototype.ATTR_DISABLED="readOnly";EditRef.prototype.m_buttonInsert;EditRef.prototype.m_keyIds;EditRef.prototype.addButtonControls=function(){if(this.m_buttonInsert)this.m_buttons.addElement(this.m_buttonInsert);if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditRef.prototype.setButtonInsert=function(v){this.m_buttonInsert=v;}
EditRef.prototype.getButtonInsert=function(){return this.m_buttonInsert;}
EditRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.getIsRef=function(){return true;}
EditRef.prototype.getModified=function(){var key=this.getAttr(this.KEY_ATTR);return(key&&key!="{}"&&(key!=this.getAttr(this.KEY_INIT_ATTR)));}
EditRef.prototype.isNull=function(){return CommonHelper.isEmpty(this.getKeys());}
EditRef.prototype.resetKeys=function(){this.setKeys({});}
EditRef.prototype.reset=function(){EditRef.superclass.reset.call(this);this.resetKeys();}
EditRef.prototype.setValue=function(val){var descr;if(val&&typeof val=="object"&&val.getKeys&&val.getDescr){this.setKeys(val.getKeys());descr=val.getDescr();}
else if(val&&typeof val=="object"&&val.keys&&val.descr){this.setKeys(val.keys);descr=val.descr;}
else if(val&&typeof val=="object"&&val.m_keys&&val.m_descr){this.setKeys(val.m_keys);descr=val.m_descr;}
else if(val&&typeof val!="object"){descr=val;}
else{descr="";}
EditRef.superclass.setValue.call(this,descr);}
EditRef.prototype.getValue=function(){var descr=EditRef.superclass.getValue.call(this);var res=(new RefType({"keys":this.getKeys(),"descr":descr,"dataType":undefined}));return res;}
EditRef.prototype.getKeyValue=function(key){return this.getValue().getKey(key);}
EditRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"&&val.getKeys){this.setInitKeys(val.getKeys());}}
EditRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditRef.prototype.getOnSelect=function(v){return this.m_onSelect;} 
function EditRefMultyType(id,options){options=options||{};this.m_dataTypes=options.dataTypes;EditRefMultyType.superclass.constructor.call(this,id,options);}
extend(EditRefMultyType,EditRef);EditRefMultyType.prototype.m_dataType;EditRefMultyType.prototype.m_dataTypes;EditRefMultyType.prototype.setValue=function(v){EditRefMultyType.superclass.setValue(this,v);}
EditRefMultyType.prototype.setDataType=function(v){if(!this.m_dataTypes[v]){throw new Error(CommonHelper.format(this.ER_TYPE_NOT_FOUND,v));}
this.m_dataType=v;this.m_dataTypes[v];} 
EditRefMultyType.prototype.ER_TYPE_NOT_FOUND="Тип данных '%' не определен!"; 
function EditString(id,options){options=options||{};options.validator=options.validator||new ValidatorString(options);if(options.cmdClear==undefined||(options.cmdClear!=undefined&&options.cmdClear)){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"enabled":options.enabled});}
EditString.superclass.constructor.call(this,id,options);}
extend(EditString,Edit);EditString.prototype.ATTR_DISABLED="readOnly";EditString.prototype.setValue=function(val){if(val==undefined)return;EditString.superclass.setValue.call(this,val);} 
function EditText(id,options){options=options||{};options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:false;EditText.superclass.constructor.call(this,id,options);this.setRows(options.rows||this.DEF_ROWS);}
extend(EditText,EditString);EditText.prototype.DEF_TAG_NAME="TEXTAREA";EditText.prototype.DEF_ROWS="5";EditText.prototype.setRows=function(rows){if(rows)this.setAttr("rows",rows);}
EditText.prototype.getRows=function(){return this.getAttr("rows");} 
function EditInt(id,options){options=options||{};options.type=options.type||"number";options.validator=options.validator||new ValidatorInt(options);options.attrs=options.attrs||{};if(options.minValue){options.attrs.min=options.minValue;}
if(options.maxValue){options.attrs.max=options.maxValue;}
options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:false;if(options.cmdSelect==undefined||(options.cmdSelect!=undefined&&options.cmdSelect)){options.buttonSelect=options.buttonSelect||new ButtonCalc(id+":btn_open",{"winObj":options.winObj,"enabled":options.enabled,"editControl":this});}
EditInt.superclass.constructor.call(this,id,options);this.m_allowedChars=[8,0];if(this.m_validator&&!this.m_validator.getUnsigned()){this.m_allowedChars.push(45);}}
extend(EditInt,EditString);EditInt.prototype.m_allowedChars;EditInt.prototype.handleKeyPress=function(e){if(jQuery.inArray(e.which,this.m_allowedChars)==-1&&(e.which<48||e.which>57)){return false;}}
EditInt.prototype.toDOM=function(parent){EditInt.superclass.toDOM.call(this,parent);var self=this;$(this.getNode()).keypress(function(e){return self.handleKeyPress(e);});} 
function EditFloat(id,options){options=options||{};options.validator=options.validator||new ValidatorFloat(options);options.cmdSelect=false;this.m_precision=options.precision||this.DEF_PRECISION;EditFloat.superclass.constructor.call(this,id,options);this.m_allowedChars.push(44);this.m_allowedChars.push(46);}
extend(EditFloat,EditInt);EditFloat.prototype.DEF_PRECISION=2;EditFloat.prototype.handleKeyPress=function(e){var res=EditFloat.superclass.handleKeyPress.call(this,e);if(res!==false&&e.which==46){}
return res;}
EditFloat.prototype.setValue=function(val){if(val==undefined){this.getNode().value="";}
else{if(this.m_validator){val=this.m_validator.correctValue(val);}
this.getNode().value=CommonHelper.numberFormat(val,this.m_precision,".","");}} 
function EditMoney(id,options){options=options||{};options.attrs=options.attrs||{};options.attrs.maxlength="15";options.precision="2";EditMoney.superclass.constructor.call(this,id,options);}
extend(EditMoney,EditFloat); 
function EditPhone(id,options){options=options||{};options.editMask=options.editMask||window.getApp().getPhoneEditMask();EditPhone.superclass.constructor.call(this,id,options);}
extend(EditPhone,EditString); 
function EditEmail(id,options){options=options||{};options.validator=options.validator||new ValidatorEmail(options);EditEmail.superclass.constructor.call(this,id,options);}
extend(EditEmail,EditString); 
function EditPercent(id,options){options=options||{};options.editMask=options.editMask||this.DEF_MASK;EditPercent.superclass.constructor.call(this,id,options);}
extend(EditPercent,EditString);EditPercent.prototype.DEF_MASK="99%"; 
function EditDate(id,options){options=options||{};options.validator=options.validator||new ValidatorDate(options);options.editMask=options.editMask||window.getApp().getDateEditMask();this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());options.attrs=options.attrs||{};options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;this.setTimeValueStr(options.timeValueStr);if(options.cmdSelect){options.buttonSelect=options.buttonSelect||new ButtonCalendar(id+':btn_calend',{"dateFormat":this.getDateFormat(),"editControl":this,"timeValueStr":this.getTimeValueStr(),"enabled":options.enabled});}
EditDate.superclass.constructor.call(this,id,options);}
extend(EditDate,EditString);EditDate.prototype.TIME_SEP="T";EditDate.prototype.m_timeValueStr;EditDate.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
EditDate.prototype.getDateFormat=function(){return this.m_dateFormat;}
EditDate.prototype.toISODate=function(str){if(str=="")return"";var t=str.substr(4,4)+"-"+str.substr(2,2)+"-"+str.substr(0,2);if(str.length>8){t+=this.TIME_SEP+str.substr(8,2);}
if(str.length>10){t+=":"+str.substr(10,2);}
if(str.length>12){t+=":"+str.substr(12,2);}
return t;}
EditDate.prototype.getValue=function(){if(this.m_node&&this.m_node.value){var v=(this.getEditMask())?$(this.m_node).mask():this.m_node.value;v=this.toISODate(v);if(v.length==0){return null;}
else if(this.m_validator){return this.m_validator.correctValue(v);}
else{return v;}}}
EditDate.prototype.formatOutputValue=function(val){return DateHelper.format(val,this.getDateFormat());}
EditDate.prototype.reset=function(){this.getNode().value="";this.focus();}
EditDate.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
EditDate.prototype.setTimeValueStr=function(v){this.m_timeValueStr=v;}
EditDate.prototype.getTimeValueStr=function(){return this.m_timeValueStr;} 
function EditDateTime(id,options){options=options||{};options.validator=options.validator||new ValidatorDateTime(options);options.editMask=options.editMask||window.getApp().getDateTimeEditMask();options.dateFormat=options.dateFormat||window.getApp().getDateTimeFormat();EditDateTime.superclass.constructor.call(this,id,options);}
extend(EditDateTime,EditDate); 
function EditTime(id,options){options=options||{};options.validator=options.validator||new ValidatorTime(options);options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:false;options.editMask=options.editMask||this.DEF_MASK;options.dateFormat=options.dateFormat||window.getApp().getTimeFormat();EditTime.superclass.constructor.call(this,id,options);}
extend(EditTime,EditDateTime);EditTime.prototype.DEF_MASK="99:99";EditTime.prototype.PART_SEP=":";EditTime.prototype.MSEC_PART_SEP=".";EditTime.prototype.toISODate=function(str){if(str=="")return"";var t=str.substr(0,2);if(str.length>2){t+=this.PART_SEP+str.substr(2,2);}
if(str.length>4){t+=this.PART_SEP+str.substr(4,2);}
if(str.length>6){t+=this.MSEC_PART_SEP+str.substr(6);}
return t;} 
function EditInterval(id,options){options=options||{};options.validator=options.validator||new ValidatorInterval(options);options.editMask=options.editMask||this.DEF_EDIT_MASK;EditInterval.superclass.constructor.call(this,id,options);}
extend(EditInterval,EditString);EditInterval.prototype.DEF_EDIT_MASK="99:99:99.9999";EditInterval.prototype.getValue=function(){return this.m_node.value;}
EditInterval.prototype.getMiliSeconds=function(){return DateHelper.timeToMS(this.getValue());}
EditInterval.prototype.getMinutes=function(){return this.getMiliSeconds()/1000;} 
function EditPassword(id,options){options=options||{};options.cmdClear=(options.cmdClear==undefined)?false:options.cmdClear;EditPassword.superclass.constructor.call(this,id,options);}
extend(EditPassword,EditString);EditPassword.prototype.DEF_INPUT_TYPE="password";EditPassword.prototype.getModified=function(){var v=this.getValue();return(v&&v.length);} 
function EditCheckBox(id,options){options=options||{};options.validator=options.validator||new ValidatorBool(options);options.cmdClear=false;if(options.checked!=undefined){options.value=options.checked;}
var bs_col=window.getBsCol();options.labelClassName=(options.labelClassName!==undefined)?options.labelClassName:(this.DEF_LABEL_CLASS+" "+bs_col+this.DEF_LABEL_COL_WD);options.editContClassName=(options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+bs_col+this.DEF_EDIT_CONT_COL_WD);EditCheckBox.superclass.constructor.call(this,id,options);}
extend(EditCheckBox,Edit);EditCheckBox.prototype.DEF_INPUT_TYPE="checkbox";EditCheckBox.prototype.DEF_LABEL_CLASS="control-label";EditCheckBox.prototype.DEF_LABEL_COL_WD="11";EditCheckBox.prototype.DEF_EDIT_CONT_COL_WD="1";EditCheckBox.prototype.setChecked=function(checked){this.m_node.checked=checked;if(this.m_eventFuncs&&this.m_eventFuncs.change){this.m_eventFuncs.change();}}
EditCheckBox.prototype.getChecked=function(){return this.m_node.checked;}
EditCheckBox.prototype.getValue=function(){return this.getChecked();}
EditCheckBox.prototype.setValue=function(val){this.setChecked(this.getValidator().correctValue(val));}
EditCheckBox.prototype.switchValue=function(){this.setValue(!this.getValue());}
EditCheckBox.prototype.getInitValue=function(val){return(this.getAttr(this.VAL_INIT_ATTR)=="true");} 
function EditContainer(id,options){options=options||{};if(!options.optionClass){throw Error(this.ER_NO_OPT_CLASS);}
if(!options.tagName){throw Error(this.ER_NO_TAG);}
var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
if(options.inline===true){options.contClassName="";options.editContClassName="";options.className="";options.btnContClassName="";options.contTagName="SPAN";options.editContTagName="SPAN";}
options.className=(options.className!==undefined)?options.className:this.DEF_CLASS;this.setButtonOpen(options.buttonOpen);this.setButtonSelect(options.buttonSelect);this.setButtonClear(options.buttonClear);this.setBtnContClassName((options.btnContClassName!=undefined)?options.btnContClassName:this.BTNS_CONTAINER_CLASS);var btn_opt="button";for(opt in options){if(opt.substring(0,btn_opt.length)==btn_opt&&opt.length>btn_opt.length){this.addButtonContainer();break;}}
options.elements=options.elements||[];this.setAddNotSelected((options.addNotSelected!=undefined)?options.addNotSelected:true);this.setNotSelectedLast((options.notSelectedLast!=undefined)?options.notSelectedLast:false);this.setOptionClass(options.optionClass);this.setOnSelect(options.onSelect);this.m_initValue=options.value;if(this.m_initValue&&this.m_initValue.getKeys&&!this.m_initValue.isNull()){options.attrs=options.attrs||{};options.attrs.keys=CommonHelper.serialize(this.m_initValue.getKeys());}
options.value=undefined;var opt_selected=false;if(this.m_addNotSelected){var def_opt_opts={"value":this.NOT_SELECTED_VAL,"descr":this.NOT_SELECTED_DESCR};}
if(options.options){for(var i=0;i<options.options.length;i++){if(options.options[i]!=undefined&&options.options[i].checked==true){opt_selected=true;break;}}}
var opt_ind=0;if(this.m_addNotSelected&&!this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));opt_ind++;}
if(options.options){for(var i=0;i<options.options.length;i++){options.elements.push(new options.optionClass(id+":"+opt_ind,options.options[i]))
opt_ind++;}}
if(this.m_addNotSelected&&this.m_notSelectedLast){if(!opt_selected){opt_selected.checked=true;}
options.elements.push(new options.optionClass(id+":"+opt_ind,def_opt_opts));}
EditContainer.superclass.constructor.call(this,id,options.tagName,options);if(options.label){this.setLabel(options.label);}
else if(options.labelCaption){this.setLabel(new Label(id+":label",{"value":options.labelCaption,"className":options.labelClassName,"visible":this.getVisible()}));}
this.setContClassName((options.contClassName!==undefined)?options.contClassName:this.DEF_CONT_CLASS);this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.setEditContClassName((options.editContClassName!==undefined)?options.editContClassName:(this.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(8)));this.setEditContTagName(options.editContTagName||this.DEF_EDIT_CONT_TAG);this.setErrorControl(options.errorControl||new ErrorControl(id+":error"));}
extend(EditContainer,ControlContainer);EditContainer.prototype.m_label;EditContainer.prototype.m_buttons;EditContainer.prototype.m_errorControl;EditContainer.prototype.m_editContainer;EditContainer.prototype.m_container;EditContainer.prototype.m_addNotSelected;EditContainer.prototype.m_notSelectedLast;EditContainer.prototype.m_optionClass;EditContainer.prototype.m_formatFunction;EditContainer.prototype.m_initValue;EditContainer.prototype.m_buttonOpen;EditContainer.prototype.m_buttonSelect;EditContainer.prototype.m_buttonClear;EditContainer.prototype.m_btnContClassName;EditContainer.prototype.DEF_CONT_TAG="DIV";EditContainer.prototype.DEF_EDIT_CONT_TAG="DIV";EditContainer.prototype.DEF_CLASS="form-control";EditContainer.prototype.DEF_CONT_CLASS="form-group";EditContainer.prototype.BTNS_CONTAINER_CLASS="input-group-btn";EditContainer.prototype.INCORRECT_VAL_CLASS="error";EditContainer.prototype.DEF_EDIT_CONT_CLASS="input-group";EditContainer.prototype.VAL_INIT_ATTR="initValue";EditContainer.prototype.NOT_SELECTED_VAL="null";EditContainer.prototype.BTNS_CONTAINER_CLASS="input-group-btn";EditContainer.prototype.addButtonContainer=function(){this.m_buttons=new ControlContainer(this.getId()+":btn-cont","SPAN",{"className":this.m_btnContClassName,"enabled":this.getEnabled()});this.addButtonControls();}
EditContainer.prototype.addButtonControls=function(){if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditContainer.prototype.addOption=function(opt){this.addElement(opt);}
EditContainer.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditContainer.prototype.setIndex=function(ind){if(this.m_node.options&&this.m_node.options.length>ind){this.m_node.selectedIndex=ind;}}
EditContainer.prototype.getOption=function(){var i=this.getIndex();if(i>=0){return this.getElementByIndex(i);}}
EditContainer.prototype.setValue=function(val){this.setAttr("value",val);}
EditContainer.prototype.getValue=function(){var v=EditContainer.superclass.getValue.call(this);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setInitValue=function(val){this.setAttr(this.VAL_INIT_ATTR,val);this.setValue(val);}
EditContainer.prototype.getInitValue=function(){var v=this.getAttr(this.VAL_INIT_ATTR);if(v==this.NOT_SELECTED_VAL){v=null;}
return v;}
EditContainer.prototype.setLabel=function(label){this.m_label=label;}
EditContainer.prototype.getLabel=function(){return this.m_label;}
EditContainer.prototype.setValidator=function(v){this.m_validator=v;}
EditContainer.prototype.getValidator=function(){return this.m_validator;}
EditContainer.prototype.getButtons=function(){return this.m_buttons;}
EditContainer.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_node,this.INCORRECT_VAL_CLASS);this.getErrorControl().setValue(erStr);}
EditContainer.prototype.setValid=function(){DOMHelper.delClass(this.m_node,this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
EditContainer.prototype.toDOM=function(parent){var id=this.getId();this.m_container=new ControlContainer((id?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName,"visible":this.getVisible()});if(this.m_label){this.m_container.addElement(this.m_label);}
this.m_editContainer=new Control((id?id+":edit-cont":null),this.m_editContTagName,{"className":this.m_editContClassName});this.m_container.addElement(this.m_editContainer);this.m_container.toDOM(parent);EditContainer.superclass.toDOM.call(this,this.m_editContainer.getNode());this.m_errorControl=new ErrorControl(id?id+":error":null);this.m_errorControl.toDOM(this.m_editContainer.getNode());if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}}
EditContainer.prototype.delDOM=function(){EditContainer.superclass.delDOM.call(this);if(this.m_buttons){this.m_buttons.delDOM();}
if(this.m_errorControl){this.m_errorControl.delDOM();}
if(this.m_editContainer){this.m_editContainer.delDOM();}
if(this.m_container){this.m_container.delDOM();}}
EditContainer.prototype.setVisible=function(visible){if(this.m_container){this.m_container.setVisible(visible);}
if(this.m_edit_container){this.m_edit_container.setVisible(visible);}
if(this.m_label){this.m_label.setVisible(visible);}
if(this.m_buttons){this.m_buttons.setVisible(visible);}
EditContainer.superclass.setVisible.call(this,visible);}
EditContainer.prototype.setEnabled=function(enabled){if(this.m_buttons){this.m_buttons.setEnabled(enabled);}
EditContainer.superclass.setEnabled.call(this,enabled);}
EditContainer.prototype.reset=function(){var i=0;if(this.getNotSelectedLast()){i=this.getCount()-1;}
this.setIndex(i);}
EditContainer.prototype.isNull=function(){var v=this.getValue();return(!v||v==this.NOT_SELECTED_VAL);}
EditContainer.prototype.getModified=function(){return(this.getValue()!=this.getInitValue());}
EditContainer.prototype.clear=function(){for(var id in this.m_elements){DOMHelper.delNode(this.m_elements[id].m_node);}
this.m_elements={};}
EditContainer.prototype.getAddNotSelected=function(){return this.m_addNotSelected;}
EditContainer.prototype.setAddNotSelected=function(v){this.m_addNotSelected=v;}
EditContainer.prototype.getNotSelectedLast=function(){return this.m_notSelectedLast;}
EditContainer.prototype.setNotSelectedLast=function(v){this.m_notSelectedLast=v;}
EditContainer.prototype.getOptionClass=function(){return this.m_optionClass;}
EditContainer.prototype.setOptionClass=function(v){this.m_optionClass=v;}
EditContainer.prototype.getIsRef=function(){return false;}
EditContainer.prototype.getFormatFunction=function(){return this.m_formatFunction;}
EditContainer.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
EditContainer.prototype.getContTagName=function(){return this.m_contTagName;}
EditContainer.prototype.setContTagName=function(v){this.m_contTagName=v;}
EditContainer.prototype.getContClassName=function(){return this.m_contClassName;}
EditContainer.prototype.setContClassName=function(v){this.m_contClassName=v;}
EditContainer.prototype.getEditContClassName=function(){return this.m_editContClassName;}
EditContainer.prototype.setEditContClassName=function(v){this.m_editContClassName=v;}
EditContainer.prototype.getEditContTagName=function(){return this.m_editContTagName;}
EditContainer.prototype.setEditContTagName=function(v){this.m_editContTagName=v;}
EditContainer.prototype.getOnSelect=function(){return this.m_onSelect;}
EditContainer.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditContainer.prototype.getInputEnabled=function(){return this.getEnabled();}
EditContainer.prototype.setInputEnabled=function(v){this.setEnabled(v);}
EditContainer.prototype.valueChanged=function(){}
EditContainer.prototype.setButtonOpen=function(v){this.m_buttonOpen=v;if(this.m_buttonOpen&&this.m_buttonOpen.setEditControl){this.m_buttonOpen.setEditControl(this);}}
EditContainer.prototype.getButtonOpen=function(){return this.m_buttonOpen;}
EditContainer.prototype.setButtonClear=function(v){this.m_buttonClear=v;if(this.m_buttonClear&&this.m_buttonClear.setEditControl){this.m_buttonClear.setEditControl(this);}}
EditContainer.prototype.getButtonClear=function(){return this.m_buttonClear;}
EditContainer.prototype.setButtonSelect=function(v){this.m_buttonSelect=v;if(this.m_buttonSelect&&this.m_buttonSelect.setEditControl){this.m_buttonSelect.setEditControl(this);}}
EditContainer.prototype.getButtonSelect=function(){return this.m_buttonSelect;}
EditContainer.prototype.getButtons=function(){return this.m_buttons;}
EditContainer.prototype.getErrorControl=function(){return this.m_errorControl;}
EditContainer.prototype.setErrorControl=function(v){this.m_errorControl=v;}
EditContainer.prototype.setBtnContClassName=function(v){this.m_btnContClassName=v;}
EditContainer.prototype.getBtnContClassName=function(){return this.m_btnContClassName;} 
EditContainer.prototype.ER_NO_OPT_CLASS="Класс опций не задан.";EditContainer.prototype.ER_NO_TAG="Имя узла не задано";EditContainer.prototype.NOT_SELECTED_DESCR="<не выбрано>"; 
function EditRadioGroup(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditRadio;options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:false;options.className=options.className||"row";EditRadioGroup.superclass.constructor.call(this,id,options);}
extend(EditRadioGroup,EditContainer);EditRadioGroup.prototype.m_label;EditRadioGroup.prototype.DEF_TAG_NAME="div";EditRadioGroup.prototype.addElement=function(ctrl){this.setElement(ctrl.getId(),ctrl);}
EditRadioGroup.prototype.getIndex=function(){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return i;}}}
EditRadioGroup.prototype.setValue=function(id){for(var elem_id in this.m_elements){this.m_elements[elem_id].getNode().checked=(this.m_elements[elem_id].getNode().value==id);}}
EditRadioGroup.prototype.setValueByIndex=function(ind){var i=0;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"){this.m_elements[elem_id].m_node.checked=(i==ind);i++;}}}
EditRadioGroup.prototype.getValue=function(){var res=null;for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){res=this.m_elements[elem_id].m_node.value;break;}}
return res;}
EditRadioGroup.prototype.getValueDescr=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id].m_node.nodeName.toLowerCase()=="input"&&this.m_elements[elem_id].m_node.checked){return this.m_elements[elem_id].m_node.nodeValue;}}} 
function EditRadio(id,options){options=options||{};options.type=options.type||"radio";options.cmdClear=false;var bs_col=window.getApp().getBsCol();options.labelClassName=(options.labelClassName!=undefined)?options.labelClassName:("control-label "+(bs_col+"11"));options.editContClassName=(options.editContClassName!=undefined)?options.editContClassName:("input-group "+bs_col+"1");EditRadio.superclass.constructor.call(this,id,options);if(options.value&&CommonHelper.isIE()){this.m_node.value=options.value;}
if(options.checked){this.setChecked(options.checked);}}
extend(EditRadio,EditString);EditRadio.prototype.ATTR_DISABLED="disabled";EditRadio.prototype.setChecked=function(checked){this.m_node.checked=checked;}
EditRadio.prototype.getChecked=function(){return this.m_node.checked;} 
function EditSelect(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.optionClass=options.optionClass||EditSelectOption;if(options.onSelect){options.events=options.events||{};var self=this;if(!options.events.change){options.events.change=function(){self.callOnSelect();}}
else{this.m_origOnChange=options.events.change;options.events.change=function(){self.callOnSelect();self.m_origOnChange();}}}
EditSelect.superclass.constructor.call(this,id,options);}
extend(EditSelect,EditContainer);EditSelect.prototype.DEF_TAG_NAME="select";EditSelect.prototype.selectOptionById=function(optId){this.m_elements[optId].getNode().selected=true;}
EditSelect.prototype.getIndex=function(){if(this.m_node.options&&this.m_node.options.length){return this.m_node.selectedIndex;}}
EditSelect.prototype.setValue=function(val){if(val==null)val=this.NOT_SELECTED_VAL;EditSelect.superclass.setValue.call(this,val);for(var id in this.m_elements){if(this.m_elements[id].getValue()==val){this.selectOptionById(id);break;}}}
EditSelect.prototype.setIndex=function(ind){EditSelect.superclass.setIndex.call(this,ind);var i=0;for(var id in this.m_elements){if(i==ind){this.selectOptionById(id);break;}
i++;}}
EditSelect.prototype.getValue=function(){if(this.getIndex()>=0){var v;var el=this.getElement(this.getIndex());if(el){v=el.getValue();}
else{v=this.getNode().options[this.m_node.selectedIndex].value;}
return(v==this.NOT_SELECTED_VAL)?null:v;}}
EditSelect.prototype.callOnSelect=function(){if(this.getOnSelect()){this.getOnSelect().call(this);}} 
function EditSelectRef(id,options){options=options||{};options.optionClass=options.optionClass||EditSelectOptionRef;this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setKeyIds(options.keyIds);this.setModelKeyFields(options.modelKeyFields);this.setModelKeyIds(options.modelKeyIds);this.setModelDescrFields(options.modelDescrFields);this.setModelDescrIds(options.modelDescrIds);this.setModelDescrFormatFunction(options.modelDescrFormatFunction);this.setDependBaseControl(options.dependBaseControl);this.setDependBaseFieldIds(options.dependBaseFieldIds);this.setDependFieldIds(options.dependFieldIds);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:true);var self=this;options.events=options.events||{};if(!options.events.change){options.events.change=function(){self.callOnSelect();}}
else{this.m_origOnChange=options.events.change;options.events.change=function(){self.callOnSelect();self.m_origOnChange();}}
EditSelectRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),options.modelDataStr);}
this.m_model.setDate(options.modelDataStr);}
if(!this.m_autoRefresh)this.onRefresh();}
extend(EditSelectRef,EditSelect);EditSelectRef.prototype.m_oldEnabled;EditSelectRef.prototype.m_cashable;EditSelectRef.prototype.m_readPublicMethod;EditSelectRef.prototype.m_model;EditSelectRef.prototype.m_keyIds;EditSelectRef.prototype.m_modelKeyFields;EditSelectRef.prototype.m_modelKeyIds;EditSelectRef.prototype.m_modelDescrFields;EditSelectRef.prototype.m_modelDescrIds;EditSelectRef.prototype.m_modelDescrFormatFunction;EditSelectRef.prototype.m_dependBaseControl;EditSelectRef.prototype.m_dependBaseFieldIds;EditSelectRef.prototype.m_dependFieldIds;EditSelectRef.prototype.m_dependControl;EditSelectRef.prototype.m_autoRefresh;EditSelectRef.prototype.KEY_ATTR="keys";EditSelectRef.prototype.KEY_INIT_ATTR="initKeys";EditSelectRef.prototype.keys2Str=function(keys){return CommonHelper.serialize(keys);}
EditSelectRef.prototype.str2Keys=function(str){return CommonHelper.unserialize(str);}
EditSelectRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.getDependControl()){this.getDependControl().dependOnSelectBase(this.getModelRow());}
if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditSelectRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditSelectRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditSelectRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditSelectRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditSelectRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getModified=function(){return(this.getAttr(this.KEY_ATTR)!=this.getAttr(this.KEY_INIT_ATTR));}
EditSelectRef.prototype.getIsRef=function(){return true;}
EditSelectRef.prototype.resetKeys=function(){this.setKeys({});}
EditSelectRef.prototype.reset=function(){EditSelectRef.superclass.reset.call(this);this.resetKeys();}
EditSelectRef.prototype.setValue=function(val){if(val!=null&&typeof val=="object"&&((val.getKeys&&val.getDescr)||(val.keys&&val.descr))){var val=val.getKeys?val.getKeys():val.keys;if(!this.m_keyIds){this.m_keyIds=[];for(var keyid in val){this.m_keyIds.push(keyid);}}}
else{if(!this.getModelKeyFields()){this.defineModelKeyFieds();}
val_str=(val!=null)?val.toString():null;val={};val[this.getModelKeyFields()[0].getId()]=val_str;}
var rec_found;for(var id in this.m_elements){var v=this.m_elements[id].getValue();rec_found=false;for(var vk in v){rec_found=(v[vk]==val[vk]);if(!rec_found){break;}}
if(rec_found){this.selectOptionById(id);break;}}}
EditSelectRef.prototype.selectOptionById=function(optId){EditSelectRef.superclass.selectOptionById.call(this,optId);this.callOnSelect();}
EditSelectRef.prototype.getValue=function(){var ind=this.getIndex();if((this.getAddNotSelected()&&!this.getNotSelectedLast()&&ind)||(this.getAddNotSelected()&&this.getNotSelectedLast()&&ind!=(this.getCount()-1))||!this.getAddNotSelected()){var elem=this.getElement(ind);return!elem?null:new RefType({"keys":this.getKeys(),"descr":elem.getDescr()});}}
EditSelectRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"){this.m_initValue=this.getValue();this.setInitKeys(this.getKeys());}}
EditSelectRef.prototype.getInitValue=function(){return this.getInitKeys();}
EditSelectRef.prototype.setCashable=function(v){this.m_cashable=v;}
EditSelectRef.prototype.getCashable=function(){return this.m_cashable;}
EditSelectRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditSelectRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditSelectRef.prototype.defineModelKeyFieds=function(){if(this.getModelKeyIds()){var key_fields=[];var ids=this.getModelKeyIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelKeyFields(key_fields);}
else{var key_fields=[];var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){key_fields.push(fields[id]);}}
this.setModelKeyFields(key_fields);}}
EditSelectRef.prototype.defineModelDescrFieds=function(){if(this.getModelDescrIds()){var key_fields=[];var ids=this.getModelDescrIds();for(var i=0;i<ids.length;i++){if(this.m_model.fieldExists(ids[i])){key_fields.push(this.m_model.getField(ids[i]));}}
this.setModelDescrFields(key_fields);}}
EditSelectRef.prototype.setModel=function(v){this.m_model=v;this.setModelKeyFields(undefined);this.setModelDescrFields(undefined);this.defineModelKeyFieds();this.defineModelDescrFieds();}
EditSelectRef.prototype.getModel=function(){return this.m_model;}
EditSelectRef.prototype.getModelKeyIds=function(){return this.m_modelKeyIds;}
EditSelectRef.prototype.setModelKeyIds=function(v){this.m_modelKeyIds=v;}
EditSelectRef.prototype.getModelKeyFields=function(){return this.m_modelKeyFields;}
EditSelectRef.prototype.setModelKeyFields=function(v){this.m_modelKeyFields=v;}
EditSelectRef.prototype.getModelDescrIds=function(){return this.m_modelDescrIds;}
EditSelectRef.prototype.setModelDescrIds=function(v){this.m_modelDescrIds=v;}
EditSelectRef.prototype.getModelDescrFields=function(){return this.m_modelDescrFields;}
EditSelectRef.prototype.setModelDescrFields=function(v){this.m_modelDescrFields=v;}
EditSelectRef.prototype.getModelDescrFormatFunction=function(){return this.m_modelDescrFormatFunction;}
EditSelectRef.prototype.setModelDescrFormatFunction=function(v){this.m_modelDescrFormatFunction=v;}
EditSelectRef.prototype.toDOM=function(parent){EditSelectRef.superclass.toDOM.call(this,parent);if(this.getAutoRefresh()){this.onRefresh();}}
EditSelectRef.prototype.onGetData=function(resp){if(!this.m_model)return;if(resp&&this.m_model){this.m_model.setData(resp.getModelData(this.m_model.getId()));if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),resp.getModelData(this.m_model.getId()));}}
var old_key_val;if(this.m_initValue){old_key_val=this.m_initValue;this.m_initValue=undefined;}
else{old_key_val=this.getValue();if(old_key_val){old_key_val=old_key_val.getKeys();}}
if(!this.getModelKeyFields()){this.defineModelKeyFieds();if(!this.getModelKeyFields()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}}
if(!this.getModelDescrFormatFunction()&&!this.getModelDescrFields()){this.defineModelDescrFieds();if(!this.getModelDescrFields()){this.m_modelDescrFields=[];var fields=this.m_model.getFields();var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.m_modelDescrFields.push(fields[id]);}}}
if(!this.getModelKeyFields()){this.setModelDescrFields(this.getModelKeyFields());}}
this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var val={};for(var i=0;i<this.m_modelKeyFields.length;i++){val[this.m_modelKeyFields[i].getId()]=this.NOT_SELECTED_VAL;}
var def_opt_opts={"value":val,"descr":this.NOT_SELECTED_DESCR};}
var opt_ind=0;if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));opt_ind++;}
var opt_checked=false;var old_keys;if(old_key_val&&typeof(old_key_val)=="object"&&old_key_val.getKeys){old_keys=old_key_val.getKeys();}
var ind=0;while(this.m_model.getNextRow()){var opt_key_val={};var keys={};for(var i=0;i<this.m_modelKeyFields.length;i++){var key_v=this.m_modelKeyFields[i].getValue();opt_key_val[this.m_modelKeyFields[i].getId()]=key_v;keys[this.m_keyIds[i]]=key_v;}
var cur_opt_checked=false;if(!opt_checked){if(old_keys){for(var key_id in keys){opt_checked=(old_keys[key_id]&&keys[key_id]==old_keys[key_id]);if(!opt_checked){break;}}
cur_opt_checked=opt_checked;}
else if(old_key_val){for(var key_id in keys){opt_checked=(keys[key_id]==old_key_val);break;}
cur_opt_checked=opt_checked;}}
var descr_val="";if(this.getModelDescrFormatFunction()){descr_val=this.getModelDescrFormatFunction().call(this,this.m_model.getFields());}
else{for(var i=0;i<this.m_modelDescrFields.length;i++){descr_val+=(descr_val=="")?"":" ";descr_val+=this.m_modelDescrFields[i].getValue();}}
this.addElement(new opt_class(this.getId()+":"+opt_ind,{"checked":cur_opt_checked,"value":opt_key_val,"descr":descr_val,"attrs":{"modelIndex":ind}}));ind++;opt_ind++;}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":"+opt_ind,def_opt_opts));}
for(var elem_id in this.m_elements){this.m_elements[elem_id].toDOM(this.m_node);}
if(!opt_checked&&this.getCount()){this.setIndex(0);}
this.setEnabled(this.m_oldEnabled);}
EditSelectRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=window.getApp().getCashData(this.m_model.getId());if(cash){this.m_oldEnabled=this.getEnabled();this.setEnabled(false);this.m_model.setData(cash);this.onGetData();return;}}
this.m_oldEnabled=this.getEnabled();this.setEnabled(false);var self=this;this.getReadPublicMethod().run({"async":false,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.setEnabled(self.m_oldEnabled);self.getErrorControl().setValue(window.getApp().formatError(erCode,erStr));}});}
EditSelectRef.prototype.callOnSelect=function(){var i=this.getIndex();if(i==undefined)return;var model_keys=this.getElement(i).getValue();var key_ids=this.getKeyIds();var keys={};var i=0;for(id in model_keys){keys[key_ids[i]]=model_keys[id];i++;}
this.setKeys(keys);if(this.getOnSelect()){this.m_onSelect.call(this,this.getModelRow());}}
EditSelectRef.prototype.getModelRow=function(){var ind;if(this.getIndex()>=0){ind=this.getNode().options[this.m_node.selectedIndex].getAttribute("modelIndex");}
if(ind!=undefined&&ind>=0){this.m_model.getRow(ind);}
else{this.m_model.reset();}
return this.m_model.getFields();}
EditSelectRef.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
EditSelectRef.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
EditSelectRef.prototype.setDependBaseControl=function(v){this.m_dependBaseControl=v;if(this.m_dependBaseControl&&this.m_dependBaseControl.setDependentControl){this.setDependentControl(this);}}
EditSelectRef.prototype.getDependBaseControl=function(){return this.m_dependBaseControl;}
EditSelectRef.prototype.setDependBaseFieldIds=function(v){this.m_dependBaseFieldIds=v;}
EditSelectRef.prototype.getDependBaseFieldIds=function(){return this.m_dependBaseFieldIds;}
EditSelectRef.prototype.setDependFieldIds=function(v){this.m_dependFieldIds=v;}
EditSelectRef.prototype.getDependFieldIds=function(){return this.m_dependFieldIds;}
EditSelectRef.prototype.setDependControl=function(v){this.m_dependControl=v;}
EditSelectRef.prototype.getDependControl=function(){return this.m_dependControl;}
EditSelectRef.prototype.dependOnSelectBase=function(baseModelRow){var pm=this.getReadPublicMethod();if(!pm)return;var contr=pm.getController();var cond_fields,cond_sgns,cond_vals;var cond_keys=this.getDependFieldIds();var base_keys=this.getDependBaseFieldIds();var ind=-1;for(var fid in baseModelRow){var cond_key=undefined;if(!base_keys&&baseModelRow[fid].getPrimaryKey()){ind++;cond_key=cond_keys[ind];}
else if(base_keys){for(ind=0;ind<base_keys.length;ind++){if(base_keys[ind]==fid){cond_key=cond_keys[ind];break;}}}
if(cond_key){cond_fields=((cond_fields==undefined)?"":(cond_fields+contr.PARAM_FIELD_SEP_VAL))+cond_key;cond_sgns=((cond_sgns==undefined)?"":(cond_sgns+contr.PARAM_FIELD_SEP_VAL))+contr.PARAM_SGN_EQUAL;cond_vals=((cond_vals==undefined)?"":(cond_vals+contr.PARAM_FIELD_SEP_VAL))+baseModelRow[fid].getValue();}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,cond_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,cond_sgns);pm.setFieldValue(contr.PARAM_COND_VALS,cond_vals);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);this.onRefresh();} 
EditSelectRef.prototype.ER_TYPE_NOT_FOUND="Котрол %, не задано ключевое поле.";EditSelectRef.prototype.ER_NO_RESULT="Котрол %, не задано ключевое поле представления.";EditSelectRef.prototype.ER_NO_KEYS="Котрол %, не заданы идентификаторы ключей!"; 
function EditSelectOption(id,options){options=options||{};if(options.checked!=undefined&&options.checked==true){options.attrs=options.attrs||{};options.attrs.selected="selected";}
EditSelectOption.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);if(options.descr){this.setDescr(options.descr);}}
extend(EditSelectOption,Control);EditSelectOption.prototype.DEF_TAG_NAME="option";EditSelectOption.prototype.getValue=function(){return this.getAttr("value");}
EditSelectOption.prototype.setValue=function(id){this.setAttr("value",id);}
EditSelectOption.prototype.getDescr=function(){return this.getText();}
EditSelectOption.prototype.setDescr=function(descr){this.setText(descr);} 
function EditSelectOptionRef(id,options){options=options||{};EditSelectOptionRef.superclass.constructor.call(this,id,options);}
extend(EditSelectOptionRef,EditSelectOption);EditSelectOptionRef.prototype.getValue=function(){var str=EditSelectOptionRef.superclass.getValue.call(this);return CommonHelper.unserialize(str);}
EditSelectOptionRef.prototype.setValue=function(keys){var str=CommonHelper.serialize(keys);EditSelectOptionRef.superclass.setValue.call(this,str);} 
function EditRadioGroupRef(id,options){options=options||{};this.setCashable((options.cashable!=undefined)?options.cashable:true);this.setModel(options.model);this.setReadPublicMethod(options.readPublicMethod);this.setKeyField(options.keyField);this.setKeyFieldId(options.keyFieldId);this.setDescrField(options.descrField);this.setDescrFieldId(options.descrFieldId);this.setNotSelectedValue(options.notSelectedValue||this.DEF_NOT_SELECTED_VAL);this.setNotSelectedCaption(options.notSelectedCaption||this.DEF_NOT_SELECTED_CAP);this.setColCount(options.colCount||1);EditRadioGroupRef.superclass.constructor.call(this,id,options);if(options.modelDataStr&&this.m_model){if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),options.modelDataStr);}
else{this.m_model.setDate(options.modelDataStr);}}}
extend(EditRadioGroupRef,EditRadioGroup);EditRadioGroupRef.prototype.DEF_NOT_SELECTED_VAL="null";EditRadioGroupRef.prototype.m_oldEnabled;EditRadioGroupRef.prototype.m_cashable;EditRadioGroupRef.prototype.m_readPublicMethod;EditRadioGroupRef.prototype.m_model;EditRadioGroupRef.prototype.m_keyFieldId;EditRadioGroupRef.prototype.m_keyField;EditRadioGroupRef.prototype.m_notSelectedCaption;EditRadioGroupRef.prototype.m_notSelectedValue;EditRadioGroupRef.prototype.getCashable=function(){return this.m_cashable;}
EditRadioGroupRef.prototype.setCashable=function(v){this.m_cashable=v;}
EditRadioGroupRef.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
EditRadioGroupRef.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
EditRadioGroupRef.prototype.setModel=function(v){this.m_model=v;}
EditRadioGroupRef.prototype.getModel=function(){return this.m_model;}
EditRadioGroupRef.prototype.getKeyFieldId=function(){return this.m_keyFieldId;}
EditRadioGroupRef.prototype.setKeyFieldId=function(v){this.m_keyFieldId=v;}
EditRadioGroupRef.prototype.getKeyField=function(){return this.m_keyField;}
EditRadioGroupRef.prototype.setKeyField=function(v){this.m_keyField=v;}
EditRadioGroupRef.prototype.getDescrFieldId=function(){return this.m_descrFieldId;}
EditRadioGroupRef.prototype.setDescrFieldId=function(v){this.m_descrFieldId=v;}
EditRadioGroupRef.prototype.getDescrField=function(){return this.m_descrField;}
EditRadioGroupRef.prototype.setDescrField=function(v){this.m_descrField=v;}
EditRadioGroupRef.prototype.getNotSelectedValue=function(){return this.m_notSelectedValue;}
EditRadioGroupRef.prototype.setNotSelectedValue=function(v){this.m_notSelectedValue=v;}
EditRadioGroupRef.prototype.getNotSelectedCaption=function(){return this.m_notSelectedCaption;}
EditRadioGroupRef.prototype.setNotSelectedCaption=function(v){this.m_notSelectedCaption=v;}
EditRadioGroupRef.prototype.getColCount=function(){return this.m_colCount;}
EditRadioGroupRef.prototype.setColCount=function(v){this.m_colCount=v;}
EditRadioGroupRef.prototype.onRefresh=function(){if(this.getCashable()&&this.m_model){var cash=window.getApp().getCashData(this.getName());if(cash){this.m_model.setDate(cash);this.onGetData();return;}}
this.m_oldEnabled=this.getEnabled();this.setEnabled(false);var self=this;this.getReadPublicMethod().run({"async":false,"ok":function(resp){self.onGetData(resp);},"fail":function(resp,erCode,erStr){self.setEnabled(self.m_oldEnabled);self.getErrorControl().setValue(window.getApp().formatError(erCode,erStr));}});}
EditRadioGroupRef.prototype.toDOM=function(parent){EditRadioGroupRef.superclass.toDOM.call(this,parent);this.onRefresh();}
EditRadioGroupRef.prototype.onGetData=function(resp){if(!this.m_model)return;if(resp&&this.m_model){this.m_model.setData(resp.getModelData(this.m_model.getId()));if(this.getCashable()){window.getApp().setCashData(this.m_model.getId(),resp.getModelData(this.m_model.getId()));}}
var old_key_val=this.getValue()||this.m_defaultValue;var f=this.getKeyField();if(!f&&this.getKeyFieldId()&&this.m_model.fieldExists(this.getKeyFieldId())){this.setKeyField(this.m_model.getField(this.getKeyFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(fields[id].getPrimaryKey()){this.setKeyField(fields[id]);break;}}}
if(!this.getKeyField()){throw Error(CommonHelper.format(this.ER_NO_LOOKUP,Array(this.getName())));}
var f=this.getDescrField();if(!f&&this.getDescrFieldId()&&this.m_model.fieldExists(this.getDescrFieldId())){this.setDescrField(this.m_model.getField(this.getDescrFieldId()));}
else if(!f){var fields=this.m_model.getFields();for(var id in fields){if(!fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}
if(!this.getDescrField()){for(var id in fields){if(fields[id].getPrimaryKey()){this.setDescrField(fields[id]);break;}}}}
if(!this.getDescrField()){throw Error(CommonHelper.format(this.ER_NO_RESULT,Array(this.getName())));}
var self=this;this.clear();var opt_class=this.getOptionClass();if(this.getAddNotSelected()){var def_opt_opts={"className":"a","value":this.getNotSelectedValue(),"labelCaption":this.getNotSelectedCaption(),"name":this.getId(),"events":{"onclick":function(){if(self.m_onSelect){self.m_onSelect();}}}};}
if(this.getAddNotSelected()&&!this.getNotSelectedLast()){this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
var opt_checked=false;while(this.m_model.getNextRow()){var key_val=this.getKeyField().getValue();opt_checked=opt_checked||(key_val==old_key_val);this.addElement(new opt_class(this.getId()+":id_"+key_val,{"className":"a","checked":(key_val==old_key_val),"value":key_val,"labelCaption":this.getDescrField().getValue(),"name":this.getId(),"events":{"click":function(){if(self.m_onSelect){self.m_onSelect();}}}}));}
if(this.getAddNotSelected()&&this.getNotSelectedLast()){if(!opt_checked){def_opt_opts.checked=true;opt_checked=true;}
this.addElement(new opt_class(this.getId()+":not_selected",def_opt_opts));}
if(!opt_checked&&this.getCount()){this.setIndex(0);}
var columns=[];var col_w=12/this.m_colCount;var bs=window.getApp().getBsCol()+col_w;for(var n=0;n<this.m_colCount;n++){columns.push(new Control(CommonHelper.uniqid(),"div",{"className":bs}));}
var elem;var n=0;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];if(n==this.m_colCount)n=0;elem.toDOM(columns[n].getNode());n++;}
for(var n=0;n<this.m_colCount;n++){columns[n].toDOM(this.m_node);}
this.setEnabled(this.m_oldEnabled);} 
EditRadioGroupRef.prototype.ER_NO_LOOKUP="Котрол %, не задано ключевое поле.";EditRadioGroupRef.prototype.DEF_NOT_SELECTED_CAP="Все элементы"; 
function PrintObj(options){options=options||{};this.setTempl(options.templ);this.setKeys(options.keys);this.setKeyIds(options.keyIds);this.setPublicMethodKeyIds(options.publicMethodKeyIds);this.setPublicMethod(options.publicMethod);this.setEnabled((options.enabled==undefined)?options.enabled:true);this.setDivider((options.divider==undefined)?options.divider:false);this.setWinParams(options.winParams);var self=this;var id=CommonHelper.uniqid();this.m_control=new ControlContainer(id,"li",{"className":(this.getEnabled()==false)?"disabled":((this.getDivider())?"divider":""),"elements":[new Control(id+":a","a",{"value":options.caption,"events":{"click":function(){self.onClick();}},"attrs":{"href":"#","role":"menuitem"}})]});}
PrintObj.prototype.m_caption;PrintObj.prototype.m_templ;PrintObj.prototype.m_publicMethod;PrintObj.prototype.m_keys;PrintObj.prototype.m_publicMethodKeyIds;PrintObj.prototype.m_enabled;PrintObj.prototype.m_divider;PrintObj.prototype.m_winParams;PrintObj.prototype.m_control;PrintObj.prototype.m_grid;PrintObj.prototype.getCaption=function(){return this.m_control.getElement("a").getValue();}
PrintObj.prototype.setCaption=function(v){this.m_control.getElement("a").setCaption(v)}
PrintObj.prototype.getTempl=function(){return this.m_templ;}
PrintObj.prototype.setTempl=function(v){this.m_templ=v;}
PrintObj.prototype.getPublicMethod=function(){return this.m_publicMethod;}
PrintObj.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
PrintObj.prototype.getKeys=function(){if(!this.m_keys&&this.m_grid){if(!this.m_keyIds){return this.m_grid.getSelectedNodeKeys();}
else{var m=this.m_grid.getModel();if(m){var keys={};this.m_grid.setModelToCurrentRow();var fields=m.getFields();for(var i=0;i<this.m_keyIds.length;i++){if(fields[this.m_keyIds[i]]){keys[this.m_keyIds[i]]=fields[this.m_keyIds[i]].getValue();}}
return keys;}}}
else if(this.m_keys){return this.m_keys;}}
PrintObj.prototype.setKeys=function(v){this.m_keys=v;}
PrintObj.prototype.getKeyIds=function(){return this.m_keyIds;}
PrintObj.prototype.setKeyIds=function(v){this.m_keyIds=v;}
PrintObj.prototype.getPublicMethodKeyIds=function(){return this.m_publicMethodKeyIds;}
PrintObj.prototype.setPublicMethodKeyIds=function(v){this.m_publicMethodKeyIds=v;}
PrintObj.prototype.getEnabled=function(){return this.m_enabled;}
PrintObj.prototype.setEnabled=function(v){this.m_enabled=v;}
PrintObj.prototype.getDivider=function(){return this.m_divider;}
PrintObj.prototype.setDivider=function(v){this.m_divider=v;}
PrintObj.prototype.getWinParams=function(){return this.m_winParams;}
PrintObj.prototype.setWinParams=function(v){this.m_winParams=v;}
PrintObj.prototype.getControl=function(){return this.m_control;}
PrintObj.prototype.setGrid=function(v){this.m_grid=v;}
PrintObj.prototype.onClick=function(){var keys=this.getKeys();if(keys&&!CommonHelper.isEmpty(keys)){var pm=this.getPublicMethod();var pm_keys=this.getPublicMethodKeyIds();var ind=0;for(var id in keys){pm.setFieldValue(pm_keys[ind],keys[id]);ind++;}
pm.setFieldValue("templ",this.getTempl());var self=this;pm.run({"viewId":"ViewHTMLXSLT","retContentType":"text","ok":function(resp){WindowPrint.show({"content":resp,"print":false,"title":self.getCaption()});}});}} 
function EditModalDialog(id,options){options=options||{};this.m_viewClass=options.viewClass;this.m_viewOptions=options.viewOptions;this.m_viewTemplate=options.viewTemplate;this.m_headTitle=options.headTitle;var self=this;this.setFormatValue(options.formatValue||function(val){return self.formatValue(val);});options.tagName="A";options.attrs=options.attrs||{};options.attrs.style=((options.attrs.style)?options.attrs.style:"")+"cursor:pointer;";options.events=options.events||{};options.events.click=this.m_onClick;EditModalDialog.superclass.constructor.call(this,id,options);}
extend(EditModalDialog,Edit);EditModalDialog.prototype.toDOM=function(parent){var id=this.getId();this.m_container=new ControlContainer(((id)?id+":cont":null),this.m_contTagName,{"className":this.m_contClassName});if(this.m_label&&this.m_labelAlign=="left"){this.m_container.addElement(this.m_label);}
this.m_container.toDOM(parent);EditModalDialog.superclass.toDOM.call(this,this.m_container.getNode());if(this.m_buttons&&!this.m_buttons.isEmpty()){this.m_buttons.toDOMAfter(this.getNode());}}
EditModalDialog.prototype.m_valueJSON;EditModalDialog.prototype.m_viewClass;EditModalDialog.prototype.m_viewOptions;EditModalDialog.prototype.m_viewTemplate;EditModalDialog.prototype.m_headTitle;EditModalDialog.prototype.m_formatValue;EditModalDialog.prototype.setValue=function(v){if(typeof v=="object"){this.m_valueJSON=v;}
else{this.m_valueJSON=CommonHelper.unserialize(v);}
var v=this.m_formatValue(this.m_valueJSON);this.getNode().textContent=v;}
EditModalDialog.prototype.getValue=function(){return CommonHelper.serialize(this.m_valueJSON);}
EditModalDialog.prototype.getValueJSON=function(){return this.m_valueJSON;}
EditModalDialog.prototype.isNull=function(){var res=true;if(this.m_valueJSON||typeof(this.m_valueJSON)=="object"||!CommonHelper.isEmpty(this.m_valueJSON)){for(var id in this.m_valueJSON){if(this.m_valueJSON[id]!=undefined){res=false;break;}}}
return res;}
EditModalDialog.prototype.m_onClick=function(){if(!this.getEnabled())return;var v_opts={"valueJSON":this.m_valueJSON,"template":window.getApp().getTemplate(this.m_viewTemplate)};if(this.m_viewOptions)CommonHelper.merge(v_opts,this.m_viewOptions);this.m_view=new this.m_viewClass(this.getId()+":view:body:view",v_opts);var self=this;this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.BTN_OK_CAP,"controlOkTitle":this.BTN_OK_TITLE,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){self.setValue(self.m_view.getValue());self.closeSelect();},"content":this.m_view,"contentHead":this.m_headTitle});this.m_form.open();}
EditModalDialog.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}}
EditModalDialog.prototype.setFormatValue=function(v){this.m_formatValue=v;}
EditModalDialog.prototype.getFormatValue=function(){return this.m_formatValue;}
EditModalDialog.prototype.formatValue=function(val){var res="";for(var id in val){if(val[id]&&typeof(val[id])=="object"&&!val[id].isNull()){res+=((res=="")?"":", ")+val[id].getDescr();}
else if(val[id]&&val[id]!=""){res+=((res=="")?"":", ")+val[id];}}
return res;} 
EditModalDialog.prototype.BTN_CANCEL_CAP="Отмена";EditModalDialog.prototype.BTN_CANCEL_TITLE="закрыть форму без сохранения изменений";EditModalDialog.prototype.BTN_OK_CAP="Ок";EditModalDialog.prototype.BTN_OK_TITLE="завершить редактирование и закрыть форму"; 
function EditRef(id,options){options=options||{};if(options.keys){this.setKeys(options.keys);}
if(options.keyIds){this.setKeyIds(options.keyIds);}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdSelect=(options.cmdSelect!=undefined)?options.cmdSelect:true;options.cmdOpen=(options.cmdOpen!=undefined)?options.cmdOpen:true;options.cmdClear=(options.cmdClear!=undefined)?options.cmdClear:true;options.cmdAutoComplete=(options.cmdAutoComplete!=undefined)?options.cmdAutoComplete:true;if(options.cmdInsert){options.buttonInsert=options.buttonInsert||new ButtonInsert(id+":btn_insert",{"editControl":this});}
if(options.cmdSelect&&!options.buttonSelect&&options.selectWinClass){options.buttonSelect=new ButtonSelectRef(id+':btn_select',{"winClass":options.selectWinClass,"winParams":options.selectWinParams,"descrIds":options.selectDescrIds,"keyIds":options.selectKeyIds,"control":this,"onSelect":options.onSelect,"formatFunction":options.selectFormatFunction,"multySelect":options.selectMultySelect,"enabled":options.enabled});}
if(options.cmdOpen&&!options.buttonOpen&&options.editWinClass){options.buttonOpen=new ButtonOpen(id+':btn_open',{"winClass":options.editWinClass,"winParams":options.editWinParams,"keyIds":options.openKeyIds,"control":this});}
if(options.cmdClear){options.buttonClear=options.buttonClear||new ButtonClear(id+":btn_clear",{"editControl":this,"enabled":options.enabled});}
this.setOnSelect(options.onSelect);EditRef.superclass.constructor.call(this,id,options);if(!this.getKeyIds().length){throw Error(CommonHelper.format(this.ER_NO_KEY,Array[this.getName()]));}
this.setButtonInsert(options.buttonInsert);}
extend(EditRef,Edit);EditRef.prototype.KEY_ATTR="keys";EditRef.prototype.KEY_INIT_ATTR="initKeys";EditRef.prototype.ATTR_DISABLED="readOnly";EditRef.prototype.m_buttonInsert;EditRef.prototype.m_keyIds;EditRef.prototype.addButtonControls=function(){if(this.m_buttonInsert)this.m_buttons.addElement(this.m_buttonInsert);if(this.m_buttonOpen)this.m_buttons.addElement(this.m_buttonOpen);if(this.m_buttonSelect)this.m_buttons.addElement(this.m_buttonSelect);if(this.m_buttonClear)this.m_buttons.addElement(this.m_buttonClear);}
EditRef.prototype.keys2Str=function(keys){return CommonHelper.array2json(keys);}
EditRef.prototype.str2Keys=function(str){return CommonHelper.json2obj(str);}
EditRef.prototype.setButtonInsert=function(v){this.m_buttonInsert=v;}
EditRef.prototype.getButtonInsert=function(){return this.m_buttonInsert;}
EditRef.prototype.setKeys=function(keys){if(!CommonHelper.isEmpty(keys)){this.m_keyIds=[];for(var keyid in keys){this.m_keyIds.push(keyid);}}
else if(!this.m_keyIds){this.m_keyIds=[];}
this.setAttr(this.KEY_ATTR,this.keys2Str(keys));if(this.m_onValueChange){this.m_onValueChange.call(this);}}
EditRef.prototype.setKeyIds=function(v){this.m_keyIds=v;}
EditRef.prototype.getKeyIds=function(){return this.m_keyIds;}
EditRef.prototype.getKeys=function(){return this.str2Keys(this.getAttr(this.KEY_ATTR));}
EditRef.prototype.setInitKeys=function(keys){this.setAttr(this.KEY_INIT_ATTR,this.keys2Str(keys));}
EditRef.prototype.getInitKeys=function(){return this.str2Keys(this.getAttr(this.KEY_INIT_ATTR));}
EditRef.prototype.getIsRef=function(){return true;}
EditRef.prototype.getModified=function(){var key=this.getAttr(this.KEY_ATTR);return(key&&key!="{}"&&(key!=this.getAttr(this.KEY_INIT_ATTR)));}
EditRef.prototype.isNull=function(){return CommonHelper.isEmpty(this.getKeys());}
EditRef.prototype.resetKeys=function(){this.setKeys({});}
EditRef.prototype.reset=function(){EditRef.superclass.reset.call(this);this.resetKeys();}
EditRef.prototype.setValue=function(val){var descr;if(val&&typeof val=="object"&&val.getKeys&&val.getDescr){this.setKeys(val.getKeys());descr=val.getDescr();}
else if(val&&typeof val=="object"&&val.keys&&val.descr){this.setKeys(val.keys);descr=val.descr;}
else if(val&&typeof val=="object"&&val.m_keys&&val.m_descr){this.setKeys(val.m_keys);descr=val.m_descr;}
else if(val&&typeof val!="object"){descr=val;}
else{descr="";}
EditRef.superclass.setValue.call(this,descr);}
EditRef.prototype.getValue=function(){var descr=EditRef.superclass.getValue.call(this);var res=(new RefType({"keys":this.getKeys(),"descr":descr,"dataType":undefined}));return res;}
EditRef.prototype.getKeyValue=function(key){return this.getValue().getKey(key);}
EditRef.prototype.setInitValue=function(val){this.setValue(val);if(typeof val=="object"&&val.getKeys){this.setInitKeys(val.getKeys());}}
EditRef.prototype.setOnSelect=function(v){this.m_onSelect=v;}
EditRef.prototype.getOnSelect=function(v){return this.m_onSelect;} 
function ControlForm(id,tagName,options){options=options||{};ControlForm.superclass.constructor.call(this,id,tagName,options);}
extend(ControlForm,Control);ControlForm.prototype.VAL_INIT_ATTR="initValue";ControlForm.prototype.m_formatFunction;ControlForm.prototype.setValidator=function(v){this.m_validator=v;}
ControlForm.prototype.getValidator=function(){return this.m_validator;}
ControlForm.prototype.setInitValue=function(val){this.setValue(val);this.setAttr(this.VAL_INIT_ATTR,this.getValue());}
ControlForm.prototype.getInitValue=function(val){return this.getAttr(this.VAL_INIT_ATTR);}
ControlForm.prototype.isNull=function(){var v=this.getValue();return(!v||v.length==0);}
ControlForm.prototype.getModified=function(){var v=this.getValue();return(this.getValue()!=this.getInitValue());}
ControlForm.prototype.getIsRef=function(){return false;}
ControlForm.prototype.setValid=function(v){return false;}
ControlForm.prototype.setValue=function(val){if(this.m_validator){val=this.m_validator.correctValue(val);}
ControlForm.superclass.setValue.call(this,val);}
ControlForm.prototype.getFormatFunction=function(){return this.m_formatFunction;}
ControlForm.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
ControlForm.prototype.getInputEnabled=function(){return this.getEnabled();}
ControlForm.prototype.setInputEnabled=function(v){this.setEnabled(v);} 
function HiddenKey(id,options){options=options||{};options.visible=false;this.setValidator(options.validator);HiddenKey.superclass.constructor.call(this,id,"DIV",options);}
extend(HiddenKey,ControlForm); 
function EditJSON(id,options){options=options||{};EditJSON.superclass.constructor.call(this,id,options.tagName,options);if(options.valueJSON){this.setValue(options.valueJSON);}}
extend(EditJSON,ControlContainer);EditJSON.prototype.getValueJSON=function(){var o={};for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&!this.m_elements[elem_id].getAttr("notForValue")&&this.m_elements[elem_id].getModified){o[elem_id]=this.m_elements[elem_id].getValue();}}
return o;}
EditJSON.prototype.getValue=function(){return CommonHelper.serialize(this.getValueJSON());}
EditJSON.prototype.setValueOrInit=function(v,isInit){var o;if(typeof(v)=="string"){o=CommonHelper.unserialize(v);}
else{o=v;}
for(var id in o){if(this.m_elements[id]&&!this.m_elements[id].getAttr("notForValue")){if(isInit&&this.m_elements[id].setInitValue){this.m_elements[id].setInitValue(o[id]);}
else{this.m_elements[id].setValue(o[id]);}}}}
EditJSON.prototype.setValue=function(v){this.setValueOrInit(v,false);}
EditJSON.prototype.setInitValue=function(v){this.setValueOrInit(v,true);}
EditJSON.prototype.setValid=function(){var list=this.getElements();for(var id in list){if(list[id].setValid){list[id].setValid();}}}
EditJSON.prototype.setNotValid=function(str){}
EditJSON.prototype.getModified=function(){var res=false;var list=this.getElements();for(var id in list){if(list[id].getModified&&list[id].getModified()){res=true;break;}}
return res;}
EditJSON.prototype.isNull=function(){var res=true;var list=this.getElements();for(var id in list){if(list[id].isNull&&!list[id].isNull()){res=false;break;}}
return res;} 
function EditFile(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("EditFile");this.m_fileInfTemplate=options.fileInfTemplate||window.getApp().getTemplate("EditFileInf");this.m_fileInfTemplateOptions=options.fileInfTemplateOptions;this.m_onDownload=options.onDownload;this.m_onDeleteFile=options.onDeleteFile;this.m_multipleFiles=(options.multipleFiles!=undefined)?options.multipleFiles:false;this.m_allowOnlySignedFiles=options.allowOnlySignedFiles;this.m_separateSignature=options.separateSignature;this.m_onFileAdded=options.onFileAdded;this.m_onFileSigAdded=options.onFileSigAdded;this.m_onFileDeleted=options.onFileDeleted;this.setContTagName(options.contTagName||this.DEF_CONT_TAG);this.m_files=[];var self=this;var init_val;if(options.value){init_val=options.value;options.value=undefined;}
options.addElement=function(){this.addElement(new ControlContainer(id+":file_cont",this.getContTagName()));if(options.labelCaption){this.addElement(new Control(id+":label","LABEL",{"value":options.labelCaption,"className":options.labelClassName}));}
var file_ctrl_opts={"events":{"change":function(){var fl_list=self.getElement("file").getNode().files;if(!self.m_multipleFiles&&!self.m_separateSignature&&fl_list.length>1){throw new Error(self.ER_MULTIPLE_FILES_NOT_ALLOWED);}
if(!self.m_multipleFiles&&!self.m_separateSignature){self.m_files=[];}
var sig_list=[]
var ctrls_to_add={};for(var fi=0;fi<fl_list.length;fi++){var fl=fl_list[fi];if(self.m_separateSignature&&fl.name.substring(fl.name.length-self.SIGN_MARK.length)==self.SIGN_MARK){sig_list.push({"base_name":fl.name.substring(0,fl.name.length-self.SIGN_MARK.length),"file":fl});}
else{fl.file_id=CommonHelper.uniqid();self.m_files.push(fl);ctrls_to_add[fl.name]={"id":fl.file_id,"name":fl.name,"size":fl.size,"file_uploaded":false,"file_signed":false};}}
for(var fi=0;fi<sig_list.length;fi++){if(ctrls_to_add[sig_list[fi].base_name]){self.m_files.push(sig_list[fi].file);ctrls_to_add[sig_list[fi].base_name].file_signed=true;}
else{var found=false;for(var i=0;i<self.m_files.length;i++){if(self.m_files[i].name==sig_list[fi].base_name){found=true;break;}}
if(!found){throw new Error(self.ER_NO_SIG);}
else{self.m_files.push(sig_list[fi].file);self.addFile({"id":CommonHelper.uniqid(),"name":sig_list[fi].file.name,"size":sig_list[fi].file.size,"file_uploaded":false,"file_signed":false});}}}
for(var n in ctrls_to_add){self.addFile(ctrls_to_add[n]);}
self.getElement("file_cont").toDOM();self.m_modified=true;}}}
if(this.m_separateSignature||this.m_multipleFiles){file_ctrl_opts.attrs=file_ctrl_opts.attrs||{};file_ctrl_opts.attrs.multiple="multiple";}
this.addElement(new Control(id+":file","INPUT",file_ctrl_opts));this.addElement(new ButtonCtrl(id+":add",{"glyph":"glyphicon-plus","title":"Выбрать файл","onClick":function(){$(self.getElement("file").getNode()).click();}}));if(options.addControls){options.addControls.call(this);}}
EditFile.superclass.constructor.call(this,id,"DIV",options);if(init_val){this.setInitValue(init_val);}}
extend(EditFile,ControlContainer);EditFile.prototype.SIGN_MARK=".sig";EditFile.prototype.DEF_CONT_TAG="TEMPLATE";EditFile.prototype.m_onDownload;EditFile.prototype.m_fileName;EditFile.prototype.m_allowOnlySignedFiles;EditFile.prototype.m_multipleFiles;EditFile.prototype.m_files;EditFile.prototype.getValue=function(){return this.m_files.length?this.m_files:null;}
EditFile.prototype.getFiles=function(){return this.m_files;}
EditFile.prototype.getFileControls=function(){var list=this.getElement("file_cont").getElements();var file_list=[];for(var id in list){if(list[id].isFileControl){file_list.push(list[id]);}}
return file_list;}
EditFile.prototype.setValue=function(v){this.m_files=[];this.getElement("file").getNode().value="";if(v&&!CommonHelper.isArray(v)&&v.id&&v.name&&v.size){var el=v;v=[el];}
if(v&&CommonHelper.isArray(v)){var cont=this.getElement("file_cont");cont.clear();for(var i=0;i<v.length;i++){v[i].uploaded=true;this.addFile(v[i]);}
cont.toDOM(this.m_node);}
this.m_modified=false;}
EditFile.prototype.setInitValue=function(v){this.setValue(v);}
EditFile.prototype.addFile=function(fileInf){var cont=this.getElement("file_cont");if(!this.m_multipleFiles&&!this.m_separateSignature){cont.clear();}
else if(this.m_separateSignature&&fileInf.name.substring(fileInf.name.length-this.SIGN_MARK.length)==this.SIGN_MARK){var file_found=false;var base_name=fileInf.name.substring(0,fileInf.name.length-this.SIGN_MARK.length);var elems=cont.getElements();for(var id in elems){if(elems[id]&&elems[id].isFileControl&&elems[id].getAttr("file_name")==base_name){file_found=true;break;}}
if(!file_found){this.m_files.splice(CommonHelper.inArray(fileInf.name,this.m_files),1);throw new Error(this.ER_NO_SIG);}
var n=$("#"+elems[id].getId()+"_sig");n.attr("class","icon-file-locked");n.attr("title","Файл подписан ЭЦП");elems[id].setAttr("file_signed","true");if(this.m_onFileSigAdded){this.m_onFileSigAdded();}
return;}
else if(!this.m_multipleFiles){cont.clear();}
var file_template_opts={"file_uploaded":fileInf.uploaded,"file_not_uploaded":!fileInf.uploaded,"file_deletable":(this.m_onDeleteFile)?true:false,"separateSignature":this.m_separateSignature,"allowOnlySignedFiles":this.m_allowOnlySignedFiles,"allowNotOnlySignedFiles":!this.m_allowOnlySignedFiles,"name":fileInf.name,"file_size_formatted":CommonHelper.byteFormat(fileInf.size)};CommonHelper.merge(file_template_opts,this.m_fileInfTemplateOptions||{});var file_opts={"template":this.m_fileInfTemplate,"templateOptions":file_template_opts};if(this.m_separateSignature){file_template_opts.file_signed=fileInf.file_signed;file_template_opts.file_not_signed=!fileInf.file_signed;file_opts.attrs=file_opts.attrs||{};file_opts.attrs.file_name=fileInf.name;file_opts.attrs.file_signed=fileInf.file_signed;}
var file_ctrl=new Control(fileInf.id,"TEMPLATE",file_opts);file_ctrl.isFileControl=true;cont.addElement(file_ctrl);var self=this;cont.addElement(new Button(fileInf.id+"-href",{"attrs":{"class":"","download_href":"true","file_id":fileInf.id,"file_uploaded":fileInf.uploaded},"onClick":function(e){if(this.getAttr("file_uploaded")=="true"){self.m_onDownload(this.getAttr("file_id"));e.preventDefault();}}}));if(this.m_onDeleteFile){cont.addElement(new Button(fileInf.id+"-del",{"attrs":{"file_id":fileInf.id,"file_uploaded":fileInf.uploaded},"onClick":function(){if(this.getAttr("file_uploaded")=="true"){var file_id=this.getAttr("file_id");self.m_onDeleteFile(file_id,function(){self.m_modified=false;self.deleteFileFromDOM(file_id);});}
else{self.deleteFileFromDOM(this.getAttr("file_id"));}}}));}
if(this.m_onFileAdded){this.m_onFileAdded();}}
EditFile.prototype.deleteFileFromDOM=function(fileId){var cont=this.getElement("file_cont");if(this.m_multipleFiles){for(var i=0;i<this.m_files.length;i++){if(this.m_files[i].file_id&&this.m_files[i].file_id==fileId){delete this.m_files[i];this.m_files[i]=undefined;break;}}
cont.delElement(fileId);cont.delElement(fileId+"-href");cont.delElement(fileId+"-del");}
else{this.m_files=[];cont.clear();}
cont.toDOM();if(this.m_onFileDeleted)this.m_onFileDeleted();}
EditFile.prototype.getModified=function(){return this.m_modified;}
EditFile.prototype.setValid=function(){}
EditFile.prototype.reset=function(){this.setValue(null);var cont=this.getElement("file_cont");cont.clear();cont.toDOM();}
EditFile.prototype.getContTagName=function(){return this.m_contTagName;}
EditFile.prototype.setContTagName=function(v){this.m_contTagName=v;}
EditFile.prototype.setEnabled=function(v){EditFile.superclass.setEnabled.call(this,v);var hrefs=DOMHelper.getElementsByAttr("true",this.m_node,"download_href",false);for(var i=0;i<hrefs.length;i++){DOMHelper.delAttr(hrefs[i],"disabled");}} 
EditFile.prototype.ER_NO_SIG="Файл с данными для этой ЭЦП не найден!";EditFile.prototype.ER_MULTIPLE_FILES_NOT_ALLOWED="Загрузка нескольких файлов запрещена!"; 
function EditCompound(id,options){options=options||{};this.m_options={};CommonHelper.merge(this.m_options,options);this.setPossibleDataTypes(options.possibleDataTypes||{});this.m_onSelect=options.onSelect;var tag=options.tagName||this.DEF_TAG_NAME;EditCompound.superclass.constructor.call(this,id,tag,options);}
extend(EditCompound,ControlContainer);EditCompound.prototype.DEF_TAG_NAME="DIV";EditCompound.prototype.VAL_INIT_ATTR="initValue";EditCompound.prototype.m_possibleDataTypes;EditCompound.prototype.m_dataType;EditCompound.prototype.m_control;EditCompound.prototype.m_options;EditCompound.prototype.m_onSelect;EditCompound.prototype.createControl=function(){if(this.m_control){this.m_control.delDOM();delete this.m_control;}
var tp=this.getDataType();var ctrl_id=this.getId()+":ctrl";var btn_sel=new ButtonSelectDataType(ctrl_id+":btn-select-data-type",{"compoundControl":this});var ctrl_opts={};CommonHelper.merge(ctrl_opts,this.m_options);if(tp){CommonHelper.merge(ctrl_opts,this.m_possibleDataTypes[tp].ctrlOptions);ctrl_opts.onSelect=ctrl_opts.onSelect||this.m_onSelect;if(!this.m_possibleDataTypes[tp]){throw new Error(CommonHelper.format(this.ER_TYPE_NOT_FOUND,tp));}
this.m_control=new this.m_possibleDataTypes[tp].ctrlClass(ctrl_id,ctrl_opts);var btn_cont=this.m_control.getButtons();if(!btn_cont){this.m_control.addButtonContainer();btn_cont=this.m_control.getButtons();}
btn_cont.addElement(btn_sel);}
else{ctrl_opts.buttonSelect=btn_sel;ctrl_opts.events={"click":function(){if(this.getEnabled())this.getButtonSelect().doSelect();}}
this.m_control=new Edit(ctrl_id,ctrl_opts);}}
EditCompound.prototype.toDOM=function(parent){this.createControl();this.clear();this.addElement(this.m_control);EditCompound.superclass.toDOM.call(this,parent);}
EditCompound.prototype.getDataTypeDescr=function(tp){return"";}
EditCompound.prototype.setPossibleDataTypes=function(t){if(CommonHelper.isArray(t)){this.clearPossibleDataTypes();for(var i=0;i<t.length;i++){if(t[i].dataType&&t[i].ctrlClass){this.m_possibleDataTypes[t[i].dataType]={"ctrlClass":t[i].ctrlClass,"ctrlOptions":t[i].ctrlOptions,"dataTypeDescrLoc":t[i].dataTypeDescrLoc||this.getDataTypeDescr(t[i].dataType)};}}}
else{this.m_possibleDataTypes=t;for(var i in this.m_possibleDataTypes){if(this.m_possibleDataTypes[i].ctrlClass&&!this.m_possibleDataTypes[i].dataTypeDescrLoc){this.m_possibleDataTypes[i].dataTypeDescrLoc=this.getDataTypeDescr(i);}}}}
EditCompound.prototype.getPossibleDataTypes=function(){return this.m_possibleDataTypes;}
EditCompound.prototype.clearPossibleDataTypes=function(){this.m_possibleDataTypes={};}
EditCompound.prototype.getValue=function(){var o=this.getRef();return(o?CommonHelper.serialize(o):null);}
EditCompound.prototype.getRef=function(){var o;if(this.m_control.getKeys){o=this.m_control.getValue();if(o){o.setDataType(this.getDataType());}}
return o;}
EditCompound.prototype.setValue=function(v){if(typeof v=="string"){v=CommonHelper.unserialize(v);}
this.setDataType(((typeof v=="object"&&v.getDataType)?v.getDataType():null),v);this.m_control.setValue(v);}
EditCompound.prototype.setInitValue=function(v){if(typeof v=="string"){v=CommonHelper.unserialize(v);}
this.setDataType(((typeof v=="object"&&v.getDataType)?v.getDataType():null),v);this.m_control.setInitValue(v);this.setAttr(this.VAL_INIT_ATTR,v);}
EditCompound.prototype.setDataType=function(dataType,ctrlVal){this.m_dataType=dataType;this.createControl();this.m_control.toDOM(this.getNode());}
EditCompound.prototype.unsetDataType=function(){this.setDataType(null);}
EditCompound.prototype.getDataType=function(){return this.m_dataType;}
EditCompound.prototype.getModified=function(){return this.m_control.getModified();}
EditCompound.prototype.isNull=function(){return(!this.m_dataType||this.m_control.isNull());}
EditCompound.prototype.setValid=function(){this.m_control.setValid();}
EditCompound.prototype.setNotValid=function(er){this.m_control.setNotValid(er);}
EditCompound.prototype.setEnabled=function(v){EditCompound.superclass.setEnabled.call(this,v);this.m_options.enabled=v;if(this.m_control){this.m_control.setEnabled(v);}}
EditCompound.prototype.setVisible=function(v){EditCompound.superclass.setVisible.call(this,v);this.m_options.visible=v;if(this.m_control){this.m_control.setVisible(v);}}
EditCompound.prototype.getContTagName=function(){return this.m_node.nodeName;}
EditCompound.prototype.setContTagName=function(v){this.m_node.nodeName=v;}
EditCompound.prototype.setInputEnabled=function(enabled){EditCompound.superclass.setEnabled.call(this,enabled);}
EditCompound.prototype.getInputEnabled=function(){return EditCompound.superclass.getEnabled.call(this);}
EditCompound.prototype.reset=function(){this.m_dataType=null;this.m_control.delDOM();delete this.m_control;} 
EditCompound.prototype.LB_TYPE="Тип:";EditCompound.prototype.LB_VAL="Значение:";EditCompound.prototype.ER_TYPE_NOT_FOUND="Тип %s не определен!"; 
function ControlDate(id,tagName,options){options=options||{};this.setDateFormat(options.dateFormat||window.getApp().getDateFormat());ControlDate.superclass.constructor.call(this,id,tagName,options);}
extend(ControlDate,Control);ControlDate.prototype.m_dateFormat;ControlDate.prototype.setValue=function(v){v=DateHelper.format(v,this.getDateFormat());ControlDate.superclass.setValue.call(this,v);}
ControlDate.prototype.setDateFormat=function(v){this.m_dateFormat=v;}
ControlDate.prototype.getDateFormat=function(){return this.m_dateFormat;} 
function GridColumn(options){options=options||{};if(typeof(options)!="object"){throw new Error("Constructor type not supported (id,option)");}
var id;if(options.id){id=options.id;}
else if(options.field){id=options.field.getId();}
else{id=CommonHelper.uniqid();}
this.m_id=id;options.ctrlId=id;this.m_headCell=options.headCell;this.m_cellClass=options.cellClass||GridCell;this.m_cellOptions=options.cellOptions;this.m_cellElements=options.cellElements;if(!options.field&&options.model&&options.model.fieldExists(id)){options.field=options.model.getField(id);}
this.m_field=options.field;this.m_fieldId=options.fieldId;this.m_format=options.format;this.m_formatFunction=options.formatFunction;this.m_mask=options.mask;this.m_assocImageList=options.assocImageList;this.m_assocValueList=options.assocValueList;this.m_assocClassList=options.assocClassList;this.m_ctrlEdit=(options.ctrlEdit!=undefined)?options.ctrlEdit:true;this.m_ctrlId=options.ctrlId;this.m_ctrlClass=options.ctrlClass;this.m_ctrlOptions=options.ctrlOptions;this.m_ctrlBindFieldId=options.ctrlBindFieldId;this.m_ctrlBindField=options.ctrlBindField;this.m_grid=options.grid;this.setSearchOptions(options.searchOptions);this.setSearchable((options.searchable!=undefined)?options.searchable:true);}
GridColumn.prototype.m_id;GridColumn.prototype.m_headCell;GridColumn.prototype.m_cellClass;GridColumn.prototype.m_cellOptions;GridColumn.prototype.m_cellElements;GridColumn.prototype.m_field;GridColumn.prototype.m_fieldId;GridColumn.prototype.m_format;GridColumn.prototype.m_formatFunction;GridColumn.prototype.m_mask;GridColumn.prototype.m_assocImageList;GridColumn.prototype.m_assocValueList;GridColumn.prototype.m_assocClassList;GridColumn.prototype.m_ctrlEdit;GridColumn.prototype.m_ctrlId;GridColumn.prototype.m_ctrlClass;GridColumn.prototype.m_ctrlOptions;GridColumn.prototype.m_ctrlBindFieldId;GridColumn.prototype.m_grid;GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getCellOptions=function(){return this.m_cellOptions;}
GridColumn.prototype.setCellOptions=function(v){this.m_cellOptions=v;}
GridColumn.prototype.getField=function(){if(!this.m_field&&this.m_model){if(this.m_fieldId&&this.m_model.fieldExists(this.m_fieldId)){this.m_field=this.m_model.getField(this.m_fieldId);}
else if(this.m_model.fieldExists(this.m_id)){this.m_field=this.m_model.getField(this.m_id);}}
return this.m_field;}
GridColumn.prototype.setField=function(v){this.m_field=v;}
GridColumn.prototype.getFormat=function(){return this.m_format;}
GridColumn.prototype.setFormat=function(v){this.m_format=v;}
GridColumn.prototype.getHeadCell=function(){return this.m_headCell;}
GridColumn.prototype.setHeadCell=function(v){this.m_headCell=v;}
GridColumn.prototype.getCellClass=function(){return this.m_cellClass;}
GridColumn.prototype.setCellClass=function(v){this.m_cellClass=v;}
GridColumn.prototype.getMask=function(){return this.m_mask;}
GridColumn.prototype.setMask=function(v){this.m_mask=v;}
GridColumn.prototype.getCtrlClass=function(){return this.m_ctrlClass;}
GridColumn.prototype.setCtrlClass=function(v){this.m_ctrlClass=v;}
GridColumn.prototype.getCtrlOptions=function(){return this.m_ctrlOptions;}
GridColumn.prototype.setCtrlOptions=function(v){this.m_ctrlOptions=v;}
GridColumn.prototype.getCtrlBindFieldId=function(){return this.m_ctrlBindFieldId;}
GridColumn.prototype.setCtrlBindFieldId=function(v){this.m_ctrlBindFieldId=v;}
GridColumn.prototype.getCtrlBindField=function(){return this.m_ctrlBindField;}
GridColumn.prototype.setCtrlBindField=function(v){this.m_ctrlBindField=v;}
GridColumn.prototype.getCtrlId=function(){return this.m_ctrlId;}
GridColumn.prototype.setCtrlId=function(v){this.m_ctrlId=v;}
GridColumn.prototype.getAssocValueList=function(){return this.m_assocValueList;}
GridColumn.prototype.setAssocValueList=function(v){this.m_assocValueList=v;}
GridColumn.prototype.getAssocImageList=function(){return this.m_assocImageList;}
GridColumn.prototype.setAssocImageList=function(v){this.m_assocImageList=v;}
GridColumn.prototype.getAssocClassList=function(){return this.m_assocClassList;}
GridColumn.prototype.setAssocClassList=function(v){this.m_assocClassList=v;}
GridColumn.prototype.getGrid=function(){return this.m_grid;}
GridColumn.prototype.setGrid=function(v){this.m_grid=v;}
GridColumn.prototype.getFormatFunction=function(){return this.m_formatFunction;}
GridColumn.prototype.setFormatFunction=function(v){this.m_formatFunction=v;}
GridColumn.prototype.getId=function(){return this.m_id;}
GridColumn.prototype.setId=function(v){this.m_id=v;}
GridColumn.prototype.formatVal=function(v){return v;}
GridColumn.prototype.getCellElements=function(){return this.m_cellElements;}
GridColumn.prototype.setModel=function(v){this.m_model=v;}
GridColumn.prototype.getCtrlEdit=function(){return this.m_ctrlEdit;}
GridColumn.prototype.setCtrlEdit=function(v){this.m_ctrlEdit=v;}
GridColumn.prototype.setVisible=function(v){this.getHeadCell().setVisible(v);this.m_cellOptions=this.m_cellOptions||{};this.m_cellOptions.visible=v;}
GridColumn.prototype.getSearchOptions=function(){return this.m_searchOptions;}
GridColumn.prototype.setSearchOptions=function(v){this.m_searchOptions=v;}
GridColumn.prototype.getSearchable=function(){return this.m_searchable;}
GridColumn.prototype.setSearchable=function(v){this.m_searchable=v;} 
function GridColumnBool(options){options=options||{};options.assocClassList={"true":"glyphicon glyphicon-ok","false":"glyphicon glyphicon-remove"};GridColumnBool.superclass.constructor.call(this,options);}
extend(GridColumnBool,GridColumn); 
function GridColumnPhone(options){options=options||{};options.mask=options.mask||window.getApp().getPhoneEditMask();GridColumnPhone.superclass.constructor.call(this,options);}
extend(GridColumnPhone,GridColumn); 
function GridColumnEmail(options){options=options||{};GridColumnEmail.superclass.constructor.call(this,options);}
extend(GridColumnEmail,GridColumn); 
function GridColumnFloat(options){options=options||{};this.m_precision=options.precision||this.DEF_PRECISION;GridColumnFloat.superclass.constructor.call(this,options);}
extend(GridColumnFloat,GridColumn);GridColumnFloat.prototype.DEF_PRECISION=2;GridColumnFloat.prototype.DEF_SEPAR=" ";GridColumnFloat.prototype.formatVal=function(v){if(isNaN(v)){return"";}
else{return CommonHelper.numberFormat(v,this.m_precision,CommonHelper.getDecimalSeparator(),this.DEF_SEPAR);}} 
function GridColumnByte(options){options=options||{};this.m_precision=options.precision||this.DEF_PRECISION;GridColumnByte.superclass.constructor.call(this,options);}
extend(GridColumnByte,GridColumn);GridColumnByte.prototype.DEF_PRECISION=2;GridColumnByte.prototype.formatVal=function(v){if(isNaN(v)){return"";}
else{return CommonHelper.byteForamt(v,this.m_precision);}} 
function GridColumnDate(options){options=options||{};this.m_dateFormat=options.dateFormat||window.getApp().getDateFormat()||this.DEF_FORMAT;GridColumnDate.superclass.constructor.call(this,options);}
extend(GridColumnDate,GridColumn);GridColumnDate.prototype.DEF_FORMAT="d/m/Y";GridColumnDate.prototype.formatVal=function(v){return v?DateHelper.format(v,this.m_dateFormat):"";} 
function GridColumnDateTime(options){options=options||{};this.m_dateFormat=options.dateFormat||window.getApp().getDateTimeFormat()||this.DEF_FORMAT;GridColumnDateTime.superclass.constructor.call(this,options);}
extend(GridColumnDateTime,GridColumnDate);GridColumnDateTime.prototype.DEF_FORMAT="d/m/Y H:i:s"; 
function GridColumnEnum(options){options.assocValueList=options.multyLangValues[window.getApp().getLocale()];GridColumnEnum.superclass.constructor.call(this,options);}
extend(GridColumnEnum,GridColumn); 
function GridColumnRef(options){options=options||{};var self=this;options.formatFunction=function(fields){return self.setCellValue(fields);}
this.setForm(options.form);this.setViewOptions(options.viewOptions);options.cellElements=options.cellElements||(options.form?[{"elementClass":Control,"elementOptions":{"tagName":"A","href":"#","events":{"click":function(e){e=EventHelper.fixKeyEvent(e);if(e.preventDefault){e.preventDefault();}
e.stopPropagation();var keys,f_id,m_ind;var td=DOMHelper.getParentByTagName(e.target,"TD");if(td){f_id=td.getAttribute("fieldid");var tr=DOMHelper.getParentByTagName(td,"TR");if(tr){m_ind=tr.getAttribute("modelindex");}}
if(m_ind!=undefined){var m=self.getGrid().getModel();m.getRow(m_ind);v=m.getFieldValue(f_id);if(CommonHelper.isArray(v)&&v.length){keys=self.getObjectKeys(v[0]);}
else{keys=self.getObjectKeys(v);}}
if(keys&&self.m_form){var view_opts={};CommonHelper.merge(view_opts,self.getViewOptions());(new self.m_form({"keys":keys,"params":{"cmd":"edit","editViewOptions":view_opts}})).open();}}}}}]:null);GridColumnRef.superclass.constructor.call(this,options);}
extend(GridColumnRef,GridColumn);GridColumnRef.prototype.m_keys;GridColumnRef.prototype.m_form;GridColumnRef.prototype.getObjectKeys=function(v){return((typeof v!="object")?null:((v.getKeys)?v.getKeys():(v.keys?v.keys:(v.m_keys?v.m_keys:null))));}
GridColumnRef.prototype.getObjectDescr=function(v){var keys=this.getObjectKeys(v);var no_keys=false;for(key in keys){if(keys[key]==null){no_keys=true;break;}}
return!no_keys?(v.getDescr?v.getDescr():(v.descr?v.descr:(v.m_descr?v.m_descr:keys))):"";}
GridColumnRef.prototype.setCellValue=function(fields){var f=fields[this.getField().getId()];var res="";if(!f.isNull()){var v=f.getValue();if(typeof v=="string"){v=CommonHelper.unserialize(v);}
if(CommonHelper.isArray(v)){for(var i=0;i<v.length;i++){res+=(res=="")?"":", ";res+=this.getObjectDescr(v[i]);}}
else{res=this.getObjectDescr(v);}}
return res;}
GridColumn.prototype.getForm=function(){return this.m_form;}
GridColumn.prototype.setForm=function(v){this.m_form=v;}
GridColumn.prototype.getViewOptions=function(){return this.m_viewOptions;}
GridColumn.prototype.setViewOptions=function(v){this.m_viewOptions=v;} 
function GridCell(id,options){options=options||{};if(options.gridColumn){options.attrs=options.attrs||{};if(options.gridColumn.getHeadCell()){var col_attrs=options.gridColumn.getHeadCell().getColAttrs()||{};for(col_attr_id in col_attrs){if(typeof col_attrs[col_attr_id]=="function"){options.attrs[col_attr_id]=col_attrs[col_attr_id].call(this,options.fields);}
else{options.attrs[col_attr_id]=col_attrs[col_attr_id];}}}
if(options.gridColumn.getField()){options.attrs.fieldId=options.gridColumn.getField().getId();options.value=options.gridColumn.getField().getValue();}}
this.setGridColumn(options.gridColumn);var val=options.value;options.value=undefined;GridCell.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setColSpan(options.colSpan);this.setRowSpan(options.rowSpan);this.m_modelIndex=options.modelIndex;this.m_row=options.row;if(val!=undefined||(this.m_gridColumn&&this.m_gridColumn.getFormatFunction())){this.setValue(val);}}
extend(GridCell,ControlContainer);GridCell.prototype.DEF_TAG_NAME="TD";GridCell.prototype.m_gridColumn;GridCell.prototype.m_value;GridCell.prototype.setColSpan=function(v){if(v)this.setAttr("colspan",v);}
GridCell.prototype.getColSpan=function(){return this.getAttr("colspan");}
GridCell.prototype.setRowSpan=function(v){if(v)this.setAttr("rowspan",v);}
GridCell.prototype.getRowSpan=function(){return this.getAttr("rowspan");}
GridCell.prototype.setGridColumn=function(v){this.m_gridColumn=v;}
GridCell.prototype.getGridColumn=function(){return this.m_gridColumn;}
GridCell.prototype.setValue=function(val){this.m_value=val;if(this.m_gridColumn){var elem_cnt=0;if(this.m_elements){elem_cnt=this.getCount();}
var f_func=this.m_gridColumn.getFormatFunction();if(f_func){val=f_func.call(this.m_gridColumn,this.m_gridColumn.getGrid().getModel().getFields());}
if(elem_cnt==1){for(var k in this.m_elements){this.m_elements[k].setValue(val);val="";break;}}
else if(elem_cnt){}
else if(!f_func){val=this.m_gridColumn.formatVal(val);if(this.m_gridColumn.getFormat()){val=CommonHelper.format(this.m_gridColumn.getFormat(),val);}
else if(this.m_gridColumn.getMask()){var input=new Control(this.getId()+":mask","input",{"attrs":{"value":val},"visible":false});$(input.getNode()).mask(this.m_gridColumn.getMask());val=input.m_node.value;}
else if(this.m_gridColumn.getAssocClassList()){var assoc_class=this.m_gridColumn.getAssocClassList()[val.toString()];if(assoc_class){this.addElement(new Control(this.getId()+":assoc-img","i",{"className":assoc_class}));}
val="";}
else if(this.m_gridColumn.getAssocImageList()){var img=this.m_gridColumn.getAssocImageList()[val];if(img){this.addElement(new Control(this.getId()+":assoc-img","img",{"attrs":{"src":img}}));}
val="";}
else if(this.m_gridColumn.getAssocValueList()){val=(val===null||val=="")?"null":val;val=this.m_gridColumn.getAssocValueList()[val];}}}
GridCell.superclass.setValue.call(this,val);}
GridCell.prototype.getValue=function(){return this.m_value;} 
function GridCellHead(id,options){options=options||{};options.attrs=options.attrs||{};if(!options.columns){var ns=id+":";var fid=id.substring(ns.length);options.columns=[new GridColumn({"fieldId":fid})];}
options.value=options.value||options.labelCaption||options.alias;if(options.value==undefined){options.value="";for(var i=0;i<options.columns.length;i++){if(options.columns[i].getField()){options.value+=((options.value=="")?"":" ")+options.columns[i].getField().getAlias();}}}
if(options.visible!=undefined&&!options.visible){options.colAttrs=options.colAttrs||{};options.attrs["class"]=this.CLASS_INVISIBLE;options.colAttrs["class"]=this.CLASS_INVISIBLE;}
options.attrs.align=options.attrs.align||this.DEF_ALIGN;if(options.colAlign){options.colAttrs=options.colAttrs||{};options.colAttrs.align=options.colAlign;}
if(options.sortable){options.attrs.title=options.attrs.title||this.TITLE;}
GridCellHead.superclass.constructor.call(this,id,options);if(options.sortable){if(options.sort){this.setSort(options.sort);}
if(options.sortFieldId){this.setSortFieldId(options.sortFieldId);}
this.setSortable(true);options.attrs.title=options.attrs.title||this.TITLE;}
this.setColumns(options.columns);this.setColAttrs(options.colAttrs);if(options.colControlContainer){this.m_colControlContainer=options.colControlContainer;}
var self=this;this.m_sorting=function(event){self.sorting(event);}}
extend(GridCellHead,GridCell);GridCellHead.prototype.SORT_UP_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes";GridCellHead.prototype.SORT_DOWN_CLASS="grid-sort glyphicon glyphicon-sort-by-attributes-alt";GridCellHead.prototype.SORT_UP="asc";GridCellHead.prototype.SORT_DOWN="desc";GridCellHead.prototype.SORT_CLASS="sortable";GridCellHead.prototype.DEF_ALIGN="center";GridCellHead.prototype.DEF_TAG_NAME="th";GridCellHead.prototype.GLYPH_TAG="span";GridCellHead.prototype.m_colAttrs;GridCellHead.prototype.m_columns;GridCellHead.prototype.m_onRefresh;GridCellHead.prototype.initSort=function(sort){var el=document.createElement(this.GLYPH_TAG);el.className=(sort==this.SORT_UP)?this.SORT_UP_CLASS:this.SORT_DOWN_CLASS;var divs=this.m_node.getElementsByTagName("div");var parent=this.m_node;if(divs&&divs.length){parent=divs[0];}
var els=parent.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.delNode(els[0]);}
parent.appendChild(el);}
GridCellHead.prototype.updateColManager=function(){if(this.m_colManager&&this.m_colManager.getColOrder()){var col_order=this.m_colManager.getColOrder();var name=this.getName();for(var i=0;i<col_order.length;i++){var this_col=(col_order.colId=name);if(this_col){col_order.directs=this.getAttr("sort");}
col_order.checked=this_col;}}}
GridCellHead.prototype.sorting=function(event){event=EventHelper.fixMouseEvent(event);var th;if(event.target.nodeName.toLowerCase()=="th"){th=event.target;}
else{th=DOMHelper.getParentByTagName(event.target,"th");}
if(th){var sort=th.getAttribute("sort");if(sort==this.SORT_UP){this.setSort(this.SORT_DOWN);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else if(sort==this.SORT_DOWN){this.setSort(this.SORT_UP);this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}
else{var trs=th.parentNode.childNodes;for(var i=0;i<trs.length;i++){if(trs[i].getAttribute("sort")){DOMHelper.delAttr(trs[i],"sort");var imgs=trs[i].getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){DOMHelper.delNode(imgs[0]);}
break;}}
this.makeSortable();this.setAttr("sort",this.SORT_UP);this.initSort();this.updateColManager();if(this.m_onRefresh){this.m_onRefresh();}}}}
GridCellHead.prototype.makeSortable=function(){EventHelper.add(this.m_node,"click",this.m_sorting,true);}
GridCellHead.prototype.makeUnSortable=function(){EventHelper.del(this.m_node,"click",this.m_sorting,true);}
GridCellHead.prototype.getColAttrs=function(){return this.m_colAttrs;}
GridCellHead.prototype.setColAttrs=function(v){this.m_colAttrs=v;}
GridCellHead.prototype.getColControlContainer=function(){return this.m_colControlContainer;}
GridCellHead.prototype.getAlign=function(){return this.m_node.align;}
GridCellHead.prototype.setAlign=function(v){this.m_node.align=v;}
GridCellHead.prototype.getSortable=function(){return(DOMHelper.hasClass(this.m_node,this.SORT_CLASS));}
GridCellHead.prototype.setSortable=function(v){if(v){DOMHelper.addClass(this.m_node,this.SORT_CLASS);}
else{DOMHelper.delClass(this.m_node,this.SORT_CLASS);}}
GridCellHead.prototype.setColumns=function(v){this.m_columns=v;}
GridCellHead.prototype.getColumns=function(){return this.m_columns;}
GridCellHead.prototype.setSortFieldId=function(v){this.setAttr("sortFieldId",v);}
GridCellHead.prototype.getSortFieldId=function(){return this.getAttr("sortFieldId");}
GridCellHead.prototype.getSort=function(){return this.getAttr("sort");}
GridCellHead.prototype.setSort=function(v){this.setAttr("sort",v);var imgs=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(imgs&&imgs.length){imgs[0].className=(v==this.SORT_DOWN)?this.SORT_DOWN_CLASS:this.SORT_UP_CLASS;}}
GridCellHead.prototype.toDOM=function(parent){GridCellHead.superclass.toDOM.call(this,parent);if(this.getSortable()){var sort=this.getSort();if(sort){this.initSort(sort);}
this.makeSortable();}}
GridCellHead.prototype.delDOM=function(){if(this.getSortable()){this.makeUnSortable();}
GridCellHead.superclass.delDOM.call(this);}
GridCellHead.prototype.setEnabled=function(v){if(v){this.makeSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.delClass(els[0],this.ATTR_DISABLED);}}
else{this.makeUnSortable();var els=this.m_node.getElementsByTagName(this.GLYPH_TAG);if(els&&els.length){DOMHelper.addClass(els[0],this.ATTR_DISABLED);}}
GridCellHead.superclass.setEnabled.call(this,v);}
GridCellHead.prototype.setColManager=function(v){this.m_colManager=v;} 
function GridCellFoot(id,options){options=options||{};GridCellFoot.superclass.constructor.call(this,id,options);this.setCalc(options.calc);this.setCalcBegin(options.calcBegin);this.setCalcEnd(options.calcEnd);this.setCalcOper(options.calcOper);this.setCalcFieldId(options.calcFieldId);}
extend(GridCellFoot,GridCell);GridCellFoot.prototype.CALC_OPER_SUM="sum";GridCellFoot.prototype.CALC_OPER_AVG="avg";GridCellFoot.prototype.m_calc;GridCellFoot.prototype.m_calcBegin;GridCellFoot.prototype.m_calcEnd;GridCellFoot.prototype.m_calcOper;GridCellFoot.prototype.m_total;GridCellFoot.prototype.m_calcFieldId;GridCellFoot.prototype.m_count;GridCellFoot.prototype.getCalcFieldId=function(v){return this.m_calcFieldId;}
GridCellFoot.prototype.setCalcFieldId=function(v){this.m_calcFieldId=v;}
GridCellFoot.prototype.getTotal=function(v){return this.m_total;}
GridCellFoot.prototype.setTotal=function(v){this.m_total=v;}
GridCellFoot.prototype.getCalcTotal=function(v){return this.m_calcTotal;}
GridCellFoot.prototype.setCalcOper=function(v){this.m_calcOper=v;var self=this;if(this.m_calcOper){this.m_calc=this.m_calc||function(model){self.setTotal(self.getTotal()+model.getFieldValue(this.m_calcFieldId));if(self.m_calcOper==self.CALC_OPER_AVG){this.m_count+=1;}}
this.m_calcBegin=this.m_calcBegin||function(){self.setTotal(0);this.m_count=0;}
this.m_calcEnd=this.m_calcEnd||function(){var res;if(self.m_calcOper==self.CALC_OPER_AVG){res=(this.m_count>0)?(self.getTotal()/this.m_count):0;}
else{res=self.getTotal();}
self.setValue(res);}}}
GridCellFoot.prototype.setCalc=function(f){this.m_calc=f;}
GridCellFoot.prototype.getCalc=function(){return this.m_calc;}
GridCellFoot.prototype.setCalcBegin=function(f){this.m_calcBegin=f;}
GridCellFoot.prototype.getCalcBegin=function(f){return this.m_calcBegin;}
GridCellFoot.prototype.setCalcEnd=function(f){this.m_calcEnd=f;}
GridCellFoot.prototype.getCalcEnd=function(){return this.m_calcEnd;} 
function GridHead(id,options){options=options||{};GridHead.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setRowClass(options.rowClass);this.setRowOptions(options.rowOptions);}
extend(GridHead,ControlContainer);GridHead.prototype.DEF_TAG_NAME="THEAD";GridHead.prototype.m_rowClass;GridHead.prototype.m_rowClassOptions;GridHead.prototype.getColumns=function(){var col_list=[];for(var row_id in this.m_elements){var row_cols=this.m_elements[row_id].m_elements;for(var col_id in row_cols){var columns=row_cols[col_id].getColumns();for(var i=0;i<columns.length;i++){columns[i].setHeadCell(row_cols[col_id]);col_list.push(columns[i]);}}}
return col_list;}
GridHead.prototype.setRowClass=function(v){v=v?v:GridRow;if(CommonHelper.isArray(v)){this.m_rowClass=v;}
else{this.m_rowClass=[v];}}
GridHead.prototype.getRowClass=function(ind){return this.m_rowClass[(ind!=undefined)?ind:0];}
GridHead.prototype.setRowOptions=function(v){if(CommonHelper.isArray(v)){this.m_rowOptions=v;}
else{this.m_rowOptions=[v];}}
GridHead.prototype.getRowOptions=function(ind){return(this.m_rowOptions)?this.m_rowOptions[ind]:{};} 
function GridRow(id,options){options=options||{};GridRow.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridRow,ControlContainer);GridRow.prototype.DEF_TAG_NAME="tr";GridRow.prototype.m_initColumns;GridRow.prototype.setInitColumnOrder=function(){this.m_initColumns={};for(var id in this.m_elements){this.m_initColumns[id]=CommonHelper.clone(this.m_elements[id]);}}
GridRow.prototype.setColumnOrder=function(orderArray){this.m_elements={};for(var i=0;i<orderArray.length;i++){if(!orderArray[i].checked)continue;if(this.m_initColumns[orderArray[i].colId]){this.m_elements[orderArray[i].colId]=this.m_initColumns[orderArray[i].colId];}}}
GridRow.prototype.getInitColumns=function(){return this.m_initColumns;} 
function GridFoot(id,options){options=options||{};this.setAutoCalc(options.autoCalc);GridFoot.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);}
extend(GridFoot,ControlContainer);GridFoot.prototype.DEF_TAG_NAME="tfoot";GridFoot.prototype.m_autoCalc;GridFoot.prototype.calc=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalc)?cell.getCalc():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcBegin=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcBegin)?cell.getCalcBegin():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.calcEnd=function(model){if(this.getAutoCalc()){for(var r in this.m_elements){for(var c in this.m_elements[r].m_elements){var cell=this.m_elements[r].m_elements[c];var f=(cell.getCalcEnd)?cell.getCalcEnd():null;if(f){f.call(cell,model);}}}}}
GridFoot.prototype.getAutoCalc=function(){return this.m_autoCalc;}
GridFoot.prototype.setAutoCalc=function(v){this.m_autoCalc=v;} 
function GridBody(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;GridBody.superclass.constructor.call(this,id,options.tagName,options);}
extend(GridBody,ControlContainer);GridBody.prototype.DEF_TAG_NAME="tbody"; 
function Grid(id,options){options=options||{};options.className=(options.className!=undefined)?options.className:this.DEF_CLASS;var n=CommonHelper.nd(id,this.getWinObjDocument());if(n){n.id=n.id+":cont";}
this.setOnSelect(options.onSelect||window.onSelect);this.setOnSearch(options.onSearch);this.setCmdInsert((options.cmdInsert!=undefined)?options.cmdInsert:true);this.setCmdEdit((options.cmdEdit!=undefined)?options.cmdEdit:this.getCmdInsert());this.setCmdCopy((options.cmdCopy!=undefined)?options.cmdCopy:this.getCmdInsert());this.setCmdDelete((options.cmdDelete!=undefined)?options.cmdDelete:this.getCmdInsert());this.setCmdPrint((options.cmdPrint!=undefined)?options.cmdPrint:true);Grid.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);this.setModel(options.model);this.setEditWinClass(options.editWinClass);this.setEditViewClass(options.editViewClass);this.setEditViewOptions(options.editViewOptions);this.setInsertViewOptions(options.insertViewOptions||options.editViewOptions);this.setEditInline(options.editInline);this.setRefreshInterval(options.refreshInterval||this.DEF_REFRESH_INTERVAL);this.setRowCommandClass(options.rowCommandClass);this.setAutoRefresh((options.autoRefresh!=undefined)?options.autoRefresh:false);this.setHead(options.head);this.setShowHead((options.showHead!=undefined)?options.showHead:true);this.setBody(options.body||new GridBody(id+":body",{"tagName":options.bodyTagName||this.DEF_BODY_TAG_NAME,"className":options.bodyClassName}));this.setFoot(options.foot);this.setErrorControl((options.errorControl!==undefined)?options.errorControl:(this.m_html?null:new ErrorControl(id+":error")));this.m_selectedRowClass=options.selectedRowClass||this.SELECTED_ROW_CLASS;this.m_selectedCellClass=options.selectedCellClass||this.SELECTED_CELL_CLASS;if(options.commands){options.commands.setGrid(this);this.setCommands(options.commands);this.setCmdInsert(options.commands.getCmdInsert());this.setCmdEdit(options.commands.getCmdEdit());this.setCmdCopy(options.commands.getCmdCopy());this.setCmdDelete(options.commands.getCmdDelete());this.setCmdPrint(options.commands.getCmdPrint());}
var self=this;if(options.pagination){this.setPagination(options.pagination);if(options.model){options.pagination.setFrom(options.model.getPageFrom());}
options.pagination.setGrid(this)}
this.setPopUpMenu(options.popUpMenu);this.setRowSelect((options.rowSelect!=undefined)?options.rowSelect:true);this.setLastRowSelectOnInit((options.lastRowSelectOnInit!=undefined)?options.lastRowSelectOnInit:false);this.setContClassName(options.contClassName);this.setLastRowFooter(options.lastRowFooter);this.m_onEventSetRowClass=options.onEventSetRowClass;this.m_onEventAddRow=options.onEventAddRow;this.m_onEventSetRowOptions=options.onEventSetRowOptions;this.m_onEventAddCell=options.onEventAddCell;this.m_onEventSetCellOptions=options.onEventSetCellOptions;this.setResize((options.resize!=undefined)?options.resize:true);this.setNavigate((options.navigate!=undefined)?options.navigate:true);this.setNavigateClick((options.navigateClick!=undefined)?options.navigate:true);this.m_onRefresh=options.onRefresh;this.m_keyIds=options.keyIds||["id"];this.m_keyDown=function(e){self.onKeyDown(e);};this.m_keyPress=function(e){self.onKeyPress(e);};this.m_wheelEvent=function(e){self.onWheel(e);};this.m_focusEvent=function(){self.setFocused(true);}
this.m_blurEvent=function(){self.setFocused(false);}
this.m_clickEvent=function(ev){self.onClick(ev);};this.m_dblClickEvent=function(ev){self.onDblClick(ev);};var head=this.getHead();if(head){var col_man,col_order,col_visib,col_filter;var cmd=this.getCommands();if(cmd&&options.popUpMenu&&cmd.setPopUpMenu){cmd.setPopUpMenu(options.popUpMenu);}
if(cmd&&cmd.getCmdColManager){col_man=cmd.getCmdColManager();if(col_man){col_order=col_man.getColOrder();col_visib=col_man.getColVisibility();}}
var col_names={};for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.setInitColumnOrder();for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var f_name=head_row.m_elements[col].getName();if(f_name){col_names[f_name]=head_row.m_elements[col];}
head_row.m_elements[col].m_onRefresh=function(){self.onRefresh();}
head_row.m_elements[col].setColManager(col_man);if(col_order&&col_order.length){head_row.m_elements[col].setSortable(false);}}}
if(col_visib&&col_visib.length){head_row.setColumnOrder(col_visib);}}
if(col_man){col_man.init();}
if(col_order){for(var i=0;i<col_order.length;i++){var f_name=col_order[i].colId;if(col_names[f_name]){if(col_order[i].checked&&col_order[i].direct!="undefined"&&col_names[f_name]){col_names[f_name].setSortable(true);col_names[f_name].setSort(col_order[i].direct);}}}}}
if(options.fixedHeader){this.m_fixedHeader=true;this.m_fixedOffset=options.fixedOffset||0;}
this.m_editWinObjList={};}
extend(Grid,Control);Grid.prototype.DEF_TAG_NAME="TABLE";Grid.prototype.DEF_ROW_TAG_NAME="TR";Grid.prototype.DEF_CELL_TAG_NAME="TD";Grid.prototype.DEF_BODY_TAG_NAME="TBODY";Grid.prototype.SELECTED_ROW_CLASS="success";Grid.prototype.SELECTED_CELL_CLASS="info";Grid.prototype.FOCUSED_CLASS="focused";Grid.prototype.DEF_CLASS="table table-bordered table-responsive table-striped";Grid.prototype.DEF_TAB_INDEX="100";Grid.prototype.DEF_REFRESH_INTERVAL="0";Grid.prototype.CONSTR_FADE_CLASS="viewFadeOnConstruct";Grid.prototype.INCORRECT_VAL_CLASS="error";Grid.prototype.VAL_INIT_ATTR="initValue";Grid.prototype.m_commands;Grid.prototype.m_pagination;Grid.prototype.m_head;Grid.prototype.m_body;Grid.prototype.m_foot;Grid.prototype.m_editInline;Grid.prototype.m_editWinClass;Grid.prototype.m_editWinObj;Grid.prototype.m_editWinObjList;Grid.prototype.m_editViewClass;Grid.prototype.m_editViewOptions;Grid.prototype.m_insertViewOptions;Grid.prototype.m_editViewObj;Grid.prototype.m_rowCommandPanelClass;Grid.prototype.m_refInterval;Grid.prototype.m_refIntervalObj;Grid.prototype.m_onSelect;Grid.prototype.m_onEventSetRowClass;Grid.prototype.m_onEventDelete;Grid.prototype.m_onEventInsert;Grid.prototype.m_contClassName;Grid.prototype.m_popUpMenu;Grid.prototype.m_rowSelect;Grid.prototype.m_lastRowSelectOnInit;Grid.prototype.m_resize;Grid.prototype.m_navigate;Grid.prototype.m_navigateClick;Grid.prototype.m_cmdInsert;Grid.prototype.m_cmdEdit;Grid.prototype.m_cmdCopy;Grid.prototype.m_cmdDelete;Grid.prototype.m_cmdPrint;Grid.prototype.m_model;Grid.prototype.m_selectedRowKeys;Grid.prototype.m_selectedRowId;Grid.prototype.m_rowClass;Grid.prototype.m_container;Grid.prototype.m_containerScroll;Grid.prototype.m_lastRowFooter;Grid.prototype.m_keyDown;Grid.prototype.m_keyPress;Grid.prototype.m_wheelEvent;Grid.prototype.m_interval;Grid.prototype.m_parent;Grid.prototype.m_showHead;Grid.prototype.m_selectedRowClass;Grid.prototype.m_errorControl;Grid.prototype.getRowHeight=function(){var row_n=this.getSelectedRow();if(row_n){return $(row_n).height();}}
Grid.prototype.initNavigation=function(){this.setFocused(true);EventHelper.add(this.m_node,"focus",this.m_focusEvent,false);EventHelper.add(this.m_node,"blur",this.m_blurEvent,false);}
Grid.prototype.addEvents=function(){if(this.m_navigate){EventHelper.add(this.m_node,'keydown',this.m_keyDown,false);EventHelper.add(this.m_node,'keypress',this.m_keyPress,false);}
if(this.m_navigateClick){EventHelper.add(this.m_node,"click",this.m_clickEvent,false);EventHelper.add(this.m_node,"contextmenu",this.m_clickEvent,false);EventHelper.addWheelEvent(this.m_node,this.m_wheelEvent,false);}
if(this.m_cmdEdit||this.m_onSelect){EventHelper.add(this.m_node,"dblclick",this.m_dblClickEvent,false);}}
Grid.prototype.delEvents=function(){EventHelper.del(this.m_node,'keydown',this.m_keyDown,false);EventHelper.del(this.m_node,'keypress',this.m_keyPress,false);EventHelper.del(this.m_node,"click",this.m_clickEvent,false);EventHelper.del(this.m_node,"contextevent",this.m_clickEvent,false);EventHelper.delWheelEvent(this.m_node,this.m_wheelEvent,false);if(this.m_cmdEdit||this.m_onSelect){EventHelper.del(this.m_node,"dblclick",this.m_dblClickEvent,false);}}
Grid.prototype.selectFirstSelectableCell=function(row){var cells=row.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<cells.length;i++){if(this.getCellSelectable(cells[i])){this.selectCell(cells[i]);return cells[i];}}}
Grid.prototype.setSelection=function(){var selected=false;if(this.m_selectedRowKeys){var rows=this.m_body.getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);for(var i=0;i<rows.length;i++){if(rows[i].getAttribute("keys")==this.m_selectedRowKeys){if(this.m_rowSelect){this.selectRow(rows[i]);selected=true;}
else{if(rows[i].childNodes.length>this.m_selectedCellInd){this.selectCell(rows[i].childNodes[this.m_selectedCellInd]);}
else{this.selectFirstSelectableCell(rows[i]);}
selected=true;}
break;}}}
if(!selected){var rows=this.getBody().getNode().getElementsByTagName(this.DEF_ROW_TAG_NAME);if(rows&&rows.length>0){var sel_node;if(this.m_rowSelect){if(this.m_lastRowSelectOnInit){for(var i=rows.length-1;i>0;i--){if(this.getRowSelectable(rows[i])){sel_node=rows[i];this.selectRow(sel_node);break;}}}
else{for(var i=0;i<rows.length;i++){if(this.getRowSelectable(rows[i])){this.selectRow(rows[i]);break;}}}}
else{var sel_node=this.selectFirstSelectableCell((this.m_lastRowSelectOnInit)?rows[rows.length-1]:rows[0]);}
if(this.m_lastRowSelectOnInit){$(sel_node).get(0).scrollIntoView();}}}}
Grid.prototype.keyPressEvent=function(keyCode,event){var res=false;if(keyCode==13){res=this.onEditSelect(event);}
else if(keyCode==33){}
else if(keyCode==34){}
else if(keyCode==35){}
else if(keyCode==36){}
else if(keyCode==37){res=this.onPreviousColumn();}
else if(keyCode==38){res=this.onPreviousRow();}
else if(keyCode==39){res=this.onNextColumn();}
else if(keyCode==40){res=this.onNextRow();}
else if(keyCode==45){res=this.onInsert();}
else if(keyCode==46){res=this.onDelete();}
else if(keyCode==120){res=this.onCopy();}
else if(keyCode==80&&event.ctrlKey){res=this.onPrint();}
else if(keyCode==70&&event.ctrlKey&&this.m_onSearchDialog){this.m_onSearchDialog();res=true;}
else if(keyCode==71&&event.ctrlKey&&this.m_onSearchReset){this.m_onSearchReset();res=true;}
return res;}
Grid.prototype.onPreviousColumn=function(){res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.previousSibling&&this.getCellSelectable(selected_node.previousSibling)){this.selectCell(selected_node.previousSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onNextColumn=function(){var res=false;if(!this.m_rowSelect){var selected_node=this.getSelectedNode();if(selected_node&&selected_node.nextSibling&&this.getCellSelectable(selected_node.nextSibling)){this.selectCell(selected_node.nextSibling,selected_node);}
res=true;}
return res;}
Grid.prototype.onPreviousRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.previousSibling&&(selected_node.previousSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.previousSibling)){new_node=selected_node.previousSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.previousSibling&&(selected_node.parentNode.previousSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.previousSibling)){new_node=selected_node.parentNode.previousSibling.childNodes[DOMHelper.getElementIndex(selected_node)];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.onNextRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node&&this.m_rowSelect&&selected_node.nextSibling&&(selected_node.nextSibling.nodeName==selected_node.nodeName)&&this.getRowSelectable(selected_node.nextSibling)){new_node=selected_node.nextSibling;this.selectRow(new_node,selected_node);res=true;}
else if(selected_node&&!this.m_rowSelect&&selected_node.parentNode.nextSibling&&(selected_node.parentNode.nextSibling.nodeName==selected_node.parentNode.nodeName)&&this.getCellSelectable(selected_node.parentNode.nextSibling)){var ind=DOMHelper.getElementIndex(selected_node);new_node=selected_node.parentNode.nextSibling.childNodes[ind];this.selectCell(new_node,selected_node);res=true;}
if(res&&new_node&&!DOMHelper.inViewport(new_node,true)){$(new_node).get(0).scrollIntoView();}
return res;}
Grid.prototype.delRow=function(rowNode){this.deleteRowNode(rowNode);}
Grid.prototype.deleteRowNode=function(rowNode){if(!rowNode){rowNode=this.getSelectedRow();}
if(rowNode){var new_node=rowNode.nextSibling;if(!new_node){new_node=rowNode.previousSibling;}
DOMHelper.delNode(rowNode);if(new_node){if(this.m_rowSelect){this.selectRow(new_node);}
else{var tds=new_node.getElementsByTagName(this.DEF_CELL_TAG_NAME);for(var i=0;i<tds.length;i++){if(!DOMHelper.hasClass(tds[i],this.CLASS_INVISIBLE)){this.selectCell(tds[i]);break;}}}}}}
Grid.prototype.onDelete=function(){var res=false;if(this.m_cmdDelete){var selected_node=this.getSelectedRow();if(selected_node){var self=this;this.setFocused(false);WindowQuestion.show({"cancel":false,"text":this.Q_DELETE,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delRow(selected_node);}
else{self.focus();}}});res=true;}}
return res;}
Grid.prototype.onSelect=function(){this.m_onSelect(this.getModelRow());}
Grid.prototype.onEditSelect=function(event){var res=false;if(this.m_cmdEdit&&(!this.m_onSelect||(this.m_onSelect&&event.ctrlKey))){this.edit("edit");res=true;}
else if(this.m_onSelect&&!event.ctrlKey){this.onSelect();res=true;}
return res;}
Grid.prototype.onDblClick=function(ev){ev=EventHelper.fixMouseEvent(ev);this.onEditSelect(ev);}
Grid.prototype.nodeClickable=function(node){return(this.getEnabled()&&node.nodeName==this.DEF_CELL_TAG_NAME&&DOMHelper.getParentByTagName(node,this.DEF_BODY_TAG_NAME));}
Grid.prototype.onClick=function(ev){ev=EventHelper.fixMouseEvent(ev);if(this.nodeClickable(ev.target)){if(!this.getFocused()){this.setFocused(true);}
if(this.m_rowSelect){var row=(ev.target.nodeName==this.DEF_ROW_TAG_NAME)?ev.target:DOMHelper.getParentByTagName(ev.target,this.DEF_ROW_TAG_NAME);if(row&&this.getRowSelectable(row)){this.selectRow(row,this.getSelectedNode());}}
else if(!this.m_rowSelect&&this.getCellSelectable(ev.target)){this.selectCell(ev.target,this.getSelectedNode());}}}
Grid.prototype.onKeyDown=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixKeyEvent(e);this.m_curKeyDown=e;if(this.keyPressEvent(e.keyCode,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onKeyPress=function(e){if(this.getEnabled()&&this.getFocused()&&!this.m_rowSelect&&this.m_onSearch&&!this.m_curKeyDown.ctrlKey){e=EventHelper.fixKeyEvent(e);if(this.m_onSearch.call(this,e)){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();return false;}}}
Grid.prototype.onWheel=function(e){if(this.getEnabled()&&this.getFocused()){e=EventHelper.fixWheelEvent(e);var moved;if(e.delta>0){moved=this.onNextRow();}
else{moved=this.onPreviousRow();}
if(moved){if(e.preventDefault){e.preventDefault();}
e.stopPropagation();}
return false;}}
Grid.prototype.initEditWinObj=function(cmd){var keys={};if(cmd!="insert"){var fields=this.m_model.getFields();var key_fields=this.getKeyIds();if(key_fields&&key_fields.length){for(var i=0;i<key_fields.length;i++){if(fields[key_fields[i]]){keys[key_fields[i]]=fields[key_fields[i]].getValueXHR();}}}
else{for(var id in fields){if(fields[id].getPrimaryKey()){keys[id]=fields[id].getValueXHR();}}}}
var self=this;var view_opts={};CommonHelper.merge(view_opts,(cmd=="edit")?this.getEditViewOptions():this.getInsertViewOptions());var win_id=CommonHelper.uniqid();var win_params={"id":win_id,"app":window.getApp(),"onClose":function(res){res=res||{"updated":false};self.closeEditWinObj(res,this.getId());},"keys":keys,"params":{"cmd":cmd,"editViewOptions":view_opts}};var edit_cl=(this.m_editWinClass.name=="editWinClass")?this.m_editWinClass.call(this,win_params):this.m_editWinClass;this.m_editWinObjList[win_id]=new edit_cl(win_params);this.m_editWinObjList[win_id].open();}
Grid.prototype.closeEditWinObj=function(res,winId){if(this.m_editWinObjList[winId]){this.m_editWinObjList[winId].close();delete this.m_editWinObjList[winId];}
this.refreshAfterEdit(res);}
Grid.prototype.initEditView=function(parent,replacedNode,cmd){this.setLocked(true);var view_opts={};CommonHelper.merge(view_opts,(cmd=="edit")?this.getEditViewOptions():this.getInsertViewOptions());view_opts.className=((view_opts.className!=undefined)?(view_opts.className+" "):"")+this.CONSTR_FADE_CLASS;view_opts.grid=this;view_opts.onClose=function(res){self.closeEditView(res);};view_opts.keys=this.getSelectedNodeKeys();view_opts.cmd=cmd;view_opts.winObj=(this.m_editWinClass)?this.m_editWinObj:this.getWinObj();view_opts.row=this.getRow();var self=this;this.m_editViewObj=new this.m_editViewClass(this.getId()+":edit-view",view_opts);this.m_editViewObj.setReplacedNode(replacedNode);this.m_editViewObj.toDOM(parent);}
Grid.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.m_editViewObj.read(cmd);}
else if(this.m_model){}}
Grid.prototype.closeEditView=function(res){if(this.m_editViewObj.getReplacedNode()){var nd=this.m_editViewObj.getReplacedNode();DOMHelper.addClass(nd,this.CONSTR_FADE_CLASS);this.m_editViewObj.getNode().parentNode.replaceChild(nd,this.m_editViewObj.getNode());}
this.m_editViewObj.delDOM();delete this.m_editViewObj;this.refreshAfterEdit(res);}
Grid.prototype.refreshAfterEdit=function(res){if(CommonHelper.nd(this.getId())){if(this.m_parent){this.delDOM();this.toDOM(this.m_parent);}
if(this.getLocked()){this.setLocked(false);}
this.focus();if(res&&res.updated){if(res.newKeys){this.m_selectedRowKeys=CommonHelper.array2json(res.newKeys);}
this.onRefresh();}}}
Grid.prototype.read=function(isCopy){}
Grid.prototype.edit=function(cmd){if(this.m_model&&this.m_model.getLocked()){return 0;}
var sel_n=this.getSelectedRow();this.setModelToCurrentRow(sel_n);if(this.getEditInline()){this.initEditView(this.getBody().m_node,(cmd=="insert")?null:sel_n,cmd);}
else if(this.m_editWinClass&&!this.m_editViewClass){this.initEditWinObj(cmd);}
else if(!this.m_editWinClass&&this.m_editViewClass){var parent=this.m_parent;this.removeDOM();this.initEditView(this.getBody().m_node,null,cmd);}
else if(this.m_editWinClass&&this.m_editViewClass){}
else{}
if(this.m_editViewObj)this.fillEditView(cmd);}
Grid.prototype.getRowSelectable=function(row){return(!DOMHelper.hasClass(row,"grid_foot")&&!DOMHelper.hasClass(row,"grid_details"));}
Grid.prototype.getCellSelectable=function(cell){return(!DOMHelper.hasClass(cell,"grid_sys_col")&&!DOMHelper.hasClass(cell.parentNode,"grid_foot"));}
Grid.prototype.selectNode=function(newNode,oldNode){if(oldNode){if(!this.m_rowSelect){DOMHelper.delClass(oldNode,this.m_selectedCellClass);DOMHelper.delClass(oldNode.parentNode,this.m_selectedRowClass);}
else{DOMHelper.delClass(oldNode,this.m_selectedRowClass);}}
if(newNode){if(!this.m_rowSelect){DOMHelper.addClass(newNode,this.m_selectedCellClass);DOMHelper.addClass(newNode.parentNode,this.m_selectedRowClass);}
else{DOMHelper.addClass(newNode,this.m_selectedRowClass);}}}
Grid.prototype.selectRow=function(newRow,oldRow){if(newRow){this.m_selectedRowKeys=newRow.getAttribute("keys");this.m_selectedRowId=newRow.getAttribute("id");this.selectNode(newRow,oldRow);}}
Grid.prototype.selectCell=function(newCell,oldCell){if(newCell){var tr=DOMHelper.getParentByTagName(newCell,this.DEF_ROW_TAG_NAME);if(tr){this.m_selectedRowKeys=tr.getAttribute("keys");this.m_selectedRowId=tr.getAttribute("id");this.m_selectedCellInd=DOMHelper.getElementIndex(newCell);this.selectNode(newCell,oldCell);}}}
Grid.prototype.getSelectedRow=function(){if(!this.getRowSelect()){var sel=this.getSelectedCell();if(sel){return sel.parentNode;}}
else{var sel=DOMHelper.getElementsByAttr(this.m_selectedRowClass,this.m_body.getNode(),"class",true,this.DEF_ROW_TAG_NAME);return(sel.length)?sel[0]:null;}}
Grid.prototype.getSelectedCell=function(){var sel=DOMHelper.getElementsByAttr(this.m_selectedCellClass,this.m_body.getNode(),"class",true,this.DEF_CELL_TAG_NAME);return(sel.length)?sel[0]:null;}
Grid.prototype.getSelectedNode=function(){return(this.m_rowSelect)?this.getSelectedRow():this.getSelectedCell();}
Grid.prototype.getSelectedNodeKeys=function(){var selected_node=this.getSelectedRow();if(selected_node){return CommonHelper.unserialize(selected_node.getAttribute("keys"));}}
Grid.prototype.fixHeader=function(){}
Grid.prototype.createNewRow=function(rowCnt,hRowInd){var r_class=this.getHead().getRowClass(hRowInd);var row_opts=CommonHelper.clone(this.getHead().getRowOptions(hRowInd));row_opts.attrs=row_opts.attrs||{};row_opts.attrs.modelIndex=rowCnt;if(this.m_onSelect){row_opts.className+=(row_opts.className?" ":"")+"for_select";}
if(this.m_onEventSetRowOptions){this.m_onEventSetRowOptions(row_opts);}
if(this.m_onEventSetRowClass){this.m_onEventSetRowClass(this.m_model,row_opts.className);}
var row;if(r_class.name=="Control"||r_class.name=="ControlContainer"){row=new r_class(this.getId()+":"+this.getBody().getName()+":"+rowCnt,row_opts.tagName||"DIV",row_opts);}
else{row=new r_class(this.getId()+":"+this.getBody().getName()+":"+rowCnt,row_opts);}
return row;}
Grid.prototype.createNewCell=function(column,row){var cell_class=column.getCellClass();var cell_opts=CommonHelper.clone(column.getCellOptions()||{});cell_opts.modelIndex=row.getAttr("modelIndex");cell_opts.fields=this.m_model.getFields();cell_opts.row=row;cell_opts.gridColumn=column;var cell_elements=column.getCellElements();if(cell_elements){cell_opts.elements=[];for(var cel_el_i=0;cel_el_i<cell_elements.length;cel_el_i++){var cel_el_opts=CommonHelper.clone(cell_elements[cel_el_i].elementOptions);var elem_obj;var elem_class=cell_elements[cel_el_i].elementClass;if(elem_class.name=="Control"||elem_class.name=="ControlContainer"){elem_obj=new elem_class(null,cel_el_opts.tagName,cel_el_opts);}
else{elem_obj=new elem_class(null,cel_el_opts);}
cell_opts.elements.push(elem_obj);}}
if(this.m_onEventSetCellOptions){this.m_onEventSetCellOptions(cell_opts);}
var cell;if(cell_class.name=="Control"||cell_class.name=="ControlContainer"){cell=new cell_class(row.getId()+":"+column.getId(),cell_opts.tagName,cell_opts);}
else{cell=new cell_class(row.getId()+":"+column.getId(),cell_opts);}
return cell;}
Grid.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();while(this.m_model.getNextRow()){row=this.createNewRow(row_cnt,h_row_ind);row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}}
Grid.prototype.setCommands=function(commands){this.m_commands=commands;}
Grid.prototype.getCommands=function(){return this.m_commands;}
Grid.prototype.setPagination=function(pagination){this.m_pagination=pagination;}
Grid.prototype.getPagination=function(){return this.m_pagination;}
Grid.prototype.setFoot=function(foot){this.m_foot=foot;}
Grid.prototype.getFoot=function(){return this.m_foot;}
Grid.prototype.setHead=function(head){this.m_head=head;}
Grid.prototype.getHead=function(){return this.m_head;}
Grid.prototype.setBody=function(body){this.m_body=body;}
Grid.prototype.getBody=function(){return this.m_body;}
Grid.prototype.getRowCommandClass=function(){return this.m_rowCommandClass;}
Grid.prototype.setRowCommandClass=function(v){this.m_rowCommandClass=v;}
Grid.prototype.getEditInline=function(){return this.m_editInline;}
Grid.prototype.setEditInline=function(v){this.m_editInline=v;}
Grid.prototype.getOnSelect=function(){return this.m_onSelect;}
Grid.prototype.setOnSelect=function(v){this.m_onSelect=v;}
Grid.prototype.setAutoRefresh=function(autoRefresh){this.m_autoRefresh=autoRefresh;}
Grid.prototype.getAutoRefresh=function(){return this.m_autoRefresh;}
Grid.prototype.setPopUpMenu=function(menu){this.m_popUpMenu=menu;}
Grid.prototype.getPopUpMenu=function(){return this.m_popUpMenu;}
Grid.prototype.setRowSelect=function(v){this.m_rowSelect=v;}
Grid.prototype.getRowSelect=function(){return this.m_rowSelect;}
Grid.prototype.setLastRowSelectOnInit=function(v){this.m_lastRowSelectOnInit=v;}
Grid.prototype.getLastRowSelectOnInit=function(){return this.m_lastRowSelectOnInit;}
Grid.prototype.setContClassName=function(v){this.m_contClassName=v;}
Grid.prototype.getContClassName=function(){return this.m_contClassName;}
Grid.prototype.setLastRowFooter=function(v){this.m_lastRowFooter=v;}
Grid.prototype.getLastRowFooter=function(){return this.m_lastRowFooter;}
Grid.prototype.setResize=function(v){this.m_resize=v;}
Grid.prototype.getResize=function(){return this.m_resize;}
Grid.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
Grid.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
Grid.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
Grid.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
Grid.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
Grid.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
Grid.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
Grid.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
Grid.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
Grid.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
Grid.prototype.setNavigate=function(v){this.m_navigate=v;if(this.m_navigate){this.setTabIndex(this.getTabIndex()||this.DEF_TAB_INDEX);}}
Grid.prototype.getNavigate=function(){return this.m_navigate;}
Grid.prototype.setNavigateClick=function(v){this.m_navigateClick=v;}
Grid.prototype.getNavigateClick=function(){return this.m_navigateClick;}
Grid.prototype.setRefreshInterval=function(v){this.m_refInterval=v;if(v==0&&this.m_refIntervalObj!=undefined){window.clearInterval(this.m_refIntervalObj);}
else if(v>0){var self=this;this.m_refIntervalObj=setInterval(function(){self.onRefresh();},v);}}
Grid.prototype.getRefreshInterval=function(){return this.m_refInterval;}
Grid.prototype.setEditViewClass=function(v){this.m_editViewClass=v;}
Grid.prototype.getEditViewClass=function(){return this.m_editViewClass;}
Grid.prototype.setEditViewOptions=function(v){this.m_editViewOptions=v;}
Grid.prototype.getEditViewOptions=function(){return this.m_editViewOptions;}
Grid.prototype.setInsertViewOptions=function(v){this.m_insertViewOptions=v;}
Grid.prototype.getInsertViewOptions=function(){return this.m_insertViewOptions;}
Grid.prototype.setEditWinClass=function(v){this.m_editWinClass=v;}
Grid.prototype.getEditWinClass=function(){return this.m_editWinClass;}
Grid.prototype.lockRefresh=function(v){if(v){this.m_interval=this.getRefreshInterval();this.setRefreshInterval(0);if(this.m_model)this.m_model.setLocked(true);}
else{if(this.m_model)this.m_model.setLocked(false);this.setRefreshInterval(this.m_interval);}}
Grid.prototype.setEnabled=function(v){if(this.m_head)this.m_head.setEnabled(v);if(this.m_body)this.m_body.setEnabled(v);if(this.m_foot)this.m_foot.setEnabled(v);if(this.m_commands)this.m_commands.setEnabled(v);this.lockRefresh(!v);Grid.superclass.setEnabled.call(this,v);}
Grid.prototype.setLocked=function(v){if(this.m_head)this.m_head.setLocked(v);if(this.m_body)this.m_body.setLocked(v);if(this.m_foot)this.m_foot.setLocked(v);if(this.m_commands)this.m_commands.setLocked(v);this.lockRefresh(v);Grid.superclass.setLocked.call(this,v);}
Grid.prototype.toDOM=function(parent){this.m_container=new ControlContainer(this.getId()+":cont","DIV",{"className":this.m_contClassName});if(this.m_commands)this.m_container.addElement(this.m_commands);if(this.m_head&&this.getShowHead())this.m_head.toDOM(this.m_node);if(this.m_body)this.m_body.toDOM(this.m_node);if(this.m_foot)this.m_foot.toDOM(this.m_node);if(this.m_errorControl)this.m_container.addElement(this.m_errorControl);this.m_container.toDOM(parent);Grid.superclass.toDOM.call(this,this.m_container.getNode());if(this.m_pagination)this.m_pagination.toDOM(this.m_container.getNode());if(this.m_autoRefresh){this.onRefresh();}
if(this.m_resize){}
if(this.m_navigate){this.initNavigation();this.setSelection();}
if(this.getPopUpMenu()!=undefined){this.getPopUpMenu().bind(this.m_body.getNode());}
this.fixHeader();this.m_rendered=true;if(!this.m_autoRefresh){this.onGetData();}}
Grid.prototype.delDOM=function(){this.setRefreshInterval(0);if(this.m_commands)this.m_commands.delDOM();if(this.m_errorControl)this.m_errorControl.delDOM();if(this.m_pagination)this.m_pagination.delDOM();if(this.m_head)this.m_head.delDOM();if(this.m_body)this.m_body.delDOM();if(this.m_foot)this.m_foot.delDOM();EventHelper.del(this.m_node,'focus',this.m_focusEvent,false);EventHelper.del(this.m_node,'blur',this.m_blurEvent,false);Grid.superclass.delDOM.call(this);if(this.m_container)this.m_container.delDOM();this.m_rendered=false;}
Grid.prototype.getFocused=function(){return DOMHelper.hasClass(this.m_node,this.FOCUSED_CLASS);}
Grid.prototype.setFocused=function(focused){if(this.m_node&&focused&&!this.getFocused()){var tables=this.getWinObjDocument().getElementsByTagName("table");for(var i=0;i<tables.length;i++){DOMHelper.delClass(tables[i],this.FOCUSED_CLASS);}
DOMHelper.addClass(this.m_node,this.FOCUSED_CLASS);this.addEvents();}
else if(this.m_node&&!focused){DOMHelper.delClass(this.m_node,this.FOCUSED_CLASS);if(!CommonHelper.isIE()){this.delEvents();}}}
Grid.prototype.focus=function(){this.setFocused(true);try{this.getNode().focus();}
catch(e){}}
Grid.prototype.getModel=function(){return this.m_model;}
Grid.prototype.setModel=function(m){this.m_model=m;}
Grid.prototype.onError=function(erStr){var self=this;window.showError(erStr,function(){self.setFocused(true);});}
Grid.prototype.onEdit=function(){if(this.m_cmdEdit){this.edit("edit");}}
Grid.prototype.onCopy=function(){if(this.m_cmdCopy){this.edit("copy");}}
Grid.prototype.onInsert=function(){if(this.m_cmdInsert){this.edit("insert");}}
Grid.prototype.onPrint=function(){if(this.m_cmdPrint){WindowPrint.show({content:this.getNode().outerHTML});}}
Grid.prototype.onRefresh=function(callBack){this.onGetData();if(this.callBack){this.callBack.call(this);}}
Grid.prototype.onRowUp=function(){var selected_node=this.getSelectedNode();if(selected_node){if(this.m_model){this.setModelToCurrentRow();this.m_model.recMoveUp(this.m_model.getRowIndex());this.onRefresh();}
else if(selected_node.previousSibling){selected_node.parentNode.insertBefore(selected_node,selected_node.previousSibling);}}}
Grid.prototype.onRowDown=function(){var selected_node=this.getSelectedNode();if(selected_node){if(this.m_model){this.setModelToCurrentRow();this.m_model.recMoveDown(this.m_model.getRowIndex());this.onRefresh();}
else if(selected_node.nextSibling){selected_node.nextSibling.parentNode.insertBefore(selected_node.nextSibling,selected_node.nextSibling.previousSibling);}}}
Grid.prototype.setModelToCurrentRow=function(rowNode){if(!rowNode){rowNode=this.getSelectedRow();}
this.m_model.getRow(parseInt(DOMHelper.getAttr(rowNode,"modelIndex")));}
Grid.prototype.getModelRow=function(){this.setModelToCurrentRow();return this.m_model.getFields();}
Grid.prototype.getRow=function(){var row_n=this.getSelectedRow();if(row_n){return this.getBody().getElement(row_n.getAttribute("modelIndex"));}}
Grid.prototype.setKeyIds=function(v){this.m_keyIds=v;}
Grid.prototype.getKeyIds=function(){if(!this.m_keyIds||!this.m_keyIds.length&&(this.m_model&&this.m_model.getFields())){var fields=this.m_model.getFields();for(fid in fields){if(fields[fid].getPrimaryKey()){this.m_keyIds.push(fid);}}}
return this.m_keyIds;}
Grid.prototype.setOnSearch=function(v){this.m_onSearch=v;}
Grid.prototype.getOnSearch=function(){return this.m_onSearch;}
Grid.prototype.setOnSearchDialog=function(v){this.m_onSearchDialog=v;}
Grid.prototype.getOnSearchDialog=function(){return this.m_onSearchDialog;}
Grid.prototype.setOnSearchReset=function(v){this.m_onSearchReset=v;}
Grid.prototype.getOnSearchReset=function(){return this.m_onSearchReset;}
Grid.prototype.setShowHead=function(v){this.m_showHead=v;}
Grid.prototype.getShowHead=function(){return this.m_showHead;}
Grid.prototype.isNull=function(){return(!this.m_model||this.m_model.getRowCount()==0);}
Grid.prototype.reset=function(){CommonHelper.log("Grid.prototype.reset DELETE ROWS!!!")}
Grid.prototype.setValue=function(v){if(this.m_model){this.m_model.setData(v);this.m_model.reindex();this.onRefresh();}}
Grid.prototype.setInitValue=function(v){this.setValue(v);this.setAttr(this.VAL_INIT_ATTR,CommonHelper.md5(this.m_model.getData().toString()));}
Grid.prototype.getInitValue=function(){return this.getAttr(this.VAL_INIT_ATTR);}
Grid.prototype.getValue=function(){if(this.m_model){return this.m_model.getData().toString();}}
Grid.prototype.getModified=function(){return(CommonHelper.md5(this.getValue())!=this.getAttr(this.VAL_INIT_ATTR));}
Grid.prototype.getIsRef=function(){return false;}
Grid.prototype.setNotValid=function(erStr){DOMHelper.addClass(this.m_container.getNode(),this.INCORRECT_VAL_CLASS);if(this.getErrorControl()){this.getErrorControl().setValue(erStr);}
else{throw new Error(erStr);}}
Grid.prototype.setValid=function(){DOMHelper.delClass(this.m_container.getNode(),this.INCORRECT_VAL_CLASS);if(this.getErrorControl())this.getErrorControl().clear();}
Grid.prototype.getInputEnabled=function(){return this.getEnabled();}
Grid.prototype.setInputEnabled=function(v){this.setEnabled(v);}
Grid.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Grid.prototype.getErrorControl=function(){return this.m_errorControl;}
Grid.prototype.setColumnVisible=function(colId,v){var columns=this.getHead().getColumns();var is_list=CommonHelper.isArray(colId);var col_indexes=[];for(var ind=0;ind<columns.length;ind++){if(is_list&&CommonHelper.inArray(columns[ind].getId(),colId)>=0){columns[ind].setVisible(v);col_indexes.push(ind);}
else if(!is_list&&columns[ind].getId()==colId){columns[ind].setVisible(v);col_indexes.push(ind);break;}}
var b=this.getBody().getNode();for(i=0;i<b.rows.length;i++){for(var j=0;j<col_indexes.length;j++){if(!v){DOMHelper.addClass(b.rows[i].cells[col_indexes[j]],"hidden");}
else{DOMHelper.delClass(b.rows[i].cells[col_indexes[j]],"hidden");}}}}
Grid.prototype.setVisible=function(v){if(this.m_container)this.m_container.setVisible(v);} 
Grid.prototype.Q_DELETE="Удалить запись?";Grid.prototype.NT_REC_DELETED="Запись удалена.";Grid.prototype.ER_COL_NOT_BOUND="Колонка % грида % не привязана к полю модели."; 
function VariantStorage(options){options=options||{};this.m_afterFormClose=options.afterFormClose;this.m_variantStorageName=options.variantStorageName;}
VariantStorage.prototype.openStorage=function(dataCol){var self=this;this.m_dataCol=dataCol;this.m_view=new VariantStorageOpenView("VariantStorageOpenView",{"variantStorageName":this.m_variantStorageName,"onClose":function(){self.closeOpenForm();},"onSelect":function(fields){self.loadVariant(fields.variant_name.getValue(),self.m_dataCol);}});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.loadVariant(self.m_view.getElement("variants").getFieldValue("variant_name"),self.m_dataCol);},"onClickCancel":function(){self.formClose();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
VariantStorage.prototype.loadVariant=function(variantName,dataCol){var pm_id=dataCol?"get_"+dataCol:"get_all_data";var pm=(new VariantStorage_Controller()).getPublicMethod(pm_id);pm.setFieldValue("storage_name",this.m_variantStorageName);pm.setFieldValue("variant_name",variantName);var self=this;pm.run({"ok":function(resp){var m=new VariantStorage_Model({"data":resp.getModelData("VariantStorage_Model")});if(m.getNextRow()){self.formClose(dataCol?m.getFieldValue(dataCol):m);}}});}
VariantStorage.prototype.saveStorage=function(dataCol,dataColVal){var self=this;this.m_dataCol=dataCol;this.m_dataColVal=dataColVal;this.m_view=new VariantStorageSaveView("VariantStorageSaveView",{"variantStorageName":this.m_variantStorageName,"onClose":function(){self.form();}});this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.m_view.CMD_OK_CAP,"controlOkTitle":this.m_view.CMD_OK_TITLE,"onClickOk":function(){self.saveVariant(self.m_dataCol,self.m_dataColVal,self.m_view.getElement("name").getValue());},"onClickCancel":function(){self.formClose();},"content":this.m_view,"contentHead":this.m_view.HEAD_TITLE});this.m_form.open();}
VariantStorage.prototype.saveVariant=function(dataCol,dataColVal,variantName){var pm=(new VariantStorage_Controller()).getPublicMethod("upsert_"+dataCol);pm.setFieldValue("storage_name",this.m_variantStorageName);pm.setFieldValue("variant_name",variantName);pm.setFieldValue("default_variant",this.m_view.getElement("default_variant").getValue());pm.setFieldValue(dataCol,dataColVal);var self=this;pm.run({"ok":function(resp){self.formClose();}});}
VariantStorage.prototype.formClose=function(val){this.m_form.close();delete this.m_form;if(this.m_afterFormClose)this.m_afterFormClose.call(this,val);} 
function GridCommands(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;GridCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:false;options.cmdPrintObj=(options.cmdPrintObj!=undefined)?options.cmdPrintObj:false;options.cmdPrintObj=(options.printObjList!=undefined)?true:options.cmdPrintObj;options.cmdSearch=(options.cmdSearch!=undefined)?true:options.cmdSearch;var self=this;if(options.cmdInsert||options.controlInsert){this.setControlInsert(options.controlInsert||new ButtonCtrl(id+":cmdInsert",{"glyph":"glyphicon-plus","onClick":function(){self.m_grid.onInsert();},"attrs":{"title":this.BTN_INSERT_TITLE}}));}
if(options.cmdEdit||options.controlEdit){this.setControlEdit(options.controlEdit||new ButtonCtrl(id+":cmdEdit",{"glyph":"glyphicon-pencil","onClick":function(){self.m_grid.onEdit();},"attrs":{"title":this.BTN_EDIT_TITLE}}));}
if(options.cmdCopy||options.controlCopy){this.setControlCopy(options.controlCopy||new ButtonCtrl(id+":cmdCopy",{"glyph":"glyphicon-copy","onClick":function(event){self.m_grid.onCopy();},"attrs":{"title":this.BTN_COPY_TITLE}}));}
if(options.cmdDelete||options.controlDelete){this.setControlDelete(options.controlDelete||new ButtonCtrl(id+":cmdDelete",{"glyph":"glyphicon-remove","onClick":function(){self.m_grid.onDelete();},"attrs":{"title":this.BTN_DELETE_TITLE}}));}
if(options.cmdColumnManager||options.controlColumnManager){this.setControlDelete(options.controlColumnManager||new ButtonCtrl(id+":cmdColumnManager",{"glyph":"glyphicon-th-list","onClick":function(){self.onColumnManager();},"attrs":{"title":this.BTN_COL_MANAGER_TITLE}}));}
if(options.cmdPrint||options.controlPrint){this.setControlPrint(options.controlPrint||new ButtonCtrl(id+":cmdPrint",{"glyph":"glyphicon-print","onClick":function(e){self.m_grid.onPrint();},"attrs":{"title":this.BTN_PRINT_TITLE}}));}
if(options.cmdRefresh||options.controlRefresh){this.setControlRefresh(options.controlRefresh||new ButtonCtrl(id+":cmdRefresh",{"glyph":"glyphicon-refresh","onClick":function(){self.m_grid.onRefresh();},"attrs":{"title":this.BTN_REFRESH_TITLE}}));}
if(options.cmdPrintObj){this.setControlPrintObj(options.controlPrintObj||new ButtonPrintList(id+":cmdPrintObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds,"app":options.app}));}
if(options.cmdSearch||options.controlSearch){this.setControlSearch(options.controlSearch||new ButtonCtrl(id+":cmdSearch",{"glyph":"glyphicon-search","onClick":function(){self.onSearch();},"attrs":{"title":this.BTN_SEARCH_TITLE}}));}
if(options.cmdFilter){this.setControlFilter(options.controlFilter||new GridFilter(CommonHelper.uniqid(),{"filters":options.filters,"app":options.app}));this.setControlFilterToggle(options.controlFilterToggle||new ButtonCtrl(id+":cmdToggle",{"attrs":{"title":this.m_controlFilter.DEF_TOGGLE_CTRL_TITLE},"onClick":function(){var filter=self.getControlFilter();$(filter.getNode()).collapse("toggle");if(!DOMHelper.hasClass(filter.getNode(),"in")){var filters=filter.getFilter().getFilters();for(var id in filters){filters[id].binding.getControl().focus();break;}}},"caption":this.m_controlFilter.DEF_TOGGLE_CTRL_CAP,"glyph":"glyphicon-triangle-bottom","app":options.app}));}
this.m_popUpMenu=options.popUpMenu;this.addControls();}
extend(GridCommands,ControlContainer);GridCommands.prototype.DEF_TAG_NAME="div";GridCommands.prototype.DEF_CLASS_NAME="btn-group";GridCommands.prototype.m_grid;GridCommands.prototype.m_controlInsert;GridCommands.prototype.m_controlEdit;GridCommands.prototype.m_controlCopy;GridCommands.prototype.m_controlDelete;GridCommands.prototype.m_controlPrint;GridCommands.prototype.m_controlRefresh;GridCommands.prototype.m_controlFilterToggle;GridCommands.prototype.m_controlFilter;GridCommands.prototype.m_controlColumnManager;GridCommands.prototype.m_controlPrintObj;GridCommands.prototype.m_controlSearch;GridCommands.prototype.popUpMenu;GridCommands.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlColumnManager)this.addElement(this.m_controlColumnManager);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlSearch)this.addElement(this.m_controlSearch);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCommands.prototype.setGrid=function(v){this.m_grid=v;if(this.m_controlFilter){var self=this;this.m_controlFilter.setOnRefresh(function(){self.m_grid.onRefresh();});}
if(this.m_controlPrintObj){this.m_controlPrintObj.setGrid(this.m_grid);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCommands.prototype.getGrid=function(){return this.m_grid;}
GridCommands.prototype.setEnabled=function(en){if(this.m_controlInsert)this.m_controlInsert.setEnabled(en);if(this.m_controlEdit)this.m_controlEdit.setEnabled(en);if(this.m_controlCopy)this.m_controlCopy.setEnabled(en);if(this.m_controlDelete)this.m_controlDelete.setEnabled(en);if(this.m_controlPrint)this.m_controlPrint.setEnabled(en);if(this.m_controlColumnManager)this.m_controlColumnManager.setEnabled(en);if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);if(this.m_controlSearch)this.m_controlSearch.setEnabled(en);if(this.m_controlFilterToggle)this.m_controlFilterToggle.setEnabled(en);if(this.m_controlFilter)this.m_controlFilter.setEnabled(en);GridCommands.superclass.setEnabled.call(this,en);}
GridCommands.prototype.printObjToPopUp=function(){if(this.m_controlPrintObj&&this.m_popUpMenu){this.m_popUpMenu.addSeparator();var id=this.getId();this.m_printObjList=this.m_controlPrintObj.getObjList();var self=this;for(var i=0;i<this.m_printObjList.length;i++){this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.m_printObjList[i].getCaption(),"attrs":{"objInd":i},"onClick":function(){self.m_printObjList[this.getAttr("objInd")].onClick();}}));}}}
GridCommands.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_controlInsert||this.m_controlEdit||this.m_controlCopy||this.m_controlDelete||this.m_controlPrint||this.m_controlColumnManager||this.m_controlRefresh||this.m_controlSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":"Выбрать","onClick":function(){self.m_grid.onSelect();}}));}}
GridCommands.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlSearch)this.m_popUpMenu.addButton(this.m_controlSearch);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);this.printObjToPopUp();}
GridCommands.prototype.getControlInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.getCmdInsert=function(){return this.m_controlInsert;}
GridCommands.prototype.setControlInsert=function(v){this.m_controlInsert=v;}
GridCommands.prototype.getControlEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.getCmdEdit=function(){return this.m_controlEdit;}
GridCommands.prototype.setControlEdit=function(v){this.m_controlEdit=v;}
GridCommands.prototype.getControlCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.getCmdCopy=function(){return this.m_controlCopy;}
GridCommands.prototype.setControlCopy=function(v){this.m_controlCopy=v;}
GridCommands.prototype.getControlDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.getCmdDelete=function(){return this.m_controlDelete;}
GridCommands.prototype.setControlDelete=function(v){this.m_controlDelete=v;}
GridCommands.prototype.getControlPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.getCmdPrint=function(){return this.m_controlPrint;}
GridCommands.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
GridCommands.prototype.getControlRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.getCmdRefresh=function(){return this.m_controlRefresh;}
GridCommands.prototype.setControlRefresh=function(v){this.m_controlRefresh=v;}
GridCommands.prototype.getControlFilter=function(){return this.m_controlFilter;}
GridCommands.prototype.setControlFilter=function(v){this.m_controlFilter=v;}
GridCommands.prototype.getControlFilterToggle=function(){return this.m_controlFilterToggle;}
GridCommands.prototype.setControlFilterToggle=function(v){this.m_controlFilterToggle=v;}
GridCommands.prototype.getControlColumnManager=function(){return this.m_controlColumnManager;}
GridCommands.prototype.setControlColumnManager=function(v){this.m_controlColumnManager=v;}
GridCommands.prototype.getControlPrintObj=function(){return this.m_controlPrintObj;}
GridCommands.prototype.setControlPrintObj=function(v){this.m_controlPrintObj=v;}
GridCommands.prototype.getControlSearch=function(){return this.m_controlSearch;}
GridCommands.prototype.setControlSearch=function(v){this.m_controlSearch=v;}
GridCommands.prototype.onColumnManager=function(){var btnCont=this;var self=this;this.m_colManform=new WindowFormModalBS(uuid(),{"content":new ViewGridColumnManager(uuid(),{"grid":this.m_grid,"onClose":function(){btnCont.m_colManform.close();self.m_grid.onRefresh.call(self.m_grid);},"app":this.getApp()})});this.m_colManform.open();} 
function GridCmd(id,options){options=options||{};this.m_id=id;this.m_grid=options.grid;this.setShowCmdControl((options.showCmdControl!=undefined)?options.showCmdControl:true);this.setShowCmdControlInPopup((options.showCmdControlInPopup!=undefined)?options.showCmdControlInPopup:true);var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_onCommand=options.onCommand||this.onCommand;this.m_controls=options.controls||[new btn_class(id,{"glyph":options.glyph,"glyphPopUp":options.glyphPopUp,"caption":options.caption,"onClick":function(e){self.m_onCommand.call(self,e);},"attrs":{"title":options.title||this.TITLE}})];}
GridCmd.prototype.m_id;GridCmd.prototype.m_controls;GridCmd.prototype.m_grid;GridCmd.prototype.m_showCmdControl;GridCmd.prototype.m_showCmdControlInPopup;GridCmd.prototype.getShowCmdControl=function(){return this.m_showCmdControl;}
GridCmd.prototype.setShowCmdControl=function(v){this.m_showCmdControl=v;}
GridCmd.prototype.getShowCmdControlInPopup=function(){return this.m_showCmdControlInPopup;}
GridCmd.prototype.setShowCmdControlInPopup=function(v){this.m_showCmdControlInPopup=v;}
GridCmd.prototype.setGrid=function(v){this.m_grid=v;}
GridCmd.prototype.getGrid=function(){return this.m_grid;}
GridCmd.prototype.setId=function(v){this.m_id=v;}
GridCmd.prototype.getId=function(){return this.m_id;}
GridCmd.prototype.addControl=function(control){this.m_controls.push(control);}
GridCmd.prototype.getControl=function(ind){ind=(ind!=undefined)?ind:0;return(ind>=0&&ind<this.m_controls.length)?this.m_controls[ind]:undefined;}
GridCmd.prototype.controlsToContainer=function(container){this.m_container=container;for(var i=0;i<this.m_controls.length;i++){container.addElement(this.m_controls[i]);}}
GridCmd.prototype.controlsToPopUp=function(popUp){for(var i=0;i<this.m_controls.length;i++){popUp.addButton(this.m_controls[i]);}}
GridCmd.prototype.onCommand=function(e){}
GridCmd.prototype.onDelDOM=function(){} 
function GridCmdContainer(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:true;options.cmdEdit=(options.cmdEdit!=undefined)?options.cmdEdit:options.cmdInsert;options.cmdCopy=(options.cmdCopy!=undefined)?options.cmdCopy:options.cmdInsert;options.cmdDelete=(options.cmdDelete!=undefined)?options.cmdDelete:options.cmdInsert;options.cmdRefresh=(options.cmdRefresh!=undefined)?options.cmdRefresh:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdPrintObj=(options.printObjList!=undefined)?true:((options.cmdPrintObj!=undefined)?options.cmdPrintObj:false);options.cmdSearch=(options.cmdSearch!=undefined)?options.cmdSearch:true;options.cmdColManager=(options.cmdColManager!=undefined)?options.cmdColManager:false;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:(options.filters!=undefined);options.cmdFilterSave=(options.cmdFilterSave!=undefined)?options.cmdFilterSave:(options.variantStorage!=undefined);options.cmdFilterOpen=(options.cmdFilterOpen!=undefined)?options.cmdFilterOpen:(options.variantStorage!=undefined);options.cmdAllCommands=(options.cmdAllCommands!=undefined)?options.cmdAllCommands:true;options.templateOptions=options.templateOptions||{};options.templateOptions.cmdInsert=options.cmdInsert,options.templateOptions.cmdEdit=options.cmdEdit,options.templateOptions.cmdCopy=options.cmdCopy,options.templateOptions.cmdDelete=options.cmdDelete,options.templateOptions.cmdRefresh=options.cmdRefresh,options.templateOptions.cmdPrint=options.cmdPrint,options.templateOptions.cmdPrintObj=options.cmdPrintObj,options.templateOptions.cmdSearch=options.cmdSearch,options.templateOptions.cmdColManager=options.cmdColManager,options.templateOptions.cmdFilter=options.cmdFilter,options.templateOptions.cmdFilterSave=options.cmdFilterSave,options.templateOptions.cmdFilterOpen=options.cmdFilterOpen,options.templateOptions.cmdAllCommands=options.cmdAllCommands
options.templateOptions.cmdFilterInfo=options.templateOptions.cmdSearch||options.templateOptions.cmdFilter;GridCmdContainer.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.variantStorage=options.variantStorage||{};if(options.templateOptions.cmdFilterInfo){this.m_filterInfo=new GridFilterInfo(id+":inf");}
if(options.cmdInsert){this.setCmdInsert((typeof(options.cmdInsert)=="object")?options.cmdInsert:new GridCmdInsert(id+":insert"));}
if(options.cmdEdit){this.setCmdEdit((typeof(options.cmdEdit)=="object")?options.cmdEdit:new GridCmdEdit(id+":edit"));}
if(options.cmdCopy){this.setCmdCopy((typeof(options.cmdCopy)=="object")?options.cmdCopy:new GridCmdCopy(id+":copy"));}
if(options.cmdDelete){this.setCmdDelete((typeof(options.cmdDelete)=="object")?options.cmdDelete:new GridCmdDelete(id+":delete"));}
if(options.cmdColManager){var filters_copy=CommonHelper.clone(options.filters);this.setCmdColManager((typeof(options.cmdColManager)=="object")?options.cmdColManager:new GridCmdColManager(id+":colManager",{"filters":options.filters,"variantStorageName":options.variantStorage["name"],"variantStorageModel":options.variantStorage.model}));}
if(options.cmdPrint){this.setCmdPrint((typeof(options.cmdPrint)=="object")?options.cmdPrint:new GridCmdPrint(id+":print"));}
if(options.cmdRefresh){this.setCmdRefresh((typeof(options.cmdRefresh)=="object")?options.cmdRefresh:new GridCmdRefresh(id+":print"));}
if(options.cmdPrintObj){this.setCmdPrintObj((typeof(options.cmdPrintObj)=="object")?options.printObj:new GridCmdPrintObj(id+":printObj",{"printList":options.printObjList,"keyIds":options.printObjListKeyIds}));}
if(options.cmdSearch){this.setCmdSearch((typeof(options.cmdSearch)=="object")?options.cmdSearch:new GridCmdSearch(id+":search"));this.getCmdSearch().setFilterInfo(this.m_filterInfo);}
if(options.cmdFilter){if(options.cmdFilterSave){this.setCmdFilterSave((typeof(options.cmdFilterSave)=="object")?options.cmdFilterSave:new GridCmdFilterSave(id+":filterSave",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
if(options.cmdFilterOpen){this.setCmdFilterOpen((typeof(options.cmdFilterOpen)=="object")?options.cmdFilterOpen:new GridCmdFilterOpen(id+":filterOpen",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data"}));}
this.setCmdFilter((typeof(options.cmdFilter)=="object")?options.cmdFilter:new GridCmdFilter(id+":filter",{"filters":options.filters,"controlSave":this.getCmdFilterSave(),"controlOpen":this.getCmdFilterOpen(),"variantStorage":options.variantStorage}));this.getCmdFilter().setFilterInfo(this.m_filterInfo);}
if(options.cmdAllCommands){this.setCmdAllCommands((typeof(options.cmdAllCommands)=="object")?options.cmdAllCommands:new GridCmdAllCommands(id+":allCommands"));}
this.m_popUpMenu=options.popUpMenu;this.m_commands=[];if(options.addCustomCommands){options.addCustomCommands.call(this,this.m_commands);}
this.addControls();}
extend(GridCmdContainer,ControlContainer);GridCmdContainer.prototype.DEF_TAG_NAME="DIV";GridCmdContainer.prototype.DEF_CLASS_NAME="cmdButtons";GridCmdContainer.prototype.m_grid;GridCmdContainer.prototype.m_cmdInsert;GridCmdContainer.prototype.m_cmdEdit;GridCmdContainer.prototype.m_cmdCopy;GridCmdContainer.prototype.m_cmdDelete;GridCmdContainer.prototype.m_cmdPrint;GridCmdContainer.prototype.m_cmdRefresh;GridCmdContainer.prototype.m_cmdColManager;GridCmdContainer.prototype.m_cmdPrintObj;GridCmdContainer.prototype.m_cmdSearch;GridCmdContainer.prototype.m_cmdFilter;GridCmdContainer.prototype.m_cmdFilterSave;GridCmdContainer.prototype.m_cmdFilterOpen;GridCmdContainer.prototype.m_cmdAllCommands;GridCmdContainer.prototype.m_popUpMenu;GridCmdContainer.prototype.addCommands=function(){if(this.m_cmdInsert){this.m_commands.push(this.m_cmdInsert);}
if(this.m_cmdEdit){this.m_commands.push(this.m_cmdEdit);}
if(this.m_cmdCopy){this.m_commands.push(this.m_cmdCopy);}
if(this.m_cmdDelete){this.m_commands.push(this.m_cmdDelete);}
if(this.m_cmdPrint){this.m_commands.push(this.m_cmdPrint);}
if(this.m_cmdColManager){this.m_commands.push(this.m_cmdColManager);}
if(this.m_cmdRefresh){this.m_commands.push(this.m_cmdRefresh);}
if(this.m_cmdPrintObj){this.m_commands.push(this.m_cmdPrintObj);}
if(this.m_cmdSearch){this.m_commands.push(this.m_cmdSearch);}
if(this.m_cmdFilter){this.m_commands.push(this.m_cmdFilter);}
if(this.m_cmdFilterSave){this.m_commands.push(this.m_cmdFilterSave);}
if(this.m_cmdFilterOpen){this.m_commands.push(this.m_cmdFilterOpen);}
if(this.m_cmdAllCommands){this.m_commands.push(this.m_cmdAllCommands);}}
GridCmdContainer.prototype.addControls=function(){this.addCommands();for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}}
GridCmdContainer.prototype.setGrid=function(v){this.m_grid=v;for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].setGrid(v);}
if(this.m_popUpMenu){this.selectToPopUp();}}
GridCmdContainer.prototype.getGrid=function(){return this.m_grid;}
GridCmdContainer.prototype.selectToPopUp=function(){if(this.m_grid&&this.m_grid.getOnSelect()){if(this.m_cmdInsert||this.m_cmdEdit||this.m_cmdCopy||this.m_cmdDelete||this.m_cmdPrint||this.m_cmdColManager||this.m_cmdRefresh||this.m_cmdSearch){this.m_popUpMenu.addSeparator();}
var self=this;this.m_popUpMenu.addButton(new ButtonCtrl(null,{"caption":this.GRID_SELECT_POPUP_CAPTION,"onClick":function(){self.m_grid.onSelect();}}));}}
GridCmdContainer.prototype.toPopUp=function(){for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControlInPopup()){this.m_commands[i].controlsToPopUp(this.m_popUpMenu);}}}
GridCmdContainer.prototype.getCmdInsert=function(){return this.m_cmdInsert;}
GridCmdContainer.prototype.setCmdInsert=function(v){this.m_cmdInsert=v;}
GridCmdContainer.prototype.getCmdEdit=function(){return this.m_cmdEdit;}
GridCmdContainer.prototype.setCmdEdit=function(v){this.m_cmdEdit=v;}
GridCmdContainer.prototype.getCmdCopy=function(){return this.m_cmdCopy;}
GridCmdContainer.prototype.setCmdCopy=function(v){this.m_cmdCopy=v;}
GridCmdContainer.prototype.getCmdDelete=function(){return this.m_cmdDelete;}
GridCmdContainer.prototype.setCmdDelete=function(v){this.m_cmdDelete=v;}
GridCmdContainer.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
GridCmdContainer.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
GridCmdContainer.prototype.getCmdRefresh=function(){return this.m_cmdRefresh;}
GridCmdContainer.prototype.setCmdRefresh=function(v){this.m_cmdRefresh=v;}
GridCmdContainer.prototype.getCmdColManager=function(){return this.m_cmdColManager;}
GridCmdContainer.prototype.setCmdColManager=function(v){this.m_cmdColManager=v;}
GridCmdContainer.prototype.getCmdPrintObj=function(){return this.m_cmdPrintObj;}
GridCmdContainer.prototype.setCmdPrintObj=function(v){this.m_cmdPrintObj=v;}
GridCmdContainer.prototype.getCmdSearch=function(){return this.m_cmdSearch;}
GridCmdContainer.prototype.setCmdSearch=function(v){this.m_cmdSearch=v;}
GridCmdContainer.prototype.getCmdFilter=function(){return this.m_cmdFilter;}
GridCmdContainer.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
GridCmdContainer.prototype.getCmdFilterSave=function(){return this.m_cmdFilterSave;}
GridCmdContainer.prototype.setCmdFilterSave=function(v){this.m_cmdFilterSave=v;}
GridCmdContainer.prototype.getCmdFilterOpen=function(){return this.m_cmdFilterOpen;}
GridCmdContainer.prototype.setCmdFilterOpen=function(v){this.m_cmdFilterOpen=v;}
GridCmdContainer.prototype.getCmdAllCommands=function(){return this.m_cmdAllCommands;}
GridCmdContainer.prototype.setCmdAllCommands=function(v){this.m_cmdAllCommands=v;}
GridCmdContainer.prototype.getPopUpMenu=function(){return this.m_popUpMenu;}
GridCmdContainer.prototype.setPopUpMenu=function(v){this.m_popUpMenu=v;if(this.m_popUpMenu){this.toPopUp(this.m_popUpMenu);}}
GridCmdContainer.prototype.delDOM=function(){for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].onDelDOM();}
GridCmdContainer.superclass.delDOM.call(this);} 
GridCmdContainer.prototype.GRID_SELECT_POPUP_CAPTION="Выбрать"; 
function GridCmdContainerAjx(id,options){options=options||{};options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;if(options.cmdExport){this.setCmdExport((typeof(options.cmdExport)=="object")?options.cmdExport:new GridCmdExport(id+":export"));}
options.templateOptions=options.templateOptions||{};options.templateOptions.cmdExport=options.cmdExport,GridCmdContainerAjx.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerAjx,GridCmdContainer);GridCmdContainerAjx.prototype.m_cmdExport;GridCmdContainerAjx.prototype.addCommands=function(){GridCmdContainerAjx.superclass.addCommands.call(this);if(this.m_cmdExport){this.m_commands.push(this.m_cmdExport);}}
GridCmdContainerAjx.prototype.getCmdExport=function(){return this.m_cmdExport;}
GridCmdContainerAjx.prototype.setCmdExport=function(v){this.m_cmdExport=v;} 
function GridCmdContainerObj(id,options){options=options||{};options.cmdLineMove=(options.cmdLineMove!=undefined)?options.cmdLineMove:true;if(options.cmdLineMove||options.cmdLineUp||options.cmdLineDown){this.setCmdLineUp((typeof options.cmdLineUp=="object")?options.cmdLineUp:new GridCmdRowUp(id+":lineup"));this.setCmdLineDown((typeof options.cmdLineDown=="object")?options.cmdLineDown:new GridCmdRowDown(id+":linedown"));}
GridCmdContainerObj.superclass.constructor.call(this,id,options);}
extend(GridCmdContainerObj,GridCmdContainerAjx);GridCmdContainerObj.prototype.m_cmdLineUp;GridCmdContainerObj.prototype.m_cmdLineDown;GridCmdContainerObj.prototype.addCommands=function(){GridCmdContainerObj.superclass.addCommands.call(this);if(this.m_cmdLineUp){this.m_commands.push(this.m_cmdLineUp);}
if(this.m_cmdLineDown){this.m_commands.push(this.m_cmdLineDown);}}
GridCmdContainerObj.prototype.getCmdLineUp=function(){return this.m_cmdLineUp;}
GridCmdContainerObj.prototype.setCmdLineUp=function(v){this.m_cmdLineUp=v;}
GridCmdContainerObj.prototype.getCmdLineDown=function(){return this.m_cmdLineDown;}
GridCmdContainerObj.prototype.setCmdLineDown=function(v){this.m_cmdLineDown=v;} 
function GridCmdInsert(id,options){options=options||{};options.glyphPopUp="glyphicon-plus";options.caption=this.CAPTION;options.showCmdControl=true;GridCmdInsert.superclass.constructor.call(this,id,options);}
extend(GridCmdInsert,GridCmd);GridCmdInsert.prototype.onCommand=function(){this.m_grid.onInsert();} 
GridCmdInsert.prototype.TITLE="Создать новую запись";GridCmdInsert.prototype.CAPTION="Добавить"; 
function GridCmdEdit(id,options){options=options||{};options.glyph="glyphicon-pencil";options.showCmdControl=false;GridCmdEdit.superclass.constructor.call(this,id,options);}
extend(GridCmdEdit,GridCmd);GridCmdEdit.prototype.onCommand=function(){this.m_grid.onEdit();} 
GridCmdEdit.prototype.TITLE="Редактировать текущую запись"; 
function GridCmdCopy(id,options){options=options||{};options.glyph="glyphicon-copy";options.showCmdControl=false;GridCmdCopy.superclass.constructor.call(this,id,options);}
extend(GridCmdCopy,GridCmd);GridCmdCopy.prototype.onCommand=function(){this.m_grid.onCopy();} 
GridCmdCopy.prototype.TITLE="Скопировать текущую запись"; 
function GridCmdDelete(id,options){options=options||{};options.glyph="glyphicon-remove";options.showCmdControl=false;GridCmdDelete.superclass.constructor.call(this,id,options);}
extend(GridCmdDelete,GridCmd);GridCmdDelete.prototype.onCommand=function(){this.m_grid.onDelete();} 
GridCmdDelete.prototype.TITLE="Удалить текущую запись"; 
function GridCmdColManager(id,options){options=options||{};options.glyph="glyphicon-th-list";options.showCmdControl=false;this.m_variantStorageName=options.variantStorageName;this.m_variantStorageModel=options.variantStorageModel;if(this.m_variantStorageModel)this.m_variantStorageModel.getRow(0);GridCmdColManager.superclass.constructor.call(this,id,options);}
extend(GridCmdColManager,GridCmd);GridCmdColManager.prototype.m_colManForm;GridCmdColManager.prototype.m_variantStorageName;GridCmdColManager.prototype.m_variantStorageModel;GridCmdColManager.prototype.VISIB_ID="col_visib_data";GridCmdColManager.prototype.ORDER_ID="col_order_data";GridCmdColManager.prototype.FILTER_ID="filter_data";GridCmdColManager.prototype.onCommand=function(){var self=this;this.m_view=new ViewGridColManager("ViewGridColManager",{"grid":this.m_grid,"variantStorageName":this.m_variantStorageName,"filter":this.m_filter,"onApplyFilters":function(){self.onApplyFilters();},"onResetFilters":function(){self.onResetFilters();},"onVariantSave":function(){self.onVariantSave();},"onVariantOpen":function(){self.onVariantOpen();},"colOrder":this.m_colOrder,"colVisibility":this.m_colVisibility});this.m_colManForm=new WindowFormModalBS(CommonHelper.uniqid(),{"content":this.m_view,"cmdCancel":true,"controlCancelCaption":this.m_view.CMD_CANCEL_CAP,"controlCancelTitle":this.m_view.CMD_CANCEL_TITLE,"cmdOk":false,"onClickCancel":function(){self.m_colManForm.close();self.refreshGrid();},"contentHead":this.m_view.HEAD_TITLE});this.m_colManForm.open();}
GridCmdColManager.prototype.m_filter;GridCmdColManager.prototype.BTN_FILTER_CLASS_SET="btn-danger";GridCmdColManager.prototype.BTN_FILTER_CLASS_UNSET="btn-primary";GridCmdColManager.prototype.getCol=function(id){return(this.m_variantStorageModel?this.m_variantStorageModel.getFieldValue(id):null);}
GridCmdColManager.prototype.getColOrder=function(){return this.getCol(this.ORDER_ID);}
GridCmdColManager.prototype.getColVisibility=function(){return this.getCol(this.VISIB_ID);}
GridCmdColManager.prototype.init=function(){var head=this.m_grid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.getInitColumns();var col_visib_data=this.getColVisibility()||[];var vis_cols={};for(var ind=0;ind<col_visib_data.length;ind++){var col=col_visib_data[ind].colId;col_visib_data[ind].colRef=columns[col];vis_cols[col]=col;}
var col_order_data=this.getColOrder()||[];var ord_cols={};for(var ind=0;ind<col_order_data.length;ind++){var col=col_order_data[ind].colId;col_order_data[ind][ind].colRef=columns[col];ord_cols[col]=col;}
for(var col in columns){if(!vis_cols[col]){col_visib_data.push({"colId":col,"checked":true,"colRef":columns[col]});}
if(!ord_cols[col]&&columns[col].getSortable()){var sort_cols=columns[col].getSortFieldId();var sort_dir=columns[col].getSort();if(!sort_cols){sort_dir="";sort_cols="";var cols=columns[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols+=(sort_cols=="")?"":",";sort_cols+=cols[i].getField().getId();sort_dir+=(sort_dir=="")?"":",";sort_dir+="asc";}}
col_order_data.push({"colId":col,"fields":sort_cols,"directs":sort_dir,"checked":(sort_dir.length>0),"colRef":columns[col]});}}}}
GridCmdColManager.prototype.getFilter=function(){return this.m_filter;}
GridCmdColManager.prototype.setFilter=function(v){this.m_filter=v;}
GridCmdColManager.prototype.afterFilterSet=function(setCnt){var cl_old,cl_new;if(setCnt){cl_new=this.BTN_FILTER_CLASS_SET;cl_old=this.BTN_FILTER_CLASS_UNSET;}
else{cl_new=this.BTN_FILTER_CLASS_UNSET;cl_old=this.BTN_FILTER_CLASS_SET;}}
GridCmdColManager.prototype.refreshGrid=function(){var pag=this.m_grid.getPagination();if(pag){pag.reset();}
var self=this;this.m_grid.onRefresh();}
GridCmdColManager.prototype.onApplyFilters=function(){var cnt=this.m_filter.applyFilters(this.m_grid);this.afterFilterSet(cnt);this.refreshGrid();}
GridCmdColManager.prototype.onResetFilters=function(){this.m_filter.resetFilters(this.m_grid);this.afterFilterSet(0);this.refreshGrid();}
GridCmdColManager.prototype.onVariantOpen=function(){var self=this;(new VariantStorage({"variantStorageName":this.m_variantStorageName,"afterFormClose":function(model){delete self.m_variantStorageModel;self.m_variantStorageModel=model;self.m_view.refresh();}})).openStorage();}
GridCmdColManager.prototype.onVariantSave=function(){var vals={};vals[this.VISIB_ID]=this.getColVisibility();vals[this.ORDER_ID]=this.getColOrder();(new VariantStorage({"variantStorageName":this.m_variantStorageName})).saveStorage("all_data",vals);} 
GridCmdColManager.prototype.TITLE="Открыть форму настройки колонок";GridCmdColManager.prototype.NOTE_SAVED="Сохранение выполнено"; 
function GridCmdPrint(id,options){options=options||{};options.glyph="glyphicon-print";options.showCmdControl=false;GridCmdPrint.superclass.constructor.call(this,id,options);}
extend(GridCmdPrint,GridCmd);GridCmdPrint.prototype.onCommand=function(){this.m_grid.onPrint();} 
GridCmdPrint.prototype.TITLE="Распечатать список"; 
function GridCmdRefresh(id,options){options=options||{};options.glyph="glyphicon-refresh";options.showCmdControl=false;GridCmdRefresh.superclass.constructor.call(this,id,options);}
extend(GridCmdRefresh,GridCmd);GridCmdRefresh.prototype.onCommand=function(){this.m_grid.onRefresh();} 
GridCmdRefresh.prototype.TITLE="Обновить содержимое списка"; 
function GridCmdPrintObj(id,options){options=options||{};options.showCmdControlInPopup=false;var self=this;options.controls=[new ButtonPrintList(id,{"printList":options.printList,"keyIds":options.keyIds,"app":options.app})];GridCmdPrintObj.superclass.constructor.call(this,id,options);}
extend(GridCmdPrintObj,GridCmd);GridCmdPrintObj.prototype.controlsToPopUp=function(popUp){if(this.m_controls.length){var self=this;popUp.addButton(new ButtonCtrl(null,{"caption":"Печатные формы","attrs":{"objInd":0},"onClick":function(){}}));}}
GridCmdPrintObj.prototype.setGrid=function(v){GridCmdPrintObj.superclass.setGrid.call(this,v);if(this.m_controls.length){this.m_controls[0].setGrid(v);}}
GridCmdPrintObj.prototype.setPrintList=function(v){this.m_controls[0].setPrintList(v);} 
function GridCmdSearch(id,options){options=options||{};options.showCmdControl=true;var btn_class=options.buttonClass||ButtonCmd;var self=this;this.m_setCtrl=new btn_class(id+":set",{"glyph":"glyphicon-zoom-in","onClick":function(){self.onCommand();},"attrs":{"title":this.TITLE}});this.m_unsetCtrl=new btn_class(id+":unset",{"glyph":"glyphicon-zoom-out","onClick":function(){self.onUnset();},"enabled":false,"attrs":{"title":this.TITLE_UNSET}});options.controls=[this.m_setCtrl,this.m_unsetCtrl];GridCmdSearch.superclass.constructor.call(this,id,options);}
extend(GridCmdSearch,GridCmd);GridCmdSearch.prototype.m_filterInfo;GridCmdSearch.prototype.showDialog=function(str){var selected_node=this.m_grid.getSelectedNode();if(!selected_node)return;var cur_field_id=selected_node.getAttribute("fieldId");var columns=[];var grid_columns=this.m_grid.getHead().getColumns();for(var i in grid_columns){var f=grid_columns[i].getField();if(f&&grid_columns[i].getSearchable()){var fid=f.getId();var col_sopts=grid_columns[i].getSearchOptions()||{};var sStruc={"id":fid,"descr":grid_columns[i].getHeadCell().getValue(),"current":(cur_field_id==fid),"ctrlClass":grid_columns[i].getCtrlClass(),"ctrlOptions":grid_columns[i].getCtrlOptions()||{},"searchType":col_sopts.searchType||"on_part","typeChange":col_sopts.typeChange,"field":col_sopts.field||f};if(sStruc.typeChange==undefined)sStruc.typeChange=true;var data_t=sStruc.field.getDataType();if(data_t==f.DT_DATE){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditDate;if(!sStruc.searchType)sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_DATETIME||data_t==f.DT_DATETIMETZ){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditDateTime;if(!sStruc.searchType)sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_INT||data_t==f.DT_INT_UNSIGNED){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditInt;}
else if(data_t==f.DT_FLOAT_UNSIGNED||data_t==f.DT_FLOAT){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditFloat;}
else if(data_t==f.DT_BOOL){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditCheckBox;sStruc.searchType="on_match";sStruc.typeChange=false;}
else if(data_t==f.DT_EMAIL){if(!sStruc.ctrlClass)sStruc.ctrlClass=EditEmail;}
else if(!sStruc.ctrlClass){sStruc.ctrlClass=EditString;}
if(sStruc.searchType==undefined)sStruc.searchType="on_part";columns.push(sStruc);}}
var self=this;WindowSearch.show({"text":str,"columns":columns,"callBack":function(res,params){self.m_grid.focus();if(res==WindowSearch.RES_OK){self.doSearch(params);}}});}
GridCmdSearch.prototype.onCommand=function(){this.showDialog("");}
GridCmdSearch.prototype.onUnset=function(){if(this.m_filter){this.m_grid.unsetFilter(this.m_filter);var pag=this.m_grid.getPagination();if(pag)pag.reset();var self=this;this.m_grid.onRefresh(function(){self.m_unsetCtrl.setEnabled(false);self.m_grid.focus();});}}
GridCmdSearch.prototype.doSearch=function(params){if(params.search_str){var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();var s_pref=(params.how=="on_part")?"%":"";var s_posf=(params.how=="on_part"||params.how=="on_beg")?"%":"";var pm=this.m_grid.getReadPublicMethod();var contr=pm.getController();if(this.m_filter){this.m_grid.unsetFilter(this.m_filter);}
this.m_filter={"field":params.where,"sign":(params.how!="on_match")?contr.PARAM_SGN_LIKE:contr.PARAM_SGN_EQUAL,"val":s_pref+params.search_str+s_posf,"icase":(params.how!="on_match")?"1":"0"};this.m_grid.setFilter(this.m_filter);var pag=this.m_grid.getPagination();if(pag)pag.reset();var self=this;this.m_grid.onRefresh(function(){self.m_unsetCtrl.setEnabled(true);});}}
GridCmdSearch.prototype.setGrid=function(v){GridCmdSearch.superclass.setGrid.call(this,v);var self=this;v.setOnSearch(function(e){var ch=(e&&e.char)?e.char:null;if(ch){self.m_grid.setFocused(false);self.showDialog(ch);return true;}});v.setOnSearchDialog(function(){self.onCommand();});v.setOnSearchReset(function(){self.onUnset();});}
GridCmdSearch.prototype.setFilterInfo=function(v){this.m_filterInfo=v;} 
GridCmdSearch.prototype.TITLE="Открыть форму поиска (ctrl+F)";GridCmdSearch.prototype.TITLE_UNSET="Отменить поиск (ctrl+G)"; 
function GridCmdExport(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-file";GridCmdExport.superclass.constructor.call(this,id,options);}
extend(GridCmdExport,GridCmd);GridCmdExport.prototype.onCommand=function(){this.m_grid.getReadPublicMethod().download("ViewExcel");} 
GridCmdExport.prototype.TITLE="Экспорт списка в файл Excel"; 
function GridCmdAllCommands(id,options){options=options||{};options.glyph="glyphicon-collapse-down";options.caption=this.CAPTION;options.showCmdControl=true;options.showCmdControlInPopup=false;GridCmdAllCommands.superclass.constructor.call(this,id,options);}
extend(GridCmdAllCommands,GridCmd);GridCmdAllCommands.prototype.onCommand=function(e){var m=this.m_grid.getPopUpMenu();if(m){if(m.getVisible()){m.hide();}
else{m.show(e,this.m_controls[0].getNode());}}} 
GridCmdAllCommands.prototype.TITLE="Показать все команды";GridCmdAllCommands.prototype.CAPTION="Все команды  "; 
function GridCmdDOCUnprocess(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-unchecked";GridCmdDOCUnprocess.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCUnprocess,GridCmd);GridCmdDOCUnprocess.prototype.onCommand=function(){var self=this;WindowQuestion.show({"cancel":false,"text":this.CONFIRM,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.doDelete();}}});}
GridCmdDOCUnprocess.prototype.doDelete=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.NOTE_DELETED);}})}} 
GridCmdDOCUnprocess.prototype.TITLE="Отменить проведение документа";GridCmdDOCUnprocess.prototype.CONFIRM="Отменить проведение документа?";GridCmdDOCUnprocess.prototype.NOTE_DELETED="Отменено проведение документа."; 
function GridCmdDOCShowActs(id,options){options=options||{};options.showCmdControl=false;options.glyph="glyphicon-log-in";GridCmdDOCShowActs.superclass.constructor.call(this,id,options);}
extend(GridCmdDOCShowActs,GridCmd);GridCmdDOCShowActs.prototype.onCommand=function(){alert("GridCmdDOCShowActs.prototype.onCommand");} 
GridCmdDOCShowActs.prototype.TITLE="Показать движения документа"; 
function GridCmdRowUp(id,options){options=options||{};options.glyph="glyphicon-arrow-up";options.buttonClass=options.buttonClass||ButtonCmd;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdRowUp.superclass.constructor.call(this,id,options);}
extend(GridCmdRowUp,GridCmd);GridCmdRowUp.prototype.onCommand=function(){this.m_grid.onRowUp();} 
GridCmdRowUp.prototype.TITLE="На одну строку вверх"; 
function GridCmdRowDown(id,options){options=options||{};options.glyph="glyphicon-arrow-down";options.buttonClass=ButtonCtrl;options.showCmdControl=(options.showCmdControl!=undefined)?options.showCmdControl:false;GridCmdRowDown.superclass.constructor.call(this,id,options);}
extend(GridCmdRowDown,GridCmd);GridCmdRowDown.prototype.onCommand=function(){this.m_grid.onRowDown();} 
GridCmdRowDown.prototype.TITLE="На одну строку вниз"; 
function GridCmdFilter(id,options){options=options||{};options.glyph="glyphicon-filter";GridCmdFilter.superclass.constructor.call(this,id,options);this.m_filter=new ModelFilter({"filters":options.filters});this.setControlSave(options.controlSave);this.setControlOpen(options.controlOpen);this.m_controls[0].setVisible(true);this.m_variantStorage=options.variantStorage;}
extend(GridCmdFilter,GridCmd);GridCmdFilter.prototype.BTN_CLASS_SET="btn-danger";GridCmdFilter.prototype.BTN_CLASS_UNSET="btn-primary";GridCmdFilter.prototype.m_filter;GridCmdFilter.prototype.m_controlSave;GridCmdFilter.prototype.m_controlOpen;GridCmdFilter.prototype.m_gridRefresh;GridCmdFilter.prototype.m_pop;GridCmdFilter.prototype.m_variantStorage;GridCmdFilter.prototype.setFilterVisibile=function(v){if(this.m_grid)this.m_grid.setRefreshInterval((v)?0:this.m_gridRefresh);if(this.m_pop)this.m_pop.setVisible(v);if(!v&&this.m_grid){this.m_grid.focus();}}
GridCmdFilter.prototype.afterFilterSet=function(setCnt){var btn=this.getControl();var cl_old,cl_new;if(setCnt){cl_new=this.BTN_CLASS_SET;cl_old=btn.getColorClass();}
else{cl_new=btn.getColorClass();cl_old=this.BTN_CLASS_SET;}
DOMHelper.swapClasses(btn.getNode(),cl_new,cl_old);}
GridCmdFilter.prototype.refreshGrid=function(){var pag=this.m_grid.getPagination();if(pag){pag.reset();}
var self=this;this.m_grid.onRefresh(function(){self.setFilterVisibile(false);});}
GridCmdFilter.prototype.onCommand=function(e){if(!this.m_pop){var self=this;this.m_pop=new PopOver(this.m_id+":popover",{"caption":this.TITLE,"className":window.getBsCol(8),"contentElements":[new GridCmdFilterView(this.m_id+":popover:cont",{"filter":this.m_filter,"cmdSet":(this.m_grid!=undefined),"cmdUnset":(this.m_grid!=undefined),"onApplyFilters":(this.m_grid==undefined)?null:function(){var cnt=self.m_filter.applyFilters(self.m_grid);self.afterFilterSet(cnt);self.refreshGrid();},"onResetFilters":(this.m_grid==undefined)?null:function(){self.m_filter.resetFilters(self.m_grid);self.afterFilterSet(0);self.refreshGrid();},"controlSave":this.getControlSave(),"controlOpen":this.getControlOpen()})]});if(this.m_grid){this.m_gridRefresh=this.m_grid.getRefreshInterval();this.m_grid.setRefreshInterval(0);}
this.m_pop.toDOM(e,this.getControl().getNode());}
else{this.setFilterVisibile(!this.m_pop.getVisible());}}
GridCmdFilter.prototype.getFilter=function(){return this.m_filter;}
GridCmdFilter.prototype.setFilter=function(v){this.m_filter=v;}
GridCmdFilter.prototype.applyFilters=function(){if(this.m_pop){this.m_filter.applyFilters(this.m_grid);}}
GridCmdFilter.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilter.prototype.setControlSave=function(v){this.m_controlSave=v;if(v)this.m_controlSave.setCmdFilter(this);}
GridCmdFilter.prototype.getControlOpen=function(v){return this.m_controlOpen;}
GridCmdFilter.prototype.setControlOpen=function(v){this.m_controlOpen=v;if(v)this.m_controlOpen.setCmdFilter(this);}
GridCmdFilter.prototype.unserializeFilters=function(){if(this.m_variantStorage&&this.m_variantStorage.model){var cnt=this.m_filter.setValue(this.m_variantStorage.model.getFieldValue("filter_data"));this.afterFilterSet(cnt);if(cnt&&this.m_grid){this.m_filter.applyFilters(this.m_grid);}}}
GridCmdFilter.prototype.setGrid=function(v){GridCmdFilter.superclass.setGrid.call(this,v);this.unserializeFilters();}
GridCmdFilter.prototype.onDelDOM=function(){if(this.m_pop){this.m_pop.delDOM();delete this.m_pop;}}
GridCmdFilter.prototype.setFilterInfo=function(v){this.m_filterInfo=v;} 
GridCmdFilter.prototype.TITLE="Настройка отбора"; 
function GridCmdFilterView(id,options){options=options||{};options.templateOptions={"bsCol":window.getBsCol()};options.template=window.getApp().getTemplate("GridCmdFilterView");GridCmdFilterView.superclass.constructor.call(this,id,"TEMPLATE",options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet||options.controlSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":set",{"caption":this.SET_CAP,"onClick":function(){self.applyFilters();},"attrs":{"title":this.SET_TITLE}}));}
if(options.cmdUnset||options.controlUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":unset",{"caption":this.UNSET_CAP,"onClick":function(){self.resetFilters();},"attrs":{"title":this.UNSET_TITLE}}));}
if(options.controlSave){this.m_origSave=options.controlSave.getControl(0);this.setControlSave(new ButtonCmd(id+":save",{"glyph":this.m_origSave.getGlyph(),"onClick":function(){options.controlSave.onCommand();},"attrs":{"title":this.m_origSave.getAttr("title")}}));}
if(options.controlOpen){this.m_origOpen=options.controlOpen.getControl(0);this.setControlSave(new ButtonCmd(id+":open",{"glyph":this.m_origOpen.getGlyph(),"onClick":function(){options.controlOpen.onCommand();},"attrs":{"title":this.m_origOpen.getAttr("title")}}));}
this.setFilter(options.filter);this.setOnApplyFilters(options.onApplyFilters);this.setOnResetFilters(options.onResetFilters);}
extend(GridCmdFilterView,ControlContainer);GridCmdFilterView.prototype.m_controlSet;GridCmdFilterView.prototype.m_controlUnset;GridCmdFilterView.prototype.m_controlSave;GridCmdFilterView.prototype.m_controlOpen;GridCmdFilterView.prototype.addControls=function(v){this.clear();if(this.m_filter){var filters=this.m_filter.getFilters();for(var id in filters){var ctrl=filters[id].binding.getControl();ctrl.setVisible(true);this.addElement(ctrl);}}
if(this.m_controlSet)this.addElement(this.m_controlSet);if(this.m_controlUnset)this.addElement(this.m_controlUnset);if(this.m_controlSave)this.addElement(this.m_controlSave);if(this.m_controlOpen)this.addElement(this.m_controlOpen);}
GridCmdFilterView.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridCmdFilterView.prototype.getControlSet=function(){return this.m_controlSet;}
GridCmdFilterView.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridCmdFilterView.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridCmdFilterView.prototype.setFilter=function(v){this.m_filter=v;this.addControls();}
GridCmdFilterView.prototype.getFilter=function(){return this.m_filter;}
GridCmdFilterView.prototype.setOnApplyFilters=function(v){this.m_onApplyFilters=v;}
GridCmdFilterView.prototype.getOnApplyFilters=function(){return this.m_onApplyFilters;}
GridCmdFilterView.prototype.setOnResetFilters=function(v){this.m_onResetFilters=v;}
GridCmdFilterView.prototype.getOnResetFilters=function(){return this.m_onResetFilters;}
GridCmdFilterView.prototype.applyFilters=function(){if(this.m_filter){if(this.m_onApplyFilters){this.m_onApplyFilters();}}}
GridCmdFilterView.prototype.resetFilters=function(){if(this.m_filter){if(this.m_onResetFilters){this.m_onResetFilters();}}}
GridCmdFilterView.prototype.setControlSave=function(v){this.m_controlSave=v;}
GridCmdFilterView.prototype.getControlSave=function(v){return this.m_controlSave;}
GridCmdFilterView.prototype.setControlOpen=function(v){this.m_controlOpen=v;}
GridCmdFilterView.prototype.getControlOpen=function(v){return this.m_controlOpen;} 
GridCmdFilterView.prototype.SET_CAP="Отобрать";GridCmdFilterView.prototype.SET_TITLE="Применить выбранные параметры отбора";GridCmdFilterView.prototype.UNSET_CAP="Отменить";GridCmdFilterView.prototype.UNSET_TITLE="Сбросить настройки отбора"; 
function GridCmdFilterSave(id,options){options=options||{};options.glyph="glyphicon-save";options.showCmdControl=false;options.showCmdControlInPopup=false;this.m_variantStorageName=options.variantStorageName;this.m_dataCol=options.dataCol;GridCmdFilterSave.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterSave,GridCmd);GridCmdFilterSave.prototype.m_form;GridCmdFilterSave.prototype.m_view;GridCmdFilterSave.prototype.m_cmdFilter;GridCmdFilterSave.prototype.m_variantStorageName;GridCmdFilterSave.prototype.m_dataCol;GridCmdFilterSave.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);(new VariantStorage({"afterFormClose":function(){self.m_cmdFilter.setFilterVisibile(true);},"variantStorageName":this.m_variantStorageName})).saveStorage(this.m_dataCol,this.m_cmdFilter.getFilter().getValue());}
GridCmdFilterSave.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;} 
GridCmdFilterSave.prototype.TITLE="Сохранить настройку"; 
function GridCmdFilterOpen(id,options){options=options||{};options.glyph="glyphicon-open";options.showCmdControl=false;options.showCmdControlInPopup=false;this.m_variantStorageName=options.variantStorageName;this.m_dataCol=options.dataCol;GridCmdFilterOpen.superclass.constructor.call(this,id,options);}
extend(GridCmdFilterOpen,GridCmd);GridCmdFilterOpen.prototype.m_cmdFilter;GridCmdFilterOpen.prototype.m_variantStorageName;GridCmdFilterOpen.prototype.m_form;GridCmdFilterOpen.prototype.m_dataCol;GridCmdFilterOpen.prototype.onCommand=function(e){var self=this;this.m_cmdFilter.setFilterVisibile(false);(new VariantStorage({"afterFormClose":function(val){if(val)self.m_cmdFilter.getFilter().setValue(val);self.m_cmdFilter.setFilterVisibile(true);},"variantStorageName":this.m_variantStorageName})).openStorage(this.m_dataCol);}
GridCmdFilterOpen.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;} 
GridCmdFilterOpen.prototype.TITLE="Выбрать настройку"; 
function ViewGridColManager(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;this.m_filter=options.filter;this.m_onApplyFilters=options.onApplyFilters;this.m_onResetFilters=options.onResetFilters;this.m_onVariantSave=options.onVariantSave;this.m_onVariantOpen=options.onVariantOpen;options.templateOptions={"colorClass":window.getApp().getColorClass(),"bsCol":window.getBsCol(),"TAB_COLUMNS":this.TAB_COLUMNS,"TAB_SORT":this.TAB_SORT};options.addElement=function(){this.addElement(new ViewGridColVisibility(id+":view-visibility",{"colStruc":options.colVisibility,"variantStorageName":options.variantStorageName,"grid":options.grid}));this.addElement(new ViewGridColOrder(id+":view-order",{"colStruc":options.colOrder,"variantStorageName":options.variantStorageName,"grid":options.grid}));this.addElement(new ButtonCmd(id+":save",{"glyph":"glyphicon-save","onClick":function(){self.m_onVariantSave.call(this);},"attrs":{"title":this.TITLE_SAVE}}));this.addElement(new ButtonCmd(id+":open",{"glyph":"glyphicon-open","onClick":function(){self.m_onVariantOpen.call(this);},"attrs":{"title":this.TITLE_OPEN}}));}
ViewGridColManager.superclass.constructor.call(this,id,"TEMPLATE",options);}
extend(ViewGridColManager,ControlContainer);ViewGridColManager.refresh=function(){this.getElement("view-visibility").refresh();this.getElement("view-order").refresh();} 
ViewGridColManager.prototype.VISIB_MENU_CAP="Видимость";ViewGridColManager.prototype.SORT_MENU_CAP="Сортировка";ViewGridColManager.prototype.CLOSE_CAP="Закрыть";ViewGridColManager.prototype.CLOSE_TITLE="Закрыть форму";ViewGridColManager.prototype.TAB_COLUMNS="Колонки";ViewGridColManager.prototype.TAB_SORT="Сортировка";ViewGridColManager.prototype.TAB_FILTER="Отбор";ViewGridColManager.prototype.HEAD_TITLE="Настройка списка";ViewGridColManager.prototype.TITLE_SAVE="Сохранить настройку";ViewGridColManager.prototype.TITLE_OPEN="Восстановить настройку"; 
function ViewGridColParam(id,options){options=options||{};ViewGridColParam.superclass.constructor.call(this,id,"DIV",options);this.m_paramId=options.paramId;this.m_variantStorageName=options.variantStorageName;this.m_dataGrid=options.grid;var head=new GridHead();var row=new GridRow(id+":row1");this.addHeadCells(row);head.addElement(row);var body=new GridBody();this.m_onAfterSave=options.onAfterSave;this.m_initVal=options.colStruc;for(var col_ind=0;col_ind<this.m_initVal.length;col_ind++){var row=new GridRow(this.getId()+":grid:row-"+this.m_initVal[col_ind].colId,{"attrs":{"colId":this.m_initVal[col_ind].colId}});this.addCells(row,this.m_initVal[col_ind]);body.addElement(row);}
var popup_menu=new PopUpMenu();this.m_grid=new Grid(id+":grid",{"head":head,"body":body,"commands":new GridCmdContainer(id+":grid:cmd",{"cmdInsert":false,"cmdRefresh":false,"cmdPrint":false,"cmdSearch":false,"cmdColManager":false,"cmdAllCommands":false,"addCustomCommands":function(commands){commands.push(new GridCmdRowUp(id+":grid:cmd:rowUp",{"showCmdControl":true}));commands.push(new GridCmdRowDown(id+":grid:cmd:rowDown",{"showCmdControl":true}));},"popUpMenu":popup_menu}),"popUpMenu":popup_menu,"rowCommandPanelClass":null,"filter":null,"refreshInterval":0});this.addElement(this.m_grid);}
extend(ViewGridColParam,ControlContainer);ViewGridColParam.prototype.COL_CHECK_ID="check";ViewGridColParam.prototype.COL_NAME_ID="name";ViewGridColParam.prototype.refresh=function(){this.getElement("grid").onRefresh();}
ViewGridColParam.prototype.save=function(){}
ViewGridColParam.prototype.onAfterSave=function(){window.getApp().setTemplateParam(this.m_variantStorageName,this.m_paramId,this.m_initVal);} 
ViewGridColParam.prototype.COLUMNS_COL_CAP="Колонки";ViewGridColParam.prototype.SAVE_CAPTION="Применить";ViewGridColParam.prototype.SAVE_TITLE="Применить изменения";ViewGridColParam.prototype.NOTE_SAVED="Изменения записаны."; 
function ViewGridColVisibility(id,options){options=options||{};ViewGridColVisibility.superclass.constructor.call(this,id,options);}
extend(ViewGridColVisibility,ViewGridColParam);ViewGridColVisibility.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));}
ViewGridColVisibility.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"}})]}));}
ViewGridColVisibility.prototype.getRowData=function(rowElem,struc){struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"checked":rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked()};}
ViewGridColVisibility.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];head_row.delDOM();head_row.setColumnOrder(this.m_initVal);}
head.toDOM(this.m_dataGrid.m_node);this.m_dataGrid.onRefresh();} 
ViewGridColVisibility.prototype.COLUMNS_CHECK_CAP="Видимость"; 
function ViewGridColOrder(id,options){options=options||{};ViewGridColOrder.superclass.constructor.call(this,id,options);}
extend(ViewGridColOrder,ViewGridColParam);ViewGridColOrder.prototype.COL_DIR_ID="dir";ViewGridColOrder.prototype.addHeadCells=function(row){var pref=this.getId()+":grid:row1";row.addElement(new GridCellHead(pref+":"+this.COL_NAME_ID,{"value":this.COLUMNS_COL_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_CHECK_ID,{"value":this.COLUMNS_CHECK_CAP}));row.addElement(new GridCellHead(pref+":"+this.COL_DIR_ID,{"value":this.COLUMNS_DIR_CAP}));}
ViewGridColOrder.prototype.addCells=function(row,fStruc){var pref=this.getId()+":grid:row-"+fStruc.fieldId;row.setAttr("fields",fStruc.fields);row.addElement(new GridCell(pref+":"+this.COL_NAME_ID,{"value":fStruc.colRef.getValue()}));row.addElement(new GridCell(pref+":"+this.COL_CHECK_ID,{"elements":[new EditCheckBox(pref+":"+this.COL_CHECK_ID+":toggle",{"className":"field_toggle","checked":fStruc.checked,"attrs":{"align":"center"}})]}));var at_asc={};var at_desc={};if(fStruc.checked&&fStruc.directs=="asc"){at_asc.checked="checked";}
if(fStruc.checked&&fStruc.directs=="desc"){at_desc.checked="checked";}
row.addElement(new GridCell(pref+":"+this.COL_DIR_ID,{"elements":[new EditRadioGroup(pref+":"+this.COL_DIR_ID+":radiogroup",{"elements":[new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-asc",{"value":"asc","labelCaption":this.ASC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_asc}),new EditRadio(pref+":"+this.COL_DIR_ID+":radiogroup:radio-desc",{"value":"desc","labelCaption":this.DESC_CAP,"name":fStruc.id+"_direct","editContClassName":"input-group "+window.getBsCol(1),"attrs":at_desc})]})]}));}
ViewGridColOrder.prototype.getRowData=function(rowElem,struc){var checked=rowElem.getElement(this.COL_CHECK_ID).getElement("toggle").getChecked();var directs="undefined";if(checked){directs=rowElem.getElement(this.COL_DIR_ID).getElement("radiogroup").getValue();}
struc[rowElem.getNode().rowIndex-1]={"colId":rowElem.getAttr("colId"),"fields":rowElem.getAttr("fields"),"directs":directs,"checked":checked};}
ViewGridColOrder.prototype.onAfterSave=function(){ViewGridColVisibility.superclass.onAfterSave.call(this);var cols={};for(var i=0;i<this.m_initVal.length;i++){cols[this.m_initVal[i].colId]=this.m_initVal[i];}
var head=this.m_dataGrid.getHead();for(var row in head.m_elements){var head_row=head.m_elements[row];var columns=head_row.m_elements;for(var col_id in columns){if(cols[col_id]&&cols[col_id].checked){cols[col_id].colRef.setSortFieldId(cols[col_id].fields);cols[col_id].colRef.setSort(cols[col_id].directs);}
else{columns[col_id].setSort("");}}}
this.m_dataGrid.onRefresh();} 
ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Порядок";ViewGridColOrder.prototype.COLUMNS_CHECK_CAP="Сортировать";ViewGridColOrder.prototype.COLUMNS_DIR_CAP="Направление возр./убыв.";ViewGridColOrder.prototype.ASC_CAP="По возр.";ViewGridColOrder.prototype.DESC_CAP="По убыв."; 
function VariantStorageSaveView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller();var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.variantStorageName);options.addElement=function(){this.addElement(new GridAjx(id+":variants",{"model":model,"keyIds":["storage_name"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"navigate":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false}),"head":new GridHead(id+"-variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:default_variant",{"colAttrs":{"colspan":2},"columns":[new GridColumn({"field":model.getField("default_variant"),"assocClassList":{"true":"glyphicon glyphicon-ok"}})]}),new GridCellHead(id+":variants:head:variant_name",{"columns":[new GridColumn({"field":model.getField("variant_name")})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true}));this.addElement(new EditString(id+":name",{"focus":true,"labelCaption":this.VARIANT_NAME_CAP,"className":window.getApp().getBsCol(12)}));this.addElement(new EditCheckBox(id+":default_variant",{"labelCaption":this.DEF_VARIANT_CAP,"className":window.getApp().getBsCol(12)}));}
VariantStorageSaveView.superclass.constructor.call(this,id,"TEMPLATE",options);var grid=this.getElement("variants");this.m_gridOnClick=grid.onClick;var self=this;grid.onClick=function(ev){var grid=self.getElement("variants");self.m_gridOnClick.call(grid,ev);var row=grid.getModelRow();self.getElement("default_variant").setValue(row.default_variant.getValue());var ctrl=self.getElement("name");ctrl.setValue(row.variant_name.getValue());ctrl.focus();}}
extend(VariantStorageSaveView,ControlContainer); 
VariantStorageSaveView.prototype.VARIANT_NAME_CAP="Наименование:";VariantStorageSaveView.prototype.DEF_VARIANT_CAP="Использовать при открытии:";VariantStorageSaveView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageSaveView.prototype.CMD_CANCEL_TITLE="Отменить запись";VariantStorageSaveView.prototype.CMD_OK_CAP="Записать";VariantStorageSaveView.prototype.CMD_OK_TITLE="Записать настройку";VariantStorageSaveView.prototype.HEAD_TITLE="Сохранение настройки"; 
function VariantStorageOpenView(id,options){options=options||{};var self=this;this.m_onClose=options.onClose;var model=new VariantStorageList_Model();var contr=new VariantStorage_Controller();var pm=contr.getPublicMethod("get_list");pm.setFieldValue("storage_name",options.variantStorageName);VariantStorageOpenView.superclass.constructor.call(this,id,"TEMPLATE",options);this.addElement(new GridAjx(id+":variants",{"model":model,"keyIds":["storage_name"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":null,"showHead":false,"commands":new GridCommandsAjx(id+":variants:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":true,"cmdCopy":false,"cmdPrint":false,"cmdRefresh":false,"cmdExport":false}),"head":new GridHead(id+"-variants:head",{"elements":[new GridRow(id+":variants:head:row0",{"elements":[new GridCellHead(id+":variants:head:variant_name",{"columns":[new GridColumn({"field":model.getField("variant_name")})],"sortable":true})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":0,"rowSelect":true,"focus":true,"onSelect":options.onSelect}));}
extend(VariantStorageOpenView,ControlContainer); 
VariantStorageOpenView.prototype.CMD_CANCEL_CAP="Отмена";VariantStorageOpenView.prototype.CMD_CANCEL_TITLE="Отменить выбор";VariantStorageOpenView.prototype.CMD_OK_CAP="Выбрать";VariantStorageOpenView.prototype.CMD_OK_TITLE="Выбрать настройку и закрыть форму";VariantStorageOpenView.prototype.HEAD_TITLE="Выбор сохраненной настройки"; 
function GridAjx(id,options){options=options||{};if(options.editInline){options.editViewClass=options.editViewClass||ViewGridEditInlineAjx;}
this.m_filters={};if(options.controller){options.readPublicMethod=options.readPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_LIST))?options.controller.getPublicMethod(options.controller.METH_GET_LIST):null);options.insertPublicMethod=options.insertPublicMethod||((options.controller.publicMethodExists(options.controller.METH_INSERT))?options.controller.getPublicMethod(options.controller.METH_INSERT):null);options.updatePublicMethod=options.updatePublicMethod||((options.controller.publicMethodExists(options.controller.METH_UPDATE))?options.controller.getPublicMethod(options.controller.METH_UPDATE):null);options.deletePublicMethod=options.deletePublicMethod||((options.controller.publicMethodExists(options.controller.METH_DELETE))?options.controller.getPublicMethod(options.controller.METH_DELETE):null);options.editPublicMethod=options.editPublicMethod||((options.controller.publicMethodExists(options.controller.METH_GET_OBJ))?options.controller.getPublicMethod(options.controller.METH_GET_OBJ):null);}
if(options.readPublicMethod&&!options.model&&options.readPublicMethod.getListModelClass()){var m_class=options.readPublicMethod.getListModelClass();options.model=new m_class();}
this.setReadPublicMethod(options.readPublicMethod);this.setInsertPublicMethod(options.insertPublicMethod);this.setUpdatePublicMethod(options.updatePublicMethod);this.setDeletePublicMethod(options.deletePublicMethod);this.setExportPublicMethod(options.exportPublicMethod);this.setEditPublicMethod(options.editPublicMethod);this.setRefreshAfterDelRow(options.refreshAfterDelRow);if(options.filters&&options.filters.length){for(var i=0;i<options.filters.length;i++){this.setFilter(options.filters[i]);}}
GridAjx.superclass.constructor.call(this,id,options);}
extend(GridAjx,Grid);GridAjx.prototype.m_readPublicMethod;GridAjx.prototype.m_insertPublicMethod;GridAjx.prototype.m_updatePublicMethod;GridAjx.prototype.m_deletePublicMethod;GridAjx.prototype.m_exportPublicMethod;GridAjx.prototype.m_editPublicMethod;GridAjx.prototype.m_refreshAfterDelRow;GridAjx.prototype.m_filters;GridAjx.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
GridAjx.superclass.onGetData.call(this);}
GridAjx.prototype.initEditView=function(parent,replacedNode,cmd){GridAjx.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm;if(cmd=="insert"){pm=this.getInsertPublicMethod();}
else{pm=this.getUpdatePublicMethod();}
this.m_editViewObj.setWritePublicMethod(pm);this.m_editViewObj.setReadPublicMethod(this.getEditPublicMethod());}
GridAjx.prototype.fillEditView=function(cmd){if(cmd!="insert"){this.keysToPublicMethod(this.m_editViewObj.getReadPublicMethod());}
GridAjx.superclass.fillEditView.call(this,cmd);}
GridAjx.prototype.keysToPublicMethod=function(pm){var pm_fields=pm.getFields();var fields=this.m_model.getFields();for(id in pm_fields){if(fields[id]&&fields[id].getPrimaryKey()){pm_fields[id].setValue(fields[id].getValue());}}}
GridAjx.prototype.read=function(cmd){if(this.m_editViewObj){this.m_editViewObj.read(cmd,function(resp,erCode,erStr){self.onError(resp,erCode,erStr)});}}
GridAjx.prototype.delRow=function(rowNode){var pm=this.getDeletePublicMethod();if(!pm){throw Error(this.ER_NO_DEL_PM);}
this.setEnabled(false);this.setModelToCurrentRow(rowNode);this.keysToPublicMethod(pm);var self=this;pm.run({"async":false,"ok":function(){self.afterServerDelRow();},"fail":function(resp,erCode,erStr){self.setEnabled(true);self.onError(resp,erCode,erStr);}});}
GridAjx.prototype.afterServerDelRow=function(){this.deleteRowNode();this.setEnabled(true);var self=this;window.showNote(this.NT_REC_DELETED,function(){self.focus();if(self.getRefreshAfterDelRow()){self.onRefresh();}},2000);}
GridAjx.prototype.filtersToMethod=function(sep){var pm=this.getReadPublicMethod();var contr=pm.getController();sep=(sep==undefined)?contr.PARAM_FIELD_SEP_VAL:sep;var s_fields,s_signs,s_vals,s_icases;for(var fid in this.m_filters){if(this.m_filters[fid]&&this.m_filters[fid].field&&this.m_filters[fid].sign){s_fields=((!s_fields)?"":s_fields+sep)+this.m_filters[fid].field;s_signs=((!s_signs)?"":s_signs+sep)+this.m_filters[fid].sign;s_vals=((!s_vals)?"":s_vals+sep)+this.m_filters[fid].val;s_icases=((!s_icases)?"":s_icases+sep)+(this.m_filters[fid].icase||"0");}}
pm.setFieldValue(contr.PARAM_COND_FIELDS,s_fields);pm.setFieldValue(contr.PARAM_COND_SGNS,s_signs);pm.setFieldValue(contr.PARAM_COND_VALS,s_vals);pm.setFieldValue(contr.PARAM_COND_ICASE,s_icases);}
GridAjx.prototype.onRefresh=function(callBack){var self=this;var pm=this.getReadPublicMethod();if(!pm){throw Error(this.ER_NO_READ_PM);}
var contr=pm.getController();var pag=this.getPagination();if(pag&&!isNaN(pag.getFrom())){pm.setFieldValue(contr.PARAM_FROM,pag.getFrom());pm.setFieldValue(contr.PARAM_COUNT,pag.getCountPerPage());}
else if(pag){pm.getField(contr.PARAM_FROM).unsetValue();pm.getField(contr.PARAM_COUNT).unsetValue();}
if(pm.fieldExists(contr.PARAM_COND_FIELDS)){this.filtersToMethod(contr.PARAM_FIELD_SEP_VAL);pm.setFieldValue(contr.PARAM_FIELD_SEP,contr.PARAM_FIELD_SEP_VAL);}
var sort_cols,sort_dirs;var head=this.getHead();if(head&&pm.fieldExists(contr.PARAM_ORD_FIELDS)){for(var row in head.m_elements){var head_row=head.m_elements[row];for(var col in head_row.m_elements){if(head_row.m_elements[col].getSortable()){var sort_dir=head_row.m_elements[col].getSort();if(sort_dir=="asc"||sort_dir=="desc"){var sort_col=head_row.m_elements[col].getSortFieldId();if(!sort_col){var cols=head_row.m_elements[col].getColumns();for(var i=0;i<cols.length;i++){sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=cols[i].getField().getId();sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}
else{sort_cols=(sort_cols==undefined)?"":sort_cols;sort_cols+=(sort_cols=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_cols+=sort_col;sort_dirs=(sort_dirs==undefined)?"":sort_dirs;sort_dirs+=(sort_dirs=="")?"":contr.PARAM_FIELD_SEP_VAL;sort_dirs+=sort_dir;}}}}}
pm.setFieldValue(contr.PARAM_ORD_FIELDS,sort_cols);pm.setFieldValue(contr.PARAM_ORD_DIRECTS,sort_dirs);}
pm.run({"ok":function(resp){self.onGetData(resp);if(callBack){callBack.call(self);}},"fail":function(resp,erCode,erStr){self.onError(resp,erCode,erStr);}});}
GridAjx.prototype.onError=function(resp,erCode,erStr){GridAjx.superclass.onError.call(this,window.getApp().formatError(erCode,erStr));}
GridAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
GridAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
GridAjx.prototype.setInsertPublicMethod=function(v){this.m_insertPublicMethod=v;}
GridAjx.prototype.getInsertPublicMethod=function(){return this.m_insertPublicMethod;}
GridAjx.prototype.setUpdatePublicMethod=function(v){this.m_updatePublicMethod=v;}
GridAjx.prototype.getUpdatePublicMethod=function(){return this.m_updatePublicMethod;}
GridAjx.prototype.setDeletePublicMethod=function(v){this.m_deletePublicMethod=v;}
GridAjx.prototype.getDeletePublicMethod=function(){return this.m_deletePublicMethod;}
GridAjx.prototype.setExportPublicMethod=function(v){this.m_exportPublicMethod=v;}
GridAjx.prototype.getExportPublicMethod=function(){return this.m_exportPublicMethod;}
GridAjx.prototype.setEditPublicMethod=function(v){this.m_editPublicMethod=v;}
GridAjx.prototype.getEditPublicMethod=function(){return this.m_editPublicMethod;}
GridAjx.prototype.setRefreshAfterDelRow=function(v){this.m_refreshAfterDelRow=v;}
GridAjx.prototype.getRefreshAfterDelRow=function(){return this.m_refreshAfterDelRow;}
GridAjx.prototype.getFilters=function(){return this.m_filters;}
GridAjx.prototype.getFilterKey=function(filterOrField,sign){var key;if(typeof(filterOrField)=="object"){key=filterOrField.field+filterOrField.sign;}
else{key=filterOrField+sign;}
return key;}
GridAjx.prototype.setFilter=function(filter){this.m_filters[this.getFilterKey(filter)]=filter;}
GridAjx.prototype.getFilter=function(filterOrField,sign){return this.m_filters[this.getFilterKey(filterOrField,sign)];}
GridAjx.prototype.unsetFilter=function(filterOrField,sign){this.m_filters[this.getFilterKey(filterOrField,sign)]=undefined;} 
GridAjx.prototype.ER_NO_DEL_PM="Метод для команды удаления не определен";GridAjx.prototype.ER_NO_UPDATE_PM="Метод для команды обновления не определен";GridAjx.prototype.ER_NO_EDIT_PM="Метод для команды изменения не определен";GridAjx.prototype.ER_NO_READ_PM="Метод для команды чтения не определен"; 
function TreeAjx(id,options){options=options||{};options.rowSelect=true;options.resize=false;options.showHead=false;options.autoRefresh=false;options.editInline=(options.editInline!=undefined)?options.editInline:true;options.editViewOptions=options.editViewOptions||{"tagName":"LI","columnTagName":"DIV"};options.selectedRowClass="active";options.commands=options.commands||new GridCmdContainerAjx(id+":cmd",{"cmdColManager":false,"cmdExport":false,"cmdSearch":false,"cmdRefresh":false});this.setRootCaption(options.rootCaption||this.DEF_ROOT_CAPTION);TreeAjx.superclass.constructor.call(this,id,options);}
extend(TreeAjx,GridAjx);TreeAjx.prototype.DEF_TAG_NAME="DIV";TreeAjx.prototype.DEF_ROW_TAG_NAME="LI";TreeAjx.prototype.DEF_CELL_TAG_NAME="DIV";TreeAjx.prototype.DEF_BODY_TAG_NAME="UL";TreeAjx.prototype.m_rootCaption;TreeAjx.prototype.nodeClickable=function(node){return(this.getEnabled());}
TreeAjx.prototype.onNextRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;var new_node;if(selected_node){var chld_same_tag=selected_node.getElementsByTagName(selected_node.nodeName);if(chld_same_tag&&chld_same_tag.length){new_node=chld_same_tag[0];}
else if(selected_node.nextSibling&&selected_node.nextSibling.nodeName==selected_node.nodeName){new_node=selected_node.nextSibling;}
else{new_node=DOMHelper.getParentByTagName(selected_node,selected_node.nodeName);if(new_node){new_node=new_node.nextSibling;}}
if(new_node&&this.getRowSelectable(new_node)){this.selectRow(new_node,selected_node);$(new_node).get(0).scrollIntoView();res=true;}}
return res;}
TreeAjx.prototype.onPreviousRow=function(){var res=false;var selected_node=this.getSelectedNode();var new_node;if(selected_node){if(selected_node.previousSibling&&selected_node.previousSibling.nodeName==selected_node.nodeName){new_node=selected_node.previousSibling;}
else{new_node=DOMHelper.getParentByTagName(selected_node,selected_node.nodeName);}
if(new_node&&this.getRowSelectable(new_node)){this.selectRow(new_node,selected_node);$(new_node).get(0).scrollIntoView();res=true;}}
return res;}
TreeAjx.prototype.setRootCaption=function(v){this.m_rootCaption=v;}
TreeAjx.prototype.getRootCaption=function(){return this.m_rootCaption;}
TreeAjx.prototype.edit=function(cmd){if(cmd=="edit"&&DOMHelper.getAttr(this.getSelectedRow(),"modelIndex")==-1){return 0;}
TreeAjx.superclass.edit.call(this,cmd);}
TreeAjx.prototype.onGetData=function(){if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;this.m_itemIds={};var key_field_id=this.m_model.getKeyField().getId();row_cnt=-1;var r_class=this.getHead().getRowClass(h_row_ind);row=this.createNewRow(row_cnt,h_row_ind);var root_node=new ControlContainer(null,"UL");row.addElement(new GridCell(row.getId()+":descr",{"value":this.getRootCaption(),"tagName":"SPAN"}));row.addElement(root_node);body.addElement(row);row_cnt++;this.m_model.reset();while(this.m_model.getNextRow()){row=this.createNewRow(row_cnt,h_row_ind);row_keys={};for(var k=0;k<this.m_keyIds.length;k++){if(this.m_model.fieldExists(this.m_keyIds[k])){row_keys[this.m_keyIds[k]]=this.m_model.getFieldValue(this.m_keyIds[k]);}}
field_cnt=0;for(var col_id=0;col_id<columns.length;col_id++){columns[col_id].setGrid(this);if(columns[col_id].getField()&&columns[col_id].getField().getPrimaryKey()){row_keys[columns[col_id].getField().getId()]=columns[col_id].getField().getValue();}
var cell=this.createNewCell(columns[col_id],row);if(this.m_onEventAddCell){this.m_onEventAddCell.call(this,cell);}
row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.serialize(row_keys));var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(this.getId()+":"+body.getName()+":"+row.getId()+":cell-sys",row_class_options));}
if(this.m_onEventAddRow){this.m_onEventAddRow.call(this,row);}
var item_id=this.m_model.getFieldValue(key_field_id);var parent_item_id=this.m_model.getParentId();this.m_itemIds[item_id]=new ControlContainer(row.getId()+":gr","UL",{});row.addElement(this.m_itemIds[item_id]);if(parent_item_id){this.m_itemIds[parent_item_id].addElement(row);}
else{root_node.addElement(row);}
row.m_drag=new DragObject(row.getNode());row.m_drop=new DropTarget(row.getNode());row.m_drop.accept=function(dragObject){var drop_id=CommonHelper.unserialize(this.element.getAttribute("keys")).id;var drag_id=CommonHelper.unserialize(dragObject.element.getAttribute("keys")).id;self.m_model.resetFields();self.m_model.m_fields.id.setValue(drag_id)
var drag_row=self.m_model.recLocate(self.m_model.m_fields)[0];self.m_model.resetFields();self.m_model.m_fields.id.setValue(drop_id)
var drop_row=self.m_model.recLocate(self.m_model.m_fields)[0];drop_row.parentNode.insertBefore(drag_row,drop_row);self.onRefresh();}
row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd(this.m_model);}
body.toDOM(this.m_node);}
if(this.m_navigate||this.m_navigateClick){this.setSelection();}} 
function GridAjxDOCT(id,options){options=options||{};options.refreshAfterDelRow=true;options.refreshInterval=0;GridAjxDOCT.superclass.constructor.call(this,id,options);}
extend(GridAjxDOCT,GridAjx);GridAjxDOCT.prototype.m_modified;GridAjxDOCT.prototype.afterServerDelRow=function(){this.setModified(true);GridAjxDOCT.superclass.afterServerDelRow.call(this);}
GridAjxDOCT.prototype.refreshAfterEdit=function(res){GridAjxDOCT.superclass.refreshAfterEdit.call(this,res);if(res&&res.updated){this.setModified(true);}}
GridAjxDOCT.prototype.getModified=function(){return this.m_modified;}
GridAjxDOCT.prototype.setModified=function(v){this.m_modified=v;} 
function GridAjxMaster(id,options){options=options||{};this.setDetailControl(options.detailControl);this.setDetailKeyIds(options.detailkeyIds);GridAjxMaster.superclass.constructor.call(this,id,options);}
extend(GridAjxMaster,GridAjx);GridAjxMaster.prototype.m_detailControl;GridAjxMaster.prototype.m_detailKeyIds;GridAjxMaster.prototype.selectNode=function(newNode,oldNode){GridAjxMaster.superclass.selectNode.call(this,newNode,oldNode);if(this.m_detailControl){var keys=this.getSelectedNodeKeys();var pm=this.m_detailControl.getReadPublicMethod();if(pm){var pm_upd,pm_ins;if(this.m_detailControl.getUpdatePublicMethod){pm_upd=this.m_detailControl.getUpdatePublicMethod();}
if(this.m_detailControl.getInsertPublicMethod){pm_ins=this.m_detailControl.getInsertPublicMethod();}
var det_ids=this.getDetailKeyIds();var ind=0;var contr=pm.getController();for(var kid in keys){this.m_detailControl.setFilter({"field":det_ids[ind],"sign":contr.PARAM_SGN_EQUAL,"val":keys[kid],"icase":"0"});if(pm_upd){pm_upd.setFieldValue(det_ids[ind],keys[kid]);}
if(pm_ins){pm_ins.setFieldValue(det_ids[ind],keys[kid]);}
ind++;}
this.m_detailControl.onRefresh();}}}
GridAjxMaster.prototype.getDetailControl=function(){return this.m_detailControl;}
GridAjxMaster.prototype.setDetailControl=function(v){this.m_detailControl=v;}
GridAjxMaster.prototype.getDetailKeyIds=function(){return this.m_detailKeyIds;}
GridAjxMaster.prototype.setDetailKeyIds=function(v){this.m_detailKeyIds=v;} 
function GridCommandsAjx(id,options){options=options||{};options.cmdExport=(options.cmdExport!=undefined)?options.cmdExport:true;var self=this;if(options.cmdExport){this.setControlExport(options.controlExport||new ButtonCtrl(id+":cmdExport",{"glyph":"glyphicon-file","onClick":function(){self.m_grid.getReadPublicMethod().download("ViewExcel");},"attrs":{"title":this.BTN_EXPORT_TITLE}}));}
GridCommandsAjx.superclass.constructor.call(this,id,options);}
extend(GridCommandsAjx,GridCommands);GridCommandsAjx.prototype.m_controlExport;GridCommandsAjx.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsAjx.prototype.toPopUp=function(){if(this.m_controlInsert)this.m_popUpMenu.addButton(this.m_controlInsert);if(this.m_controlEdit)this.m_popUpMenu.addButton(this.m_controlEdit);if(this.m_controlCopy)this.m_popUpMenu.addButton(this.m_controlCopy);if(this.m_controlDelete)this.m_popUpMenu.addButton(this.m_controlDelete);if(this.m_controlPrint)this.m_popUpMenu.addButton(this.m_controlPrint);if(this.m_controlExport)this.m_popUpMenu.addButton(this.m_controlExport);if(this.m_controlColumnManager)this.m_popUpMenu.addButton(this.m_controlColumnManager);if(this.m_controlRefresh)this.m_popUpMenu.addButton(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);this.printObjToPopUp();}
GridCommandsAjx.prototype.getControlExport=function(){return this.m_controlExport;}
GridCommandsAjx.prototype.setControlExport=function(v){this.m_controlExport=v;}
GridCommandsAjx.prototype.setEnabled=function(en){if(this.m_controlRefresh)this.m_controlRefresh.setEnabled(en);GridCommandsAjx.superclass.setEnabled.call(this,en);} 
GridCommandsAjx.prototype.BTN_EXPORT_TITLE="Экспорт в Excel"; 
function GridCommandsDOC(id,options){options=options||{};options.cmdUnprocess=(options.cmdUnprocess!=undefined)?options.cmdUnprocess:true;options.cmdPrintDoc=(options.cmdPrintDoc!=undefined)?options.cmdPrintDoc:true;options.cmdShowActs=(options.cmdShowActs!=undefined)?options.cmdShowActs:true;var self=this;if(options.cmdUnprocess||options.controlUnprocess){this.setControlUnprocess(options.controlUnprocess||new ButtonCtrl(id+":cmdUnprocess",{"glyph":"glyphicon-unchecked","onClick":function(){WindowQuestion.show({"cancel":false,"text":self.ACTS_DEL_CONF,"callBack":function(r){if(r==WindowQuestion.RES_YES){self.delActs();}}});},"attrs":{"title":this.BTN_UNPROCESS_TITLE}}));}
if(options.cmdShowActs||options.controlShowActs){this.setControlShowActs(options.controlShowActs||new ButtonCtrl(id+":cmdShowActs",{"glyph":"glyphicon-log-in","onClick":function(){},"attrs":{"title":this.BTN_SHOWACT_TITLE}}));}
GridCommandsDOC.superclass.constructor.call(this,id,options);}
extend(GridCommandsDOC,GridCommandsAjx);GridCommandsDOC.prototype.m_controlUnprocess;GridCommandsDOC.prototype.m_controlShowActs;GridCommandsDOC.prototype.addControls=function(){if(this.m_controlInsert)this.addElement(this.m_controlInsert);if(this.m_controlEdit)this.addElement(this.m_controlEdit);if(this.m_controlCopy)this.addElement(this.m_controlCopy);if(this.m_controlDelete)this.addElement(this.m_controlDelete);if(this.m_controlPrint)this.addElement(this.m_controlPrint);if(this.m_controlExport)this.addElement(this.m_controlExport);if(this.m_controlRefresh)this.addElement(this.m_controlRefresh);if(this.m_controlPrintObj)this.addElement(this.m_controlPrintObj);if(this.m_controlUnprocess)this.addElement(this.m_controlUnprocess);if(this.m_controlShowActs)this.addElement(this.m_controlShowActs);if(this.m_controlFilter){this.addElement(this.m_controlFilterToggle);this.addElement(this.m_controlFilter);}
if(this.m_popUpMenu){this.toPopUp();}}
GridCommandsDOC.prototype.toPopUp=function(){GridCommandsDOC.superclass.toPopUp.call(this);if(this.m_controlUnprocess||this.m_controlShowActs){this.m_popUpMenu.addSeparator();if(this.m_controlUnprocess)this.m_popUpMenu.addButton(this.m_controlUnprocess);if(this.m_controlShowActs)this.m_popUpMenu.addButton(this.m_controlShowActs);}}
GridCommandsDOC.prototype.setControlUnprocess=function(v){this.m_controlUnprocess=v;}
GridCommandsDOC.prototype.getControlUnprocess=function(){return this.m_controlUnprocess;}
GridCommandsDOC.prototype.setControlShowActs=function(v){this.m_controlShowActs=v;}
GridCommandsDOC.prototype.getControlShowActs=function(){return this.m_controlShowActs;}
GridCommandsDOC.prototype.delActs=function(){var contr=this.m_grid.getReadPublicMethod().getController();if(contr.publicMethodExists("set_unprocessed")){var self=this;var keys=this.m_grid.getSelectedNodeKeys();var pm=contr.getPublicMethod("set_unprocessed");pm.setFieldValue("doc_id",keys["id"]);pm.run({"async":true,"ok":function(){self.m_grid.onRefresh();window.showNote(self.ACTS_DELETED);}})}} 
GridCommandsDOC.prototype.BTN_UNPROCESS_TITLE="Отменить проведение документа";GridCommandsDOC.prototype.BTN_SHOWACT_TITLE="Показать движения документа";GridCommandsDOC.prototype.ACTS_DEL_CONF="Отменить проведение документа?";GridCommandsDOC.prototype.ACTS_DELETED="Отменено проведение документа."; 
function GridPagination(id,options){options=options||{};GridPagination.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);var self=this;this.m_inf=new Control(id+":inf","span");this.m_showPageCount=(options.showPageCount)?parseInt(options.showPageCount):this.DEF_PAGES;if(this.m_showPageCount){this.m_pages=new ControlContainer(id+":pages",options.pagesTagName||this.DEF_PAGES_TAG_NAME,{"className":options.pagesClassName||this.DEF_PAGES_CLASS_NAME});}
this.setPageClassName(options.pageClassName||this.DEF_PAGE_CLASS_NAME);this.setPageCurClassName(options.pageCurClassName||this.DEF_PAGE_CUR_CLASS_NAME);this.setPageTagName(options.pageTagName||this.DEF_PAGE_TAG_NAME);this.m_btnsCont=new ControlContainer(id+":bns_cont","SPAN",{"className":"pagination-pages"});var ctrl_class=options.ctrlClassName||this.DEF_CTRL_CLASS_NAME;if(options.ctrlGoFirst||options.cmdGoFirst==undefined||options.cmdGoFirst==true){this.m_ctrlGoFirst=options.ctrlGoFirst||new Button(id+":go_first",{"glyph":(options.ctrlGoFirstCaption!=undefined)?null:options.ctrlGoFirstGlyph||this.DEF_CTRL_GO_FIRST_GLYPH,"caption":options.ctrlGoFirstCaption||"","className":ctrl_class,"onClick":function(){self.goFirst();},"attrs":{"title":this.CONTR_GO_FIRST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoFirst);}
if(options.ctrlGoPrev||options.cmdGoPrev==undefined||options.cmdGoPrev==true){this.m_ctrlGoPrev=new Button(id+":go_prev",{"glyph":(options.ctrlGoPrevCaption!=undefined)?null:options.ctrlGoPrevGlyph||this.DEF_CTRL_GO_PREV_GLYPH,"caption":options.ctrlGoPrevCaption||"","className":ctrl_class,"onClick":function(){self.goPrev();},"attrs":{"title":this.CONTR_GO_PREV_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoPrev);}
if(options.ctrlGoNext||options.cmdGoNext==undefined||options.cmdGoNext==true){this.m_ctrlGoNext=new Button(id+":go_next",{"glyph":(options.ctrlGoNextCaption!=undefined)?null:options.ctrlGoNextGlyph||this.DEF_CTRL_GO_NEXT_GLYPH,"caption":options.ctrlGoNextCaption||"","className":ctrl_class,"onClick":function(){self.goNext();},"attrs":{"title":this.CONTR_GO_NEXT_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoNext);}
if(options.ctrlGoLast||options.cmdGoLast==undefined||options.cmdGoLast==true){this.m_ctrlGoLast=new Button(id+":go_last",{"glyph":(options.ctrlGoLastCaption!=undefined)?null:options.ctrlGoLastGlyph||this.DEF_CTRL_GO_LAST_GLYPH,"caption":options.ctrlGoLastCaption||"","className":ctrl_class,"onClick":function(){self.goLast();},"attrs":{"title":this.CONTR_GO_LAST_TITLE}});this.m_btnsCont.addElement(this.m_ctrlGoLast);}
options.from=options.from||0;this.setFrom(options.from);if(options.countPerPage){this.setCountPerPage(options.countPerPage);}}
extend(GridPagination,Control);GridPagination.prototype.DEF_PAGES=10;GridPagination.prototype.DEF_TAG_NAME="DIV";GridPagination.prototype.DEF_CTRL_CLASS_NAME="btn btn-xs";GridPagination.prototype.DEF_CTRL_GO_FIRST_GLYPH="glyphicon-fast-backward";GridPagination.prototype.DEF_CTRL_GO_PREV_GLYPH="glyphicon-step-backward";GridPagination.prototype.DEF_CTRL_GO_NEXT_GLYPH="glyphicon-step-forward";GridPagination.prototype.DEF_CTRL_GO_LAST_GLYPH="glyphicon-fast-forward";GridPagination.prototype.DEF_PAGE_CLASS_NAME="pagination-page";GridPagination.prototype.DEF_PAGE_CUR_CLASS_NAME="pagination-page badge pagination-page-cur";GridPagination.prototype.DEF_PAGE_TAG_NAME="SPAN";GridPagination.prototype.DEF_PAGES_TAG_NAME="SPAN";GridPagination.prototype.DEF_PAGES_CLASS_NAME="pagination-pages";GridPagination.prototype.m_countTotal;GridPagination.prototype.m_countPerPage;GridPagination.prototype.m_from;GridPagination.prototype.m_inf;GridPagination.prototype.m_grid;GridPagination.prototype.m_pageClassName;GridPagination.prototype.m_pageCurClassName;GridPagination.prototype.m_pageTagName;GridPagination.prototype.getFrom=function(){return this.m_from;}
GridPagination.prototype.getCountPerPage=function(){return this.m_countPerPage;}
GridPagination.prototype.setCountTotal=function(countTotal){this.m_countTotal=parseInt(countTotal);this.setInf();}
GridPagination.prototype.setCountPerPage=function(countPerPage){this.m_countPerPage=parseInt(countPerPage);}
GridPagination.prototype.setFrom=function(from){this.m_from=parseInt(from);this.setInf();}
GridPagination.prototype.reset=function(){this.m_from=undefined;}
GridPagination.prototype.setGrid=function(v){this.m_grid=v;}
GridPagination.prototype.setFirstEnabled=function(enabled){}
GridPagination.prototype.goFirst=function(){this.setFrom(0);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goPrev=function(){this.setFrom(Math.max(0,this.m_from-this.m_countPerPage));this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goNext=function(){var from=this.m_from+this.m_countPerPage;from=(from>=this.m_countTotal)?this.m_from:from;this.setFrom(from);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.goLast=function(){var pages=Math.floor(this.m_countTotal/this.m_countPerPage);if((this.m_countTotal%this.m_countPerPage)==0){pages--;}
this.setFrom(pages*this.m_countPerPage);this.m_grid.onRefresh();this.m_grid.focus();}
GridPagination.prototype.setInf=function(){var pages=Math.ceil(this.m_countTotal/this.m_countPerPage);var page=Math.ceil(this.m_from/this.m_countPerPage)+1;if(isNaN(pages))pages=1;if(isNaN(page))page=1;this.m_inf.setValue(this.CONTR_INF_PAGE+pages);if(this.m_ctrlGoFirst)this.m_ctrlGoFirst.setEnabled((page>1));if(this.m_ctrlGoPrev)this.m_ctrlGoPrev.setEnabled((page>1));if(page==pages){if(this.m_ctrlGoLast)this.m_ctrlGoLast.setEnabled(false);if(this.m_ctrlGoNext)this.m_ctrlGoNext.setEnabled(false);}
else{if(this.m_ctrlGoLast)this.m_ctrlGoLast.setEnabled(true);if(this.m_ctrlGoNext)this.m_ctrlGoNext.setEnabled(true);}
if(this.m_showPageCount&&this.m_inf.getNode().parentNode){this.m_pages.delDOM();this.m_pages.clear();var self=this;var prev_from=page-this.m_showPageCount;if(prev_from<1)prev_from=1;for(var pg=prev_from;pg<page;pg++){this.m_pages.addElement(this.createPageElement({"className":this.getPageClassName(),"attrs":{"title":this.GO_TO_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
if(pages>1){this.m_pages.addElement(this.createPageElement({"className":this.getPageCurClassName(),"attrs":{"title":this.CONTR_PG_CNT},"value":page}));}
var nxt_to=page+this.m_showPageCount;if(nxt_to>pages)nxt_to=pages;for(var pg=page+1;pg<=nxt_to;pg++){this.m_pages.addElement(this.createPageElement({"className":this.getPageClassName(),"attrs":{"title":this.CONTR_INF_PAGE+pg,"to_page":pg},"value":pg,"events":{"click":function(e){self.goToPageFromEvent(e);}}}));}
this.m_pages.toDOMAfter(this.m_btnsCont.getNode());}}
GridPagination.prototype.goToPageFromEvent=function(e){e=EventHelper.fixMouseEvent(e);var pg=DOMHelper.getAttr(e.target,"to_page");this.setFrom((pg-1)*this.m_countPerPage);this.m_grid.onRefresh();}
GridPagination.prototype.toDOM=function(parent){GridPagination.superclass.toDOM.call(this,parent);this.m_inf.toDOM(this.m_node);this.m_btnsCont.toDOM(this.m_node);this.setInf();}
GridPagination.prototype.delDOM=function(){if(this.m_showPageCount){this.m_pages.delDOM();}
this.m_inf.delDOM();this.m_btnsCont.delDOM();GridPagination.superclass.delDOM.call(this);}
GridPagination.prototype.setPageClassName=function(v){this.m_pageClassName=v;}
GridPagination.prototype.getPageClassName=function(){return this.m_pageClassName;}
GridPagination.prototype.setPageCurClassName=function(v){this.m_pageCurClassName=v;}
GridPagination.prototype.getPageCurClassName=function(){return this.m_pageCurClassName;}
GridPagination.prototype.setPageTagName=function(v){this.m_pageTagName=v;}
GridPagination.prototype.getPageTagName=function(){return this.m_pageTagName;}
GridPagination.prototype.createPageElement=function(options){return(new Control(null,this.getPageTagName(),options));} 
GridPagination.prototype.CONTR_GO_FIRST_TITLE="в начало";GridPagination.prototype.CONTR_GO_PREV_TITLE="предыдущая";GridPagination.prototype.CONTR_GO_NEXT_TITLE="следующая";GridPagination.prototype.CONTR_GO_LAST_TITLE="в конец";GridPagination.prototype.CONTR_INF_PAGE="Страниц:";GridPagination.prototype.CONTR_INF_FROM="из";GridPagination.prototype.GO_TO_PAGE="Перейти на страницу ";GridPagination.prototype.CONTR_PG_CNT="Страниц:"; 
function GridFilterInfo(id,options){options=options||{};GridFilterInfo.superclass.constructor.call(this,id,"DIV",options);}
extend(GridFilterInfo,ControlContainer);GridFilterInfo.prototype.addFilter=function(filter){if(this.elementExists(filter.id)){this.delElement(filter.id);}
this.addElement(new ControlContainer(this.getId()+":"+filter.id,"SPAN",{"elements":[new Control(null,"SPAN",{"value":filter.descr}),new Control(null,"SPAN",{"value":"×","events":{"click":function(){alert("Reset filter")}}})]}));this.toDOM();} 
function GridFilter(id,options){options=options||{};options.className=options.className||this.DEF_CLASS_NAME;GridFilter.superclass.constructor.call(this,id,options.tagName||this.DEF_TAG_NAME,options);options.cmdSet=(options.cmdSet!=undefined)?options.cmdSet:true;options.cmdUnset=(options.cmdUnset!=undefined)?options.cmdUnset:options.cmdSet;var self=this;if(options.cmdSet){this.setControlSet(options.controlSet||new ButtonCmd(id+":cmdSet",{"caption":this.DEF_SET_CTRL_CAP,"onClick":function(){self.setFilter();},"attrs":{"title":this.DEF_SET_CTRL_TITLE}}));}
if(options.cmdUnset){this.setControlUnset(options.controlUnset||new ButtonCmd(id+":cmdUnset",{"caption":this.DEF_UNSET_CTRL_CAP,"onClick":function(){self.unsetFilter();},"attrs":{"title":this.DEF_UNSET_CTRL_TITLE}}));}
this.m_filter=new ModelFilter({"filters":options.filters});this.addControls();}
extend(GridFilter,ControlContainer);GridFilter.prototype.DEF_TAG_NAME="form";GridFilter.prototype.DEF_CLASS_NAME="form-horizontal collapse";GridFilter.prototype.m_controlSet;GridFilter.prototype.m_controlUnset;GridFilter.prototype.m_filter;GridFilter.prototype.m_onRefresh;GridFilter.prototype.addControls=function(){var filters=this.m_filter.getFilters();for(var id in filters){this.addElement(filters[id].binding.getControl());}
this.m_contCommands=new ControlContainer(this.getId()+":cont-cmd","div",{"className":window.getBsCol()+"12"});if(this.m_controlSet)this.m_contCommands.addElement(this.m_controlSet);if(this.m_controlUnset)this.m_contCommands.addElement(this.m_controlUnset);this.addElement(this.m_contCommands);}
GridFilter.prototype.setControlSet=function(v){this.m_controlSet=v;}
GridFilter.prototype.getControlSet=function(){return this.m_controlSet;}
GridFilter.prototype.setControlUnset=function(v){this.m_controlUnset=v;}
GridFilter.prototype.getControlUnset=function(){return this.m_controlUnset;}
GridFilter.prototype.setFilter=function(v){this.m_filter=v;}
GridFilter.prototype.getFilter=function(){return this.m_filter;}
GridFilter.prototype.setOnRefresh=function(v){this.m_onRefresh=v;}
GridFilter.prototype.getOnRefresh=function(){return this.m_onRefresh;}
GridFilter.prototype.setFilter=function(){if(this.m_onRefresh){this.m_onRefresh();}}
GridFilter.prototype.unsetFilter=function(){this.m_filter.resetFilters();if(this.m_onRefresh){this.m_onRefresh();}} 
GridFilter.prototype.DEF_SET_CTRL_CAP="Применить";GridFilter.prototype.DEF_SET_CTRL_TITLE="Применить отбор";GridFilter.prototype.DEF_UNSET_CTRL_CAP="Сбросить";GridFilter.prototype.DEF_UNSET_CTRL_TITLE="Отменить отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_CAP="Отбор";GridFilter.prototype.DEF_TOGGLE_CTRL_TITLE="показать отбор"; 
function EditPeriodDate(id,options){options=options||{};options.template=window.getApp().getTemplate("EditPeriodDate");options.templateOptions=options.templateOptions||{"CONTR_DOWN_FAST_TITLE":this.CONTR_DOWN_FAST_TITLE,"CONTR_DOWN_TITLE":this.CONTR_DOWN_TITLE,"CONTR_UP_FAST_TITLE":this.CONTR_UP_FAST_TITLE,"CONTR_UP_TITLE":this.CONTR_UP_TITLE};EditPeriodDate.superclass.constructor.call(this,id,"template",options);var edit_class=options.editClass||EditDate;options.cmdDownFast=(options.cmdDownFast!==undefined)?options.cmdDownFast:true;options.cmdDown=(options.cmdDown!==undefined)?options.cmdDown:true;options.cmdUpFast=(options.cmdUpFast!==undefined)?options.cmdUpFast:true;options.cmdUp=(options.cmdUp!==undefined)?options.cmdUp:true;options.cmdPeriodSelect=(options.cmdPeriodSelect!==undefined)?options.cmdPeriodSelect:true;var self=this;if(options.cmdDownFast){this.setControlDownFast(options.controlDownFast||new Button(id+":downFast",{"glyph":"glyphicon-triangle-left","onClick":function(){self.goFast(-1);}}));}
if(options.cmdDown){this.setControlDown(options.controlDown||new Button(id+":down",{"glyph":"glyphicon-menu-left","onClick":function(){self.go(-1);}}));}
if(options.cmdUp){this.setControlUp(options.controlUp||new Button(id+":up",{"glyph":"glyphicon-menu-right","onClick":function(){self.go(1);}}));}
if(options.cmdUpFast){this.setControlUpFast(options.controlUpFast||new Button(id+":upFast",{"glyph":"glyphicon-triangle-right","onClick":function(){self.goFast(1);}}));}
this.setControlFrom(options.controlFrom||new edit_class(id+":from",{"value":options.valueFrom,"timeValueStr":(options.valueFrom)?DateHelper.format(options.valueFrom,"H:i:s"):this.DEF_FROM_TIME,"contClassName":window.getBsCol(6),"editContClassName":"input-group "+window.getBsCol(12)}));this.setControlTo(options.controlTo||new edit_class(id+":to",{"value":options.valueTo,"timeValueStr":(options.valueTo)?DateHelper.format(options.valueTo,"H:i:s"):this.DEF_TO_TIME,"contClassName":window.getBsCol(6),"editContClassName":"input-group "+window.getBsCol(12)}));this.setField(options.field);if(options.cmdPeriodSelect){this.setControlPeriodSelect(options.controlPeriodSelect||new PeriodSelect(this.getId()+":periodSelect",{"onValueChange":function(){self.setPredefinedPeriod(this.getValue());}}));}
this.addControls();}
extend(EditPeriodDate,ControlContainer);EditPeriodDate.prototype.DEF_FROM_TIME="00:00:00";EditPeriodDate.prototype.DEF_TO_TIME="23:59:59";EditPeriodDate.prototype.m_controlFrom;EditPeriodDate.prototype.m_controlTo;EditPeriodDate.prototype.m_controlUp;EditPeriodDate.prototype.m_controlUpFast;EditPeriodDate.prototype.m_controlDown;EditPeriodDate.prototype.m_controlDownFast;EditPeriodDate.prototype.m_controlPeriodSelect;EditPeriodDate.prototype.m_field;EditPeriodDate.prototype.addControls=function(){if(this.m_controlDownFast)this.addElement(this.m_controlDownFast);if(this.m_controlDown)this.addElement(this.m_controlDown);if(this.m_controlPeriodSelect)this.addElement(this.m_controlPeriodSelect);this.addElement(this.m_controlFrom);this.addElement(this.m_controlTo);if(this.m_controlUp)this.addElement(this.m_controlUp);if(this.m_controlUpFast)this.addElement(this.m_controlUpFast);}
EditPeriodDate.prototype.getControlFrom=function(){return this.m_controlFrom;}
EditPeriodDate.prototype.setControlFrom=function(v){this.m_controlFrom=v;}
EditPeriodDate.prototype.getControlTo=function(){return this.m_controlTo;}
EditPeriodDate.prototype.setControlTo=function(v){this.m_controlTo=v;}
EditPeriodDate.prototype.getControlUp=function(){return this.m_controlUp;}
EditPeriodDate.prototype.setControlUp=function(v){this.m_controlUp=v;}
EditPeriodDate.prototype.getControlUpFast=function(){return this.m_controlUpFast;}
EditPeriodDate.prototype.setControlUpFast=function(v){this.m_controlUpFast=v;}
EditPeriodDate.prototype.getControlDownFast=function(){return this.m_controlDownFast;}
EditPeriodDate.prototype.setControlDownFast=function(v){this.m_controlDownFast=v;}
EditPeriodDate.prototype.getControlDown=function(){return this.m_controlDown;}
EditPeriodDate.prototype.setControlDown=function(v){this.m_controlDown=v;}
EditPeriodDate.prototype.getControlPeriodSelect=function(){return this.m_controlPeriodSelect;}
EditPeriodDate.prototype.setControlPeriodSelect=function(v){this.m_controlPeriodSelect=v;}
EditPeriodDate.prototype.getField=function(){return this.m_field;}
EditPeriodDate.prototype.setField=function(v){this.m_field=v;}
EditPeriodDate.prototype.reset=function(){this.m_controlFrom.reset();this.m_controlTo.reset();}
EditPeriodDate.prototype.focus=function(){this.getControlFrom().focus();}
EditPeriodDate.prototype.getValue=function(){return{"period":this.getControlPeriodSelect().getValue()};}
EditPeriodDate.prototype.isNull=function(){return(this.getControlFrom().isNull()&&this.getControlTo().isNull());}
EditPeriodDate.prototype.setValue=function(v){if(v){this.getControlPeriodSelect().setValue(v);this.setControlsEnabled(v);}}
EditPeriodDate.prototype.setInitValue=function(v){this.setValue(v);}
EditPeriodDate.prototype.reset=function(){if(this.getControlPeriodSelect())this.getControlPeriodSelect().setValue("all");}
EditPeriodDate.prototype.setCtrlDateTime=function(ctrl,dt){dt.setHours(0);dt.setMinutes(0);dt.setSeconds(0);dt.setTime(dt.getTime()+DateHelper.timeToMS(ctrl.getTimeValueStr()));ctrl.setValue(dt);}
EditPeriodDate.prototype.setControlsEnabled=function(per){var ctrl_en=(per=="all");this.getControlFrom().setEnabled(ctrl_en);this.getControlTo().setEnabled(ctrl_en);}
EditPeriodDate.prototype.setPredefinedPeriod=function(per){var ctrl_en=false;if(per=="all"){ctrl_en=true;this.getControlFrom().reset();this.getControlTo().reset();}
else if(per=="day"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.time());this.setCtrlDateTime(this.getControlTo(),DateHelper.time());}
else if(per=="week"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.weekStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.weekEnd());}
else if(per=="month"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.monthStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.monthEnd());}
else if(per=="quarter"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.quarterStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.quarterEnd());}
else if(per=="year"){this.setCtrlDateTime(this.getControlFrom(),DateHelper.yearStart());this.setCtrlDateTime(this.getControlTo(),DateHelper.yearEnd());}
this.setControlsEnabled(per);}
EditPeriodDate.prototype.addYearsToControl=function(control,years){var v=control.getValue();if(v){v.setFullYear(v.getFullYear()+years);control.setValue(v);}}
EditPeriodDate.prototype.addMonthsToControl=function(control,months){var v=control.getValue();if(v){v.setMonth(v.getMonth()+months);control.setValue(v);}}
EditPeriodDate.prototype.addDaysToControl=function(control,days){var v=control.getValue();if(v){v.setDate(v.getDate()+days);control.setValue(v);}}
EditPeriodDate.prototype.goFast=function(sign){var per=this.getControlPeriodSelect().getValue();if(per=="all"){this.addMonthsToControl(this.getControlFrom(),1*sign);}
else if(per=="year"){this.addYearsToControl(this.getControlFrom(),2*sign);this.addYearsToControl(this.getControlTo(),2*sign);}
else if(per=="quarter"){this.addYearsToControl(this.getControlFrom(),1*sign);this.addYearsToControl(this.getControlTo(),1*sign);}
else if(per=="month"){this.addYearsToControl(this.getControlFrom(),1*sign);this.getControlTo().setValue(DateHelper.monthEnd(this.getControlFrom().getValue()));}
else if(per=="week"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.getControlFrom().setValue(DateHelper.weekStart(this.getControlFrom().getValue()));this.getControlTo().setValue(DateHelper.weekEnd(this.getControlFrom().getValue()));}
else if(per=="day"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.addMonthsToControl(this.getControlTo(),1*sign);}}
EditPeriodDate.prototype.go=function(sign){var per=this.getControlPeriodSelect().getValue();if(per=="all"){this.addDaysToControl(this.getControlFrom(),1*sign);}
else if(per=="year"){this.addYearsToControl(this.getControlFrom(),1*sign);this.addYearsToControl(this.getControlTo(),1*sign);}
else if(per=="quarter"){this.addMonthsToControl(this.getControlFrom(),3*sign);this.addMonthsToControl(this.getControlTo(),3*sign);}
else if(per=="month"){this.addMonthsToControl(this.getControlFrom(),1*sign);this.getControlTo().setValue(DateHelper.monthEnd(this.getControlFrom().getValue()));}
else if(per=="week"){this.addDaysToControl(this.getControlFrom(),7*sign);this.getControlTo().setValue(DateHelper.weekEnd(this.getControlFrom().getValue()));}
else if(per=="day"){this.addDaysToControl(this.getControlFrom(),1*sign);this.addDaysToControl(this.getControlTo(),1*sign);}} 
EditPeriodDate.prototype.DEF_CAP_FROM="Период с:";EditPeriodDate.prototype.DEF_CAP_TO="-";EditPeriodDate.prototype.CONTR_DOWN_FAST_TITLE="несколько периодов назад";EditPeriodDate.prototype.CONTR_DOWN_TITLE="период назад";EditPeriodDate.prototype.CONTR_UP_FAST_TITLE="несколько периодов вперед";EditPeriodDate.prototype.CONTR_UP_TITLE="период вперед"; 
function EditPeriodDateTime(id,options){options=options||{};options.editClass=EditDateTime;EditPeriodDateTime.superclass.constructor.call(this,id,options);}
extend(EditPeriodDateTime,EditPeriodDate); 
function ButtonOK(id,options){options=options||{};ButtonOK.superclass.constructor.call(this,id,options);}
extend(ButtonOK,ButtonCmd); 
ButtonOK.prototype.DEF_CAPTION="ОК";ButtonOK.prototype.DEF_TITLE="Записать изменения и закрыть форму."; 
function ButtonSave(id,options){ButtonSave.superclass.constructor.call(this,id,options);}
extend(ButtonSave,ButtonOK); 
ButtonSave.prototype.DEF_CAPTION="Записать";ButtonSave.prototype.DEF_TITLE="записать изменения"; 
function ButtonCancel(id,options){options=options||{};ButtonCancel.superclass.constructor.call(this,id,options);}
extend(ButtonCancel,ButtonCmd); 
ButtonCancel.prototype.DEF_CAPTION="Закрыть";ButtonCancel.prototype.DEF_TITLE="Отказаться от записи и закрыть форму"; 
function ViewObjectAjx(id,options){options=options||{};ViewObjectAjx.superclass.constructor.call(this,id,options);this.addCommand(new Command(this.CMD_OK,{"publicMethod":options.writePublicMethod,"control":this.getControlOK(),"async":(options.cmdOkAsync!=undefined)?options.cmdOkAsync:true}));this.setCmd(options.cmd);this.m_detailDataSets={};this.setOnClose(options.onClose);if(!options.readPublicMethod&&options.controller){options.readPublicMethod=options.controller.getGetObject();}
this.setReadPublicMethod(options.readPublicMethod);this.setController(options.controller);this.setModel(options.model);this.m_dataType=options.dataType;var self=this;options.cmdOk=(options.cmdOk!=undefined)?options.cmdOk:true;if(options.controlOk||options.cmdOk){this.setControlOK(options.controlOk||new ButtonOK(id+":cmdOk",{"onClick":function(){self.getControlOK().setEnabled(false);self.m_oldSaveEn=false;if(self.getControlSave()){self.m_oldSaveEn=self.getControlSave().getEnabled();if(self.m_oldSaveEn)self.getControlSave().setEnabled(false);}
self.onOK(function(resp,errCode,errStr){self.getControlOK().setEnabled(true);if(self.m_oldSaveEn)self.getControlSave().setEnabled(true);self.setError(window.getApp().formatError(errCode,errStr));});}}));}
options.cmdSave=(options.cmdSave!=undefined)?options.cmdSave:true;if(options.controlSave||options.cmdSave){this.setControlSave(options.controlSave||new ButtonSave(id+":cmdSave",{"onClick":function(){self.getControlSave().setEnabled(false);self.m_oldOkEn=false;if(self.getControlOK()){self.m_oldOkEn=self.getControlOK().getEnabled();if(self.m_oldOkEn)self.getControlOK().setEnabled(false);}
self.onSave(null,null,function(){self.getControlSave().setEnabled(true);if(self.m_oldOkEn)self.getControlOK().setEnabled(true);});}}));}
options.cmdCancel=(options.cmdCancel!=undefined)?options.cmdCancel:true;if(options.controlCancel||options.cmdCancel){this.setControlCancel(options.controlCancel||new ButtonCancel(id+":cmdCancel",{"onClick":function(){self.onCancel();}}));}
options.cmdPrint=(options.printList!=undefined)?true:((options.cmdPrint!=undefined)?options.cmdPrint:false);if(options.controlPrint||options.cmdPrint){this.setControlPrint(options.controlPrint||new ButtonPrintList(id+":cmdPrint",{"printList":options.printList,"keyIds":options.printListKeyIds}));}
if(options.commandContainer||options.commandElements||options.cmdOk||options.cmdSave||options.cmdCancel||options.cmdPrint){this.m_commandContainer=options.commandContainer||new ControlContainer(id+":cmd-cont","DIV",{"elements":options.commandElements});}
this.setWritePublicMethod(options.writePublicMethod);this.addControls();this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();e.stopPropagation();return false;}};}
extend(ViewObjectAjx,ViewAjx);ViewObjectAjx.prototype.DEF_SAVE_CH_TIMEOUT=30000;ViewObjectAjx.prototype.CMD_OK="ok";ViewObjectAjx.prototype.m_controlCancel;ViewObjectAjx.prototype.m_controlOK;ViewObjectAjx.prototype.m_controlSave;ViewObjectAjx.prototype.m_controlPrint;ViewObjectAjx.prototype.m_onClose;ViewObjectAjx.prototype.m_readPublicMethod;ViewObjectAjx.prototype.m_commandContainer;ViewObjectAjx.prototype.m_replacedNode;ViewObjectAjx.prototype.m_cmd;ViewObjectAjx.prototype.m_controller;ViewObjectAjx.prototype.m_model;ViewObjectAjx.prototype.m_refType;ViewObjectAjx.prototype.m_dataType;ViewObjectAjx.prototype.m_editResult;ViewObjectAjx.prototype.m_detailDataSets;ViewObjectAjx.prototype.addKeyEvents=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&this.m_elements[elem_id].setInitValue){EventHelper.add(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}}
ViewObjectAjx.prototype.delKeyEvents=function(){for(var elem_id in this.m_elements){if(this.m_elements[elem_id]&&this.m_elements[elem_id].setInitValue){EventHelper.del(this.m_elements[elem_id].getNode(),"keydown",this.m_keyEvent,false);}}}
ViewObjectAjx.prototype.keyPressEvent=function(keyCode,event){var res=false;switch(keyCode){case 27:res=true;this.onCancel();break;case 13:if(event.ctrlKey){res=true;this.onOK();}
break;}
return res;}
ViewObjectAjx.prototype.addControls=function(){if(this.m_commandContainer){if(this.m_controlOK)this.m_commandContainer.addElement(this.m_controlOK);if(this.m_controlSave)this.m_commandContainer.addElement(this.m_controlSave);if(this.m_controlPrint)this.m_commandContainer.addElement(this.m_controlPrint);if(this.m_controlCancel)this.m_commandContainer.addElement(this.m_controlCancel);}}
ViewObjectAjx.prototype.close=function(res){if(this.m_onClose){this.m_onClose.call(this,res);}
else{window.closeResult=res;window.close();}}
ViewObjectAjx.prototype.onAfterUpsert=function(resp,initControls){this.m_editResult.updated=true;if(resp&&typeof(resp)=="object"&&resp.modelExists("InsertedId_Model")&&this.m_dataBindings&&this.m_dataBindings.length){this.m_editResult.newKeys={};var model_obj_class=this.getWritePublicMethod().getController().getObjModelClass();var ret_model=new model_obj_class({"data":resp.getModelData("InsertedId_Model")});var base_model_class;if(ret_model instanceof ModelXML){base_model_class=ModelXML;}
else if(ret_model instanceof ModelJSON){base_model_class=ModelJSON;}
else{throw Error(this.ER_UNSUPPORTED_BASE_MODEL);}
var ret_model_serv=new base_model_class("InsertedId_Model",{"data":resp.getModelData("InsertedId_Model")});if(ret_model_serv.getNextRow()){ret_model_serv_fields=ret_model_serv.getFields();}
ret_model.getNextRow();var ret_fields=ret_model.getFields();for(ret_id in ret_model_serv_fields){if(ret_model_serv_fields[ret_id].isSet()&&ret_fields[ret_id]){this.m_editResult.newKeys[ret_id]=ret_fields[ret_id].getValue();}}
if(initControls){for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var val;if(ret_model_serv_fields[f.getId()]&&ret_fields[f.getId()]&&ret_fields[f.getId()].isSet()){val=ret_fields[f.getId()].getValue();}
else{val=this.m_dataBindings[i].getControl().getValue();}
if(this.m_dataBindings[i].getControl().setInitValue){this.m_dataBindings[i].getControl().setInitValue(val);}
f.setValue(val);}}}}
else{for(var i=0;i<this.m_dataBindings.length;i++){this.defineField(i);var f=this.m_dataBindings[i].getField();if(f){var ctrl=this.m_dataBindings[i].getControl();if(ctrl){var val;val=ctrl.getValue();if(initControls&&ctrl.setInitValue){ctrl.setInitValue(val);}
if(val!=null&&typeof val=="object"&&val.getKeys){var keys=val.getKeys();for(key in keys){val=keys[key];break;}}
f.setValue(val);}}}}}
ViewObjectAjx.prototype.onOK=function(failFunc){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onAfterUpsert(resp,false);self.close(self.m_editResult);},failFunc);}
ViewObjectAjx.prototype.onSave=function(okFunc,failFunc,allFunc){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onSaveOk.call(self,resp);if(okFunc){okFunc.call(self);}},failFunc,allFunc);}
ViewObjectAjx.prototype.getModified=function(cmd){return ViewObjectAjx.superclass.getModified.call(this,(cmd)?cmd:this.CMD_OK);}
ViewObjectAjx.prototype.onCancel=function(){if(this.getModified(this.CMD_OK)){var self=this;WindowQuestion.show({"text":this.Q_SAVE_CHANGES,"timeout":this.SAVE_CH_TIMEOUT,"winObj":this.m_winObj,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.onOK();}
else if(res==WindowQuestion.RES_NO){self.close(this.m_editResult);}}});}
else{this.close(this.m_editResult);}}
ViewObjectAjx.prototype.setWriteTempEnabled=function(cmd){ViewObjectAjx.superclass.setWriteTempEnabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(true);}
ViewObjectAjx.prototype.setWriteTempDisabled=function(cmd){ViewObjectAjx.superclass.setWriteTempDisabled.call(this,cmd);if(this.m_controlSave)this.m_controlSave.setEnabled(false);}
ViewObjectAjx.prototype.toDOM=function(parent){ViewObjectAjx.superclass.toDOM.call(this,parent,this.getCmd());if(this.m_commandContainer)this.m_commandContainer.toDOM(parent);this.addKeyEvents();this.setDefRefVals();}
ViewObjectAjx.prototype.delDOM=function(){this.delKeyEvents();if(this.m_commandContainer)this.m_commandContainer.delDOM();ViewObjectAjx.superclass.delDOM.call(this);}
ViewObjectAjx.prototype.setControlOK=function(v){this.m_controlOK=v;}
ViewObjectAjx.prototype.getControlOK=function(){return this.m_controlOK;}
ViewObjectAjx.prototype.setControlSave=function(v){this.m_controlSave=v;}
ViewObjectAjx.prototype.getControlSave=function(){return this.m_controlSave;}
ViewObjectAjx.prototype.setControlCancel=function(v){this.m_controlCancel=v;}
ViewObjectAjx.prototype.getControlCancel=function(){return this.m_controlCancel;}
ViewObjectAjx.prototype.setControlPrint=function(v){this.m_controlPrint=v;}
ViewObjectAjx.prototype.getControlPrint=function(){return this.m_controlPrint;}
ViewObjectAjx.prototype.setWritePublicMethod=function(v){if(v&&window.getParam){var opts=window.getParam("editViewOptions");if(opts&&opts.keys){for(var key in opts.keys){v.setFieldValue(key,opts.keys[key]);}}}
this.getCommands()[this.CMD_OK].setPublicMethod(v);}
ViewObjectAjx.prototype.getWritePublicMethod=function(){return this.getCommands()[this.CMD_OK].getPublicMethod();}
ViewObjectAjx.prototype.setReadPublicMethod=function(v){this.m_readPublicMethod=v;}
ViewObjectAjx.prototype.getReadPublicMethod=function(){return this.m_readPublicMethod;}
ViewObjectAjx.prototype.setOnClose=function(v){this.m_onClose=v;}
ViewObjectAjx.prototype.getOnClose=function(){return this.m_onClose;}
ViewObjectAjx.prototype.setReplacedNode=function(v){this.m_replacedNode=v;}
ViewObjectAjx.prototype.getReplacedNode=function(){return this.m_replacedNode;}
ViewObjectAjx.prototype.setCmd=function(v){this.m_cmd=v;}
ViewObjectAjx.prototype.getCmd=function(){if(!this.m_cmd&&window.getParam){this.m_cmd=window.getParam("cmd");}
else if(!this.m_cmd){this.m_cmd="edit";}
return this.m_cmd;}
ViewObjectAjx.prototype.setWritePublicMethodOnController=function(){if(this.m_controller){var frm_cmd=this.getCmd();if(frm_cmd){var pm_id=(frm_cmd=="insert"||frm_cmd=="copy")?this.m_controller.METH_INSERT:this.m_controller.METH_UPDATE;if(this.m_controller.publicMethodExists(pm_id)){this.setWritePublicMethod(this.m_controller.getPublicMethod(pm_id));}}}}
ViewObjectAjx.prototype.setController=function(v){this.m_controller=v;this.setWritePublicMethodOnController();}
ViewObjectAjx.prototype.getController=function(){return this.m_controller;}
ViewObjectAjx.prototype.updateControlsFromResponse=function(resp){this.onAfterUpsert(resp,true);this.setCmd("update");this.setWritePublicMethod(null);this.setDetailKey();}
ViewObjectAjx.prototype.onSaveOk=function(resp){this.updateControlsFromResponse(resp);window.showNote(this.NOTE_SAVED);}
ViewObjectAjx.prototype.execCommand=function(cmd,sucFunc,failFunc,allFunc){if(cmd==this.CMD_OK&&!this.getWritePublicMethod()&&this.getController()){this.setWritePublicMethodOnController();}
ViewObjectAjx.superclass.execCommand.call(this,cmd,sucFunc,failFunc,allFunc);}
ViewObjectAjx.prototype.read=function(cmd,failFunc){var self=this;this.setReadTempDisabled();this.getReadPublicMethod().run({"ok":function(resp){self.onGetData(resp,cmd);},"fail":function(resp,erCode,erStr){self.setTempEnabled();if(failFunc){failFunc.call(self,resp,erCode,erStr);}}});}
ViewObjectAjx.prototype.setDetailKey=function(){for(var id in this.m_detailDataSets){var key=(this.m_detailDataSets[id].value)?this.m_detailDataSets[id].value:this.m_detailDataSets[id].field.getValue();if(key){var ds=this.m_detailDataSets[id].control;var pm=ds.getInsertPublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getUpdatePublicMethod();if(pm)pm.setFieldValue(this.m_detailDataSets[id].controlFieldId,key);var pm=ds.getReadPublicMethod();var contr=pm.getController();ds.setFilter({"field":this.m_detailDataSets[id].controlFieldId,"sign":contr.PARAM_SGN_EQUAL,"val":key});ds.onRefresh(function(){ds.setEnabled(true);});}}}
ViewObjectAjx.prototype.onGetData=function(resp,cmd){cmd=(cmd===undefined)?this.getCmd():((cmd===true)?"copy":cmd);ViewObjectAjx.superclass.onGetData.call(this,resp,cmd);if(!CommonHelper.isEmpty(this.m_detailDataSets)){this.setDetailKey();}
if(this.m_controlPrint&&this.m_model){var list=this.m_controlPrint.getObjList();var keys={};var keyIds=this.m_controlPrint.getKeyIds();var fields=this.m_model.getFields();if(!keyIds){for(var fid in fields){if(fields[fid].getPrimaryKey()){keys[fid]=fields[fid].getValue();}}}
else{for(var i=0;i<keyIds.length;i++){if(fields[keyIds[i]]){keys[keyIds[i]]=fields[keyIds[i]].getValue();}}}
for(var i=0;i<list.length;i++){list[i].setKeys(keys);}}}
ViewObjectAjx.prototype.addDetailDataSet=function(dsParams){this.m_detailDataSets[dsParams.control.getId()]=dsParams;var self=this;dsParams.control.initEditWinObjOrig=dsParams.control.initEditWinObj;dsParams.control.initEditWinObj=function(cmd){var ds_id=this.getId();var key=(self.m_detailDataSets[ds_id].value)?self.m_detailDataSets[ds_id].value:self.m_detailDataSets[ds_id].field.getValue();var o=this.getEditViewOptions()||{};o.keys={};o.keys[self.m_detailDataSets[ds_id].controlFieldId]=key;this.setEditViewOptions(o);this.initEditWinObjOrig(cmd);}}
ViewObjectAjx.prototype.copyControl=function(fromName,toName){var name=this.getElement(fromName).getValue();if(name&&!this.getElement(toName).getValue()){this.getElement(toName).setValue(name);}}
ViewObjectAjx.prototype.setDefRefVals=function(){}
ViewObjectAjx.prototype.setModel=function(v){this.m_model=v;}
ViewObjectAjx.prototype.getModel=function(){return this.m_model;}
ViewObjectAjx.prototype.setDataBindings=function(bindings){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){if(bindings[b_ind]){if(!bindings[b_ind].getModel()){bindings[b_ind].setModel(this.m_model);}
if(bindings[b_ind].getControl()){bd_ids.push(bindings[b_ind].getControl().getName());}}}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){var ctrl=this.getElement(f);if(!ctrl){ctrl=new HiddenKey(this.getId()+":"+f);this.addElement(ctrl);}
if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new DataBinding({"model":this.m_model,"control":ctrl,"field":fields[f]}));}}}}
ViewObjectAjx.superclass.setDataBindings.call(this,bindings);}
ViewObjectAjx.prototype.addDataBinding=function(bind){if(this.m_model&&!bind.getModel()){bind.setModel(this.m_model);}
ViewObjectAjx.superclass.addDataBinding.call(this,bind);}
ViewObjectAjx.prototype.setWriteBindings=function(bindings,cmd){if(this.m_model){var bd_ids=[];for(var b_ind=0;b_ind<bindings.length;b_ind++){var f_id;if(!bindings[b_ind]){throw new Error("ViewObjectAjx::setWriteBindings field index="+b_ind+". Field not defined!")}
if(bindings[b_ind].getField()){f_id=bindings[b_ind].getField().getId();}
else if(bindings[b_ind].getFieldId()){f_id=bindings[b_ind].getFieldId();}
else if(bindings[b_ind].getControl()){f_id=bindings[b_ind].getControl().getName();}
if(f_id){bd_ids.push(f_id);}}
var fields=this.m_model.getFields();for(var f in fields){if(fields[f].getPrimaryKey()){if(CommonHelper.inArray(f,bd_ids)<0){bindings.push(new CommandBinding({"control":this.getElement(f),"fieldId":f}));}}}}
this.getCommands()[(cmd?cmd:this.CMD_OK)].setBindings(bindings);}
ViewObjectAjx.prototype.getCommandContainer=function(){return this.m_commandContainer;}
ViewObjectAjx.prototype.getRefType=function(){if(!this.m_refType&&this.m_model&&this.m_dataType){var keys={};var f=this.m_model.getFields();for(var id in f){if(f[id].getPrimaryKey()&&this.elementExists(id)){keys[id]=this.getElement(id).getValue();}}
this.m_refType=new RefType({"keys":keys,"descr":"","dataType":this.m_dataType});}
return this.m_refType;} 
ViewObjectAjx.prototype.Q_SAVE_CHANGES="Сохранить изменения?";ViewObjectAjx.prototype.NOTE_SAVED="Объект записан";ViewObjectAjx.prototype.ER_UNSUPPORTED_BASE_MODEL="Данная базовая модель не поддерживается."; 
function ViewGridEditInlineAjx(id,options){options=options||{};options.tagName=options.tagName||this.DEF_TAG_NAME;options.cmdSave=false;this.m_columnTagName=options.columnTagName||this.DEF_COL_TAG_NAME;options.commandContainer=new ControlContainer(id+":cmd-cont",this.m_columnTagName,{"className":options.cmdContClassName||this.DEF_CMD_CLASS});this.setGrid(options.grid);this.setKeys(options.keys);this.m_row=options.row;ViewGridEditInlineAjx.superclass.constructor.call(this,id,options);}
extend(ViewGridEditInlineAjx,ViewObjectAjx);ViewGridEditInlineAjx.prototype.DEF_TAG_NAME="TR";ViewGridEditInlineAjx.prototype.DEF_COL_TAG_NAME="TD";ViewGridEditInlineAjx.prototype.DEF_CMD_CLASS="cmdButtons";ViewGridEditInlineAjx.prototype.m_grid;ViewGridEditInlineAjx.prototype.m_row;ViewGridEditInlineAjx.prototype.m_columnTagName;ViewGridEditInlineAjx.prototype.addEditControls=function(){var view_id=this.getId();var columns=this.getGrid().getHead().getColumns();var focus_set_elem;var autofocused=false;for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[col_id].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
var ctrl_opts=(column.getCtrlOptions()!=undefined)?CommonHelper.clone(column.getCtrlOptions()):{};ctrl_opts.visible=columns[col_id].getHeadCell().getVisible();var f=column.getField();if(!f){continue;}
var ctrl;if(column.getCtrlEdit()){var ctrl_class=column.getCtrlClass();if(!ctrl_class){var tp=f.getDataType();if(tp==f.DT_BOOL){ctrl_class=EditCheckBox;}
else if(tp==f.DT_DATE){ctrl_class=EditDate;}
else if(tp==f.DT_DATETIME){ctrl_class=EditDateTime;}
else if(tp==f.DT_ENUM){ctrl_class=EditSelect;}
else if(tp==f.DT_FLOAT){ctrl_class=EditFloat;}
else if(tp==f.DT_INT){ctrl_class=EditInt;}
else if(tp==f.DT_STRING){ctrl_class=EditString;}
else if(tp==f.DT_PWD){ctrl_class=EditPassword;}
else if(tp==f.DT_TEXT){ctrl_class=EditText;}
else{ctrl_class=EditString;}}
if(f.getValidator().getMaxLength()){ctrl_opts.maxLength=f.getValidator().getMaxLength();}
if(f.getValidator().getRequired()){ctrl_opts.required=true;}
var focus_skeep=false;if(f.getPrimaryKey()){ctrl_opts.noSelect=true;ctrl_opts.noClear=true;focus_skeep=f.getAutoInc();}
ctrl=new ctrl_class(view_id+":"+column.getId(),ctrl_opts);if(ctrl_opts.focus||ctrl_opts.focussed||ctrl_opts.focused||ctrl_opts.autofocus){autofocused=true;}
else if(!autofocused&&!focus_skeep&&!focus_set_elem&&(ctrl_opts.enabled==undefined||ctrl_opts.enabled)){focus_set_elem=ctrl;}}
else{ctrl=new Control(null,this.m_columnTagName,{"value":f.getValue()});}
this.addElement(ctrl);}
if(!autofocused&&focus_set_elem){focus_set_elem.setAttr("autofocus","autofocus");}}
ViewGridEditInlineAjx.prototype.addControls=function(){this.addEditControls();ViewGridEditInlineAjx.superclass.addControls.call(this);}
ViewGridEditInlineAjx.prototype.setKeysPublicMethod=function(pm){for(var k in this.m_keys){var fid="old_"+k;if(pm.fieldExists(fid)){pm.setFieldValue(fid,this.m_keys[k]);}}}
ViewGridEditInlineAjx.prototype.setWritePublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setWritePublicMethod.call(this,pm);if(pm){var columns=this.getGrid().getHead().getColumns();var com_b=this.getCommands()[this.CMD_OK].getBindings();for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[col_id].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
if(column.getField()){var f_id=(column.getCtrlBindField())?column.getCtrlBindField().getId():((column.getCtrlBindFieldId())?column.getCtrlBindFieldId():column.getField().getId());if(pm.fieldExists(f_id)){com_b.push(new CommandBinding({"field":pm.getField(f_id),"control":this.getElement(column.getId())}));}}}
this.setKeysPublicMethod(pm);}}
ViewGridEditInlineAjx.prototype.setReadBinds=function(pm){if(pm){var model_obj=pm.getController().getObjModelClass();var model=new model_obj();var columns=this.getGrid().getHead().getColumns();var bindings=[];for(var col_id=0;col_id<columns.length;col_id++){var column=undefined;if(this.m_row){cell_obj=this.m_row.getElement(columns[col_id].getId());if(cell_obj){column=cell_obj.getGridColumn();}}
if(!column){column=columns[col_id];}
if(column.getField()){var new_f=CommonHelper.clone(column.getField());if(column.getCtrlBindField()){model.addField(CommonHelper.clone(column.getCtrlBindField()));}
bindings.push(new DataBinding({"field":new_f,"model":model,"control":this.getElement(column.getId())}));}}
this.setDataBindings(bindings);}}
ViewGridEditInlineAjx.prototype.setReadPublicMethod=function(pm){ViewGridEditInlineAjx.superclass.setReadPublicMethod.call(this,pm);this.setReadBinds(pm);}
ViewGridEditInlineAjx.prototype.toDOM=function(parent){var elem;for(var elem_id in this.m_elements){elem=this.m_elements[elem_id];elem.toDOM(this.m_node);}
this.m_commandContainer.toDOM(this.m_node);if(this.m_replacedNode){this.m_replacedNode.parentNode.replaceChild(this.m_node,this.m_replacedNode);}
else{var rows=parent.getElementsByTagName(this.m_node.nodeName);if(rows.length==0){parent.appendChild(this.m_node);}
else{parent.insertBefore(this.m_node,rows[0]);}}
this.setFocus();this.addKeyEvents();}
ViewGridEditInlineAjx.prototype.setGrid=function(v){this.m_grid=v;}
ViewGridEditInlineAjx.prototype.getGrid=function(){return this.m_grid;}
ViewGridEditInlineAjx.prototype.setKeys=function(v){this.m_keys=v;}
ViewGridEditInlineAjx.prototype.getKeys=function(){return this.m_keys;}
ViewGridEditInlineAjx.prototype.getReplacedNode=function(){return this.m_replacedNode;}
ViewGridEditInlineAjx.prototype.addElement=function(ctrl,defOptions){if((!defOptions||!defOptions.contTagName)&&ctrl.setContTagName){ctrl.setContTagName(this.m_columnTagName);}
if((!defOptions||!defOptions.editContClassName)&&ctrl.setEditContClassName){ctrl.setEditContClassName(ctrl.DEF_EDIT_CONT_CLASS+" "+window.getBsCol(12));}
ViewGridEditInlineAjx.superclass.addElement.call(this,ctrl);}  
function ViewDOC(id,options){options=options||{};this.setProcessable(options.processable||true);var self=this;options.controlOk=options.controlOk||new ButtonCmd(id+":cmdOk",{"caption":this.BTN_OK_CAP,"title":this.BTN_OK_TITLE,"onClick":function(){if(self.getProcessable()){self.getElement("processed").setValue(true);}
self.onOK();},"app":options.app});options.controlSave=options.controlSave||new ButtonCmd(id+":cmdSave",{"caption":this.BTN_SAVE_CAP,"title":this.BTN_SAVE_TITLE,"onClick":function(){if(self.getProcessable()&&!self.getElement("processed").getValue()){self.getElement("processed").setValue(false);}
self.onSave();},"app":options.app});options.controlCancel=options.controlCancel||new ButtonCmd(id+":cmdCancel",{"caption":this.BTN_CLOSE_CAP,"title":this.BTN_CLOSE_TITLE,"onClick":function(){self.onCancel();},"app":options.app});this.m_detailDataSetsExist=(options.detailDataSetsExist!=undefined)?options.detailDataSetsExist:true;ViewDOC.superclass.constructor.call(this,id,options);this.addElement(new HiddenKey(id+":id"));if(this.getProcessable()){this.addElement(new HiddenKey(id+":processed",{}));}
if(this.m_detailDataSetsExist){this.addElement(new HiddenKey(id+":view_id",{"value":CommonHelper.md5(CommonHelper.uniqid())}));}}
extend(ViewDOC,ViewObjectAjx);ViewDOC.prototype.m_model;ViewDOC.prototype.m_detailDataSetsExist;ViewDOC.prototype.m_processable;ViewDOC.prototype.addDetailDataSet=function(grid){ViewDOC.superclass.addDetailDataSet.call(this,{"control":grid,"controlFieldId":"view_id","value":this.getElement("view_id").getValue()});}
ViewDOC.prototype.getViewId=function(){return(this.m_detailDataSetsExist)?this.getElement("view_id").getValue():null;}
ViewDOC.prototype.setDetailKey=function(){var contr=this.getReadPublicMethod().getController();var doc_id=0;if(this.getCmd()!="insert"){doc_id=this.getElement("id").getValue();}
var pm=contr.getPublicMethod("before_open");pm.setFieldValue("doc_id",doc_id);pm.setFieldValue("view_id",this.getElement("view_id").getValue());pm.run({"async":false});ViewDOC.superclass.setDetailKey.call(this);}
ViewDOC.prototype.getModified=function(cmd){var modified=ViewDOC.superclass.getModified.call(this,cmd);if(!modified){if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){if(this.m_detailDataSets[id].control.getModified()){modified=true;break;}}}}
return modified;}
ViewDOC.prototype.addDefDataBindings=function(){this.addDataBinding(new DataBinding({"control":this.getElement("id"),"model":this.m_model}));if(this.getProcessable()){this.addDataBinding(new DataBinding({"control":this.getElement("processed"),"model":this.m_model}));}
var cmd_ok=this.getCommand(this.CMD_OK);cmd_ok.addBinding(new CommandBinding({"control":this.getElement("id")}));if(this.getProcessable()){cmd_ok.addBinding(new CommandBinding({"control":this.getElement("processed")}));}}
ViewDOC.prototype.execCommand=function(cmd,sucFunc,failFunc){if(this.getCmd()=="insert"){var dt_ctrl=this.getElement("date_time");if(dt_ctrl){var dt_ctrl_val=dt_ctrl.getValue();if(dt_ctrl_val.getHours()==0&&dt_ctrl_val.getMinutes()==0&&dt_ctrl_val.getSeconds()==0){tm=DateHelper.time();dt_ctrl_val.setHours(tm.getHours(),tm.getMinutes(),tm.getSeconds());dt_ctrl.setValue(dt_ctrl_val);}}}
ViewDOC.superclass.execCommand.call(this,cmd,sucFunc,failFunc);}
ViewDOC.prototype.beforeExecCommand=function(cmd,pm){ViewDOC.superclass.beforeExecCommand.call(this,cmd,pm);if(this.m_detailDataSetsExist&&pm.fieldExists("view_id")){pm.setFieldValue("view_id",this.getViewId());}}
ViewDOC.prototype.getProcessable=function(){return this.m_processable;}
ViewDOC.prototype.setProcessable=function(v){this.m_processable=v;}
ViewDOC.prototype.onSaveOk=function(resp){ViewDOC.superclass.onSaveOk.call(this,resp);if(this.m_detailDataSetsExist){for(var id in this.m_detailDataSets){this.m_detailDataSets[id].control.setModified(false);}}} 
ViewDOC.prototype.BTN_OK_CAP="Провести";ViewDOC.prototype.BTN_OK_TITLE="Провести документ и закрыть форму";ViewDOC.prototype.BTN_SAVE_CAP="Записать";ViewDOC.prototype.BTN_SAVE_TITLE="Записать документ";ViewDOC.prototype.BTN_CLOSE_CAP="Закрыть";ViewDOC.prototype.BTN_CLOSE_TITLE="Закрыть форму";ViewDOC.prototype.CTRL_NUM_LABEL="№";ViewDOC.prototype.CTRL_DATE_LABEL="от";ViewDOC.prototype.NOTE_SAVED="Документ записан"; 
var WindowPrint={show:function(options){options=options||{};var win_opts={"name":"Print?"+CommonHelper.uniqid()};var print_and_close=(options.print!=undefined)?options.print:true;win_opts.title=this.TITLE+((options.title!=undefined)?options.title:"");var template=options.template||window.getApp().getTemplate("WindowPrint");win_opts.content=Mustache.render(template.replace("{{content}}",options.content),{"title":win_opts.title,"scriptId":window.getApp().getServVar("scriptId")});var winObj=new WindowForm(win_opts);var newWin=winObj.open();newWin.document.close();var win_del=setInterval(check_state,10);function check_state(){if(newWin.document.readyState=="complete"){clearInterval(win_del);newWin.focus();if(print_and_close){newWin.print();newWin.close();}}}}} 
WindowPrint.TITLE="Печать";WindowPrint.CHROME_NOTE="используйте кнопку 'Отмена' для закрытия окна предварительного просмотра.\n"; 
var WindowQuestion={RES_YES:0,RES_NO:1,RES_CANCEL:2,show:function(options){options=options||{};var self=this;var yes=(options.yes!=undefined)?options.yes:true;var no=(options.no!=undefined)?options.no:true;var cancel=(options.cancel!=undefined)?options.cancel:true;var timeout=options.timeout||0;this.m_callBack=options.callBack;this.m_modalId="quest-modal";this.m_modal=new WindowFormModalBS(this.m_modalId,{content:new Control(this.m_modalId+":cont","div",{value:options.text})});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-yes").getNode().focus();}
this.m_modal.close=function(res){self.delEvents();self.m_modalCloseFunc.call(self.m_modal);self.m_callBack(res);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};if(yes){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-yes",{"caption":this.BTN_YES_CAP,"focus":true,"attrs":{"title":this.YES_TITLE,"tabindex":0},"onClick":function(){self.m_modal.close(self.RES_YES);}}));}
if(no){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-no",{"caption":this.BTN_NO_CAP,"attrs":{"title":this.NO_TITLE,"tabindex":1},"onClick":function(){self.m_modal.close(self.RES_NO);}}));}
if(cancel){this.m_modal.m_footer.addElement(new btn_class(this.m_modalId+":btn-cancel",{"caption":this.BTN_CANCEL_CAP,"attrs":{"data-dismiss":"modal","title":this.CANCEL_TITLE,"tabindex":2},"onClick":function(){self.m_modal.close(self.RES_CANCEL);}}));}
this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 39:break;case 37:break;case 13:this.m_modal.close(this.RES_YES);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;}} 
WindowQuestion.YES_TITLE="ответить утвердительно";WindowQuestion.NO_TITLE="ответить отрицательно";WindowQuestion.CANCEL_TITLE="отменить действие";WindowQuestion.BTN_YES_CAP="Да";WindowQuestion.BTN_NO_CAP="Нет";WindowQuestion.BTN_CANCEL_CAP="Отмена"; 
var WindowSearch={RES_OK:0,RES_CANCEL:2,show:function(options){options=options||{};var self=this;this.m_callBack=options.callBack;this.m_modalId="search-modal";var cur_opts;var select_opts=[];for(var i=0;i<options.columns.length;i++){var opt=new EditSelectOption(this.m_modalId+":where:"+i,{"value":options.columns[i].id,"checked":options.columns[i].current,"descr":options.columns[i].descr});opt.searchOptions=options.columns[i];select_opts.push(opt);if(options.columns[i].current){cur_opts=opt.searchOptions;}}
this.setSearchCtrl(cur_opts,options.text);this.m_modal=new WindowFormModalBS(this.m_modalId,{"contentHead":this.HEAD_TITLE,"content":new ControlContainer(this.m_modalId+":cont","DIV",{"elements":[this.m_searchCtrl,new EditSelect(this.m_modalId+":where",{"labelCaption":this.PAR_WHERE_CAP,"elements":select_opts,"addNotSelected":false,"events":{"change":function(){var opts=this.getOption().searchOptions;var how_ctrl=self.m_modal.m_body.getElement("cont").getElement("how");how_ctrl.setVisible(opts.typeChange);how_ctrl.setValue(opts.searchType);self.setSearchCtrl(opts);self.m_searchCtrl.toDOMBefore(self.m_modal.m_body.getElement("cont").getElement("where").m_container.getNode());}}}),new EditRadioGroup(this.m_modalId+":how",{"labelCaption":this.PAR_HOW_CAP,"visible":cur_opts.typeChange,"elements":[new EditRadio(this.m_modalId+":cont:on_beg",{"labelCaption":this.PAR_HOW_ON_BEG,"name":"how_opt","value":"on_beg","checked":(cur_opts.searchType=="on_beg")}),new EditRadio(this.m_modalId+":cont:on_part",{"labelCaption":this.PAR_HOW_ON_PART,"name":"how_opt","value":"on_part","checked":(cur_opts.searchType=="on_part")}),new EditRadio(this.m_modalId+":cont:on_match",{"labelCaption":this.PAR_HOW_ON_MATCH,"name":"how_opt","value":"on_match","checked":(cur_opts.searchType=="on_match")})]})]}),"controlOk":new ButtonCmd(this.m_modalId+":btn-ok",{"caption":this.BTN_FIND_CAP,"title":this.BTN_FIND_TITLE,"onClick":function(){self.m_modal.close(self.RES_OK);}}),"cmdCancel":true});this.m_modalOpenFunc=this.m_modal.open;this.m_modalCloseFunc=this.m_modal.close;this.m_modal.open=function(){self.addEvents();self.m_modalOpenFunc.call(self.m_modal);self.m_modal.m_footer.getElement("btn-ok").getNode().focus();}
this.m_modal.close=function(res){var res_struc;if(res==self.RES_OK){var cont=self.m_modal.m_body.getElement("cont");var ctrl=cont.getElement("search_ctrl");if(ctrl.getIsRef&&ctrl.getIsRef()&&!(ctrl.searchField.getDataType()==Field.prototype.DT_JSON||ctrl.searchField.getDataType()==Field.prototype.DT_JSONB)){var keyIds=ctrl.getKeyIds();if(keyIds.length>=1){ctrl.searchField.setValue(ctrl.getKeys()[keyIds[0]]);}}
else{var val=ctrl.getValue();if(ctrl.setValid)ctrl.setValid();try{if(ctrl.getValidator&&ctrl.getValidator())ctrl.getValidator().validate(val);ctrl.searchField.setValue(val);}
catch(e){if(ctrl.setNotValid)ctrl.setNotValid(e.message);return;}}
res_struc={"search_str":ctrl.searchField.getValueXHR(),"where":ctrl.searchField.getId(),"how":cont.elementExists("how")?cont.getElement("how").getValue():"match"}}
self.delEvents();self.m_callBack(res,res_struc);self.m_modalCloseFunc.call(self.m_modal);}
var btn_class=options.buttonClass||ButtonCmd;this.m_keyEvent=function(e){e=EventHelper.fixKeyEvent(e);if(self.keyPressEvent(e.keyCode,e)){e.preventDefault();return false;}};this.m_modal.open();return this.RES_NO;},addEvents:function(){EventHelper.add(window,'keydown',this.m_keyEvent,false);},delEvents:function(){EventHelper.del(window,'keydown',this.m_keyEvent,false);},keyPressEvent:function(keyCode,event){var res=false;switch(keyCode){case 13:this.m_modal.close(this.RES_OK);res=true;break;case 27:this.m_modal.close(this.RES_CANCEL);res=true;break;}
return res;},setSearchCtrl:function(opts,ctrlValue){if(this.m_searchCtrl){this.m_searchCtrl.delDOM();delete this.m_searchCtrl;}
var ctrl_opts={"labelCaption":this.STR_CAP,"placeholder":this.STR_PLACEHOLDER,"title":this.STR_TITLE,"maxlength":"500","value":ctrlValue,"focus":true};this.m_searchCtrl=new opts.ctrlClass(this.m_modalId+":cont:search_ctrl",ctrl_opts);this.m_searchCtrl.searchField=opts.field;}} 
WindowSearch.HEAD_TITLE="Поиск по колонке";WindowSearch.STR_CAP="Что искать:";WindowSearch.STR_PLACEHOLDER="Строка поиска";WindowSearch.STR_TITLE="Поиск будет выполнен по данной строке в соответствии с выбранными параметрами";WindowSearch.PAR_WHERE_CAP="Где искать:";WindowSearch.PAR_HOW_CAP="Как искать:";WindowSearch.PAR_HOW_ON_BEG="По началу строки";WindowSearch.PAR_HOW_ON_PART="По части строки";WindowSearch.PAR_HOW_ON_MATCH="По точному совпадению";WindowSearch.BTN_FIND_CAP="Найти";WindowSearch.BTN_FIND_TITLE="Выполнить поиск"; 
function WindowForm(options){options=options||{};this.m_id=options.id||CommonHelper.uniqid();options.height=options.height||this.DEF_HEIGHT;options.width=options.width||this.DEF_WIDTH;options.fullScreen=options.fullScreen||this.DEF_FULL_SCREEN;if(options.fullScreen){options.width=DOMHelper.getViewportWidth();options.height=DOMHelper.getViewportHeight();}
this.setFullScreen(options.fullScreen);this.setDirectories(options.directories||this.DEF_DIRECTORIES);this.setChannelMode(options.channelMode||this.DEF_CHANNEL_MODE);this.setHeight(options.height);if(options.center){this.m_center=true;this.setCenter(options.height||this.DEF_HEIGHT,options.width||this.DEF_WIDTH);}
else{if(options.centerLeft){this.setLeftCenter(options.width||this.DEF_WIDTH);}
else{this.setLeft(options.left||this.DEF_LEFT);}
if(options.centerTop){this.setTopCenter(options.height||this.DEF_HEIGHT);}
else{this.setTop(options.top||this.DEF_TOP);}}
this.setLocation((options.location!=undefined)?options.location:this.DEF_LOCATION);this.setMenuBar((options.menuBar!=undefined)?options.menuBar:this.DEF_MENU_BAR);this.setResizable((options.resizable!=undefined)?options.resizable:this.DEF_RESIZABLE);this.setScrollBars((options.scrollBars!=undefined)?options.scrollBars:this.DEF_SCROLL_BARS);this.setStatus((options.status!=undefined)?options.status:this.DEF_STATUS);this.setTitleBar((options.titleBar!=undefined)?options.titleBar:this.DEF_TITLE_BAR);this.setWidth(options.width);this.setName(options.name||this.DEF_WIN_NAME);this.setHost(options.host||"");this.setScript(options.script||(options.content==undefined)?this.DEF_SCRIPT:undefined);this.setURLParams(options.URLParams||"");this.setCaption(options.caption||options.title||"");this.m_content=options.content;this.setOnClose(options.onClose);this.setParams(options.params);}
WindowForm.prototype.DEF_DIRECTORIES="0";WindowForm.prototype.DEF_CHANNEL_MODE="0";WindowForm.prototype.DEF_FULL_SCREEN=0;WindowForm.prototype.DEF_HEIGHT="500";WindowForm.prototype.DEF_LEFT="0";WindowForm.prototype.DEF_LOCATION="0";WindowForm.prototype.DEF_MENU_BAR=0;WindowForm.prototype.DEF_RESIZABLE="1";WindowForm.prototype.DEF_SCROLL_BARS="1";WindowForm.prototype.DEF_STATUS="0";WindowForm.prototype.DEF_TITLE_BAR="0";WindowForm.prototype.DEF_TOP="0";WindowForm.prototype.DEF_WIDTH="600";WindowForm.prototype.DEF_WIN_NAME="_blank";WindowForm.prototype.DEF_SCRIPT="index.php";WindowForm.prototype.DEF_CENTER_TOP_OFFSET="20";WindowForm.prototype.LEFT_STEP=50;WindowForm.prototype.LEFT_MAX=500;WindowForm.prototype.TOP_STEP=50;WindowForm.prototype.TOP_MAX=500;WindowForm.prototype.m_directories;WindowForm.prototype.m_channelMode;WindowForm.prototype.m_fullScreen;WindowForm.prototype.m_height;WindowForm.prototype.m_left;WindowForm.prototype.m_location;WindowForm.prototype.m_menuBar;WindowForm.prototype.m_resizable;WindowForm.prototype.m_scrollBars;WindowForm.prototype.m_status;WindowForm.prototype.m_titleBar;WindowForm.prototype.m_top;WindowForm.prototype.m_width;WindowForm.prototype.m_name;WindowForm.prototype.m_host;WindowForm.prototype.m_script;WindowForm.prototype.m_URLParams;WindowForm.prototype.m_WindowForm;WindowForm.prototype.m_onClose;WindowForm.prototype.m_params;WindowForm.prototype.open=function(){var win_opts="directories="+this.m_directories+","+"channelMode="+this.m_channelMode+","+"fullScreen="+this.m_fullScreen+","+"height="+this.m_height+","+"left="+this.m_left+","+"location="+this.m_location+","+"menubar="+this.m_menuBar+","+"resizable="+this.m_resizable+","+"scrollbars="+this.m_scrollBars+","+"status="+this.m_status+","+"titlebar="+this.m_titleBar+","+"top="+this.m_top+","+"width="+this.m_width;var url="";if(this.m_script){url=this.getURL();}
if(CommonHelper.isIE()&&CommonHelper.getIEVersion()<=9){this.m_WindowForm=window.open("","",(this.m_name=="_blank")?"":win_opts);if(this.m_WindowForm)this.m_WindowForm.location=url;}
else{this.m_WindowForm=window.open(url,this.m_name,(this.m_name=="_blank")?"":win_opts);}
if(!this.m_WindowForm){throw new Error(this.ER_OPEN);}
if(url==""&&this.m_content){this.m_WindowForm.document.write(this.m_content);}
var self=this;this.m_WindowForm.onClose=function(res){if(self.m_onClose){self.m_onClose.call(self,self.m_WindowForm.closeResult);self.m_WindowForm.onClose=undefined;}}
this.m_WindowForm.getParam=function(id){return self.getParam(id);}
this.m_WindowForm.getApp=function(){return window.getApp();}
window.m_childForms=window.m_childForms||{};window.m_childForms[this.m_id]=this.m_WindowForm;return this.m_WindowForm;}
WindowForm.prototype.close=function(){if(this.m_WindowForm){this.m_WindowForm.close();}}
WindowForm.prototype.setDirectories=function(directories){this.m_directories=directories;}
WindowForm.prototype.setChannelMode=function(channelMode){this.m_channelMode=channelMode;}
WindowForm.prototype.setFullScreen=function(fullScreen){this.m_fullScreen=fullScreen;}
WindowForm.prototype.setHeight=function(height){if(height){this.m_height=height;}}
WindowForm.prototype.setLeft=function(left){this.m_left=left;}
WindowForm.prototype.setLocation=function(location){this.m_location=location;}
WindowForm.prototype.setMenuBar=function(menuBar){this.m_menuBar=menuBar;}
WindowForm.prototype.setResizable=function(resizable){this.m_resizable=resizable;}
WindowForm.prototype.setScrollBars=function(scrollBars){this.m_scrollBars=scrollBars;}
WindowForm.prototype.setStatus=function(status){this.m_status=status;}
WindowForm.prototype.setTitleBar=function(titleBar){this.m_titleBar=titleBar;}
WindowForm.prototype.setTop=function(top){if(top){this.m_top=top;}}
WindowForm.prototype.setWidth=function(width){if(width){this.m_width=width;}}
WindowForm.prototype.setSize=function(w,h){this.m_w=width;this.m_h=h;}
WindowForm.prototype.setName=function(name){this.m_name=name;}
WindowForm.prototype.getScript=function(){return this.m_script;}
WindowForm.prototype.setScript=function(script){this.m_script=script;}
WindowForm.prototype.getHost=function(){var host=this.m_host;if(host&&host.length&&host.substring(host.length-1,host.length)!="/"){host+="/";}
return host;}
WindowForm.prototype.setHost=function(host){this.m_host=host;}
WindowForm.prototype.getURL=function(){var s=this.getScript();if(!s){return;}
var h=this.getHost();var p=this.getURLParams();if(p){p="?"+p;}
else{p="";}
return(h+s+p);}
WindowForm.prototype.setURLParams=function(URLParams){this.m_URLParams=URLParams;}
WindowForm.prototype.getURLParams=function(){return this.m_URLParams;}
WindowForm.prototype.setLeftCenter=function(width){var l=Math.floor(DOMHelper.getViewportWidth()/2)-Math.floor(width/2);this.setLeft(l);}
WindowForm.prototype.setTopCenter=function(height){var t=Math.floor(DOMHelper.getViewportHeight()/2)-Math.floor(height/2);this.setTop(t+this.DEF_CENTER_TOP_OFFSET);}
WindowForm.prototype.setCenter=function(height,width){this.setLeftCenter(width);this.setTopCenter(height);}
WindowForm.prototype.getWindowForm=function(){return this.m_WindowForm;}
WindowForm.prototype.getContentParent=function(){return this.m_WindowForm.document.body;}
WindowForm.prototype.setFocus=function(){return this.m_WindowForm.focus();}
WindowForm.prototype.setTitle=function(title){this.m_title=title;}
WindowForm.prototype.setCaption=function(caption){this.setTitle(caption);}
WindowForm.prototype.setOnClose=function(f){this.m_onClose=f;}
WindowForm.prototype.setParams=function(params){this.m_params=params||{};}
WindowForm.prototype.setParam=function(id,val){this.m_params[id]=val;}
WindowForm.prototype.getParam=function(id){return this.m_params[id];}
WindowForm.prototype.getId=function(){return this.m_id;} 
WindowForm.prototype.ER_OPEN="Ошибка открытия окна"; 
function WindowFormObject(options){options=options||{};options.host=options.host||window.getApp().getHost();options.script=options.script||window.getApp().getScript();options.URLParams=options.URLParams||"";if(options.formName){options.controller=options.controller||options.formName+"_Controller";options.template=options.template||options.formName;}
options.view=options.view||"Child";options.keys=options.keys||{"id":null};if(options.fullScreen==undefined&&options.width==undefined&&options.height==undefined){options.fullScreen=true;}
options.name=options.formName+CommonHelper.serialize(options.keys);this.setController(options.controller);this.setMethod(options.method);this.setTemplate(options.template);this.setView(options.view);this.setKeys(options.keys);this.setMode((options.params&&options.params.cmd)?options.params.cmd:null);WindowFormObject.superclass.constructor.call(this,options);}
extend(WindowFormObject,WindowForm);WindowFormObject.prototype.m_controller;WindowFormObject.prototype.m_method;WindowFormObject.prototype.m_template;WindowFormObject.prototype.m_view;WindowFormObject.prototype.m_keys;WindowFormObject.prototype.m_keyIds;WindowFormObject.prototype.m_mode;WindowFormObject.prototype.getURLParams=function(){var str="c="+this.m_controller;str+="&f="+this.m_method;if(this.m_template)str+="&t="+this.m_template;if(this.m_mode)str+="&mode="+this.m_mode;str+="&v="+this.m_view;for(var fid in this.m_keys){if(this.m_keys[fid]!=undefined){str+="&"+fid+"="+this.m_keys[fid];}}
if(this.m_URLParams){str+="&"+this.m_URLParams;}
return str;}
WindowFormObject.prototype.setKeys=function(v){this.m_keyIds=[];for(var keyid in v){this.m_keyIds.push(keyid);}
this.m_keys=v}
WindowFormObject.prototype.getKeys=function(){return this.m_keys;}
WindowFormObject.prototype.getKeyIds=function(){return this.m_keyIds;}
WindowFormObject.prototype.setController=function(v){this.m_controller=v}
WindowFormObject.prototype.getController=function(){return this.m_controller;}
WindowFormObject.prototype.setMethod=function(v){this.m_method=v}
WindowFormObject.prototype.getMethod=function(){return this.m_method;}
WindowFormObject.prototype.setView=function(v){this.m_view=v}
WindowFormObject.prototype.getView=function(){return this.m_view;}
WindowFormObject.prototype.setTemplate=function(v){this.m_template=v}
WindowFormObject.prototype.getTemplate=function(){return this.m_template;}
WindowFormObject.prototype.setMode=function(v){this.m_mode=v}
WindowFormObject.prototype.getMode=function(){return this.m_mode;} 
WindowFormObject.prototype.ER_NO_CONTROLLER="Не задан котроллер.";WindowFormObject.prototype.ER_NO_METHOD="Не задан метод."; 
function WindowFormModalBS(id,options){options=options||{};var self=this;options.className=options.className||"modal";options.attrs=options.attrs||{};options.attrs.role="dialog";WindowFormModalBS.superclass.constructor.call(this,id,"div",options);this.m_dialog=new ControlContainer(id+"_dial","div",{className:"modal-dialog"});this.m_content=new ControlContainer(id+"_cont","div",{className:"modal-content"});this.m_header=new ControlContainer(id+"_head","div",{className:(options.headerClassName||"modal-header")});if(options.cmdCancel||options.controlCancel||options.onClickCancel||options.cmdClose){this.m_header.addElement(new Control(null,"button",{"attrs":{"type":"button","class":"close","aria-hidden":"true"},"value":"×","events":{"click":options.onClickCancel||function(){self.close();}}}));}
if(options.contentHead){if(typeof(options.contentHead)=="object"){this.m_header.addElement(options.contentHead);}
else{this.m_header.addElement(new Control(id+":head:label","h4",{"className":"modal-title","value":options.contentHead}));}}
this.m_body=new ControlContainer(id+":body","div",{className:"modal-body"});if(options.content){this.m_body.addElement(options.content);}
this.m_footer=new ControlContainer(id+":footer","div",{className:"modal-footer"});if(options.contentFoot){this.m_footer.addElement(options.contentFoot);}
if(options.cmdOk||options.controlOk||options.onClickOk){this.m_footer.addElement(options.controlOk||new ButtonCmd(id+":btn-ok",{"caption":options.controlOkCaption||this.BTN_OK_CAP,"title":options.controlOkTitle||this.BTN_OK_TITLE,"onClick":options.onClickOk}));}
if(options.cmdCancel||options.controlCancel||options.onClickCancel){this.m_footer.addElement(options.controlCancel||new ButtonCmd(id+":btn-cancel",{"caption":options.controlCancelCaption||this.BTN_CANCEL_CAP,"title":options.controlCancelTitle||this.BTN_CANCEL_TITLE,"onClick":options.onClickCancel||function(){self.close();}}));}
this.m_content.addElement(this.m_header);this.m_content.addElement(this.m_body);this.m_content.addElement(this.m_footer);this.m_dialog.addElement(this.m_content);}
extend(WindowFormModalBS,ControlContainer);WindowFormModalBS.prototype.m_header;WindowFormModalBS.prototype.m_body;WindowFormModalBS.prototype.m_foot;WindowFormModalBS.prototype.toDOM=function(parent){WindowFormModalBS.superclass.toDOM.call(this,parent);var self=this;this.m_dialog.toDOM(this.getNode());$(this.getNode()).on('shown.bs.modal',function(){$('[autofocus]',this).focus();});$(this.getNode()).on('hidden.bs.modal',function(){if(self.m_dialog)self.m_dialog.delDOM();});$(this.getNode()).modal({show:true,keyboard:true});}
WindowFormModalBS.prototype.delDOM=function(){$(this.getNode()).modal("hide");if(this.m_dialog)this.m_dialog.delDOM();WindowFormModalBS.superclass.toDOM.call(this);}
WindowFormModalBS.prototype.open=function(){this.toDOM(document.body);}
WindowFormModalBS.prototype.close=function(){this.delDOM();}
WindowFormModalBS.prototype.getContentParent=function(){return this.m_body.getNode();}
WindowFormModalBS.prototype.setCaption=function(caption){}
WindowFormModalBS.prototype.setFocus=function(){} 
WindowFormModalBS.prototype.BTN_OK_CAP="OK";WindowFormModalBS.prototype.BTN_OK_TITLE="Записать и закрыть форму";WindowFormModalBS.prototype.BTN_CANCEL_CAP="Закрыть";WindowFormModalBS.prototype.BTN_CANCEL_TITLE="Закрыть форму"; 
function WindowMessage(){this.m_messages=[];this.m_window=null;this.m_model=null;this.m_bsCol=null;}
WindowMessage.prototype.ID="windowMessage";WindowMessage.prototype.FLASH_TIME=1000;WindowMessage.prototype.BS_COL=2;WindowMessage.prototype.TP_ER="danger";WindowMessage.prototype.TP_WARN="warning";WindowMessage.prototype.TP_INFO="info";WindowMessage.prototype.TP_OK="success";WindowMessage.prototype.m_messages;WindowMessage.prototype.m_window;WindowMessage.prototype.m_model;WindowMessage.prototype.m_bsCol;WindowMessage.prototype.show=function(options){options=options||{};var mes_id=CommonHelper.uniqid();options.type=options.type||this.TP_INFO;this.m_messages.push({id:mes_id,date_time:DateHelper.time(),subject:null,content:options.text,user_descr:null,message_type:options.type,importance_level:null,require_view:null});this.m_messages.sort(function(a,b){if(a.date_time>b.date_time){return 1;}
if(a.date_time<b.date_time){return-1;}
return 0;});this.m_bsCol=options.bsCol;this.toDOM();if(options.callBack){options.callBack();}
return mes_id;};WindowMessage.prototype.toDOM=function(){var self=this;if(!this.m_window){var n=DOMHelper.getElementsByAttr("windowMessage",window.body,"class",true);if(!n.length){throw Error("Message window not found!");}
if(!n[0].id){n[0].id=CommonHelper.uniqid();}
this.m_window=new ControlContainer(n[0].id,"DIV",{"className":"panel panel-default windowMessage"});var head=new ControlContainer(this.ID+":head","DIV",{});var head_cont=new ControlContainer(this.ID+":head-cont","DIV");head_cont.addElement(new ButtonCtrl(this.ID+":close",{"title":"закрыть","glyph":"glyphicon-remove","onClick":function(){self.m_messages=[];self.delDOM();}}));head.addElement(head_cont);this.m_content=new ControlContainer(this.ID+":content","DIV");var body=new ControlContainer(this.ID+":body","DIV",{});body.addElement(this.m_content);this.m_window.addElement(head);this.m_window.addElement(body);}
else{}
this.m_window.setVisible(true);var dwin=CommonHelper.nd("windowData");if(dwin){DOMHelper.setAttr(dwin,"class",this.m_bsCol+(12-this.BS_COL));}
this.m_content.delDOM();this.m_content.clear();var t=0;for(var i=this.m_messages.length-1;i>=0;i--){var item_class="alert alert-"+this.m_messages[i].message_type;item_class+=(i==this.m_messages.length-1)?" flashit":"";var cont=new ControlContainer(this.m_messages[i].id,"P",{"className":item_class});if(i==this.m_messages.length-1){this.m_flashCont=cont;setTimeout(function(){DOMHelper.delClass(self.m_flashCont.getNode(),"flashit");},this.FLASH_TIME);}
cont.addElement(new Control(this.m_messages[i].id+":head","DIV",{"value":DateHelper.format(this.m_messages[i].date_time,"H:i:s")}));cont.addElement(new ControlContainer(this.m_messages[i].id+":title","DIV",(typeof(this.m_messages[i].content)=="string")?{"value":this.m_messages[i].content}:this.m_messages[i].content));this.m_content.addElement(cont);t++;}
this.m_window.setClassName("panel panel-default windowMessage"+((dwin)?(" "+this.m_bsCol+this.BS_COL):""));this.m_window.toDOM();};WindowMessage.prototype.delDOM=function(){if(this.m_window){this.m_window.setVisible(false);var dwin=CommonHelper.nd("windowData");if(dwin){DOMHelper.setAttr(dwin,"class",this.m_bsCol+"12");}}} 
function GridCellHeadDOCProcessed(id,options){options=options||{};options.value=" ",options.className=window.getBsCol(1),options.columns=[new GridColumn("processed",{"field":options.model.getField("processed"),"assocClassList":{"true":"glyphicon glyphicon-check","false":"glyphicon glyphicon-unchecked"}})];GridCellHeadDOCProcessed.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCProcessed,GridCellHead); 
function GridCellHeadDOCDate(id,options){options=options||{};options.value="Дата",options.sortable=true;options.sort="asc";options.columns=[new GridColumnDate({"field":options.model.getField("date_time"),"dateFormat":window.getApp().getJournalDateFormat(),"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})];GridCellHeadDOCDate.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCDate,GridCellHead); 
function GridCellHeadDOCNumber(id,options){options=options||{};options.value="Номер",options.sortable=true;options.columns=[new GridColumn({"field":options.model.getField("number")})];GridCellHeadDOCNumber.superclass.constructor.call(this,id,options);}
extend(GridCellHeadDOCNumber,GridCellHead); 
function stopEvent(evt){evt||window.event;if(evt.stopPropagation){evt.stopPropagation();evt.preventDefault();}else if(typeof evt.cancelBubble!="undefined"){evt.cancelBubble=true;evt.returnValue=false;}
return false;}
function getElement(evt){if(window.event){return window.event.srcElement;}else{return evt.currentTarget;}}
function stopSelect(obj){if(typeof obj.onselectstart!='undefined'){EventHelper.add(obj,"selectstart",function(){return false;});}}
function getCaretEnd(obj,winDocum){if(typeof obj.selectionEnd!="undefined"){return obj.selectionEnd;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToEnd",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function getCaretStart(obj,winDocum){if(typeof obj.selectionStart!="undefined"){return obj.selectionStart;}else if(winDocum.selection&&winDocum.selection.createRange){var M=winDocum.selection.createRange();try{var Lp=M.duplicate();Lp.moveToElementText(obj);}catch(e){var Lp=obj.createTextRange();}
Lp.setEndPoint("EndToStart",M);var rb=Lp.text.length;if(rb>obj.value.length){return-1;}
return rb;}}
function setCaret(obj,l){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(l,l);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',l);m.collapse();m.select();}}
function setSelection(obj,s,e){obj.focus();if(obj.setSelectionRange){obj.setSelectionRange(s,e);}else if(obj.createTextRange){m=obj.createTextRange();m.moveStart('character',s);m.moveEnd('character',e);m.select();}}
String.prototype.addslashes=function(){return this.replace(/(["\\\.\|\[\]\^\*\+\?\$\(\)])/g,'\\$1');}
String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1");};function replaceHTML(obj,text,winDocum){while(el=obj.childNodes[0]){obj.removeChild(el);};obj.appendChild(winDocum.createTextNode(text));}
function actbAJX(options){options=options||{};this.setMinLengthForQuery(options.minLengthForQuery||this.MIN_LEN_FOR_QUERY);this.setOnSelect(options.onSelect);this.setPatternFieldId(options.patternFieldId||this.DEF_PATTERN_FIELD);this.setPublicMethod(options.publicMethod);this.setModel(options.model);this.setControl(options.control);this.setKeyFields(options.keyFields);this.setDescrFields(options.descrFields);this.setDescrFunction(options.descrFunction);this.setIc(options.icase||this.DEF_IC);this.setMid(options.mid||this.DEF_MID);}
actbAJX.prototype.DEF_PATTERN_FIELD='pattern';actbAJX.prototype.MIN_LEN_FOR_QUERY=4;actbAJX.prototype.SERV_Q_DELAY=250;actbAJX.prototype.DEF_IC="1";actbAJX.prototype.DEF_MID="0";actbAJX.prototype.m_minLengthForQuery;actbAJX.prototype.m_ic;actbAJX.prototype.m_mid;actbAJX.prototype.m_patternFieldId;actbAJX.prototype.m_publicMethod;actbAJX.prototype.m_model;actbAJX.prototype.m_control;actbAJX.prototype.m_keyFields;actbAJX.prototype.m_descrFields;actbAJX.prototype.m_descrFunction;actbAJX.prototype.fillArrayOnPattern=function(inputNode){var currValue=inputNode.value;if(this.m_control.resetKeys){this.m_control.resetKeys();}
this.m_keywords=[];this.m_keywordKeys=[];if(currValue.length<this.getMinLengthForQuery()){this.onFillArrayEnd();return;}
var self=this;var pm=this.getPublicMethod();var contr=pm.getController();pm.setFieldValue(this.getPatternFieldId(),inputNode.value);pm.setFieldValue(contr.PARAM_IC,this.getIc());pm.setFieldValue(contr.PARAM_MID,this.getMid());pm.run({"async":"true","ok":function(resp){self.onGetData(resp);},"fail":function(resp,errCode,errStr){window.showError(window.getApp().formatError(errCode,errStr));}});}
actbAJX.prototype.onGetData=function(resp){if(resp.modelExists(this.m_model.getId())){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
else{this.m_control.getErrorControl(CommonHelper.format(this.ER_NO_MODEL,Array(this.m_model.getId())));return;}
var ctrl_key_ids;if(this.m_control.getKeyIds){ctrl_key_ids=this.m_control.getKeyIds();}
while(this.m_model.getNextRow()){var res_val="";if(this.m_descrFunction){res_val=this.m_descrFunction.call(this,this.m_model.getFields());}
else{for(var fid in this.m_descrFields){res_val+=(res_val)?" ":"";var f_val=this.m_descrFields[fid].getValue();if(typeof f_val=="object"&&f_val.getDescr){res_val+=f_val.getDescr();}
else{res_val+=f_val;}}}
var keys={};for(var fn=0;fn<this.m_keyFields.length;fn++){if(ctrl_key_ids)
keys[ctrl_key_ids[fn]]=this.m_keyFields[fn].getValue();}
this.m_keywordKeys.push(keys);this.m_keywords.push(res_val);}
this.onFillArrayEnd();this.m_timeoutId=undefined;}
actbAJX.prototype.setRefKeys=function(wordPos){this.m_control.setKeys(this.m_keywordKeys[wordPos]);if(this.m_onSelect){this.m_model.getRow(wordPos);this.m_onSelect.call(this,this.m_model.getFields());}}
actbAJX.prototype.getMinLengthForQuery=function(){return this.m_minLengthForQuery;}
actbAJX.prototype.setMinLengthForQuery=function(v){this.m_minLengthForQuery=v;}
actbAJX.prototype.getIc=function(){return this.m_ic;}
actbAJX.prototype.setIc=function(v){this.m_ic=v;}
actbAJX.prototype.getMid=function(){return this.m_mid;}
actbAJX.prototype.setMid=function(v){this.m_mid=v;}
actbAJX.prototype.setOnSelect=function(v){this.m_onSelect=v;}
actbAJX.prototype.getOnSelect=function(){return this.m_onSelect;}
actbAJX.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
actbAJX.prototype.getPublicMethod=function(){return this.m_publicMethod;}
actbAJX.prototype.setPatternFieldId=function(v){this.m_patternFieldId=v;}
actbAJX.prototype.getPatternFieldId=function(){return this.m_patternFieldId;}
actbAJX.prototype.setModel=function(v){this.m_model=v;}
actbAJX.prototype.getModel=function(){return this.m_model;}
actbAJX.prototype.setControl=function(v){this.m_control=v;}
actbAJX.prototype.getControl=function(){return this.m_control;}
actbAJX.prototype.setDescrFields=function(v){this.m_descrFields=v;}
actbAJX.prototype.getDescrFields=function(){return this.m_descrFields;}
actbAJX.prototype.setDescrFunction=function(v){this.m_descrFunction=v;}
actbAJX.prototype.getDescrFunction=function(){return this.m_descrFunction;}
actbAJX.prototype.setKeyFields=function(v){this.m_keyFields=v;}
actbAJX.prototype.getKeyFields=function(){return this.m_keyFields;}
function actb(obj,winObj,servConnect){var winDocum=(winObj==undefined)?window.document:(winObj.getWindowForm==undefined)?window.document:winObj.getWindowForm().document;var obj=typeof(obj)=="string"?CommonHelper.nd(obj,winDocum):obj;if(obj==null){alert("Error:ctrl {"+obj+"} does not exist!");return false;}
var ajxCon=servConnect;var slef=this;ajxCon.onFillArrayEnd=function(){_actb_tocomplete();if(!actb_display){actb_generate();actb_display=true;}}
ajxCon.delDOM=function(){if(winDocum.getElementById('tat_table')){winDocum.body.removeChild(winDocum.getElementById('tat_table'));}
if(actb_toid)clearTimeout(actb_toid);}
this.actb_timeOut=-1;this.actb_lim=4;this.actb_firstText=false;this.actb_mouse=true;this.actb_delimiter=new Array(';',',');this.actb_startcheck=1;this.actb_bgColor='#888888';this.actb_textColor='#FFFFFF';this.actb_hColor='#000000';this.actb_fFamily='Verdana';this.actb_fSize='11px';this.actb_hStyle='text-decoration:underline;font-weight="bold"';var actb_delimwords=new Array();var actb_cdelimword=0;var actb_delimchar=new Array();var actb_display=false;var actb_pos=0;var actb_total=0;var actb_curr=null;var actb_rangeu=0;var actb_ranged=0;var actb_bool=new Array();var actb_pre=0;var actb_toid;var actb_tomake=false;var actb_getpre="";var actb_mouse_on_list=1;var actb_kwcount=0;var actb_caretmove=false;this.actb_keywords=[];var actb_self=this;actb_curr=obj;actb_curr.setAttribute("autocomplete","off");EventHelper.add(actb_curr,"focus",function(){EventHelper.add(winDocum,"keydown",actb_checkkey,false);EventHelper.add(winDocum,"keypress",actb_keypress,false);if(DOMHelper.hasClass(actb_curr,"null-ref")||(ajxCon&&ajxCon.getControl().getIsRef()&&ajxCon.getControl().isNull())){DOMHelper.delClass(actb_curr,"null-ref");actb_generate();}},false);EventHelper.add(actb_curr,"blur",function(){EventHelper.del(winDocum,"keydown",actb_checkkey,false);EventHelper.del(winDocum,"keypress",actb_keypress,false);if(actb_curr.value.length&&servConnect.getControl().getIsRef()&&servConnect.getControl().isNull()){DOMHelper.addClass(actb_curr,"null-ref");}
actb_removedisp();},false);function actb_clear(evt){if(!evt)evt=event;EventHelper.del(winDocum,"keydown",actb_checkkey,false);EventHelper.del(actb_curr,"blur",actb_clear,false);EventHelper.del(winDocum,"keypress",actb_keypress,false);actb_removedisp();}
function actb_parse(n){if(actb_self.actb_delimiter.length>0){var t=actb_delimwords[actb_cdelimword].trim().addslashes();var plen=actb_delimwords[actb_cdelimword].trim().length;}else{var t=actb_curr.value.addslashes();var plen=actb_curr.value.length;}
var tobuild='';var i;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
var p=n.search(re);for(i=0;i<p;i++){tobuild+=n.substr(i,1);}
tobuild+="<font style='"+(actb_self.actb_hStyle)+"'>"
for(i=p;i<plen+p;i++){tobuild+=n.substr(i,1);}
tobuild+="</font>";for(i=plen+p;i<n.length;i++){tobuild+=n.substr(i,1);}
return tobuild;}
function unfocus_cur_table(){var tables=winDocum.getElementsByTagName("table");if(tables&&tables.length){for(var i=0;i<tables.length;i++){if(DOMHelper.hasClass(tables[i],"focused")){DOMHelper.delClass(tables[i],"focused");break;}}}}
function actb_generate(){var node=CommonHelper.nd('tat_table',winDocum);if(node){actb_display=false;node.parentNode.removeChild(node);}
if(actb_kwcount==0){actb_display=false;return;}
unfocus_cur_table();var a_cont=winDocum.createElement("UL");a_cont.id="tat_table";a_cont.className="dropdown-menu";a_cont.style.position="absolute";a_cont.style.zIndex="1060";a_cont.style.top=($(actb_curr).offset().top+$(actb_curr).outerHeight())+"px";a_cont.style.left=$(actb_curr).offset().left+"px";a_cont.style.display="block";a=winDocum.createElement("LI");var i;var first=true;var j=1;if(actb_self.actb_mouse){a.onmouseout=actb_table_unfocus;a.onmouseover=actb_table_focus;}
var counter=0;for(i=0;i<actb_self.actb_keywords.length;i++){var c;if(actb_bool[i]){counter++;var ref_cl=null;if(first&&!actb_tomake){first=false;actb_pos=counter;ref_cl="acCurrent";}else if(actb_pre==i){first=false;actb_pos=counter;}
c=winDocum.createElement("A");c.setAttribute("href","#");if(ref_cl){c.setAttribute("class",ref_cl);}
c.innerHTML=actb_parse(actb_self.actb_keywords[i]);c.id='tat_td'+(j);c.setAttribute('pos',j);if(actb_self.actb_mouse){c.style.cursor='pointer';c.onclick=actb_mouseclick;}
j++;a.appendChild(c);}
if(j-1==actb_self.actb_lim&&j<actb_total){c=winDocum.createElement("A");c.setAttribute("href","#");replaceHTML(c,'\\/',winDocum);if(actb_self.actb_mouse){c.style.cursor='pointer';c.onclick=actb_mouse_down;}
a.appendChild(c);break;}}
a_cont.appendChild(a);winDocum.body.appendChild(a_cont);actb_rangeu=1;actb_ranged=j-1;actb_display=true;if(actb_pos<=0)actb_pos=1;}
function actb_remake(){actb_generate();return;}
function actb_goup(){if(!actb_display)return;if(actb_pos==1)return;DOMHelper.delClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");actb_pos--;if(actb_pos<actb_rangeu)actb_moveup();DOMHelper.addClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_godown(){if(!actb_display)return;if(actb_pos==actb_total)return;var nd=winDocum.getElementById("tat_td"+actb_pos);console.dir(nd)
DOMHelper.delClass(nd,"acCurrent");actb_pos++;if(actb_pos>actb_ranged)actb_movedown();DOMHelper.addClass(winDocum.getElementById("tat_td"+actb_pos),"acCurrent");if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_movedown(){actb_rangeu++;actb_ranged++;actb_remake();}
function actb_moveup(){actb_rangeu--;actb_ranged--;actb_remake();}
function actb_mouse_down(evt){evt=EventHelper.fixKeyEvent(evt);if(evt.preventDefault){evt.preventDefault();}
evt.stopPropagation();actb_pos++;actb_movedown();actb_curr.focus();actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_mouse_up(evt){evt=EventHelper.fixKeyEvent(evt);if(evt.preventDefault){evt.preventDefault();}
evt.stopPropagation();actb_pos--;actb_moveup();actb_curr.focus();actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_mouseclick(evt){evt=EventHelper.fixKeyEvent(evt);if(evt.preventDefault){evt.preventDefault();}
evt.stopPropagation();if(!actb_display)return;actb_mouse_on_list=0;actb_pos=this.getAttribute('pos');actb_penter();}
function actb_table_focus(){actb_mouse_on_list=1;}
function actb_table_unfocus(){actb_mouse_on_list=0;if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_table_highlight(){actb_mouse_on_list=1;actb_pos=this.getAttribute('pos');while(actb_pos<actb_rangeu)actb_moveup();while(actb_pos>actb_ranged)actb_movedown();if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);}
function actb_insertword(a,wPos){if(actb_self.actb_delimiter.length>0){str='';l=0;for(i=0;i<actb_delimwords.length;i++){if(actb_cdelimword==i){prespace=postspace='';gotbreak=false;for(j=0;j<actb_delimwords[i].length;++j){if(actb_delimwords[i].charAt(j)!=' '){gotbreak=true;break;}
prespace+=' ';}
for(j=actb_delimwords[i].length-1;j>=0;--j){if(actb_delimwords[i].charAt(j)!=' ')break;postspace+=' ';}
str+=prespace;str+=a;l=str.length;if(gotbreak)str+=postspace;}else{str+=actb_delimwords[i];}
if(i!=actb_delimwords.length-1){str+=actb_delimchar[i];}}
actb_curr.value=str;setCaret(actb_curr,l);}else{actb_curr.value=a;}
if(ajxCon!=undefined&&ajxCon.getControl().getIsRef()){ajxCon.setRefKeys(wPos);}
actb_mouse_on_list=0;actb_removedisp();}
function actb_penter(evt){if(!actb_display)return;actb_display=false;var word='';var c=0;var w_pos;for(w_pos=0;w_pos<=actb_self.actb_keywords.length;w_pos++){if(actb_bool[w_pos])c++;if(c==actb_pos){word=actb_self.actb_keywords[w_pos];break;}}
actb_insertword(word,w_pos);l=getCaretStart(actb_curr,winDocum);}
function actb_removedisp(){if(actb_mouse_on_list==0){actb_display=0;if(winDocum.getElementById('tat_table')){winDocum.body.removeChild(winDocum.getElementById('tat_table'));}
if(actb_toid)clearTimeout(actb_toid);}}
function actb_keypress(e){if(actb_caretmove)stopEvent(e);return!actb_caretmove;}
function actb_checkkey(evt){if(!evt)evt=event;a=evt.keyCode;caret_pos_start=getCaretStart(actb_curr,winDocum);actb_caretmove=0;switch(a){case 38:actb_goup();actb_caretmove=1;return false;break;case 40:actb_godown();actb_caretmove=1;return false;break;case 13:case 9:if(actb_display){actb_caretmove=1;actb_penter(evt);return false;}else{return true;}
break;default:setTimeout(function(){actb_tocomplete(a)},50);break;}}
function actb_tocomplete(kc){if(kc<46)return;if(ajxCon!=undefined&&actb_curr.value!=""){ajxCon.fillArrayOnPattern(actb_curr);}
_actb_tocomplete();}
function _actb_tocomplete(){if(ajxCon!=undefined&&actb_curr.value!=""){actb_keywords=ajxCon.m_keywords;}
var i;if(actb_display){var word=0;var c=0;for(var i=0;i<=actb_self.actb_keywords.length;i++){if(actb_bool[i])c++;if(c==actb_pos){word=i;break;}}
actb_pre=word;}else{actb_pre=-1};if(actb_curr.value==''){actb_mouse_on_list=0;actb_removedisp();return;}
if(actb_self.actb_delimiter.length>0){caret_pos_start=getCaretStart(actb_curr,winDocum);caret_pos_end=getCaretEnd(actb_curr,winDocum);delim_split='';for(i=0;i<actb_self.actb_delimiter.length;i++){delim_split+=actb_self.actb_delimiter[i];}
delim_split=delim_split.addslashes();delim_split_rx=new RegExp("(["+delim_split+"])");c=0;actb_delimwords=new Array();actb_delimwords[0]='';for(i=0,j=actb_curr.value.length;i<actb_curr.value.length;i++,j--){if(actb_curr.value.substr(i,j).search(delim_split_rx)==0){ma=actb_curr.value.substr(i,j).match(delim_split_rx);actb_delimchar[c]=ma[1];c++;actb_delimwords[c]='';}else{actb_delimwords[c]+=actb_curr.value.charAt(i);}}
var l=0;actb_cdelimword=-1;for(i=0;i<actb_delimwords.length;i++){if(caret_pos_end>=l&&caret_pos_end<=l+actb_delimwords[i].length){actb_cdelimword=i;}
l+=actb_delimwords[i].length+1;}
var ot=actb_delimwords[actb_cdelimword].trim();var t=actb_delimwords[actb_cdelimword].addslashes().trim();}else{var ot=actb_curr.value;var t=actb_curr.value.addslashes();}
if(ot.length==0){actb_mouse_on_list=0;actb_removedisp();}
if(ot.length<actb_self.actb_startcheck)return this;if(actb_self.actb_firstText){var re=new RegExp("^"+t,"i");}else{var re=new RegExp(t,"i");}
actb_total=0;actb_tomake=false;actb_kwcount=0;for(i=0;i<actb_self.actb_keywords.length;i++){actb_bool[i]=false;if(re.test(actb_self.actb_keywords[i])){actb_total++;actb_bool[i]=true;actb_kwcount++;if(actb_pre==i)actb_tomake=true;}}
if(actb_toid)clearTimeout(actb_toid);if(actb_self.actb_timeOut>0)actb_toid=setTimeout(function(){actb_mouse_on_list=0;actb_removedisp();},actb_self.actb_timeOut);actb_generate();}
return this;} 
actbAJX.prototype.ER_NO_MODEL="Модель % не найдена в ответе сервера.";actbAJX.prototype.ER_NOT_SELECTED="Значение не выбрано."; 
function RepCommands(id,options){options=options||{};options.attrs=options.attrs||{};options.className=options.className||options.attrs["class"]||this.DEF_CLASS_NAME;RepCommands.superclass.constructor.call(this,id,(options.tagName||this.DEF_TAG_NAME),options);options.cmdMake=(options.cmdMake!=undefined)?options.cmdMake:true;options.cmdPrint=(options.cmdPrint!=undefined)?options.cmdPrint:true;options.cmdFilter=(options.cmdFilter!=undefined)?options.cmdFilter:true;options.cmdFilterSave=(options.cmdFilterSave!=undefined)?options.cmdFilterSave:(options.variantStorage!=undefined);options.cmdFilterOpen=(options.cmdFilterOpen!=undefined)?options.cmdFilterOpen:(options.variantStorage!=undefined);options.cmdExcel=(options.cmdExcel!=undefined)?options.cmdExcel:false;options.cmdPdf=(options.cmdPdf!=undefined)?options.cmdPdf:false;options.variantStorage=options.variantStorage||{};var self=this;if(options.cmdMake){this.setCmdMake((typeof(options.cmdMake)=="object")?options.cmdMake:new GridCmd(id+":make",{"onCommand":options.onReport,"caption":this.BTN_MAKE_CAP,"title":this.BTN_MAKE_TITLE,"app":options.app}));}
if(options.cmdFilter){if(options.cmdFilterSave){this.setCmdFilterSave((typeof(options.cmdFilterSave)=="object")?options.cmdFilterSave:new GridCmdFilterSave(id+":filterSave",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data","app":options.app}));}
if(options.cmdFilterOpen){this.setCmdFilterOpen((typeof(options.cmdFilterOpen)=="object")?options.cmdFilterOpen:new GridCmdFilterOpen(id+":filterOpen",{"variantStorageName":options.variantStorage.name,"dataCol":"filter_data","app":options.app}));}
this.setCmdFilter((typeof(options.cmdFilter)=="object")?options.cmdFilter:new GridCmdFilter(id+":filter",{"filters":options.filters,"controlSave":this.getCmdFilterSave(),"controlOpen":this.getCmdFilterOpen(),"variantStorageModel":options.variantStorage.model,"app":options.app}));this.getCmdFilter().unserializeFilters();}
if(options.cmdMake){this.setCmdPrint((typeof(options.cmdPrint)=="object")?options.cmdPrint:new GridCmd(id+":print",{"glyph":"glyphicon-print","onCommand":options.onPrint,"title":this.BTN_PRINT_TITLE,"app":options.app}));this.getCmdPrint().getControl().setEnabled(false);}
if(options.cmdExcel){this.setCmdExcel((typeof(options.cmdExcel)=="object")?options.cmdExcel:new GridCmd(id+":excel",{"glyph":"glyphicon-file","onCommand":options.onExcel,"title":this.BTN_EXCEL_TITLE,"app":options.app}));this.getCmdExcel().getControl().setEnabled(false);}
if(options.cmdPdf){this.setCmdPdf((typeof(options.cmdPdf)=="object")?options.cmdPdf:new GridCmd(id+":pdf",{"glyph":"glyphicon-save-file","onCommand":options.onPdf,"title":this.BTN_PDF_TITLE,"app":options.app}));this.getCmdPdf().getControl().setEnabled(false);}
this.m_commands=options.commands||[];this.addControls();}
extend(RepCommands,ControlContainer);RepCommands.prototype.DEF_TAG_NAME="div";RepCommands.prototype.DEF_CLASS_NAME="cmdButtons";RepCommands.prototype.m_cmdMake;RepCommands.prototype.m_cmdPrint;RepCommands.prototype.m_cmdExcel;RepCommands.prototype.m_cmdPdf;RepCommands.prototype.m_cmdFilter;RepCommands.prototype.m_cmdFilterOpen;RepCommands.prototype.m_cmdFilterSave;RepCommands.prototype.m_commands;RepCommands.prototype.addCommands=function(){if(this.m_cmdMake){this.m_commands.push(this.m_cmdMake);}
if(this.m_cmdPrint){this.m_commands.push(this.m_cmdPrint);}
if(this.m_cmdExcel){this.m_commands.push(this.m_cmdExcel);}
if(this.m_cmdPdf){this.m_commands.push(this.m_cmdPdf);}
if(this.m_cmdFilter){this.m_commands.push(this.m_cmdFilter);}
if(this.m_cmdFilterSave){this.m_commands.push(this.m_cmdFilterSave);}
if(this.m_cmdFilterOpen){this.m_commands.push(this.m_cmdFilterOpen);}}
RepCommands.prototype.addControls=function(){this.addCommands();for(var i=0;i<this.m_commands.length;i++){if(this.m_commands[i].getShowCmdControl()){this.m_commands[i].controlsToContainer(this);}}}
RepCommands.prototype.getCmdMake=function(){return this.m_cmdMake;}
RepCommands.prototype.setCmdMake=function(v){this.m_cmdMake=v;}
RepCommands.prototype.getCmdExcel=function(){return this.m_cmdExcel;}
RepCommands.prototype.setCmdExcel=function(v){this.m_cmdExcel=v;}
RepCommands.prototype.getCmdPdf=function(){return this.m_cmdPdf;}
RepCommands.prototype.setCmdPdf=function(v){this.m_cmdPdf=v;}
RepCommands.prototype.getCmdPrint=function(){return this.m_cmdPrint;}
RepCommands.prototype.setCmdPrint=function(v){this.m_cmdPrint=v;}
RepCommands.prototype.getCmdFilter=function(){return this.m_cmdFilter;}
RepCommands.prototype.setCmdFilter=function(v){this.m_cmdFilter=v;}
RepCommands.prototype.getCmdFilterSave=function(){return this.m_cmdFilterSave;}
RepCommands.prototype.setCmdFilterSave=function(v){this.m_cmdFilterSave=v;}
RepCommands.prototype.getCmdFilterOpen=function(){return this.m_cmdFilterOpen;}
RepCommands.prototype.setCmdFilterOpen=function(v){this.m_cmdFilterOpen=v;}
RepCommands.prototype.delDOM=function(){for(var i=0;i<this.m_commands.length;i++){this.m_commands[i].onDelDOM();}
RepCommands.superclass.delDOM.call(this);} 
RepCommands.prototype.BTN_MAKE_CAP="Сформировать";RepCommands.prototype.BTN_MAKE_TITLE="Сформировать отчет";RepCommands.prototype.BTN_PRINT_CAP="Печать";RepCommands.prototype.BTN_PRINT_TITLE="Напечатать отчет";RepCommands.prototype.BTN_EXCEL_CAP="Excel";RepCommands.prototype.BTN_EXCEL_TITLE="Экспорт отчета в excel";RepCommands.prototype.BTN_PDF_CAP="PDF";RepCommands.prototype.BTN_PDF_TITLE="Экспорт отчета в pdf";RepCommands.prototype.BTN_FILTER_CAP="Параметры";RepCommands.prototype.BTN_FILTER_TITLE="Показать/скрыть параметры отчета"; 
function ViewReport(id,options){options=options||{};ViewReport.superclass.constructor.call(this,id,"div",options);this.setPublicMethod(options.publicMethod);this.setReportViewId(options.reportViewId);this.setExcelViewId(options.excelViewId||this.DEF_EXCEL_VIEW);this.setPdfViewId(options.pdfViewId||this.DEF_PDF_VIEW);this.setTemplateId(options.templateId);this.setReportControl(options.reportControl||new Control(id+":report","div",{"className":"row","app":options.app}));var self=this;var def_cmd_opts={"cmdMake":options.cmdMake,"cmdPrint":options.cmdPrint,"cmdFilter":options.cmdFilter,"cmdExcel":options.cmdExcel,"cmdPdf":options.cmdPdf,"filters":options.filters,"app":options.app};if(def_cmd_opts.cmdMake)def_cmd_opts.onReport=function(){self.onReport();};if(def_cmd_opts.cmdPrint)def_cmd_opts.onPrint=function(){self.onPrint();};if(def_cmd_opts.cmdExcel)def_cmd_opts.onExcel=function(){self.onExcel();};if(def_cmd_opts.cmdPdf)def_cmd_opts.onPdf=function(){self.onPdf();};def_cmd_opts.variantStorage=options.variantStorage;this.m_commands=options.commands||new RepCommands(id+":repCommands",def_cmd_opts);this.m_openFilterOnInit=(options.openFilterOnInit!=undefined)?options.openFilterOnInit:true;}
extend(ViewReport,ControlContainer);ViewReport.prototype.DEF_EXCEL_VIEW="ViewExcel";ViewReport.prototype.DEF_PDF_VIEW="ViewPDF";ViewReport.prototype.m_publicMethod;ViewReport.prototype.m_templateId;ViewReport.prototype.m_reportViewId;ViewReport.prototype.m_excelViewId;ViewReport.prototype.m_pdfViewId;ViewReport.prototype.m_commands;ViewReport.prototype.m_groupper;ViewReport.prototype.m_reportControl;ViewReport.prototype.getFilter=function(){return this.m_filter;}
ViewReport.prototype.setFilter=function(filter){this.m_filter=filter;}
ViewReport.prototype.setGroupper=function(v){this.m_groupper=v;}
ViewReport.prototype.getGroupper=function(v){return this.m_groupper;}
ViewReport.prototype.setPublicMethod=function(v){this.m_publicMethod=v;}
ViewReport.prototype.getPublicMethod=function(){return this.m_publicMethod;}
ViewReport.prototype.setReportViewId=function(v){this.m_reportViewId=v;}
ViewReport.prototype.getReportViewId=function(){return this.m_reportViewId;}
ViewReport.prototype.setExcelViewId=function(v){this.m_excelViewId=v;}
ViewReport.prototype.getExcelViewId=function(){return this.m_excelViewId;}
ViewReport.prototype.setPdfViewId=function(v){this.m_pdfViewId=v;}
ViewReport.prototype.getPdfViewId=function(){return this.m_pdfViewId;}
ViewReport.prototype.setReportControl=function(reportControl){this.m_reportControl=reportControl;}
ViewReport.prototype.getReportControl=function(){return this.m_reportControl;}
ViewReport.prototype.setCommands=function(v){this.m_commands=v;}
ViewReport.prototype.getCommands=function(){return this.m_commands;}
ViewReport.prototype.setTemplateId=function(v){this.m_templateId=v;}
ViewReport.prototype.getTemplateId=function(){return this.m_templateId;}
ViewReport.prototype.toDOM=function(parent){ViewReport.superclass.toDOM.call(this,parent);this.m_commands.toDOM(this.m_node);if(this.m_openFilterOnInit){var f=this.m_commands.getCmdFilter();if(f)f.onCommand();}
this.m_reportControl.toDOM(this.m_node);}
ViewReport.prototype.delDOM=function(){this.m_commands.delDOM();this.m_reportControl.delDOM();ViewReport.superclass.delDOM.call(this);}
ViewReport.prototype.fillParams=function(){var pm=this.getPublicMethod();var contr=pm.getController();if(this.m_commands.getCmdFilter()){try{this.m_commands.getCmdFilter().getFilter().applyFiltersToPublicMethod(pm);}
catch(e){this.m_commands.getCmdFilter().onCommand(null);throw Error(e.message);}}
if(this.m_groupper){this.m_groupper.getParams(filter_struc);if(!filter_struc.grp_fields){throw Error(this.NO_GRP_SELECTED);}
pm.setFieldValue(contr.PARAM_GRP_FIELDS,filter_struc.grp_fields);}}
ViewReport.prototype.downloadReport=function(view){this.getPublicMethod().download(view);}
ViewReport.prototype.onReport=function(){this.fillParams();var self=this;this.m_commands.getCmdMake().getControl().setEnabled(false);if(this.m_commands.getCmdExcel())this.m_commands.getCmdExcel().getControl().setEnabled(false);if(this.m_commands.getCmdPdf())this.m_commands.getCmdPdf().getControl().setEnabled(false);var pm=this.getPublicMethod();pm.setFieldValue("templ",this.getTemplateId());pm.run({"viewId":this.getReportViewId(),"get":true,"retContentType":"text","ok":function(respText){self.m_reportControl.m_node.innerHTML=respText;self.m_commands.getCmdMake().getControl().setEnabled(true);if(self.m_commands.getCmdExcel())self.m_commands.getCmdExcel().getControl().setEnabled(true);if(self.m_commands.getCmdPdf())self.m_commands.getCmdPdf().getControl().setEnabled(true);if(self.m_commands.getCmdPrint())self.m_commands.getCmdPrint().getControl().setEnabled(true);},"fail":function(){self.m_commands.getCmdMake().getControl().setEnabled(true);}});}
ViewReport.prototype.onPrint=function(){var ctrl=this.getReportControl();if(ctrl){WindowPrint.show({"content":ctrl.getNode().outerHTML});}}
ViewReport.prototype.onExcel=function(){this.downloadReport(this.getExcelViewId());}
ViewReport.prototype.onPdf=function(){this.downloadReport(this.getPdfViewId());} 
ViewReport.prototype.VARIANT_SAVED="Сохранение настроек выполнено.";ViewReport.prototype.NO_GRP_SELECTED="Не выбрано ни одного поля!"; 
function PopUpMenu(options){options=options||{};this.items=[];this.width=0;this.height=0;this.m_caption=options.caption;var self=this;this.m_evShow=function(e){e=EventHelper.fixMouseEvent(e);self.show.call(self,e);if(e.preventDefault){e.preventDefault();}
return false;};}
PopUpMenu.prototype.SEPARATOR='PopUpMenu.SEPARATOR';PopUpMenu.prototype.current=null;PopUpMenu.prototype.unbind=function(){EventHelper.del(this.target,"contextmenu",this.m_evShow,true);if(this.element){this.element.delDOM();}}
PopUpMenu.prototype.bind=function(element){if(!this.items.length){return;}
var self=this;if(!element){element=document;}else if(typeof element=='string'){element=document.getElementById(element);}
this.target=element;EventHelper.add(this.target,"contextmenu",this.m_evShow,true);}
PopUpMenu.prototype.add=function(action){this.items.push(action);}
PopUpMenu.prototype.addButton=function(btn){this.items.push({caption:btn.getCaption()||btn.getAttr("title"),glyph:(btn.getGlyphPopUp())?btn.getGlyphPopUp():btn.getGlyph(),onClick:btn.getOnClick()});}
PopUpMenu.prototype.addSeparator=function(){this.items.push(PopUpMenu.SEPARATOR);}
PopUpMenu.prototype.show=function(e,fixToElement){if(this.current&&this.current!=this)return;this.current=this;if(this.element){this.element.setPosition(e,fixToElement);this.element.setVisible(true);}else{this.element=this.createMenu(this.items);this.element.toDOM(e,fixToElement);}}
PopUpMenu.prototype.hide=function(){this.current=null;if(this.element)this.element.setVisible(false);}
PopUpMenu.prototype.getVisible=function(){if(this.element)return this.element.getVisible();}
PopUpMenu.prototype.createMenu=function(items){var self=this;var menu_cont=[];for(var i=0;i<items.length;i++){var item;if(items[i]==PopUpMenu.SEPARATOR){item=this.createSeparator();}else{item=this.createItem(items[i]);}
menu_cont.push(item);}
var menu=new PopOver(CommonHelper.uniqid(),{"fixToElement":this.fixToElement,"attrs":{"style":((self.width)?("width:"+self.width+"px;"):"")
+
((self.height)?("height:"+self.height+"px;"):"")},"caption":this.m_caption,"contentElements":[new ControlContainer(CommonHelper.uniqid(),"ul",{"elements":menu_cont,"className":"nav"})]});return menu;}
PopUpMenu.prototype.createItem=function(item){var self=this;var callback=item.onClick;var elem=new Control(null,"a",{"attrs":{"href":"#","item_id":item.id},"enabled":!item.disabled,"className":"nav-link","events":{"click":function(_callback){return function(e){self.hide();e=EventHelper.fixMouseEvent(e);var id=e.target.getAttribute("item_id");_callback(self.target,id?id:e);};}(callback)}});if(item.glyph){var i=document.createElement("span");i.className="glyphicon "+item.glyph;elem.m_node.appendChild(i);}
elem.m_node.appendChild(document.createTextNode(" "+item.caption));return new ControlContainer(null,"li",{"className":"nav-item","elements":[elem]});}
PopUpMenu.prototype.createSeparator=function(){return new Control(null,"div",{"attrs":{"style":"borderTop='1px dotted #CCCCCC';fontSize='0px';height='0px';"}})} 
function PopOver(id,options){options=options||{};options.template=window.getApp().getTemplate("PopOver");options.addElement=function(){this.addElement(new Control(id+":title","DIV",{"value":options.caption}));this.addElement(new ControlContainer(id+":content","DIV",{"elements":options.contentElements}));}
this.m_onHide=options.onHide;PopOver.superclass.constructor.call(this,id,"TEMPLATE",options);var self=this;this.m_evHide=function(event){event=EventHelper.fixMouseEvent(event);if(event.pageX<self.m_posMinX||event.pageX>self.m_posMaxX||event.pageY<self.m_posMinY||event.pageY>self.m_posMaxY){var el=event.target;var other_popover=false;el=el.parentNode;while(el){if(DOMHelper.hasClass(el,"popover")||DOMHelper.hasClass(el,"datepicker")){other_popover=true;break;}
el=el.parentNode;}
if(!other_popover&&self.getVisible()){self.setVisible(false);event.stopPropagation();}}}}
extend(PopOver,ControlContainer);PopOver.prototype.setPosition=function(e,fixToElement){var x,y;if(fixToElement){var rect=fixToElement.getBoundingClientRect();y=rect.top+$(fixToElement).outerHeight();x=rect.left;}
else{x=e.pageX;y=e.pageY;}
var n=this.getNode();n.style.display="block";n.style.position="absolute";n.style.top=y+'px';n.style.left=x+'px';}
PopOver.prototype.setVisible=function(v){PopOver.superclass.setVisible.call(this,v);if(v){this.addClick();}
else{this.delClick();if(this.m_onHide){this.m_onHide();}}}
PopOver.prototype.addClick=function(){EventHelper.add(document,"click",this.m_evHide,true);}
PopOver.prototype.delClick=function(){EventHelper.del(document,"click",this.m_evHide,true);}
PopOver.prototype.toDOM=function(e,fixToElement){this.setPosition(e,fixToElement);PopOver.superclass.toDOM.call(this,document.body);var rect=this.m_node.getBoundingClientRect();this.m_posMinY=rect.top;this.m_posMaxY=rect.top+$(this.m_node).outerHeight();this.m_posMinX=rect.left;this.m_posMaxX=rect.left+$(this.m_node).outerWidth();this.m_zIndex=parseInt($(this.m_node).css("z-index"),10);this.addClick();}
PopOver.prototype.delDOM=function(){PopOver.superclass.delDOM.call(this);this.delClick();} 
function PeriodSelect(id,options){options=options||{};var self=this;options.events={"click":function(e){self.onClick(e);}};options.attrs=options.attrs||{};options.attrs.style="cursor:pointer;";options.value=options.value||options.period||this.PERIOD_ALIASES[0];PeriodSelect.superclass.constructor.call(this,id,"A",options);}
extend(PeriodSelect,Control);PeriodSelect.prototype.PERIOD_ALIASES=["all","day","week","month","quarter","year"];PeriodSelect.prototype.CLASS_SELECTED="alert-success";PeriodSelect.prototype.m_pop;PeriodSelect.prototype.onClick=function(e){if(!this.m_pop){var self=this;var cont_el=[];var cur=this.getValue();for(var i=0;i<this.PERIOD_ALIASES.length;i++){cont_el.push(new Control(CommonHelper.uniqid(),"P",{"className":"forSelect"+((cur==this.PERIOD_ALIASES[i])?" "+this.CLASS_SELECTED:""),"value":this.PERIODS[i],"attrs":{"period":this.PERIOD_ALIASES[i],"style":"cursor:pointer;"},"events":{"click":function(e){self.m_pop.setVisible(false);var par=e.target.parentNode;for(var j=0;j<par.childNodes.length;j++){if(par.childNodes[j]==e.target){DOMHelper.addClass(e.target,self.CLASS_SELECTED);}
else if(DOMHelper.hasClass(par.childNodes[j],self.CLASS_SELECTED)){DOMHelper.delClass(par.childNodes[j],self.CLASS_SELECTED);}}
self.setValue(e.target.getAttribute("period"));}}}));}
var cont=new ControlContainer(null,"DIV",{"elements":cont_el});this.m_pop=new PopOver(this.getId()+":popover",{"contentElements":[cont]});this.m_pop.toDOM(e,this.getNode());}
else{this.m_pop.setVisible(!this.m_pop.getVisible());}}
PeriodSelect.prototype.setValue=function(v){var p=CommonHelper.inArray(v,this.PERIOD_ALIASES);if(p==-1){throw Error(this.ER_PERIOD_NOT_FOUND);}
this.setAttr("period",v);PeriodSelect.superclass.setValue.call(this,this.PERIODS[p]);}
PeriodSelect.prototype.getValue=function(v){return this.getAttr("period");} 
PeriodSelect.prototype.PERIODS=["Произвольный период","Текущий день","Текущая неделя","Текущий месяц","Текущий квартал","Текущий год"];PeriodSelect.prototype.ER_PERIOD_NOT_FOUND="Период не определен!"; 
var WindowAbout={show:function(view){var self=this;this.m_form=new WindowFormModalBS(CommonHelper.uniqid(),{"cmdCancel":true,"controlCancelCaption":this.CMD_CLOSE_CAP,"controlCancelTitle":this.CMD_CLOSE_TITLE,"cmdOk":false,"onClickCancel":function(){self.m_form.close();},"content":view,"contentHead":this.HEAD_TITLE});this.m_form.open();}} 
WindowAbout.HEAD_TITLE="О программе";WindowAbout.CMD_CLOSE_CAP="ОК";WindowAbout.CMD_CLOSE_TITLE="Закрыть окно"; 
function MainMenuTree(id,options){options=options||{};var self=this;options.editViewOptions={"tagName":"LI","columnTagName":"DIV","onBeforeExecCommand":function(cmd,pm){pm.setFieldValue("viewdescr",self.m_editViewDescr);}};options.rootCaption=this.ROOT_CAP;options.model=new MainMenuContent_Model();options.className="menuConstructor";options.controller=new MainMenuContent_Controller({"clientModel":options.model});options.commands=new GridCmdContainerAjx(id+":cmd",{"cmdColManager":false,"cmdExport":false,"cmdSearch":false,"cmdCopy":false,"cmdRefresh":false});options.head=new GridHead(id+":head",{"rowOptions":[{"tagName":"li"}],"elements":[new GridRow(id+":content-tree:head:row0",{"elements":[new GridCellHead(id+":content-tree:head",{"className":window.getBsCol(6),"columns":[new GridColumn({"model":options.model,"field":options.model.getField("descr"),"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_DESCR,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10)}}),new GridColumn({"field":options.model.getField("viewdescr"),"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlClass":ViewEditRef,"ctrlBindField":options.model.getField("viewid"),"ctrlOptions":{"labelCaption":this.LB_CAP_VIEW,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10),"keyIds":["viewid"],"menuTree":this}}),new GridColumn({"field":options.model.getField("glyphclass"),"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_GLYPHCLASS,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(10),"buttonSelect":new ButtonCtrl(id+":content-tree:head:glyphclass-sel",{"glyph":"glyphicon-menu-hamburger","onClick":function(e){self.selectPict(this.getEditControl());}})}}),new GridColumn({"field":options.model.getField("default"),"assocClassList":{"true":"glyphicon glyphicon-ok"},"model":options.model,"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":this.LB_CAP_DEFAULT,"contTagName":"DIV","labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(1)}})]})]})]});MainMenuTree.superclass.constructor.call(this,id,options);}
extend(MainMenuTree,TreeAjx);MainMenuTree.prototype.selectPict=function(editCtrl){var self=this;this.m_view=new View(this.getId()+":view:body:view",{"template":window.getApp().getTemplate("IcomoonList"),"events":{"click":function(e){if(e.target.tagName.toUpperCase()=="DIV"){editCtrl.setValue(e.target.firstChild.className);self.closeSelect();}}}});this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":false,"controlOkCaption":null,"controlOkTitle":null,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){self.closeSelect();},"content":this.m_view,"contentHead":this.SEL_PIC_HEAD});this.m_form.open();}
MainMenuTree.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}} 
MainMenuTree.prototype.ROOT_CAP="МЕНЮ";MainMenuTree.prototype.LB_CAP_DESCR="Наименование:";MainMenuTree.prototype.LB_CAP_VIEW="Объект:";MainMenuTree.prototype.LB_CAP_DEFAULT="По умолчанию:";MainMenuTree.prototype.LB_CAP_GLYPHCLASS="Класс картинки:";MainMenuTree.prototype.SEL_PIC_HEAD="Выберите картинку"; 
function ButtonOrgSearch(id,options){options=options||{};options.glyph="glyphicon-search";options.title=this.TITLE;this.m_viewContext=options.viewContext;this.m_onGetData=options.onGetData;var self=this;options.onClick=options.onClick||function(event){self.doSearch();};ButtonOrgSearch.superclass.constructor.call(this,id,options);}
extend(ButtonOrgSearch,ButtonCtrl);ButtonOrgSearch.prototype.doSearch=function(){var q=this.getEditControl().getValue();if(!q||!q.length){throw new Error("Не задан параметр поиска!");}
var pm=(new ClientSearch_Controller()).getPublicMethod("search");pm.setFieldValue("query",q);this.setEnabled(false);var self=this;pm.run({"ok":function(resp){if(resp.modelExists("SearchResult_Model")){var m=new ModelXML("SearchResult_Model",{"fields":["param","val"],"data":resp.getModelData("SearchResult_Model")});if(self.m_onGetData){self.m_onGetData(m);}
else{self.applyResult(m);}}},"all":function(){self.setEnabled(true);}});}
ButtonOrgSearch.prototype.applyResult=function(model){var attr_coresp={"Наименование":"name","ФИО руководителя":"dir_name","Должность руководителя":"dir_post","ИНН":"inn","КПП":"kpp","ОГРН":"ogrn","ОКПО":"okpo","ОКВЭД":"okved"}
while(model.getNextRow()){var param=model.getFieldValue("param");if(attr_coresp[param]){var el=this.m_viewContext.getElement(attr_coresp[param]);if(el){el.setValue(model.getFieldValue("val"));}}}} 
ButtonOrgSearch.prototype.TITLE="Найти контрагента по базе ЕГРЮЛ/ЕГРИП"; 
function ConstantGrid(id,options){options=options||{};var contr=new Constant_Controller();var opts={"model":options.model,"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false,"cmdEdit":true}),"updatePublicMethod":contr.getPublicMethod("set_value"),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:0",{"elements":[new GridCellHead(id+":head:0:name",{"value":this.LIST_COL_NAME,"columns":[new GridColumn({"field":options.model.getField("name"),"ctrlEdit":false,"ctrlOptions":{"enabled":false,"cmdClear":false}})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":head:0:descr",{"value":this.LIST_COL_DESCR,"columns":[new GridColumn({"field":options.model.getField("descr"),"ctrlEdit":false,"ctrlOptions":{"enabled":false,"cmdClear":false}})]}),new GridCellHead(id+":head:0:val",{"value":this.LIST_COL_VAL,"columns":[new GridColumn({"field":options.model.getField("val")})]})]})]}),"rowSelect":false,"autoRefresh":false,"focus":true};ConstantGrid.superclass.constructor.call(this,id,opts);this.m_defClasses={"Bool":{"columnClass":GridColumnBool,"ctrlClass":EditCheckBox},"Date":{"columnClass":GridColumnDate,"ctrlClass":EditDate},"DateTime":{"columnClass":GridColumnDateTime,"ctrlClass":EditDateTime},"Interval":{"columnClass":GridColumn,"ctrlClass":EditString},"Float":{"columnClass":GridColumnFloat,"ctrlClass":EditFloat},"Int":{"columnClass":GridColumn,"ctrlClass":EditInt},"Ref":{"columnClass":GridColumnRef,"ctrlClass":EditString},"DEF":{"columnClass":GridColumn,"ctrlClass":EditString}};}
extend(ConstantGrid,GridAjx);ConstantGrid.prototype.m_defClasses;ConstantGrid.prototype.onGetData=function(resp){if(resp){this.m_model.setData(resp.getModelData(this.m_model.getId()));}
if(this.m_model){var self=this;var body=this.getBody();var foot=this.getFoot();body.delDOM();body.clear();if(foot&&foot.calcBegin){this.m_foot.calcBegin(this.m_model);}
if(!this.getHead())return;var columns=this.getHead().getColumns();var row_cnt=0,field_cnt;var row,row_keys;this.m_model.reset();var pag=this.getPagination();if(pag){pag.m_from=parseInt(this.m_model.getPageFrom());pag.setCountTotal(this.m_model.getTotCount());}
var h_row_ind=0;var key_id_ar=this.getKeyIds();while(this.m_model.getNextRow()){row=this.createNewRow(row_cnt,h_row_ind);row_keys={};for(var k=0;k<key_id_ar.length;k++){row_keys[key_id_ar[k]]=this.m_model.getFieldValue(key_id_ar[k]);}
var ctrlOptions=this.m_model.getFieldValue("ctrl_options");var val_type=this.m_model.getFieldValue("val_type");var const_id=this.m_model.getFieldValue("id");var column_class_f=this.m_model.getField("view_class");var column_class;if(!column_class_f.isSet()){column_class=(this.m_defClasses[val_type])?this.m_defClasses[val_type].columnClass:this.m_defClasses.DEF.columnClass;}
else{column_class=eval(column_class_f.getValue());}
var view_options=this.m_model.getFieldValue("view_options");var ctrl_class_f=this.m_model.getField("ctrl_class");var ctrl_class;if(!ctrl_class_f.isSet()){ctrl_class=(this.m_defClasses[val_type])?this.m_defClasses[val_type].ctrlClass:this.m_defClasses.DEF.ctrlClass;}
else{ctrl_class=eval(ctrl_class_f.getValue());}
if(val_type=="Ref"){ctrlOptions=ctrlOptions||{};ctrlOptions.labelCaption="";ctrlOptions.keyIds=["val"];}
field_cnt=0;for(var col_id in columns){columns[col_id].setGrid(this);var col_f=columns[col_id].getField();if(col_f&&col_f.getPrimaryKey()){row_keys[col_id]=col_f.getValue();}
var cell_class=columns[col_id].getCellClass();var cell_opts=columns[col_id].getCellOptions()||{};cell_opts.modelIndex=row_cnt;cell_opts.row=row;if(col_f.getId()=="val"){view_options=view_options||{};view_options.field=col_f;view_options.headCell=columns[col_id].getHeadCell();view_options.ctrlClass=ctrl_class;view_options.ctrlOptions=ctrlOptions;view_options.ctrlBindFieldId="val";view_options.grid=this;if(val_type=="Ref"){view_options.field=new FieldJSON("val",{"value":this.m_model.getFieldValue("val")});}
cell_opts.gridColumn=new column_class(view_options);}
else{cell_opts.gridColumn=columns[col_id];}
var cell=new cell_class(row.getId()+":"+columns[col_id].getId(),cell_opts);row.addElement(cell);field_cnt++;}
row.setAttr("keys",CommonHelper.array2json(row_keys));row.setAttr("modelIndex",row_cnt);var row_cmd_class=this.getRowCommandClass();if(row_cmd_class){var row_class_options={"grid":this};row.addElement(new row_cmd_class(row.getId()+":cell-sys",row_class_options));}
body.addElement(row);row_cnt++;if(foot&&foot.calc){foot.calc(this.m_model);}}
if(this.getLastRowFooter()&&row){DOMHelper.addClass(row.m_node,"grid_foot");}
if(foot&&foot.calcEnd){foot.calcEnd();}
body.toDOM(this.m_node);}
if(this.m_navigate){this.setSelection();}
if(this.m_onRefresh){this.m_onRefresh.call(this);}}
ConstantGrid.prototype.initEditView=function(parent,replacedNode,cmd){ConstantGrid.superclass.initEditView.call(this,parent,replacedNode,cmd);var pm=this.getUpdatePublicMethod();pm.setFieldValue("id",this.m_model.getFieldValue("id"));} 
ConstantGrid.prototype.LIST_COL_NAME="Наименование";ConstantGrid.prototype.LIST_COL_DESCR="Описание";ConstantGrid.prototype.LIST_COL_VAL="Значение"; 
function Captcha(id,options){options=options||{};options.required=true;this.m_keyLength=options.keyLength||this.DEF_KEYLENGTH;self=this;options.addElement=function(){this.addElement(new ButtonCtrl(id+":refresh",{"title":self.REFRESH_TITLE,"onClick":function(){self.refresh();}}));this.addElement(new Control(id+":img","IMG"));this.addElement(new Control(id+":key","INPUT",{"attrs":{"required":"required","type":"text","maxlength":self.m_keyLength,"title":self.KEY_TITLE,"placeholder":self.KEY_PLACEHOLDER}}));self.setErrorControl((options.errorControl!==undefined)?options.errorControl:((self.m_html)?null:new ErrorControl(self.getId()+":error")));this.addElement(self.getErrorControl());}
Captcha.superclass.constructor.call(this,id,"DIV",options);}
extend(Captcha,ControlContainer);Captcha.prototype.DEF_KEYLENGTH=6;Captcha.prototype.m_keyLength;Captcha.prototype.toDOM=function(parent){Captcha.superclass.toDOM.call(this,parent);this.refresh();}
Captcha.prototype.setErrorControl=function(v){this.m_errorControl=v;}
Captcha.prototype.getErrorControl=function(){return this.m_errorControl;}
Captcha.prototype.getModified=function(){return true;}
Captcha.prototype.setFromResp=function(resp){var m=new ModelObjectXML("Captcha_Model",{"fields":["img"],"data":resp.getModelData("Captcha_Model")});this.getElement("img").setAttr("src","data:image;base64,"+m.getFieldValue("img"));}
Captcha.prototype.refresh=function(){this.getElement("refresh").setEnabled(false);var self=this;(new Captcha_Controller()).run("get",{"ok":function(resp){self.setFromResp(resp);},"fail":function(resp,errCode,errStr){self.getErrorControl().setValue(errStr);},"all":function(){self.getElement("refresh").setEnabled(true);}});}
Captcha.prototype.getValue=function(){var v=this.getElement("key").getNode().value;return(!v||!v.length)?null:v;}
Captcha.prototype.setValid=function(){this.getErrorControl().clear();}
Captcha.prototype.setNotValid=function(str){this.getErrorControl().setValue(str);} 
function ViewTemplate(id,options){options=options||{};var t_opts=((typeof(options.value)=="string")?CommonHelper.unserialize(options.value):options.value)||{};if(options.templateOptions){for(var opt in options.templateOptions){t_opts[opt]=options.templateOptions[opt];}}
options.templateOptions=t_opts;options.value=null;ViewTemplate.superclass.constructor.call(this,id,"DIV",options);}
extend(ViewTemplate,Control);ViewTemplate.prototype.setValue=function(){} 
function ViewList_Form(options){options=options||{};options.formName="ViewList";options.controller="View_Controller";options.method="get_list";ViewList_Form.superclass.constructor.call(this,options);}
extend(ViewList_Form,WindowFormObject); 
function MainMenuConstructor_Form(options){options=options||{};options.formName="MainMenuConstructor";options.method="get_object";MainMenuConstructor_Form.superclass.constructor.call(this,options);}
extend(MainMenuConstructor_Form,WindowFormObject); 
function User_Form(options){options=options||{};options.formName="UserDialog";options.controller="User_Controller";options.method="get_object";User_Form.superclass.constructor.call(this,options);}
extend(User_Form,WindowFormObject); 
function UserList_Form(options){options=options||{};options.formName="UserList";options.controller="User_Controller";options.method="get_list";UserList_Form.superclass.constructor.call(this,options);}
extend(UserList_Form,WindowFormObject); 
function Bank_Form(options){options=options||{};options.formName="Bank";options.method="get_object";options.controller="Bank_Controller";options.keys={"bik":null};options.height=500;options.width=500;Bank_Form.superclass.constructor.call(this,options);}
extend(Bank_Form,WindowFormObject); 
function BankList_Form(options){options=options||{};options.formName="BankList";options.controller="Bank_Controller";options.method="get_list";BankList_Form.superclass.constructor.call(this,options);}
extend(BankList_Form,WindowFormObject); 
function MailForSending_Form(options){options=options||{};options.formName="MailForSending";options.controller="MailForSending_Controller";options.method="get_object";MailForSending_Form.superclass.constructor.call(this,options);}
extend(MailForSending_Form,WindowFormObject); 
function Client_Form(options){options=options||{};options.formName="Client";options.controller="Client_Controller";options.method="get_object";Client_Form.superclass.constructor.call(this,options);}
extend(Client_Form,WindowFormObject); 
function ClientList_Form(options){options=options||{};options.formName="ClientList";options.controller="Client_Controller";options.method="get_list";ClientList_Form.superclass.constructor.call(this,options);}
extend(ClientList_Form,WindowFormObject); 
function DocumentTemplateDialog_Form(options){options=options||{};options.formName="DocumentTemplateDialog";options.controller="DocumentTemplate_Controller";options.method="get_object";DocumentTemplateDialog_Form.superclass.constructor.call(this,options);}
extend(DocumentTemplateDialog_Form,WindowFormObject); 
function ApplicationDialog_Form(options){options=options||{};options.formName="ApplicationDialog";options.controller="Application_Controller";options.method="get_object";ApplicationDialog_Form.superclass.constructor.call(this,options);}
extend(ApplicationDialog_Form,WindowFormObject); 
function ApplicationList_Form(options){options=options||{};options.formName="ApplicationList";options.controller="Application_Controller";options.method="get_list";ApplicationList_Form.superclass.constructor.call(this,options);}
extend(ApplicationList_Form,WindowFormObject); 
function ApplicationClientList_Form(options){options=options||{};options.formName="ApplicationClientList";options.controller="Application_Controller";options.method="get_client_list";ApplicationClientList_Form.superclass.constructor.call(this,options);}
extend(ApplicationClientList_Form,WindowFormObject); 
function ContractList_Form(options){options=options||{};options.formName="ContractList";options.controller="Contract_Controller";options.method="get_list";ContractList_Form.superclass.constructor.call(this,options);}
extend(ContractList_Form,WindowFormObject); 
function ConstructionTypeDialog_Form(options){options=options||{};options.formName="ConstructionTypeDialog";options.controller="ConstructionType_Controller";options.method="get_object";ConstructionTypeDialog_Form.superclass.constructor.call(this,options);}
extend(ConstructionTypeDialog_Form,WindowFormObject); 
function DocFlowOutDialog_Form(options){options=options||{};options.formName="DocFlowOutDialog";options.controller="DocFlowOut_Controller";options.method="get_object";DocFlowOutDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowOutDialog_Form,WindowFormObject); 
function DocFlowOutList_Form(options){options=options||{};options.formName="DocFlowOutList";options.controller="DocFlowOut_Controller";options.method="get_list";DocFlowOutList_Form.superclass.constructor.call(this,options);}
extend(DocFlowOutList_Form,WindowFormObject); 
function DocFlowInList_Form(options){options=options||{};options.formName="DocFlowInList";options.controller="DocFlowIn_Controller";options.method="get_list";DocFlowInList_Form.superclass.constructor.call(this,options);}
extend(DocFlowInList_Form,WindowFormObject); 
function DocFlowInsideList_Form(options){options=options||{};options.formName="DocFlowInsideList";options.controller="DocFlowInside_Controller";options.method="get_list";DocFlowInsideList_Form.superclass.constructor.call(this,options);}
extend(DocFlowInsideList_Form,WindowFormObject); 
function DocFlowInsideDialog_Form(options){options=options||{};options.formName="DocFlowInsideDialog";options.controller="DocFlowInside_Controller";options.method="get_object";DocFlowInsideDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowInsideDialog_Form,WindowFormObject); 
function DepartmentDialog_Form(options){options=options||{};options.formName="DepartmentDialog";options.controller="Department_Controller";options.method="get_object";DepartmentDialog_Form.superclass.constructor.call(this,options);}
extend(DepartmentDialog_Form,WindowFormObject); 
function EmployeeDialog_Form(options){options=options||{};options.formName="EmployeeDialog";options.controller="Employee_Controller";options.method="get_object";EmployeeDialog_Form.superclass.constructor.call(this,options);}
extend(EmployeeDialog_Form,WindowFormObject); 
function EmployeeList_Form(options){options=options||{};options.formName="EmployeeList";options.controller="Employee_Controller";options.method="get_list";EmployeeList_Form.superclass.constructor.call(this,options);}
extend(EmployeeList_Form,WindowFormObject); 
function DepartmentList_Form(options){options=options||{};options.formName="DepartmentList";options.controller="Department_Controller";options.method="get_list";DepartmentList_Form.superclass.constructor.call(this,options);}
extend(DepartmentList_Form,WindowFormObject); 
function PostList_Form(options){options=options||{};options.formName="PostList";options.controller="Post_Controller";options.method="get_list";PostList_Form.superclass.constructor.call(this,options);}
extend(PostList_Form,WindowFormObject); 
function DocFlowTypeDialog_Form(options){options=options||{};options.formName="DocFlowTypeDialog";options.controller="DocFlowType_Controller";options.method="get_object";DocFlowTypeDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowTypeDialog_Form,WindowFormObject); 
function DocFlowInDialog_Form(options){options=options||{};options.formName="DocFlowInDialog";options.controller="DocFlowIn_Controller";options.method="get_object";DocFlowInDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowInDialog_Form,WindowFormObject); 
function DocFlowImportanceTypeDialog_Form(options){options=options||{};options.formName="DocFlowImportanceTypeDialog";options.controller="DocFlowImportanceType_Controller";options.method="get_object";DocFlowImportanceTypeDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowImportanceTypeDialog_Form,WindowFormObject); 
function ReportTemplate_Form(options){options=options||{};options.formName="ReportTemplate";options.controller="ReportTemplate_Controller";options.method="get_object";ReportTemplate_Form.superclass.constructor.call(this,options);}
extend(ReportTemplate_Form,WindowFormObject); 
function ReportTemplateList_Form(options){options=options||{};options.formName="ReportTemplateList";options.controller="ReportTemplate_Controller";options.method="get_list";ReportTemplateList_Form.superclass.constructor.call(this,options);}
extend(ReportTemplateList_Form,WindowFormObject); 
function ReportTemplateFile_Form(options){options=options||{};options.formName="ReportTemplateFile";options.controller="ReportTemplateFile_Controller";options.method="get_object";ReportTemplateFile_Form.superclass.constructor.call(this,options);}
extend(ReportTemplateFile_Form,WindowFormObject); 
function EmailTemplate_Form(options){options=options||{};options.formName="EmailTemplate";options.controller="EmailTemplate_Controller";options.method="get_object";EmailTemplate_Form.superclass.constructor.call(this,options);}
extend(EmailTemplate_Form,WindowFormObject); 
function DocFlowExamination_Form(options){options=options||{};options.formName="DocFlowExamination";options.controller="DocFlowExamination_Controller";options.method="get_object";DocFlowExamination_Form.superclass.constructor.call(this,options);}
extend(DocFlowExamination_Form,WindowFormObject); 
function DocFlowApprovement_Form(options){options=options||{};options.formName="DocFlowApprovement";options.controller="DocFlowApprovement_Controller";options.method="get_object";DocFlowApprovement_Form.superclass.constructor.call(this,options);}
extend(DocFlowApprovement_Form,WindowFormObject); 
function DocFlowRegistration_Form(options){options=options||{};options.formName="DocFlowRegistration";options.controller="DocFlowRegistration_Controller";options.method="get_object";DocFlowRegistration_Form.superclass.constructor.call(this,options);}
extend(DocFlowRegistration_Form,WindowFormObject); 
function DocFlowOutClientDialog_Form(options){options=options||{};options.formName="DocFlowOutClientDialog";options.controller="DocFlowOutClient_Controller";options.method="get_object";DocFlowOutClientDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowOutClientDialog_Form,WindowFormObject); 
function DocFlowInClientDialog_Form(options){options=options||{};options.formName="DocFlowInClientDialog";options.controller="DocFlowInClient_Controller";options.method="get_object";DocFlowInClientDialog_Form.superclass.constructor.call(this,options);}
extend(DocFlowInClientDialog_Form,WindowFormObject); 
function ContractDialog_Form(options){options=options||{};options.formName="ContractDialog";options.controller="Contract_Controller";options.method="get_object";ContractDialog_Form.superclass.constructor.call(this,options);}
extend(ContractDialog_Form,WindowFormObject); 
function OfficeDialog_Form(options){options=options||{};options.formName="OfficeDialog";options.controller="Office_Controller";options.method="get_object";OfficeDialog_Form.superclass.constructor.call(this,options);}
extend(OfficeDialog_Form,WindowFormObject); 
function ReportTemplateFileApplyCmd_Form(id,options){options=options||{};var self=this;this.m_templateId=options.templateId;this.m_view=new ReportTemplateApply_View(this.getId()+":view:body:view",{"inParams":options.inParams});var form_opts={"cmdCancel":true,"controlCancelCaption":"Отмена","controlCancelTitle":"Закрыть форму","cmdOk":true,"controlOkCaption":"Сформировать","controlOkTitle":"Сформировать файл из шаблона","onClickCancel":function(){self.close();},"onClickOk":function(){self.downloadFile();self.close();},"content":this.m_view,"contentHead":"Формирование файла из шаблона"};ReportTemplateFileApplyCmd_Form.superclass.constructor.call(this,id,form_opts);}
extend(ReportTemplateFileApplyCmd_Form,WindowFormModalBS);ReportTemplateFileApplyCmd_Form.prototype.close=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
ReportTemplateFileApplyCmd_Form.superclass.close.call(this);}
ReportTemplateFileApplyCmd_Form.prototype.downloadFile=function(){var pm=(new ReportTemplateFile_Controller()).getPublicMethod("apply_template_file");pm.setFieldValue("id",this.m_templateId);pm.setFieldValue("params",CommonHelper.serialize(this.m_view.getParams()));pm.download("ViewXML");} 
function ReportTemplateFileList_Form(options){options=options||{};options.formName="ReportTemplateFileList";options.controller="ReportTemplate_Controller";options.method="get_list";ReportTemplateFileList_Form.superclass.constructor.call(this,options);}
extend(ReportTemplateFileList_Form,WindowFormObject); 
function DocFlowApprovementTemplate_Form(options){options=options||{};options.formName="DocFlowApprovementTemplate";options.controller="DocFlowApprovementTemplate_Controller";options.method="get_object";DocFlowApprovementTemplate_Form.superclass.constructor.call(this,options);}
extend(DocFlowApprovementTemplate_Form,WindowFormObject); 
function DocFlowApprovementTemplateList_Form(options){options=options||{};options.formName="DocFlowApprovementTemplateList";options.controller="DocFlowApprovementTemplate_Controller";options.method="get_list";DocFlowApprovementTemplateList_Form.superclass.constructor.call(this,options);}
extend(DocFlowApprovementTemplateList_Form,WindowFormObject); 
function ShortMessage_Form(options){options=options||{};options.formName="ShortMessage";options.controller="ShortMessage_Controller";options.method="get_object";ShortMessage_Form.superclass.constructor.call(this,options);}
extend(ShortMessage_Form,WindowFormObject); 
function UserDialog_Form(options){options=options||{};options.formName="UserDialog";options.controller="User_Controller";options.method="get_object";UserDialog_Form.superclass.constructor.call(this,options);}
extend(UserDialog_Form,WindowFormObject); 
function Login_View(id,options){Login_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new ErrorControl(id+":error"));var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.login();}};this.addElement(new EditString(id+":user",{"html":"<input/>","focus":true,"maxlength":"100","cmdClear":false,"required":true,"errorControl":new ErrorControl(id+":user:error"),"events":{"keydown":check_for_enter}}));this.addElement(new EditPassword(id+":pwd",{"html":"<input/>","maxlength":"50","required":true,"errorControl":new ErrorControl(id+":pwd:error"),"events":{"keydown":check_for_enter}}));this.addElement(new Button(id+":submit_login",{"onClick":function(){self.login();}}));var contr=new User_Controller();var pm=contr.getPublicMethod("login");this.addCommand(new Command("login",{"publicMethod":pm,"control":this.getElement("submit_login"),"async":false,"bindings":[new DataBinding({"field":pm.getField("name"),"control":this.getElement("user")}),new DataBinding({"field":pm.getField("pwd"),"control":this.getElement("pwd")})]}));}
extend(Login_View,ViewAjx);Login_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
Login_View.prototype.login=function(){var self=this;this.execCommand("login",function(){document.location.href=window.getApp().getHost();},function(resp,errCode,errStr){if(errCode==100){self.setError(self.ER_LOGIN);}
else{self.setError((errCode!=undefined)?(errCode+" "+errStr):errStr);}});} 
function FileUploader_View(id,options){options=options||{};this.m_setFileOptions=options.setFileOptions;this.m_allowSignature=(options.allowSignature!=undefined)?options.allowSignature:true;this.m_customFolder=options.customFolder;this.m_includeFilePath=(options.includeFilePath!=undefined)?options.includeFilePath:false;if(options.constDownloadTypes&&options.constDownloadMaxSize){var constants={};constants[options.constDownloadTypes]=null;constants[options.constDownloadMaxSize]=null;window.getApp().getConstantManager().get(constants);var t_model=constants[options.constDownloadTypes].getValue();this.m_fileTypes=[];options.maxFileSize=constants[options.constDownloadMaxSize].getValue();options.allowedFileExt=[];if(!t_model.rows){throw new Error("Не определены расширения для загрузки! Заполните константу!");}
var sig_ext_exists=false;for(var i=0;i<t_model.rows.length;i++){this.m_fileTypes.push(t_model.rows[i].fields.ext);options.allowedFileExt.push({"ext":t_model.rows[i].fields.ext});sig_ext_exists=(!sig_ext_exists&&(t_model.rows[i].fields.ext.toLowerCase()==this.SIGN_EXT));}
if(this.m_allowSignature&&!sig_ext_exists){this.m_fileTypes.push(this.SIGN_EXT);}}
this.m_maxFileSize=options.maxFileSize;this.m_allowedFileExt=options.allowedFileExt;this.m_items=options.items;this.m_fileTemplate=options.fileTemplate;this.m_fileTemplateOptions=options.fileTemplateOptions||{};this.m_filePicClass=options.filePicClass;this.m_fileListClass=options.fileListClass;this.m_fileAddClass=options.fileAddClass;this.m_allowOnlySignedFiles=options.allowOnlySignedFiles;this.m_allowIdList=options.allowIdList;this.m_separateSignature=(options.separateSignature!=undefined)?options.separateSignature:true;this.m_allowFileDeletion=(options.allowFileDeletion!=undefined&&!options.readOnly)?options.allowFileDeletion:!options.readOnly;this.m_allowFileDownload=(options.allowFileDownload!=undefined)?options.allowFileDownload:true;this.m_totalFileCount=0;options.templateOptions=options.templateOptions||{};options.templateOptions.items=this.m_items;options.templateOptions.COLOR_CLASS=window.getApp().getColorClass();options.templateOptions.allowedFileExt=this.m_allowedFileExt;options.templateOptions.maxFileSize=CommonHelper.byteFormat(this.m_maxFileSize);var self=this;options.addElement=options.addElement||function(){this.addElement(new Control(id+":file-upload","TEMPLATE",{"events":{"click":function(){self.uploadAll();}}}))}
this.setCustomUploadServer(options.customUploadServer);FileUploader_View.superclass.constructor.call(this,id,"DIV",options);}
extend(FileUploader_View,ControlContainer);FileUploader_View.prototype.SIGN_EXT="sig";FileUploader_View.prototype.IDLIST_MARK="-УЛ";FileUploader_View.prototype.FILE_DIR_SEP="/";FileUploader_View.prototype.m_maxFileSize;FileUploader_View.prototype.m_allowedFileExt;FileUploader_View.prototype.m_uploader;FileUploader_View.prototype.m_totalFileCount;FileUploader_View.prototype.m_fileTemplate;FileUploader_View.prototype.m_fileTemplateOptions;FileUploader_View.prototype.m_filePicClass;FileUploader_View.prototype.m_fileListClass;FileUploader_View.prototype.m_fileAddClass;FileUploader_View.prototype.m_allowOnlySignedFiles;FileUploader_View.prototype.m_allowIdList;FileUploader_View.prototype.m_separateSignature;FileUploader_View.prototype.allowFileDeletion;FileUploader_View.prototype.allowFileDownload;FileUploader_View.prototype.m_customUploadServer;FileUploader_View.prototype.checkRequiredFiles=function(){var containers=this.getElements();var no_files=[];for(var id in containers){if(containers[id].m_filesRequired){if(containers[id].isEmpty()){no_files.push("'"+containers[id].m_descr+"'");}}}
return no_files;}
FileUploader_View.prototype.upload=function(){if(this.m_uploader){if(this.m_allowOnlySignedFiles){var no_sig_files=[];for(var i=0;i<this.m_uploader.files.length;i++){if(!this.m_uploader.files[i].signature&&!this.m_uploader.files[i].file_signed){no_sig_files.push(this.m_uploader.files[i].file_path+this.FILE_DIR_SEP+this.m_uploader.files[i].fileName);}}
if(no_sig_files.length){throw new Error(CommonHelper.format(this.ER_NO_SIG_FILES,no_sig_files));}}
else if(this.m_allowIdList){var no_sig_files=[];var no_sig_file_paths={};var no_sig_idlists=[];var signed_idlists={};for(var i=0;i<this.m_uploader.files.length;i++){if(!this.m_uploader.files[i].signature){var is_idlist=false;var file_parts=this.m_uploader.files[i].fileName.split(".");if(file_parts.length>=2){var nm=file_parts[file_parts.length-2];is_idlist=(nm.substring(nm.length-this.IDLIST_MARK.length).toUpperCase()==this.IDLIST_MARK);if(is_idlist){file_parts[file_parts.length-2]=nm.substring(0,nm.length-this.IDLIST_MARK.length).trim();file_parts[file_parts.length-1]=file_parts[file_parts.length-1].trim();}}
if(is_idlist&&!this.m_uploader.files[i].file_signed){no_sig_idlists.push(this.m_uploader.files[i].file_path+this.FILE_DIR_SEP+this.m_uploader.files[i].fileName);}
else if(is_idlist){signed_idlists[file_parts.join(".")]=true;}
else if(!this.m_uploader.files[i].file_signed){file_parts[file_parts.length-2]=file_parts[file_parts.length-2].trim();file_parts[file_parts.length-1]=file_parts[file_parts.length-1].trim();var nm_no_spaces=file_parts.join(".");no_sig_files.push(nm_no_spaces);no_sig_file_paths[nm_no_spaces]=this.m_uploader.files[i].file_path;}}}
if(no_sig_idlists.length){throw new Error(CommonHelper.format(this.ER_NO_SIG_IDLISTS,no_sig_idlists));}
var no_sig_no_idlist_files=[];for(var i=0;i<no_sig_files.length;i++){if(!signed_idlists[no_sig_files[i]]){no_sig_no_idlist_files.push(no_sig_file_paths[no_sig_files[i]]+this.FILE_DIR_SEP+no_sig_files[i]);}}
if(no_sig_no_idlist_files.length){throw new Error(CommonHelper.format(this.ER_NO_SIG_NO_IDLIST_FILES,no_sig_no_idlist_files));}}
this.m_uploader.upload();}}
FileUploader_View.prototype.uploadAll=function(){this.upload();}
FileUploader_View.prototype.calcFileTotals=function(docId){if(this.m_uploader){$(document.getElementById(this.getId()+":total_upload_files")).text(this.m_uploader.files.length?(this.m_uploader.files.length+"  ("+CommonHelper.byteForamt(this.m_uploader.getSize())+")"):0);}
if(docId){var n_tot=document.getElementById(this.getId()+":total_item_files_"+docId);if(n_tot){var file_cont=document.getElementById(this.getId()+":file-list_"+docId);n_tot.textContent=file_cont.getElementsByTagName("LI").length;}}}
FileUploader_View.prototype.addFileToContainer=function(container,itemFile,itemId){var self=this;var templateOptions=this.m_fileTemplateOptions;templateOptions.file_id=itemFile.file_id;templateOptions.file_uploaded=itemFile.file_uploaded;templateOptions.file_not_uploaded=(itemFile.file_uploaded!=undefined)?!itemFile.file_uploaded:true;templateOptions.file_deleted=(itemFile.deleted!=undefined)?itemFile.deleted:false;templateOptions.file_not_deleted=!itemFile.deleted;templateOptions.file_deleted_dt=(itemFile.deleted&&itemFile.deleted_dt)?DateHelper.format(DateHelper.strtotime(itemFile.deleted_dt),"d/m/Y H:i"):null;templateOptions.file_name=itemFile.file_name;templateOptions.file_size_formatted=CommonHelper.byteForamt(itemFile.file_size);templateOptions.file_signed=(itemFile.file_signed!=undefined)?itemFile.file_signed:false;templateOptions.file_not_signed=!itemFile.file_signed;templateOptions.file_deletable=(this.m_allowFileDeletion&&!templateOptions.file_deleted);templateOptions.separateSignature=this.m_separateSignature;templateOptions.customFolder=this.m_customFolder;templateOptions.out_file_id=itemFile.out_file_id;if(this.m_includeFilePath){templateOptions.file_path=itemFile.file_path+"/ ";}
if(this.m_setFileOptions){this.m_setFileOptions(templateOptions,itemFile);}
else{templateOptions.file_date_time_formatted=DateHelper.format(DateHelper.strtotime(itemFile.date_time),"d/m/y","ru");templateOptions.refTitle="Скачать файл";}
var file_ctrl=new ControlContainer(this.getId()+":file_"+itemFile.file_id,"TEMPLATE",{"attrs":{"file_uploaded":itemFile.file_uploaded},"template":this.m_fileTemplate,"templateOptions":templateOptions});if(templateOptions.out_file_id){container.addElement(new Button(this.getId()+":file_"+itemFile.file_id+"_outSig",{"attrs":{"file_id":itemFile.out_file_id,"item_id":itemId},"onClick":function(e){e.preventDefault();if(self.downloadOutSig)self.downloadOutSig(this.getAttr("file_id"));}}));}
if(this.m_customFolder){var incl_id=this.getId()+":file_"+itemFile.file_id+":include";var vis=(itemFile.file_path&&itemFile.file_path.length&&itemFile.file_path!="Исходящие")?true:false;var folder_ctrl=new ApplicationDocFolderSelect(incl_id+":folder",{"visible":vis,"enabled":!itemFile.file_uploaded,"className":"","inline":true,"labelCaption":"","title":"Выберите папку проекта","addNotSelected":true});if(folder_ctrl.getVisible()){folder_ctrl.origtoDOM=folder_ctrl.toDOM;folder_ctrl.rendered=false;folder_ctrl.initFilePath=itemFile.file_path
folder_ctrl.toDOM=function(parent){this.origtoDOM.call(this,parent);if(!this.rendered){this.rendered=true;var m=this.getModel();m.reset();while(m.getNextRow()){if(m.getFieldValue("name")==this.initFilePath){folder_ctrl.setValue(new RefType({"keys":{"id":m.getFieldValue("id")}}));break;}}}}}
file_ctrl.includeCont=new ControlContainer(incl_id,"SPAN",{"elements":[new EditCheckBox(incl_id+":check",{"value":folder_ctrl.getVisible(),"className":"","inline":true,"attrs":{"file_id":itemFile.file_id,"doc_id":itemId},"title":"Включение файла в папку проекта","enabled":folder_ctrl.getEnabled(),"events":{"change":function(){var cont=self.getElement("file-list_"+this.getAttr("doc_id"));var folder=cont.getElement("file_"+this.getAttr("file_id")).includeCont.getElement("folder");var v=this.getValue();if(!v){folder.reset();}
folder.setVisible(v);}}}),folder_ctrl]});file_ctrl.includeCont.toDOM(file_ctrl.getNode());}
container.addElement(file_ctrl);if(!itemFile.deleted&&this.m_allowFileDeletion){container.addElement(new Button(this.getId()+":file_"+itemFile.file_id+"_del",{"attrs":{"file_id":itemFile.file_id,"item_id":itemId},"onClick":function(){self.deleteFile(this.getAttr("file_id"),this.getAttr("item_id"));}}));}
if(this.m_allowFileDownload){container.addElement(new Button(this.getId()+":file_"+itemFile.file_id+"_href",{"attrs":{"class":"","file_id":itemFile.file_id,"file_signed":itemFile.file_signed},"onClick":function(e){var n=document.getElementById(self.getId()+":file_"+this.getAttr("file_id"));if(n&&n.getAttribute("file_uploaded")=="true"){self.downloadFile(this);e.preventDefault();}}}));}
this.incTotalFileCount();}
FileUploader_View.prototype.addFileControls=function(items){if(!items)return;var self=this;for(var i=0;i<items.length;i++){var file_cont;if(items[i].fields){if(!items[i].items||!items[i].items.length){file_cont=new ControlContainer(this.getId()+":file-list_"+items[i].fields.id,"DIV");file_cont.m_filesRequired=items[i].fields.required;file_cont.m_descr=items[i].fields.descr;this.addElement(file_cont);}}
else{file_cont=this.getElement("file-list_doc");}
if(items[i].files&&items[i].files.length){for(var j=0;j<items[i].files.length;j++){this.addFileToContainer(file_cont,items[i].files[j],items[i].fields?items[i].fields.id:"doc");}}
if(items[i].items&&items[i].items.length){this.addFileControls(items[i].items);}}}
FileUploader_View.prototype.deleteFileFromServer=function(fileId,itemId){}
FileUploader_View.prototype.deleteFile=function(fileId,itemId){var file_cont=this.getElement("file-list_"+itemId);var file_ctrl=file_cont.getElement("file_"+fileId);if(file_ctrl.getAttr("file_uploaded")=="true"){var self=this;WindowQuestion.show({"text":this.Q_DEL_FILE,"no":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.deleteFileFromServer(fileId,itemId);}}});}
else{this.deleteFileFromDownload(fileId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");this.calcFileTotals(itemId);}}
FileUploader_View.prototype.deleteFileFromDownload=function(fileId){var first_deleted=false;var for_delete=[];for(var i=0;i<this.m_uploader.files.length;i++){if(this.m_uploader.files[i].file_id==fileId){var stop=(first_deleted||(!this.m_uploader.files[i].signature&&!this.m_uploader.files[i].file_signed));for_delete.push(this.m_uploader.files[i]);if(stop){break;}
first_deleted=true;}}
for(var i=0;i<for_delete.length;i++){this.m_uploader.removeFile(for_delete[i]);}}
FileUploader_View.prototype.fireFileError=function(file,message){this.m_uploadedWithErrors=true;var mes;if(!file.signature){var file_ctrl=this.getElement("file-list_"+file.doc_id).getElement("file_"+file.file_id);var pic=DOMHelper.getElementsByAttr(this.m_filePicClass,file_ctrl.getNode(),"class",true)[0];pic.className=this.m_filePicClass+" glyphicon glyphicon-ban-circle";pic.setAttribute("title",this.ER_FILE_DOWNLOAD);mes=this.ER_FILE_DOWNLOAD+" "+file.fileName+". "+message;}
else{mes=this.ER_SIG_DOWNLOAD+" "+file.fileName+". "+message;}
window.showError(mes);}
FileUploader_View.prototype.initDownload=function(){var self=this;this.m_uploader=new Resumable({"target":(this.m_customUploadServer?this.m_customUploadServer:"")+"functions/file_upload.php","testChunks":true,"fileType":this.m_fileTypes,"maxFileSize":this.m_maxFileSize,"maxFileSizeErrorCallback":function(file,errorCount){var f_name=file.fileName||file.name;window.showError(CommonHelper.format(self.ER_MAX_FILE_SIZE,[f_name,sef.m_maxFileSize]));},"fileTypeErrorCallback":function(file,errorCount){var f_name=file.fileName||file.name;var n_parts=f_name.split(".");var m="";if(n_parts.length){var ext="";for(var i=0;i<self.m_allowedFileExt.length;i++){ext+=(ext=="")?"":", ";ext+=self.m_allowedFileExt[i].ext;}
m=CommonHelper.format(self.ER_FILE_TYPE,[f_name,ext]);}
else{m=this.ER_FILE_NO_TYPE;}
window.showError(m);},"query":function(file,chunk){return self.getQuerySruc(file);}});if(!this.m_uploader.support){window.showWarn(this.ER_BROWSER_NOT_SUPPORTED);return false;}
this.m_uploader.assignBrowse(DOMHelper.getElementsByAttr(this.m_fileAddClass,this.getNode(),"class"));this.m_uploader.assignDrop(DOMHelper.getElementsByAttr(this.m_fileListClass,this.getNode(),"class"));this.m_uploader.on("fileAdded",function(file,event){var par=event.target.parentNode;while(par&&!DOMHelper.hasClass(par,self.m_fileListClass)){par=par.parentNode;}
if(par){var doc_id=par.getAttribute("item_id");var file_cont=self.getElement("file-list_"+doc_id);var pnl=document.getElementById(self.getId()+":total_item_files_"+doc_id);if(pnl){var em_panel=pnl.parentNode;file.file_path=DOMHelper.lastText(em_panel).trim();var par=em_panel.parentNode;while(par){if(DOMHelper.hasClass(par,"panel-collapse")){var par_sec=DOMHelper.getElementsByAttr("file_section",par.parentNode,"class",true)[0];file.file_path=par_sec.textContent.trim()+self.FILE_DIR_SEP+file.file_path;break;}
par=par.parentNode;}}
var sig_file_ext="."+self.SIGN_EXT;if((new RegExp("^.+\."+self.SIGN_EXT+" *$")).test(file.fileName.toLowerCase())){var orig_name=file.fileName.substring(0,file.fileName.length-sig_file_ext.length);var found=false;for(var i=0;i<self.m_uploader.files.length;i++){if(self.m_uploader.files[i].fileName==orig_name){found=true;if(!self.m_uploader.files[i].file_id){self.m_uploader.files[i].file_id=CommonHelper.uniqid();self.m_uploader.files[i].doc_id=doc_id;}
file.file_id=self.m_uploader.files[i].file_id;file.doc_id=self.m_uploader.files[i].doc_id;file.signature=true;self.m_uploader.files[i].file_signed=true;var href=document.getElementById(self.getId()+":file_"+file.file_id+"_href");if(href){DOMHelper.setAttr(href,"file_signed","true");}
var pic=document.getElementById(self.getId()+":file_"+file.file_id+"_sig");if(pic){pic.className="icon-file-locked";pic.setAttribute("title",self.SIG_TITLE);}
break;}}
if(!found){self.m_uploader.removeFile(file);throw new Error(self.ER_NO_DATA_FILE_FOR_SIG);}}
else{var cont_files=file_cont.getElements();for(var f_id in cont_files){if(cont_files[f_id]&&cont_files[f_id].getAttr("file_name")==file.fileName){self.m_uploader.removeFile(file);throw new Error(CommonHelper.format(self.ER_FILE_EXISTS,file.fileName));}}
file.file_id=file.file_id?file.file_id:CommonHelper.uniqid();file.doc_id=doc_id;self.addFileToContainer(file_cont,{"file_id":file.file_id,"file_date_time":"","file_name":file.fileName,"file_size":file.size,"file_uploaded":false,"file_signed":(file.file_signed!=undefined)?file.file_signed:false},doc_id);file_cont.toDOM();}
self.calcFileTotals(doc_id);$(document.getElementById(self.getId()+":upload-progress")).removeClass("hide").find(".progress-bar").css("width","0%");}});this.m_uploader.on("fileError",function(file,message){self.fireFileError(file,message);});this.m_uploader.on("fileSuccess",function(file,message){if(message.trim().length){self.fireFileError(file,message);}
else{if(!file.signature){window.showNote(CommonHelper.format(self.NT_FILE_DOWNLOADED,[file.fileName]));var file_ctrl=self.getElement("file-list_"+file.doc_id).getElement("file_"+file.file_id);file_ctrl.setAttr("file_uploaded","true");var pic=DOMHelper.getElementsByAttr(self.m_filePicClass,file_ctrl.getNode(),"class",true)[0];pic.className="glyphicon glyphicon-ok";pic.setAttribute("title",self.FILE_DOWNLOADED_TITLE);file.file_uploaded=true;self.m_uploadedFileIds.push(file.file_id);self.incTotalFileCount();if(self.m_customFolder&&file_ctrl.includeCont){file_ctrl.includeCont.setEnabled(false);}}}});this.m_uploader.on("uploadStart",function(){var el=$("."+self.m_filePicClass);el.toggleClass("glyphicon glyphicon-cloud-upload glyphicon-ban-circle",false);el.toggleClass("fa fa-spinner fa-spin");self.m_uploadedFileIds=[];self.m_uploadedWithErrors=false;});this.m_uploader.on("complete",function(){if(!self.m_uploadedFileIds){return;}
for(var i=0;i<self.m_uploadedFileIds.length;i++){self.deleteFileFromDownload(self.m_uploadedFileIds[i]);}
delete self.m_uploadedFileIds;self.m_uploadedFileIds=null;if(self.m_uploadedWithErrors){for(var i=0;i<self.m_uploader.files.length;i++){self.m_uploader.files[i].bootstrap();}
window.showWarn(self.WN_DOWNLOAD_DONE);}
else{window.showNote(self.NT_DOWNLOAD_DONE);}
self.calcFileTotals(null);});this.m_uploader.on("progress",function(){var progress=Math.round(self.m_uploader.progress()*100);$(document.getElementById(self.getId()+":upload-progress")).find(".progress-bar").attr("style","width:"+progress+"%");$(document.getElementById(self.getId()+":upload-progress-val")).text(progress+"%");});}
FileUploader_View.prototype.getTotalFileCount=function(){return this.m_totalFileCount;}
FileUploader_View.prototype.getForUploadFileCount=function(){return(this.m_uploader?this.m_uploader.files.length:0);}
FileUploader_View.prototype.modTotalFileCount=function(sign){this.m_totalFileCount+=sign;}
FileUploader_View.prototype.incTotalFileCount=function(){this.modTotalFileCount(1);}
FileUploader_View.prototype.decTotalFileCount=function(){this.modTotalFileCount(-1);}
FileUploader_View.prototype.toDOM=function(parent){FileUploader_View.superclass.toDOM.call(this,parent);this.addFileControls(this.m_items);}
FileUploader_View.prototype.getQuerySruc=function(file){var struc={"file_id":file.file_id,"doc_id":file.doc_id,"file_path":file.file_path};if(this.m_allowSignature){struc.file_signed=file.file_signed;struc.signature=file.signature;}
return struc;}
FileUploader_View.prototype.setCustomUploadServer=function(v){if(v){this.m_customUploadServer=v.trim();if(this.m_customUploadServer.substring(this.m_customUploadServer.length-1)!="/"){this.m_customUploadServer+="/";}}} 
FileUploader_View.prototype.ER_MAX_FILES="Максимольно разрешенное количество файлов для загрузки: %";FileUploader_View.prototype.ER_MIN_FILE_SIZE="Файл % слишком маленький, минимальный размер для загрузки: %";FileUploader_View.prototype.ER_MAX_FILE_SIZE="Файл % слишком большой, максимальный размер для загрузки: %";FileUploader_View.prototype.ER_FILE_TYPE="Файл % имеет неверный тип, разрешенные типы файлов: %";FileUploader_View.prototype.ER_FILE_NO_TYPE="Запрещено загружать файлы без расширения.";FileUploader_View.prototype.ER_FILE_DOWNLOAD="Ошибка загрузки файла";FileUploader_View.prototype.ER_SIG_DOWNLOAD="Ошибка загрузки файла подписи";FileUploader_View.prototype.ER_BROWSER_NOT_SUPPORTED="Браузер не поддерживает метод загрузки!";FileUploader_View.prototype.ER_NO_DATA_FILE_FOR_SIG="Файл с данными для этой ЭЦП не найден!";FileUploader_View.prototype.ER_NO_SIG_FILES="У следующих файлов нет ЭЦП: %";FileUploader_View.prototype.ER_NO_SIG_IDLISTS="У следующих информационно-удостоверяющих листов нет ЭЦП: %";FileUploader_View.prototype.ER_NO_SIG_NO_IDLIST_FILES="У следующих файлов нет ни ЭЦП ни информационно-удостоверяющего листа: %";FileUploader_View.prototype.ER_FILE_EXISTS="Файл с именем '%' уже есть в разделе!";FileUploader_View.prototype.NT_FILE_DOWNLOADED="Загружен файл %";FileUploader_View.prototype.NT_FILE_DELETED="Файл удален.";FileUploader_View.prototype.FILE_DOWNLOADED_TITLE="Файл успешно загружен.";FileUploader_View.prototype.Q_DEL_FILE="Удалить загруженный файл?";FileUploader_View.prototype.SIG_TITLE="Приложен файл ЭЦП";FileUploader_View.prototype.NT_DOWNLOAD_DONE="Загрузка завершена!";FileUploader_View.prototype.WN_DOWNLOAD_DONE="Загрузка завершена с ошибками!"; 
function PasswordRecovery_View(id,options){PasswordRecovery_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new ErrorControl(id+":error"));var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.passwordRecover();}};this.addElement(new EditEmail(id+":email",{"html":"<input/>","focus":true,"maxLength":"100","cmdClear":false,"required":true,"errorControl":new ErrorControl(id+":email:error"),"events":{"keydown":check_for_enter}}));this.addElement(new Captcha(id+":captcha",{"errorControl":new ErrorControl(id+":captcha:error")}));this.addElement(new Button(id+":submit",{"onClick":function(){self.passwordRecover();}}));var contr=new User_Controller();var pm=contr.getPublicMethod("password_recover");this.addCommand(new Command("password_recover",{"publicMethod":pm,"control":this.getElement("submit"),"async":false,"bindings":[new DataBinding({"field":pm.getField("email"),"control":this.getElement("email")}),new DataBinding({"field":pm.getField("captcha_key"),"control":this.getElement("captcha")})]}));}
extend(PasswordRecovery_View,ViewAjx);PasswordRecovery_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
PasswordRecovery_View.prototype.passwordRecover=function(){var self=this;this.execCommand("password_recover",function(){DOMHelper.addClass(document.getElementById("PasswordRecovery"),"hidden");DOMHelper.delClass(document.getElementById("PasswordRecovered"),"hidden");},function(resp,errCode,errStr){self.setError(errStr);if(resp.modelExists("Captcha_Model")){self.getElement("captcha").setFromResp(resp);}});} 
function Registration_View(id,options){options=options||{};options.cmdOk=false;options.cmdCancel=false;options.cmdSave=false;Registration_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new ErrorControl(id+":error"));var check_for_enter=function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){e.preventDefault();e.stopPropagation();self.submit();return false;}};this.addElement(new UserNameEdit(id+":name",{"html":"<input/>","focus":true,"labelCaption":"","errorControl":new ErrorControl(id+":name:error"),"events":{"keyup":function(){self.getElement("name").checkName();},"keydown":check_for_enter}}));this.addElement(new EditString(id+":name_full",{"html":"<input/>","labelCaption":"","errorControl":new ErrorControl(id+":name_full:error"),"cmdClear":false,"maxLength":250,"required":true,"events":{"keydown":check_for_enter}}));this.addElement(new UserPwdEdit(id+":pwd",{"view":this,"html":"<input/>","required":true,"errorControl":new ErrorControl(id+":pwd:error"),"events":{"keydown":check_for_enter}}));this.addElement(new UserPwdEdit(id+":pwd_confirm",{"view":this,"html":"<input/>","required":true,"errorControl":new ErrorControl(id+":pwd_confirm:error"),"events":{"keydown":check_for_enter}}));this.addElement(new EditEmail(id+":email",{"html":"<input/>","maxLength":"100","cmdClear":false,"required":true,"errorControl":new ErrorControl(id+":email:error"),"events":{"keydown":check_for_enter}}));this.addElement(new EditCheckBox(id+":pers_data_proc_agreement",{"html":"<input/>","events":{"change":function(){self.getElement("submit").setEnabled(self.getElement("pers_data_proc_agreement").getValue());}}}));this.addElement(new Captcha(id+":captcha",{"errorControl":new ErrorControl(id+":captcha:error"),"events":{"keydown":check_for_enter}}));this.addElement(new Button(id+":submit",{"enabled":false,"onClick":function(){self.submit();}}));var contr=new User_Controller();var pm=contr.getPublicMethod("register");this.addCommand(new Command("register",{"publicMethod":pm,"control":this.getElement("submit"),"async":false,"bindings":[new DataBinding({"field":pm.getField("name"),"control":this.getElement("name")}),new DataBinding({"field":pm.getField("name_full"),"control":this.getElement("name_full")}),new DataBinding({"field":pm.getField("email"),"control":this.getElement("email")}),new DataBinding({"field":pm.getField("pwd"),"control":this.getElement("pwd")}),new DataBinding({"field":pm.getField("pers_data_proc_agreement"),"control":this.getElement("pers_data_proc_agreement")}),new DataBinding({"field":pm.getField("captcha_key"),"control":this.getElement("captcha")})]}));}
extend(Registration_View,ViewAjx);Registration_View.prototype.setError=function(s){this.getElement("error").setValue(s);}
Registration_View.prototype.submit=function(){if(this.getElement("pwd").getValue()!=this.getElement("pwd_confirm").getValue()){this.getElement("pwd_confirm").setNotValid(this.TXT_PWD_ER);this.getElement("error").setValue(this.TXT_PWD_NOT_CONFIRMED);return;}
var self=this;this.execCommand("register",function(){document.location.href=window.getApp().getHost();},function(resp,errCode,errStr){console.dir(resp);self.setError(errStr);if(resp.modelExists("Captcha_Model")){self.getElement("captcha").setFromResp(resp);}});} 
function MainMenuConstructorList_View(id,options){options=options||{};MainMenuConstructorList_View.superclass.constructor.call(this,id,options);var model=options.models.MainMenuConstructorList_Model;var contr=new MainMenuConstructor_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":MainMenuConstructor_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:role_descr",{"value":this.GRID_ROLE_DESCR_COL_CAP,"columns":[new EnumGridColumn_role_types({"field":model.getField("role_id")})],"sortable":true}),new GridCellHead(id+":grid:head:user_descr",{"value":this.GRID_USER_DESCR_COL_CAP,"columns":[new GridColumn({"field":model.getField("user_descr")})],"sortable":true})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"refreshInterval":0,"autoRefresh":false,"rowSelect":false,"focus":true}));}
extend(MainMenuConstructorList_View,ViewAjx); 
function MainMenuConstructor_View(id,options){options=options||{};MainMenuConstructor_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new Enum_role_types(id+":role",{"labelCaption":"Роль:"}));this.addElement(new UserEditRef(id+":user",{"labelCaption":"Пользователь:"}));this.addElement(new MainMenuTree(id+":content"));var contr=new MainMenuConstructor_Controller();this.setReadPublicMethod(contr.getPublicMethod("get_object"));this.m_model=options.models.MainMenuConstructorDialog_Model;this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("content")}),new DataBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new DataBinding({"control":this.getElement("user"),"keyIds":["user_id"],"fieldId":"user_descr"})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("content"),"fieldId":"content"}),new CommandBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new CommandBinding({"control":this.getElement("user"),"fieldId":"user_id"})]);}
extend(MainMenuConstructor_View,ViewObjectAjx); 
function ViewList_View(id,options){options=options||{};ViewList_View.superclass.constructor.call(this,id,options);var model=options.models.ViewList_Model;var contr=new View_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var filters={"section":{"binding":new CommandBinding({"control":new ViewSectionSelect(id+":filter-section",{"labelCaption":undefined,"contClassName":"form-group "+window.getBsCol(12)}),"field":new FieldString("section")}),"sign":"e"}};var popup_menu=new PopUpMenu();var grid=new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"cmdInsert":false,"cmdCopy":new GridCmd(id+":grid:cmd:openNewWin",{"glyph":"glyphicon glyphicon-duplicate","title":this.OPEN_WIN_TITLE,"showCmdControl":false,"onCommand":function(){var fields=this.m_grid.getModelRow();if(fields){var form=new WindowFormObject({"formName":fields.t.getValue(),"controller":fields.c.getValue(),"method":fields.f.getValue()});form.open();}}}),"cmdDelete":false,"cmdEdit":new GridCmd(id+":grid:cmd:open",{"glyph":"glyphicon-eye-open","title":this.OPEN_TITLE,"showCmdControl":false,"onCommand":function(){this.m_grid.onEdit();}})}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:user_descr",{"value":this.GRID_COL_CAP,"columns":[new GridColumn({"field":model.getField("user_descr")})]})]})]}),"pagination":new GridPagination(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true});grid.edit=function(){var row=this.getModelRow();window.getApp().showMenuItem(null,row.c.getValue(),row.f.getValue(),row.t.getValue());}
this.addElement(grid);}
extend(ViewList_View,ViewAjx); 
function UserProfile_View(id,options){options=options||{};options.cmdOkAsync=false;options.cmdOk=false;options.cmdCancel=false;UserProfile_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new HiddenKey(id+":id"));this.addElement(new UserNameEdit(id+":name",{"focus":true,"events":{"keyup":function(){self.getControlSave().setEnabled(true);self.getElement("name").checkName();}}}));this.addElement(new EditString(id+":name_full",{"labelCaption":"ФИО пользователя:"}));this.addElement(new UserPwdEdit(id+":pwd",{"labelCaption":"Пароль:","view":this,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new UserPwdEdit(id+":pwd_confirm",{"required":false,"labelCaption":"Подтверждение пароля:","view":this}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","required":false,"events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new EditPhone(id+":phone_cel",{"labelCaption":"Моб.телефон:","events":{"keyup":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new EditColorPalette(id+":color_palette",{"labelCaption":"Цветовая схема:","events":{"change":function(){self.getControlSave().setEnabled(true);}}}));this.addElement(new EditCheckBox(id+":reminders_to_email",{"labelCaption":"Дублировать напоминания на электронную почту"}));var contr=new User_Controller();this.setReadPublicMethod(contr.getPublicMethod("get_profile"));this.m_model=options.models.UserProfile_Model;this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("name_full"),"model":this.m_model}),new DataBinding({"control":this.getElement("email"),"model":this.m_model}),new DataBinding({"control":this.getElement("phone_cel"),"model":this.m_model}),new DataBinding({"control":this.getElement("color_palette")}),new DataBinding({"control":this.getElement("reminders_to_email")})]);this.setController(contr);this.getCommand(this.CMD_OK).setBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("phone_cel")}),new CommandBinding({"control":this.getElement("pwd")}),new CommandBinding({"control":this.getElement("color_palette")}),new CommandBinding({"control":this.getElement("reminders_to_email")})]);this.getControlSave().setEnabled(false);}
extend(UserProfile_View,ViewObjectAjx); 
function About_View(id,options){options=options||{};options.tagName="template";this.model=options.models.About_Model;this.model.getRow(0);options.templateOptions={"LB_APP_NAME":this.LB_APP_NAME,"LB_VERSION":this.LB_VERSION,"LB_AUTHOR":this.LB_AUTHOR,"LB_TECH_MAIL":this.LB_TECH_MAIL,"LB_DB_NAME":this.LB_DB_NAME,"LB_FW_SERVER_VERSION":this.LB_FW_SERVER_VERSION,"LB_FW_CLIENT_VERSION":this.LB_FW_CLIENT_VERSION,"VERSION":window.getApp().VERSION};var fields=this.model.getFields();for(var fid in fields){options.templateOptions[fid]=fields[fid].getValue();}
About_View.superclass.constructor.call(this,id,options);}
extend(About_View,ViewAjx); 
function Bank_View(id,options){options=options||{};options.enabled=false;options.cmdOk=false;options.cmdSave=false;Bank_View.superclass.constructor.call(this,id,options);this.addElement(new EditString(id+":bik",{"editMask":"999999999","maxLenght":"9","fixLength":true,"enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_BIK}));this.addElement(new EditString(id+":name",{"maxLenght":"50","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_NAME}));this.addElement(new EditString(id+":gor",{"maxLenght":"50","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_CITY}));this.addElement(new EditString(id+":gr_descr",{"maxLenght":"50","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_GROUP}));this.addElement(new EditString(id+":korshet",{"editMask":"99999999999999999999","maxLenght":"20","fixLength":true,"enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_BANK_ACC}));this.addElement(new EditString(id+":adres",{"maxLenght":"70","enabled":false,"cmdClear":false,"labelCaption":this.LB_CAP_ADDRESS}));this.setReadPublicMethod((new Bank_Controller()).getPublicMethod("get_object"));this.m_model=options.models.BankList_Model;this.setDataBindings([new DataBinding({"control":this.getElement("bik"),"model":this.m_model}),new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("korshet"),"model":this.m_model}),new DataBinding({"control":this.getElement("gor"),"model":this.m_model}),new DataBinding({"control":this.getElement("gr_descr"),"model":this.m_model})]);}
extend(Bank_View,ViewObjectAjx); 
function BankList_View(id,options){options=options||{};BankList_View.superclass.constructor.call(this,id,options);var model=options.models.BankList_Model;var contr=new Bank_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["bik"],"controller":contr,"editInline":false,"editWinClass":Bank_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:bik",{"columns":[new GridColumn({"field":model.getField("bik")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:gr_descr",{"columns":[new GridColumn({"field":model.getField("gr_descr")})],"sortable":true}),new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true}),new GridCellHead(id+":grid:head:korshet",{"columns":[new GridColumn({"field":model.getField("korshet")})],"sortable":true}),new GridCellHead(id+":grid:head:gor",{"columns":[new GridColumn({"field":model.getField("gor")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(BankList_View,ViewAjxList); 
function ConstantList_View(id,options){ConstantList_View.superclass.constructor.call(this,id,options);this.addElement(new ConstantGrid(id+":grid",{"model":options.models.ConstantList_Model}));}
extend(ConstantList_View,ViewAjx); 
function UserList_View(id,options){UserList_View.superclass.constructor.call(this,id,options);var model=options.models.UserList_Model;var contr=new User_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":User_Form,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name_full",{"columns":[new GridColumn({"field":model.getField("name_full")})],"sortable":true}),new GridCellHead(id+":grid:head:email",{"columns":[new GridColumn({"field":model.getField("email")})]}),new GridCellHead(id+":grid:head:phone_cel",{"columns":[new GridColumnPhone({"field":model.getField("phone_cel")})],"sortable":true}),new GridCellHead(id+":grid:head:role_id",{"value":"Роль","columns":[new EnumGridColumn_role_types({"field":model.getField("role_id"),"ctrlClass":Enum_role_types,"searchOptions":{"searchType":"on_match","typeChange":false}})],"sortable":true}),new GridCellHead(id+":grid:head:create_dt",{"value":"Дата создания","columns":[new GridColumnDate({"field":model.getField("create_dt"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("create_dt"),"searchType":"on_beg"}})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(UserList_View,ViewAjx); 
function UserDialog_View(id,options){options=options||{};options.controller=new User_Controller();options.model=options.models.UserDialog_Model;var self=this;options.addElement=function(){var bs=window.getBsCol();this.addElement(new HiddenKey(id+":id"));this.addElement(new UserNameEdit(id+":name"));this.addElement(new EditString(id+":name_full",{"labelCaption":"ФИО пользователя:"}));this.addElement(new Enum_role_types(id+":role",{"labelCaption":"Роль:","required":true}));this.addElement(new EditEmail(id+":email",{"required":true,"labelCaption":"Эл.почта:"}));this.addElement(new EditCheckBox(id+":email_confirmed",{"enabled":false,"labelCaption":"Адрес эл.почты подтвержден:"}));this.addElement(new EditPhone(id+":phone_cel",{"labelCaption":"Моб.телефон:"}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий:"}));this.addElement(new EditCheckBox(id+":banned",{"labelCaption":"Доступ запрещен:"}));this.addElement(new EditColorPalette(id+":color_palette",{"labelCaption":"Цветовая схема:"}));if(window.getApp().getServVar("role_id")=="admin"){this.addElement(new ButtonCmd(id+":cmdHide",{"onClick":function(){self.hideUser();}}));}
this.addElement(new EditCheckBox(id+":reminders_to_email",{"labelCaption":"Дублировать напоминания на электронную почту"}));}
UserDialog_View.superclass.constructor.call(this,id,options);var r_bd=[new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("name_full")}),new DataBinding({"control":this.getElement("role"),"field":this.m_model.getField("role_id")}),new DataBinding({"control":this.getElement("email")}),new DataBinding({"control":this.getElement("email_confirmed")}),new DataBinding({"control":this.getElement("phone_cel")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("banned")}),new DataBinding({"control":this.getElement("color_palette")}),new DataBinding({"control":this.getElement("reminders_to_email")})];this.setDataBindings(r_bd);this.setWriteBindings([new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("role"),"fieldId":"role_id"}),new CommandBinding({"control":this.getElement("email")}),new CommandBinding({"control":this.getElement("phone_cel")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("banned")}),new CommandBinding({"control":this.getElement("color_palette")}),new CommandBinding({"control":this.getElement("reminders_to_email")})]);}
extend(UserDialog_View,ViewObjectAjx);UserDialog_View.prototype.hideUser=function(){var pm=this.getController().getPublicMethod("hide");pm.setFieldValue("id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(resp){self.close({"updated":true});}});}
UserDialog_View.prototype.onGetData=function(resp){UserDialog_View.superclass.onGetData.call(this,resp);var m=this.getModel();if(m.getFieldValue("banned")){this.getElement("cmdHide").setEnabled(false);}} 
function TimeZoneLocale_View(id,options){TimeZoneLocale_View.superclass.constructor.call(this,id,options);var model=options.models.TimeZoneLocale_Model;var contr=new TimeZoneLocale_Controller();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"keyIds":["id"],"model":model,"controller":contr,"editInline":true,"editWinClass":null,"cmdInsert":false,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdSearch":false}),"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"columns":[new GridColumn("name",{"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:descr",{"columns":[new GridColumn("desc",{"field":model.getField("descr")})],"sortable":true}),new GridCellHead(id+":grid:head:hour_dif",{"columns":[new GridColumn({"field":model.getField("hour_dif")})],"sortable":true})]})]}),"autoRefresh":false,"focus":true,"rowSelect":true}));}
extend(TimeZoneLocale_View,ViewAjx); 
function MailForSendingList_View(id,options){options=options||{};MailForSendingList_View.superclass.constructor.call(this,id,options);MailForSendingList_View.superclass.constructor.call(this,id,options);var model=options.models.MailForSendingList_Model;var contr=new MailForSending_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"email_type":{"binding":new CommandBinding({"control":new Enum_email_types(id+":filter-ctrl-email_type",{"contClassName":"form-group-filter","labelCaption":"Статус"}),"field":new FieldString("email_type")}),"sign":"e"}};this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":MailForSending_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdCopy":false,"cmdDelete":false,"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"columns":[new GridColumnDate({"dateFormat":"d/m/Y H:i","field":model.getField("date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject",{"columns":[new GridColumn({"field":model.getField("subject")})],"sortable":true}),new GridCellHead(id+":grid:head:from_addr",{"columns":[new GridColumn({"field":model.getField("from_addr")})],"sortable":true}),new GridCellHead(id+":grid:head:from_name",{"columns":[new GridColumn({"field":model.getField("from_name")})],"sortable":true}),new GridCellHead(id+":grid:head:to_addr",{"columns":[new GridColumn({"field":model.getField("to_addr")})],"sortable":true}),new GridCellHead(id+":grid:head:to_name",{"columns":[new GridColumn({"field":model.getField("to_name")})],"sortable":true}),new GridCellHead(id+":grid:head:sent_date_time",{"columns":[new GridColumnDate({"dateFormat":"d/m/Y H:i","field":model.getField("sent_date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("sent_date_time"),"searchType":"on_beg"}})],"sortable":true}),new GridCellHead(id+":grid:head:email_type",{"columns":[new EnumGridColumn_email_types({"field":model.getField("email_type")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(MailForSendingList_View,ViewAjx); 
function MailForSending_View(id,options){options=options||{};options.enabled=false;options.controller=new MailForSending_Controller();options.model=options.models.MailForSending_Model;MailForSending_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new EditString(id+":from_addr",{"labelCaption":"Адрес отправителя:"}));this.addElement(new EditDateTime(id+":date_time",{"labelCaption":"Дата создания:"}));this.addElement(new EditString(id+":from_name",{"labelCaption":"Имя отправителя:"}));this.addElement(new EditString(id+":to_addr",{"labelCaption":"Адрес получателя:"}));this.addElement(new EditString(id+":to_name",{"labelCaption":"Имя получателя:"}));this.addElement(new EditString(id+":reply_addr",{"labelCaption":"Адрес для ответа:"}));this.addElement(new EditString(id+":reply_name",{"labelCaption":"Имя для ответа:"}));this.addElement(new EditString(id+":subject",{"labelCaption":"Тема:"}));this.addElement(new EditText(id+":body",{"labelCaption":"Тело:"}));this.addElement(new EditCheckBox(id+":sent",{"labelCaption":"Отправлено:"}));this.addElement(new EditDateTime(id+":sent_date_time",{"labelCaption":"Дата отправки:"}));this.setDataBindings([new DataBinding({"control":this.getElement("from_addr")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("from_name")}),new DataBinding({"control":this.getElement("to_addr")}),new DataBinding({"control":this.getElement("to_name")}),new DataBinding({"control":this.getElement("rely_addr")}),new DataBinding({"control":this.getElement("rely_name")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("body")}),new DataBinding({"control":this.getElement("sent")}),new DataBinding({"control":this.getElement("sent_date_time")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("from_addr")}),new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("from_name")}),new CommandBinding({"control":this.getElement("to_addr")}),new CommandBinding({"control":this.getElement("to_name")}),new CommandBinding({"control":this.getElement("rely_addr")}),new CommandBinding({"control":this.getElement("rely_name")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("body")}),new CommandBinding({"control":this.getElement("sent")}),new CommandBinding({"control":this.getElement("sent_date_time")})]);}
extend(MailForSending_View,ViewObjectAjx); 
function EmailTemplateList_View(id,options){options=options||{};EmailTemplateList_View.superclass.constructor.call(this,id,options);var model=options.models.EmailTemplateList_Model;var contr=new EmailTemplate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var is_admin=(window.getApp().getServVar("role_id")=="admin");this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":EmailTemplate_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":is_admin,"cmdCopy":is_admin,"cmdDelete":is_admin,"cmdEdit":true}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:email_type",{"value":this.COL_EMAIL_TYPE,"columns":[new EnumGridColumn_email_types({"field":model.getField("email_type")})],"sortable":true}),new GridCellHead(id+":grid:head:template",{"value":this.COL_TEMPLATE,"columns":[new GridColumn({"field":model.getField("template")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(EmailTemplateList_View,ViewAjx); 
EmailTemplateList_View.prototype.HEAD_TITLE="Шаблоны сообщений электронной почты";EmailTemplateList_View.prototype.COL_EMAIL_TYPE="Тип";EmailTemplateList_View.prototype.COL_TEMPLATE="Шаблон"; 
function EmailTemplate_View(id,options){options=options||{};options.model=options.models.EmailTemplate_Model;options.controller=options.controller||new EmailTemplate_Controller();var self=this;var is_admin=(window.getApp().getServVar("role_id")=="admin");options.addElement=function(){this.addElement(new Enum_email_types(id+":email_type",{"labelCaption":this.CAP_EMAIL_TYPE,"enabled":is_admin,"required":true}));this.addElement(new EditText(id+":template",{"labelCaption":this.CAP_TEMPLATE,"required":true,"focus":true}));this.addElement(new EditText(id+":comment_text",{"labelCaption":this.CAP_COMMENT,"required":true,"enabled":is_admin}));this.addElement(new EditString(id+":mes_subject",{"labelCaption":this.CAP_MES_SUBJECT,"enabled":is_admin,"required":true,"maxLength":250}));var model=new ReportTemplateField_Model();this.addElement(new GridAjx(id+":fields",{"model":model,"keyIds":["id"],"controller":new ReportTemplateField_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":fields:cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":fields:head",{"elements":[new GridRow(id+":fields:head:row0",{"elements":[new GridCellHead(id+":fields:head:id",{"value":this.COL_FIELDS_ID,"columns":[new GridColumn({"field":model.getField("id"),"ctrlClass":EditString,"maxLength":"50","ctrlOptions":{"required":true}})]}),new GridCellHead(id+":fields:head:descr",{"value":this.COL_FIELDS_DESCR,"columns":[new GridColumn({"field":model.getField("descr"),"ctrlClass":EditString,"maxLength":"250","ctrlOptions":{"required":true}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true,"focus":true}));}
EmailTemplate_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("email_type"),"fieldId":"email_type"}),new DataBinding({"control":this.getElement("template")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("mes_subject")}),new DataBinding({"control":this.getElement("fields"),"fieldId":"fields"})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("email_type"),"fieldId":"email_type"}),new CommandBinding({"control":this.getElement("template")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("mes_subject")}),new CommandBinding({"control":this.getElement("fields"),"fieldId":"fields"})];this.setWriteBindings(write_b);}
extend(EmailTemplate_View,ViewObjectAjx); 
EmailTemplate_View.prototype.HEAD_TITLE="Шаблон сообщения электронной почты";EmailTemplate_View.prototype.COL_FIELDS_ID="Поле";EmailTemplate_View.prototype.COL_FIELDS_DESCR="Описание";EmailTemplate_View.prototype.CAP_EMAIL_TYPE="Тип:";EmailTemplate_View.prototype.CAP_TEMPLATE="Шаблон:";EmailTemplate_View.prototype.CAP_COMMENT="Комментарий:";EmailTemplate_View.prototype.CAP_MES_SUBJECT="Тема письма:"; 
function ClientList_View(id,options){options=options||{};ClientList_View.superclass.constructor.call(this,id,options);var model=options.models.ClientList_Model;var contr=new Client_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":Client_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:inn",{"value":"ИНН","columns":[new GridColumn({"field":model.getField("inn")})]}),new GridCellHead(id+":grid:head:kpp",{"value":"КПП","columns":[new GridColumn({"field":model.getField("kpp")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ClientList_View,ViewAjxList); 
function Client_View(id,options){options=options||{};options.model=options.models.ClientDialog_Model;options.controller=options.controller||new Client_Controller();var self=this;options.addElement=function(){this.addElement(new ClientType(id+":client_type",{"view":this}));this.addElement(new ClientNameEdit(id+":name",{"view":this,"required":true,"focus":true}));this.addElement(new ClientNameFullEdit(id+":name_full",{"required":true}));this.addElement(new ClientINN(id+":inn",{"mainView":this,"required":true}));this.addElement(new ClientKPP(id+":kpp",{}));this.addElement(new ClientPostAddressEdit(id+":post_address",{"view":this}));this.addElement(new ClientLegalAddressEdit(id+":legal_address"));this.addElement(new ClientOGRN(id+":ogrn"));this.addElement(new ClientOKPO(id+":okpo"));this.addElement(new ClientOKVED(id+":okved"));this.addElement(new EditPersonIdPaper(id+":person_id_paper",{}));this.addElement(new EditPersonRegistrPaper(id+":person_registr_paper",{}));this.addElement(new ClientDocForContract(id+":base_document_for_contract"));this.addElement(new ClientResponsableGrid(id+":responsable_persons"));var model=new ClientBankAccount_Model();this.addElement(new GridAjx(id+":bank_accounts",{"model":model,"keyIds":["acc_number"],"controller":new ClientBankAccount_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"editViewOptions":{"onBeforeExecCommand":function(cmd,pm){pm.setFieldValue("bank_descr",self.m_bankDescr);}},"commands":new GridCmdContainerAjx(id+":bank_accounts:cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":bank_accounts:head",{"elements":[new GridRow(id+":bank_accounts:head:row0",{"elements":[new GridCellHead(id+":bank_accounts:head:acc_number",{"value":"Номер счета","columns":[new GridColumn({"field":model.getField("acc_number"),"ctrlClass":EditBankAcc,"ctrlOptions":{"required":true}})]}),new GridCellHead(id+":bank_accounts:head:bank_descr",{"value":"Банк","columns":[new GridColumn({"field":model.getField("bank_descr"),"formatFunction":function(fields){return fields.bank_descr.getValue()+" "+fields.bank_bik.getValue();},"ctrlClass":BankEditRef,"ctrlBindField":model.getField("bank_bik"),"ctrlOptions":{"labelCaption":"","required":true,"keyIds":["bank_bik"],"view":this}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true,"focus":true}));}
Client_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("client_type")}),new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("name_full")}),new DataBinding({"control":this.getElement("inn")}),new DataBinding({"control":this.getElement("kpp")}),new DataBinding({"control":this.getElement("legal_address")}),new DataBinding({"control":this.getElement("post_address")}),new DataBinding({"control":this.getElement("ogrn")}),new DataBinding({"control":this.getElement("okved")}),new DataBinding({"control":this.getElement("base_document_for_contract")}),new DataBinding({"control":this.getElement("okpo")}),new DataBinding({"control":this.getElement("responsable_persons")}),new DataBinding({"control":this.getElement("bank_accounts")}),new DataBinding({"control":this.getElement("person_id_paper")}),new DataBinding({"control":this.getElement("person_registr_paper")})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("client_type")}),new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("name_full")}),new CommandBinding({"control":this.getElement("inn")}),new CommandBinding({"control":this.getElement("kpp")}),new CommandBinding({"control":this.getElement("legal_address")}),new CommandBinding({"control":this.getElement("post_address")}),new CommandBinding({"control":this.getElement("ogrn")}),new CommandBinding({"control":this.getElement("okved")}),new CommandBinding({"control":this.getElement("base_document_for_contract")}),new CommandBinding({"control":this.getElement("okpo")}),new CommandBinding({"control":this.getElement("responsable_persons"),"fieldId":"responsable_persons"}),new CommandBinding({"control":this.getElement("bank_accounts"),"fieldId":"bank_accounts"}),new CommandBinding({"control":this.getElement("person_id_paper"),"fieldId":"person_id_paper"}),new CommandBinding({"control":this.getElement("person_registr_paper"),"fieldId":"person_registr_paper"})];this.setWriteBindings(write_b);}
extend(Client_View,ViewObjectAjx);Client_View.prototype.onGetData=function(resp){if(this.m_model.getNextRow()){this.getElement("client_type").setClientType(this.m_model.getFieldValue("client_type"));}
Client_View.superclass.onGetData.call(this,resp);} 
function ClientSearch_View(id,options){options=options||{};ClientSearch_View.superclass.constructor.call(this,id,options);var result_model=new ModelXML("SearchResult_Model",{"fields":["param","val"]});var result_contr=new ClientSearch_Controller();this.m_queryMethodField=result_contr.getPublicMethod("search").getField("query");var self=this;this.addElements([new EditString(id+":query-str",{"maxlength":"250","placeholder":"ИНН или наименование контрагента для поиска","buttonSelect":new ButtonCmd(id+":query-str:submit",{"glyph":"glyphicon-search","onClick":function(){self.submit();}}),"events":{"keydown":function(e){e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){self.submit();}}}}),new GridAjx(id+":result",{"keyIds":["param"],"model":result_model,"controller":result_contr,"readPublicMethod":result_contr.getPublicMethod("search"),"editInline":true,"editWinClass":null,"commands":null,"popUpMenu":null,"showHead":false,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":result:head:row0",{"elements":[new GridCellHead(id+":result:head:param",{"value":"Параметр","columns":[new GridColumn({"field":result_model.getField("param")})]}),new GridCellHead(id+":result:head:val",{"value":"Значение","columns":[new GridColumn({"field":result_model.getField("val")})]})]})]}),"autoRefresh":false,"navigate":false,"navigateClick":false})]);}
extend(ClientSearch_View,View);ClientSearch_View.prototype.submit=function(){this.m_queryMethodField.setValue(this.getElement("query-str").getValue());var self=this;this.getElement("result").onRefresh(function(){if(self.getElement("result").getModel().getRowCount()){self.saveOrg();}});}
ClientSearch_View.prototype.saveOrg=function(){var f_vals={};var org_m=this.getElement("result").getModel();if(!org_m.getRowCount()){throw new Error('Найдите клиента!');}
org_m.reset();while(org_m.getNextRow()){f_vals[org_m.getFieldValue("param")]=org_m.getFieldValue("val");}
var client_data;if(f_vals["ИНН"]&&f_vals["ИНН"].length){if(f_vals["ИНН"].length==10){client_data='<ЮрЛицо>'+'<ОфициальноеНаименование>'+f_vals["Наименование"]+'</ОфициальноеНаименование>'+'<ИНН>'+f_vals["ИНН"]+'</ИНН>'+'<КПП>'+f_vals["КПП"]+'</КПП>'+
((f_vals["Адрес"]!=undefined&&f_vals["Адрес"].length)?('<ЮридическийАдрес>'+'<Представление>'+f_vals["Адрес"]+'</Представление>'+'</ЮридическийАдрес>'):'')+
((f_vals["Дата регистрации"]!=undefined&&f_vals["Дата регистрации"].length)?('<ДатаРегистрации>'+f_vals["Дата регистрации"]+'</ДатаРегистрации>'):'')+
((f_vals["ОКПО"]!=undefined&&f_vals["ОКПО"].length)?('<ОКПО>'+f_vals["ОКПО"]+'</ОКПО>'):'')+'</ЮрЛицо>';}
else{var n=f_vals["Наименование"];if(n.substr(0,3)=="ИП "){n=n.substr(3);}
var name=n.split(" ",3);client_data='<ФизЛицо>'+'<ПолноеНаименование>'+f_vals["Наименование"]+'</ПолноеНаименование>'+
((name.length)?('<Фамилия>'+name[0]+'</Фамилия>'):"")+
((name.length>=1)?('<Имя>'+name[1]+'</Имя>'):"")+
((name.length>=2)?('<Отчество>'+name[2]+'</Отчество>'):"")+'<ИНН>'+f_vals["ИНН"]+'</ИНН>'+
((f_vals["Адрес"]!=undefined&&f_vals["Адрес"].length)?('<АдресРегистрации>'+'<Представление>'+f_vals["Адрес"]+'</Представление>'+'</АдресРегистрации>'):'')+'</ФизЛицо>';}
var str='<Контрагент xmlns="http://v8.1c.ru/edi/edi_stnd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="Контрагент">'+'<Ид>'+CommonHelper.uniqid()+'</Ид>'+'<Наименование>'+f_vals["Наименование"]+'</Наименование>'+
client_data+'</Контрагент>';var vars=window.getApp().getServVars();var pm=(new Agent1c_Controller({"servConnector":new ServConnector({"host":"http://"+vars.upd1c_server_ip+":"+vars.upd1c_server_port+"/","CORS":true})})).getPublicMethod("save_org");pm.setFieldValue("data",str);pm.setFieldValue("file_name","org.xml");pm.run({"ok":function(resp){var file_name="не определен";if(resp.modelExists("ResponseData")){var m=new ModelObjectXML("ResponseData",{"fields":["file_name"],"data":resp.getModelData("ResponseData")});file_name=m.getFieldValue("file_name");}
window.showNote("Данные контрагента сохранены в файл:"+file_name);}});}} 
function DocumentTemplateList_View(id,options){options=options||{};options.templateOptions={"HEAD_TITLE":"Шаблоны документации"};DocumentTemplateList_View.superclass.constructor.call(this,id,options);var model=options.models.DocumentTemplateList_Model;var contr=new DocumentTemplate_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["document_type","construction_type_id","create_date"],"controller":contr,"editInline":false,"editWinClass":DocumentTemplateDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:create_date",{"value":"Дата шаблона","columns":[new GridColumnDate({"field":model.getField("create_date")})]}),new GridCellHead(id+":grid:head:document_type",{"value":"Вид документации","columns":[new EnumGridColumn_document_types({"field":model.getField("document_type")})]}),new GridCellHead(id+":grid:head:construction_types_ref",{"value":"Вид объекта","columns":[new GridColumnRef({"field":model.getField("construction_types_ref"),"form":ConstructionTypeDialog_Form})]}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocumentTemplateList_View,ViewAjx); 
function DocumentTemplateDialog_View(id,options){options=options||{};options.model=options.models.DocumentTemplate_Model;options.controller=new DocumentTemplate_Controller();DocumentTemplateDialog_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new Enum_document_types(id+":document_type",{"labelCaption":"Вид документации:"}));this.addElement(new EditDate(id+":create_date",{"value":DateHelper.time(),"labelCaption":"Дата шаблона:"}));this.addElement(new ConstructionTypeSelect(id+":construction_types_ref",{"labelCaption":"Вид объекта:"}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий:"}));this.addElement(new ApplicationTemplateContentTree(id+":content",{"mainView":this}));this.addElement(new ApplicationTemplateContentTree(id+":content_for_experts",{"mainView":this,"cmdCopyFromMain":true}));this.setDataBindings([new DataBinding({"control":this.getElement("create_date")}),new DataBinding({"control":this.getElement("document_type")}),new DataBinding({"control":this.getElement("construction_types_ref"),"fieldId":"construction_type_id"}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("content"),"fieldId":"content"}),new DataBinding({"control":this.getElement("content_for_experts"),"fieldId":"content_for_experts"})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("create_date")}),new CommandBinding({"control":this.getElement("document_type")}),new CommandBinding({"control":this.getElement("construction_types_ref"),"fieldId":"construction_type_id"}),new CommandBinding({"control":this.getElement("content"),"fieldId":"content"}),new CommandBinding({"control":this.getElement("content_for_experts"),"fieldId":"content_for_experts"}),new CommandBinding({"control":this.getElement("comment_text")})]);}
extend(DocumentTemplateDialog_View,ViewObjectAjx); 
function OfficeDialog_View(id,options){options=options||{};options.model=options.models.OfficeList_Model;options.controller=options.controller||new Office_Controller();var self=this;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"9";var labelClassName="control-label "+bs+"3";this.addElement(new HiddenKey(id+":id"));this.addElement(new ClientEditRef(id+":clients_ref",{"labelCaption":"Реквизиты:","editContClassName":editContClassName,"labelClassName":labelClassName,"required":true,"keyIds":["client_id"]}));this.addElement(new EditString(id+":address",{"labelCaption":"Адрес:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new WorkHoursEdit(id+":work_hours",{"labelCaption":"Рассписание:","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new OfficeDayScheduleList_View(id+":day_schedule",{}));}
OfficeDialog_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("clients_ref")}),new DataBinding({"control":this.getElement("address")}),new DataBinding({"control":this.getElement("work_hours")})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("clients_ref"),"fieldId":"client_id"}),new CommandBinding({"control":this.getElement("work_hours"),"fieldId":"work_hours"})];this.setWriteBindings(write_b);this.addDetailDataSet({"control":this.getElement("day_schedule").getElement("grid"),"controlFieldId":"office_id","field":this.m_model.getField("id")});}
extend(OfficeDialog_View,ViewObjectAjx); 
function OfficeList_View(id,options){options=options||{};OfficeList_View.superclass.constructor.call(this,id,options);var model=options.models.OfficeList_Model;var contr=new Office_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":OfficeDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:clients_ref",{"value":"Организация","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"form":Client_Form,"ctrlClass":ClientEditRef,"ctrlBindField":model.getField("client_id"),"ctrlOptions":{"labelCaption":"","required":true,"keyIds":["client_id"]}})]}),new GridCellHead(id+":grid:head:address",{"value":"Адрес","columns":[new GridColumn({"field":model.getField("address"),"ctrlOptions":{"enabled":false}})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(OfficeList_View,ViewAjx); 
function FileUploaderApplication_View(id,options){options=options||{};var self=this;options.readOnly=(options.readOnly!=undefined)?options.readOnly:false;options.constDownloadTypes="client_download_file_types";options.constDownloadMaxSize="client_download_file_max_size";this.m_mainView=options.mainView;this.m_documentType=options.documentType;this.m_documentTitle=options.documentTitle;options.filePicClass="file-pic-"+this.m_documentType;options.fileAddClass="uploader-file-add-"+this.m_documentType;options.fileListClass="uploader-file-list-"+this.m_documentType;options.template=window.getApp().getTemplate("ApplicationDocuments");options.templateOptions={"docType":this.m_documentType,"notReadOnly":!options.readOnly};options.fileTemplate=window.getApp().getTemplate("ApplicationFile");options.fileTemplateOptions={"docType":this.m_documentType,"isClient":true};options.allowIdList=true;options.setFileOptions=function(fileOpts,file){self.setFileOptions(fileOpts,file);}
options.customUploadServer=window.getApp().getServVar("custom_app_upload_server");FileUploaderApplication_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderApplication_View,FileUploader_View);FileUploaderApplication_View.prototype.m_mainView;FileUploaderApplication_View.prototype.m_documentType;FileUploaderApplication_View.prototype.checkRequiredFiles=function(){var no_files=FileUploaderApplication_View.superclass.checkRequiredFiles.call(this);if(no_files.length){var mes;if(no_files.length==1){mes="Отсутствуют вложения в разделе "+this.m_documentTitle+" / "+no_files[0];}
else{mes="Отсутствуют вложения в следующих разделах: "+this.m_documentTitle+" / "+no_files.join(",");}
throw new Error(mes);}}
FileUploaderApplication_View.prototype.uploadAll=function(){if(this.m_uploader){if(this.m_mainView.getElement("id").isNull()){var self=this;this.m_mainView.getCommand(this.m_mainView.CMD_OK).setAsync(false);this.m_mainView.onSave();this.m_mainView.getCommand(this.m_mainView.CMD_OK).setAsync(true);}
this.upload();}}
FileUploaderApplication_View.prototype.deleteFileFromServer=function(fileId,itemId){var self=this;var pm=(new Application_Controller()).getPublicMethod("remove_file");pm.setFieldValue("file_id",fileId);pm.run({"ok":function(){window.showNote(self.NT_FILE_DELETED);self.decTotalFileCount();file_cont=self.getElement("file-list_"+itemId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");self.decTotalFileCount();self.calcFileTotals(itemId);}});}
FileUploaderApplication_View.prototype.downloadFile=function(btnCtrl){var contr=new Application_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("id",btnCtrl.getAttr("file_id"));pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("id",btnCtrl.getAttr("file_id"));pm_sig.download(null,1);}}
FileUploaderApplication_View.prototype.calcFileTotals=function(docId){FileUploaderApplication_View.superclass.calcFileTotals.call(this,docId);this.m_mainView.setCmdEnabled();}
FileUploaderApplication_View.prototype.getQuerySruc=function(file){var struc=FileUploaderApplication_View.superclass.getQuerySruc.call(this,file);struc.f="app_file_upload";struc.application_id=this.m_mainView.getElement("id").getValue();struc.doc_type=this.m_documentType;return struc;}
FileUploaderApplication_View.prototype.setEnabled=function(v){FileUploaderApplication_View.superclass.setEnabled.call(this,v);if(!v){$(".uploadedFile").removeAttr("disabled");}}
FileUploaderApplication_View.prototype.setFileOptions=function(fileOpts,file){if(file.doc_flow_out){fileOpts.refTitle="Загружен документом №"+file.doc_flow_out.reg_number+" от "+DateHelper.format(DateHelper.strtotime(file.doc_flow_out.date_time),"d/m/y");fileOpts.refClass="uploadedAfterPost";}
else{fileOpts.refTitle="Загружен при подаче заявления";fileOpts.refClass="";}
fileOpts.file_date_time_formatted=DateHelper.format(DateHelper.strtotime(file.date_time),"d/m/y");} 
function FileUploaderDocFlowOut_View(id,options){options=options||{};options.constDownloadTypes="employee_download_file_types";options.constDownloadMaxSize="employee_download_file_max_size";this.m_mainView=options.mainView;options.templateOptions=options.templateOptions||{};options.templateOptions.attFromTemplate=true;options.templateOptions.akt1c=options.akt1c;options.templateOptions.order1c=options.order1c;options.allowOnlySignedFiles=false;options.separateSignature=true;options.filePicClass="file-pic-doc";options.fileAddClass="uploader-file-add-doc";options.fileListClass="uploader-file-list-doc";options.template=window.getApp().getTemplate("DocFlowAttachments");options.fileTemplate=window.getApp().getTemplate("ApplicationFile");options.fileTemplateOptions={"docType":"doc"};options.customFolder=(options.customFolder==undefined)?true:options.customFolder;var self=this;options.addElement=function(){this.addElement(new Control(id+":file-upload","TEMPLATE",{"events":{"click":function(){self.uploadAll();}}}))
this.addElement(new ControlContainer(id+":file-list_doc","TEMPLATE"));}
FileUploaderDocFlowOut_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderDocFlowOut_View,FileUploader_View);FileUploaderDocFlowOut_View.prototype.checkRequiredFiles=function(){}
FileUploaderDocFlowOut_View.prototype.upload=function(){if(this.m_customFolder){var file_ctrls=this.getElement("file-list_doc").getElements();var er=false;for(var id in file_ctrls){if(file_ctrls[id]&&file_ctrls[id].getAttr("file_uploaded")!="true"&&file_ctrls[id].includeCont&&file_ctrls[id].includeCont.getElement("check").getValue()){var folder_v=file_ctrls[id].includeCont.getElement("folder").getValue();if(!folder_v||folder_v.isNull()){var mes="Не выбрана папка проекта!";file_ctrls[id].includeCont.getElement("folder").setNotValid(mes);er=true;}}}
if(er)throw new Error("Есть ошибки!");}
FileUploaderDocFlowOut_View.superclass.upload.call(this);}
FileUploaderDocFlowOut_View.prototype.deleteFileFromServer=function(fileId,itemId){var self=this;var pm=(new DocFlowOut_Controller()).getPublicMethod("remove_file");pm.setFieldValue("file_id",fileId);pm.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm.run({"ok":function(){window.showNote(self.NT_FILE_DELETED);self.decTotalFileCount();file_cont=self.getElement("file-list_"+itemId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");self.decTotalFileCount();self.calcFileTotals(itemId);}});}
FileUploaderDocFlowOut_View.prototype.downloadFile=function(btnCtrl){var contr=new DocFlowOut_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm_sig.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm_sig.download(null,1);}}
FileUploaderDocFlowOut_View.prototype.getQuerySruc=function(file){var res={"f":"doc_flow_file_upload","file_id":file.file_id,"doc_flow_id":this.m_mainView.getElement("id").getValue(),"doc_type":"out","file_signed":file.file_signed,"signature":file.signature};if(this.m_customFolder){var file_ctrl=this.getElement("file-list_doc").getElement("file_"+file.file_id);if(file_ctrl.includeCont.getElement("check").getValue()){res.file_path=file_ctrl.includeCont.getElement("folder").getValue().getDescr();}}
return res;}
FileUploaderDocFlowOut_View.prototype.uploadAll=function(){if(this.m_uploader){if(this.m_mainView.getElement("id").isNull()){var self=this;this.m_mainView.onSave(function(){self.upload();});}
else{this.upload();}}} 
function FileUploaderDocFlowInside_View(id,options){options=options||{};options.constDownloadTypes="employee_download_file_types";options.constDownloadMaxSize="employee_download_file_max_size";this.m_mainView=options.mainView;options.templateOptions=options.templateOptions||{};options.templateOptions.attFromTemplate=true;options.allowOnlySignedFiles=false;options.separateSignature=true;options.filePicClass="file-pic-doc";options.fileAddClass="uploader-file-add-doc";options.fileListClass="uploader-file-list-doc";options.template=window.getApp().getTemplate("DocFlowAttachments");options.fileTemplate=window.getApp().getTemplate("ApplicationFile");options.fileTemplateOptions={"docType":"doc"};options.customFolder=false;var self=this;options.addElement=function(){this.addElement(new Control(id+":file-upload","TEMPLATE",{"events":{"click":function(){self.uploadAll();}}}))
this.addElement(new ControlContainer(id+":file-list_doc","TEMPLATE"));}
FileUploaderDocFlowInside_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderDocFlowInside_View,FileUploader_View);FileUploaderDocFlowInside_View.prototype.checkRequiredFiles=function(){}
FileUploaderDocFlowInside_View.prototype.upload=function(){if(this.m_customFolder){var file_ctrls=this.getElement("file-list_doc").getElements();var er=false;for(var id in file_ctrls){if(file_ctrls[id]&&file_ctrls[id].getAttr("file_uploaded")!="true"&&file_ctrls[id].includeCont&&file_ctrls[id].includeCont.getElement("check").getValue()){var folder_v=file_ctrls[id].includeCont.getElement("folder").getValue();if(!folder_v||folder_v.isNull()){var mes="Не выбрана папка проекта!";file_ctrls[id].includeCont.getElement("folder").setNotValid(mes);er=true;}}}
if(er)throw new Error("Есть ошибки!");}
FileUploaderDocFlowInside_View.superclass.upload.call(this);}
FileUploaderDocFlowInside_View.prototype.deleteFileFromServer=function(fileId,itemId){var self=this;var pm=(new DocFlowInside_Controller()).getPublicMethod("remove_file");pm.setFieldValue("file_id",fileId);pm.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm.run({"ok":function(){window.showNote(self.NT_FILE_DELETED);self.decTotalFileCount();file_cont=self.getElement("file-list_"+itemId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");self.decTotalFileCount();self.calcFileTotals(itemId);}});}
FileUploaderDocFlowInside_View.prototype.downloadFile=function(btnCtrl){var contr=new DocFlowInside_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm_sig.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm_sig.download(null,1);}}
FileUploaderDocFlowInside_View.prototype.getQuerySruc=function(file){var res={"f":"doc_flow_file_upload","file_id":file.file_id,"doc_flow_id":this.m_mainView.getElement("id").getValue(),"doc_type":"inside","file_signed":file.file_signed,"signature":file.signature,"file_path":"Внутренние"};return res;}
FileUploaderDocFlowInside_View.prototype.uploadAll=function(){if(this.m_uploader){if(this.m_mainView.getElement("id").isNull()){var self=this;this.m_mainView.onSave(function(){self.upload();});}
else{this.upload();}}} 
function FileUploaderDocFlowIn_View(id,options){options=options||{};options.customFolder=false;options.includeFilePath=true;FileUploaderDocFlowIn_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderDocFlowIn_View,FileUploaderDocFlowOut_View);FileUploaderDocFlowIn_View.prototype.getQuerySruc=function(file){return{"f":"doc_flow_file_upload","file_id":file.file_id,"doc_flow_id":this.m_mainView.getElement("id").getValue(),"doc_type":"in"};} 
function FileUploaderDocFlowOutClient_View(id,options){options=options||{};FileUploaderDocFlowOutClient_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderDocFlowOutClient_View,FileUploaderApplication_View);FileUploaderDocFlowOutClient_View.prototype.checkRequiredFiles=function(){}
FileUploaderDocFlowOutClient_View.prototype.deleteFileFromServer=function(fileId,itemId){var self=this;var pm=(new Application_Controller()).getPublicMethod("remove_file");pm.setFieldValue("file_id",fileId);pm.run({"ok":function(){window.showNote(self.NT_FILE_DELETED);self.decTotalFileCount();file_cont=self.getElement("file-list_"+itemId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");self.decTotalFileCount();self.calcFileTotals(itemId);}});}
FileUploaderDocFlowOutClient_View.prototype.downloadFile=function(btnCtrl){var contr=new Application_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("id",btnCtrl.getAttr("file_id"));pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("id",btnCtrl.getAttr("file_id"));pm_sig.download(null,1);}}
FileUploaderDocFlowOutClient_View.prototype.getQuerySruc=function(file){var struc=FileUploaderDocFlowOutClient_View.superclass.getQuerySruc.call(this,file);struc.doc_flow_out_client_id=this.m_mainView.getElement("id").getValue();struc.application_id=this.m_mainView.getElement("applications_ref").getValue().getKey("id");return struc;}
FileUploaderDocFlowOutClient_View.prototype.setFileOptions=function(fileOpts,file){if(file.doc_flow_out){if(file.doc_flow_out.id==this.m_mainView.getModel().getFieldValue("id")){fileOpts.refTitle="Загружен этим документом";fileOpts.refClass="uploadedByThis";}
else{fileOpts.refTitle="Загружен документом №"+file.doc_flow_out.reg_number+" от "+DateHelper.format(DateHelper.strtotime(file.doc_flow_out.date_time),"d/m/y");fileOpts.refClass="uploadedAfterPost";}}
else{fileOpts.refTitle="Загружен при подаче заявления";fileOpts.refClass="";}
fileOpts.file_date_time_formatted=DateHelper.format(DateHelper.strtotime(file.date_time),"d/m/y");} 
function FileUploaderDocFlowInClient_View(id,options){options=options||{};this.m_mainView=options.mainView;options.constDownloadTypes="client_download_file_types";options.constDownloadMaxSize="client_download_file_max_size";options.filePicClass="file-pic-doc";options.fileAddClass="uploader-file-add-doc";options.fileListClass="uploader-file-list-doc";options.template=window.getApp().getTemplate("DocFlowAttachments");options.fileTemplate=window.getApp().getTemplate("ApplicationFile");options.fileTemplateOptions={"docType":"doc"};options.allowFileDeletion=false;var self=this;options.addElement=function(){this.addElement(new Control(id+":file-upload","TEMPLATE",{"events":{"click":function(){self.uploadAll();}}}))
this.addElement(new ControlContainer(id+":file-list_doc","TEMPLATE"));}
FileUploaderDocFlowInClient_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderDocFlowInClient_View,FileUploader_View);FileUploaderDocFlowInClient_View.prototype.checkRequiredFiles=function(){}
FileUploaderDocFlowInClient_View.prototype.deleteFileFromServer=function(fileId,itemId){}
FileUploaderDocFlowInClient_View.prototype.downloadFile=function(btnCtrl){var contr=new DocFlowInClient_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("file_id",btnCtrl.getAttr("file_id"));pm_sig.setFieldValue("doc_id",this.m_mainView.getElement("id").getValue());pm_sig.download(null,1);}}
FileUploaderDocFlowInClient_View.prototype.getQuerySruc=function(file){return null;}
FileUploaderDocFlowInClient_View.prototype.uploadAll=function(){} 
function FileUploaderContract_View(id,options){options=options||{};options.readOnly=true;options.allowFileDeletion=false;options.allowFileDownload=true;FileUploaderContract_View.superclass.constructor.call(this,id,options);}
extend(FileUploaderContract_View,FileUploaderApplication_View);FileUploaderContract_View.prototype.checkRequiredFiles=function(){}
FileUploaderContract_View.prototype.deleteFileFromServer=function(fileId,itemId){}
FileUploaderContract_View.prototype.getQuerySruc=function(file){} 
function DocumentDialog_View(id,options){options=options||{};this.m_uploaderClass=options.uploaderClass;var constants={"client_download_file_types":null,"client_download_file_max_size":null,"application_check_days":0};window.getApp().getConstantManager().get(constants);var t_model=constants.client_download_file_types.getValue();this.m_fileTypes=[];this.m_maxFileSize=constants.client_download_file_max_size.getValue();this.m_allowedFileExt=[];if(!t_model.rows){throw new Error("Не определены расширения для загрузки! Заполните константу!");}
for(var i=0;i<t_model.rows.length;i++){this.m_fileTypes.push(t_model.rows[i].fields.ext);this.m_allowedFileExt.push({"ext":t_model.rows[i].fields.ext});}
this.m_readOnly=options.readOnly;DocumentDialog_View.superclass.constructor.call(this,id,options);}
extend(DocumentDialog_View,ViewObjectAjx);DocumentDialog_View.prototype.m_uploaderClass;DocumentDialog_View.prototype.m_documentTemplates;DocumentDialog_View.prototype.m_fileTypes;DocumentDialog_View.prototype.m_maxFileSize;DocumentDialog_View.prototype.m_allowedFileExt;DocumentDialog_View.prototype.m_started;DocumentDialog_View.prototype.m_appModel;DocumentDialog_View.prototype.m_documentTabs={"pd":{"title":"ПД","control":null},"eng_survey":{"title":"РИИ","control":null},"cost_eval_validity":{"title":"Достоверность","control":null},"modification":{"title":"Модификация","control":null},"audit":{"title":"Аудит","control":null}};DocumentDialog_View.prototype.addDocumentTabs=function(documentModel,allTemplateModel,toDOM){if(documentModel&&(documentModel.getRowIndex()>=0||documentModel.getNextRow())){this.m_appModel=documentModel;if(!documentModel.getField("construction_types_ref").isNull()){var f_doc=documentModel.getField("documents");if(f_doc.isSet()){var docs=f_doc.getValue();for(var i=0;i<docs.length;i++){this.addDocTab(docs[i]["document_type"],docs[i]["document"],toDOM);}}}
if(allTemplateModel){this.fillDocumentTemplates(allTemplateModel);}}}
DocumentDialog_View.prototype.fillDocumentTemplates=function(model){if(model.getRowIndex()<0&&!model.getNextRow()){throw new Error("Не заполнены шаблоны документации");}
var docs=model.getFieldValue("documents");this.m_documentTemplates={};for(var i=0;i<docs.length;i++){var doc=docs[i]["document"];this.m_documentTemplates[docs[i]["document_id"]]=doc;for(var doc_i=0;doc_i<doc.length;doc_i++){doc[doc_i].files=[];if(!doc[doc_i].items){doc[doc_i].items=null;doc[doc_i].no_items=true;}}}}
DocumentDialog_View.prototype.addDocTab=function(tabName,items,toDOM){this.m_documentTabs[tabName].control=new this.m_uploaderClass(this.getId()+":documents_"+tabName,{"mainView":this,"documentType":tabName,"documentTitle":this.m_documentTabs[tabName].title,"maxFileSize":this.m_maxFileSize,"allowedFileExt":this.m_allowedFileExt,"items":items,"readOnly":this.m_readOnly});this.addElement(this.m_documentTabs[tabName].control);if(toDOM){this.m_documentTabs[tabName].control.toDOM(document.getElementById("documents_"+tabName));this.m_documentTabs[tabName].control.initDownload();}}
DocumentDialog_View.prototype.toggleDocTypeVisOnModel=function(model){if(!this.m_started)return;var exp_type=model?model.getFieldValue("expertise_type"):null;this.toggleDocTab("pd",(exp_type=="pd"||exp_type=="pd_eng_survey"));this.toggleDocTab("eng_survey",(exp_type=="eng_survey"||exp_type=="pd_eng_survey"));this.toggleDocTab("cost_eval_validity",model?model.getFieldValue("cost_eval_validity"):false);this.toggleDocTab("modification",model?model.getFieldValue("modification"):false);this.toggleDocTab("audit",model?model.getFieldValue("audit"):false);for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name]&&this.m_documentTabs[tab_name].control){$('.nav-tabs a[href="#'+this.m_documentTabs[tab_name].control.getAttr("name")+'"]').tab("show");break;}}}
DocumentDialog_View.prototype.toggleDocTypeVis=function(){if(!this.m_started)return;var service_ctrl=this.getElement("service_cont");var exp_type=service_ctrl.getElement("expertise_type").getValue();this.toggleDocTab("pd",(exp_type=="pd"||exp_type=="pd_eng_survey"));this.toggleDocTab("eng_survey",(exp_type=="eng_survey"||exp_type=="pd_eng_survey"));this.toggleDocTab("cost_eval_validity",service_ctrl.getElement("cost_eval_validity").getValue());this.toggleDocTab("modification",service_ctrl.getElement("modification").getValue());this.toggleDocTab("audit",service_ctrl.getElement("audit").getValue());}
DocumentDialog_View.prototype.addDocTabTemplate=function(tabName){var constr=this.getConstrType();if(constr){var tmpl_id=tabName+"_"+constr.getKey();if(!this.m_documentTemplates[tmpl_id]){throw new Error("Не найден шаблон для данного типа экспертизы! "+tmpl_id);}
this.addDocTab(tabName,this.m_documentTemplates[tmpl_id],true);}}
DocumentDialog_View.prototype.constrTypeIsNull=function(){return this.getElement("construction_types_ref").isNull();}
DocumentDialog_View.prototype.getConstrType=function(){return this.getElement("construction_types_ref").getValue();}
DocumentDialog_View.prototype.toggleDocTab=function(tabName,vis){if(vis&&!this.constrTypeIsNull()){if(!this.m_documentTabs[tabName].control){if(!this.m_documentTemplates){var self=this;(new Application_Controller()).run("get_document_templates",{"ok":function(resp){var m=new DocumentTemplateAllList_Model({"data":resp.getModelData("DocumentTemplateAllList_Model")});self.fillDocumentTemplates(m);self.addDocTabTemplate(tabName);}});}
else{this.addDocTabTemplate(tabName);}}
var nd=document.getElementById(this.getId()+":tab-"+tabName);DOMHelper.delClass(nd,"hidden");if(this.m_prevConstructionTypeId){DOMHelper.addClass(nd,"flashit");setTimeout(function(){DOMHelper.delClass(nd,"flashit");},this.NEW_TAB_FLASH_TIME);}}
else if(!vis){if(this.m_documentTabs[tabName].control){this.delElement("documents_"+tabName);this.m_documentTabs[tabName].control=null;}
DOMHelper.addClass(document.getElementById(this.getId()+":tab-"+tabName),"hidden");}}
DocumentDialog_View.prototype.onGetData=function(resp,cmdCopy){DocumentDialog_View.superclass.onGetData.call(this,resp,cmdCopy);this.m_started=true;this.toggleDocTypeVis();}
DocumentDialog_View.prototype.setCmdEnabled=function(){} 
function DocFlowBaseDialog_View(id,options){options=options||{};options.cmdSave=(options.cmdSave!=undefined)?options.cmdSave:false;options.templateOptions=options.templateOptions||{};CommonHelper.merge(options.templateOptions,{"colorClass":window.getApp().getColorClass(),"bsCol":window.getBsCol()});DocFlowBaseDialog_View.superclass.constructor.call(this,id,options);}
extend(DocFlowBaseDialog_View,ViewObjectAjx);DocFlowBaseDialog_View.prototype.addProcessChain=function(options,fieldId){if(options.model&&(options.model.getRowIndex()==0||(options.model.getRowIndex()<0&&options.model.getNextRow()))){var chain=options.model.getFieldValue(fieldId);if(chain){var this_ref=(new RefType({"dataType":this.m_dataType,"keys":{"id":options.model.getFieldValue("id")}}));var this_dt=this_ref.getDataType();var this_key=this_ref.getKey();for(var i=0;i<chain.length;i++){chain[i].step=(i+1);chain[i]["tab-class"]=(i==0)?"first":((i==chain.length-1)?"last":"");if(chain[i].doc&&chain[i].doc.getDataType()==this_dt&&chain[i].doc.getKey()==this_key){chain[i].current=true;}
chain[i]["aria-selected"]=(i==0)?"true":"false";chain[i].doc_descr=chain[i].doc?chain[i].doc.getDescr():"";chain[i].state_descr=chain[i].state_descr?(","+chain[i].state_descr):"";}
options.templateOptions=options.templateOptions||{};options.templateOptions.chain=chain;}}}
DocFlowBaseDialog_View.prototype.addProcessChainEvents=function(fieldId){var chain=this.getModel().getFieldValue(fieldId);if(chain)
for(var i=0;i<chain.length;i++){(function(nodeId,docRef){EventHelper.add(document.getElementById(nodeId),"click",function(){var cl=window.getApp().getDataType(docRef.getDataType()).dialogClass;(new cl({"keys":docRef.getKeys(),"params":{"cmd":"edit"}})).open();},true);}(this.getId()+":step"+(i+1),chain[i].doc));}}
DocFlowBaseDialog_View.prototype.getRef=function(){return(new RefType({"dataType":this.m_dataType,"keys":{"id":this.getModel().getFieldValue("id")}}));}
DocFlowBaseDialog_View.prototype.onGetData=function(resp,cmd){DocFlowBaseDialog_View.superclass.onGetData.call(this,resp,cmd);this.addProcessChainEvents();}
DocFlowBaseDialog_View.prototype.createFromTemplate=function(){var win=(new ReportTemplateFileList_Form({"id":this.getId()+":templSelForm","params":{"filters":[]}})).open();var self=this;win.onSelect=function(fields){var templ_file_id=fields.id.getValue();win.close();var pm=(new ReportTemplateFile_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",templ_file_id);pm.run({"ok":function(resp){var m=resp.getModel("ReportTemplateFileDialog_Model");if(m.getNextRow()){var rows=m.getFieldValue("in_params").rows;var template_id=m.getFieldValue("report_templates_ref").getKey();var ctrl_classes={};for(var i=0;i<rows.length;i++){ctrl_classes[rows[i].fields.editCtrlClass]={"fields":rows[i].fields,"valSet":false};}
var params=[];var list=self.getElements();for(var id in list){var form_ctrl=ctrl_classes[list[id].constructor.name];if(form_ctrl&&!list[id].isNull()){form_ctrl.fields.editCtrlOptions=form_ctrl.fields.editCtrlOptions||{};form_ctrl.fields.editCtrlOptions.value=list[id].getValue();form_ctrl.valSet=true;params.push({"id":form_ctrl.fields.id,"val":form_ctrl.fields.editCtrlOptions.value,"cond":(form_ctrl.fields.cond===true)});}}
var all_set=true;for(var id in form_ctrl){if(!form_ctrl[id].valSet){all_set=false;break;}}
if(!all_set){(new ReportTemplateFileApplyCmd_Form(self.getId()+":applyForm",{"inParams":rows,"templateId":template_id})).open();}
else{var pm=(new ReportTemplateFile_Controller()).getPublicMethod("apply_template_file");pm.setFieldValue("id",template_id);pm.setFieldValue("params",CommonHelper.serialize(params));pm.download("ViewXML");}}}})}}
DocFlowBaseDialog_View.prototype.checkForUploadFileCount=function(){if(this.getElement("attachments").getForUploadFileCount()){throw new Error("Есть незагруженные вложения");}}
DocFlowBaseDialog_View.prototype.checkDocFlowType=function(){var tp=this.getElement("doc_flow_types_ref");if(tp.isNull()){tp.setNotValid("Значение не выбрано");throw new Error("Есть ошибки!");}
return tp.getValue().getKey();} 
function ApplicationList_View(id,options){options=options||{};ApplicationList_View.superclass.constructor.call(this,id,options);var model=options.models.ApplicationList_Model;var contr=new Application_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role_id=window.getApp().getServVar("role_id");var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("create_dt")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"application_state":{"binding":new CommandBinding({"control":new Enum_application_states(id+":filter-ctrl-application_state",{"contClassName":"form-group-filter","labelCaption":this.FLT_CAP_application_state}),"field":new FieldString("application_state")}),"sign":"e"},"office":{"binding":new CommandBinding({"control":new OfficeSelect(id+":filter-ctrl-office",{"contClassName":"form-group-filter","labelCaption":this.FLT_CAP_office}),"field":new FieldInt("office_id")}),"sign":"e"}};var fields=[new GridCellHead(id+":grid:head:id",{"value":this.COL_CAP_id,"columns":[new GridColumn({"field":model.getField("id")})],"sortable":true}),new GridCellHead(id+":grid:head:create_dt",{"value":this.COL_CAP_create_dt,"columns":[new GridColumnDate({"field":model.getField("create_dt"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("create_dt"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:service_list",{"value":"Услуги","columns":[new GridColumn({"field":model.getField("service_list")})]}),new GridCellHead(id+":grid:head:constr_name",{"value":this.COL_CAP_constr_name,"columns":[new GridColumn({"field":model.getField("constr_name")})],"sortable":true}),new GridCellHead(id+":grid:head:application_state",{"value":this.COL_CAP_application_state,"colAttrs":{"state":function(fields){return fields.application_state.getValue();}},"columns":[new EnumGridColumn_application_states({"field":model.getField("application_state"),"ctrlClass":Enum_application_states,"ctrlOptions":{"labelCaption":this.FLT_CAP_application_state},"searchOptions":{"searchType":"on_match","typeChange":false},"formatFunction":function(fields){var val=fields.application_state.getValue();var res=this.getAssocValueList()[val];if(val=="filling"){res+=" ";res+=((!fields.filled_percent.getValue())?0:fields.filled_percent.getValue())+"%";}
else if(val=="checking"||val=="correcting"){res+=" до ";res+=DateHelper.format(fields.application_state_end_date.getValue(),"d/m/Y H:i");}
else if(val=="expertise"){res+=", выдача ";res+=DateHelper.format(fields.application_state_end_date.getValue(),"d/m/Y");}
return res;}})]}),new GridCellHead(id+":grid:head:applicant_name",{"value":"Заявитель","columns":[new GridColumn({"field":model.getField("applicant_name")})],"sortable":true}),new GridCellHead(id+":grid:head:contract_number",{"value":"Контракт","columns":[new GridColumn({"field":model.getField("contract_number"),"formatFunction":function(fields){var res="";var num=fields.contract_number.getValue();if(num){res="№"+num+" от "+DateHelper.format(fields.contract_date.getValue(),"d/m/y")+", закл.№"+fields.expertise_result_number.getValue();if(fields.expertise_result_date.getValue()){res+=" от "+DateHelper.format(fields.expertise_result_date.getValue(),"d/m/y");}}
return res;}})]})];if(role_id!="client"){fields.push(new GridCellHead(id+":grid:head:customer_name",{"value":"Заказчик","columns":[new GridColumn({"field":model.getField("customer_name")})],"sortable":true}));}
fields.push(new GridCellHead(id+":grid:head:unviewed_in_docs",{"value":"Новые письма","columns":[new GridColumnRef({"field":model.getField("unviewed_in_docs"),"form":DocFlowInClientDialog_Form})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":ApplicationDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":fields})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":(role_id=="admin")?constants.grid_refresh_interval.getValue()*1000:0,"rowSelect":false,"focus":true}));}
extend(ApplicationList_View,ViewAjxList); 
ApplicationList_View.prototype.HEAD_TITLE="Список заявлений на проведение экспертизы";ApplicationList_View.prototype.COL_CAP_id="Номер";ApplicationList_View.prototype.COL_CAP_office="Место проведения экспертизы";ApplicationList_View.prototype.COL_CAP_create_dt="Дата";ApplicationList_View.prototype.COL_CAP_constr_name="Объект";ApplicationList_View.prototype.COL_CAP_application_state="Статус";ApplicationList_View.prototype.FLT_CAP_application_state="Статус:";ApplicationList_View.prototype.FLT_CAP_office="Место проведения экспертизы:"; 
function ConstrTechnicalFeature_View(id,options){options=options||{};options.addElement=function(){this.addElement(new ConstrTechnicalFeatureGrid(id+":grid"));if(!options.readOnly){var self=this;this.addElement(new Control(id+":cmdClose","A",{"title":"Удалить данные по объекту","events":{"click":function(e){WindowQuestion.show({"text":"Удалить данные по объекту?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){options.onClosePanel.call(self);}}});}}}));}}
ConstrTechnicalFeature_View.superclass.constructor.call(this,id,options);}
extend(ConstrTechnicalFeature_View,View);ConstrTechnicalFeature_View.prototype.getModified=function(){return this.getElement("grid").getModified();}
ConstrTechnicalFeature_View.prototype.setValid=function(){this.getElement("grid").setValid();}
ConstrTechnicalFeature_View.prototype.isNull=function(){return this.getElement("grid").isNull();}
ConstrTechnicalFeature_View.prototype.getValueJSON=function(){return CommonHelper.unserialize(this.getElement("grid").getValue());}
ConstrTechnicalFeature_View.prototype.setValue=function(v){return this.getElement("grid").setValue(v);} 
function ApplicationDialog_View(id,options){options=options||{};options.controller=new Application_Controller();options.model=options.models.ApplicationDialog_Model;this.m_DocFlowOutClientList_Model=options.models.DocFlowOutClientList_Model;this.m_DocFlowInClientList_Model=options.models.DocFlowInClientList_Model;this.m_technicalFeatures={};options.uploaderClass=FileUploaderApplication_View;options.templateOptions=options.templateOptions||{};var doc_folders;if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){options.templateOptions.is_admin=(window.getApp().getServVar("role_id")=="admin");options.readOnly=(options.model.getField("application_state").isSet()&&options.model.getFieldValue("application_state")!="filling"&&options.model.getFieldValue("application_state")!="correcting");options.templateOptions.contractExists=options.model.getField("contract_number").isSet();if(options.templateOptions.contractExists){options.templateOptions.contractNumber=options.model.getField("contract_number").getValue();options.templateOptions.contractDate=DateHelper.format(options.model.getField("contract_date").getValue(),"d/m/y");options.templateOptions.expertiseResultNumber=options.model.getField("expertise_result_number").getValue();if(options.model.getField("expertise_result_date").getValue()){options.templateOptions.expertiseResultExists=true;options.templateOptions.expertiseResultNumber=DateHelper.format(options.model.getField("expertise_result_date").getValue(),"d/m/y");}}
doc_folders=options.model.getFieldValue("doc_folders");if(!options.model.getField("base_applications_ref").isNull()){options.templateOptions.linkedApp=options.model.getFieldValue("base_applications_ref").getDescr();options.templateOptions.linkedAppExists=true;}
else if(!options.model.getField("derived_applications_ref").isNull()){options.templateOptions.linkedApp=options.model.getFieldValue("derived_applications_ref").getDescr();options.templateOptions.linkedAppExists=true;}}
options.templateOptions.contractNotExists=!options.templateOptions.contractExists;options.templateOptions.readOnly=options.readOnly;var self=this;options.addElement=function(){this.addElement(new Control(id+":fill_percent","SPAN"));this.addElement(new Control(id+":common_inf-tab-fill_percent","SPAN"));this.addElement(new Control(id+":applicant-tab-fill_percent","SPAN"));this.addElement(new Control(id+":contractors-tab-fill_percent","SPAN"));this.addElement(new Control(id+":construction-tab-fill_percent","SPAN"));this.addElement(new Control(id+":customer-tab-fill_percent","SPAN"));this.addElement(new Control(id+":developer-tab-fill_percent","SPAN"));this.addElement(new Control(id+":application_prints-tab-fill_percent","SPAN"));this.addElement(new ControlForm(id+":id","U"));this.addElement(new HiddenKey(id+":filled_percent",{"value":0}));this.addElement(new ControlDate(id+":create_dt","U",{"dateFormat":"d/m/Y H:i"}));var bs=window.getBsCol(4);this.addElement(new OfficeSelect(id+":offices_ref",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_office,"events":{"change":function(){self.calcFillPercent();}},"addNotSelected":false}));this.addElement(new ApplicationPrimaryCont(id+":primary_application",{"attrs":{"percentcalc":"false"},"isModification":false,"editClass":ApplicationEditRef,"editLabelCaption":"Первичная ПД:","primaryFieldId":"primary_application_reg_number","template":window.getApp().getTemplate("ApplicationPrimaryContTmpl"),"mainView":this}));this.addElement(new ApplicationServiceCont(id+":service_cont",{"mainView":this}));this.addElement(new FundSourceSelect(id+":fund_sources_ref",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"events":{"change":function(){self.calcFillPercent();}}}));this.addElement(new BuildTypeSelect(id+":build_types_ref",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"events":{"change":function(){self.calcFillPercent();}}}));this.addElement(new EditString(id+":constr_name",{"attrs":{"percentCalc":"true","title":this.TITLE_constr_name},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_constr_name,"events":{"blur":function(){self.calcFillPercent();}}}));this.addElement(new EditAddress(id+":constr_address",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_constr_address,"mainView":this}));if(options.templateOptions.is_admin){this.addElement(new UserEditRef(id+":users_ref",{"buttonOpen":new ButtonCtrl(id+":btn_open",{"title":"Изменить аккаунт","glyph":"glyphicon-floppy-save","onClick":function(){var pm=self.getController().getPublicMethod("set_user");pm.setFieldValue("id",self.getElement("id").getValue());pm.setFieldValue("user_id",self.getElement("users_ref").getValue().getKey("id"));pm.run({"ok":function(){window.showNote("Аккаунт изменен!");}});}}),"labelClassName":"control-label "+bs,"labelCaption":"Аккаунт:"}));}
this.addElement(new ConstrTechnicalFeatureGrid(id+":constr_technical_features"));this.addElement(new CompoundObjTechFeatureCont(id+":constr_technical_features_in_compound_obj",{"readOnly":options.readOnly,"elementClass":ConstrTechnicalFeature_View,"templateOptions":{"isClient":true},"elementOptions":{"mainView":this,"readOnly":options.readOnly,"template":window.getApp().getTemplate("CompoundObjTechFeature"),"templateOptions":{"isClient":true,"cmdClose":false}}}));this.addElement(new ConstructionTypeSelect(id+":construction_types_ref",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_construction_types_ref,"events":{"change":function(){var doc_types_for_remove=[];for(var tab_name in self.m_documentTabs){if(self.m_documentTabs[tab_name].control&&self.m_documentTabs[tab_name].control.getTotalFileCount()){doc_types_for_remove.push(tab_name);}}
self.removeDocumentTypeWithWarn(doc_types_for_remove,function(){self.fillDefTechnicalFeatures(function(){for(var tab_name in self.m_documentTabs){self.delElement("documents_"+tab_name);self.m_documentTabs[tab_name].control=null;}
self.toggleDocTypeVis();});},function(){self.getElement("construction_types_ref").setValue(new RefType({"keys":{"id":self.m_prevConstructionTypeId}}));});}}}));this.addElement(new EditMoney(id+":total_cost_eval",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_total_cost_eval,"placeholder":"руб.","events":{"blur":function(){self.calcFillPercent();}}}));this.addElement(new EditMoney(id+":limit_cost_eval",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_limit_cost_eval,"placeholder":"тыс.руб., только для достоверности","events":{"blur":function(){self.calcFillPercent();}}}));this.addElement(new EditText(id+":pd_usage_info",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs,"labelCaption":this.FIELD_CAP_pd_usage_info,"events":{"blur":function(){self.calcFillPercent();}}}));var bs_print=window.getBsCol(6);this.addElement(new EditFile(id+":app_print_expertise",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs_print,"labelCaption":"Заявление на проведение государственной экспертизы (ПД,РИИ)","template":window.getApp().getTemplate("EditFileApp"),"addControls":function(){this.addElement(new ButtonCtrl(this.getId()+":print",{"glyph":"glyphicon-print","title":"Печать заявления","onClick":function(){self.checkSaveExecute(function(){self.printAppOnTempl("Application",0);},true,false);}}));},"printTitle":"Распечатать заявление на проведение гос. экспертизы","mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"onDeleteFile":function(fileId,callBack){self.deletePrint("delete_app_print_expertise",fileId,callBack);},"onFileDeleted":function(){self.calcFillPercent();},"onFileAdded":function(){self.calcFillPercent();},"onFileSigAdded":function(){self.calcFillPercent();},"onDownload":function(){self.downloadPrint("download_app_print_expertise");}}));this.addElement(new EditFile(id+":app_print_cost_eval",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs_print,"labelCaption":"Заявление на проведение проверки достоверности сметной стоимости","template":window.getApp().getTemplate("EditFileApp"),"addControls":function(){this.addElement(new ButtonCtrl(this.getId()+":print",{"glyph":"glyphicon-print","title":"Печать заявления","onClick":function(){self.checkSaveExecute(function(){self.printAppOnTempl("ApplicationCostEvalValidity",0);},true,false);}}));},"printTitle":"Распечатать заявление на проверки достоверности сметной стоимости","mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"onDeleteFile":function(fileId,callBack){self.deletePrint("delete_app_print_cost_eval",fileId,callBack);},"onFileDeleted":function(){self.calcFillPercent();},"onFileAdded":function(){self.calcFillPercent();},"onFileSigAdded":function(){self.calcFillPercent();},"onDownload":function(){self.downloadPrint("download_app_print_cost_eval");}}));this.addElement(new EditFile(id+":app_print_modification",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs_print,"labelCaption":"Заявление на модификацию","template":window.getApp().getTemplate("EditFileApp"),"addControls":function(){this.addElement(new ButtonCtrl(this.getId()+":print",{"glyph":"glyphicon-print","title":"Печать заявления","onClick":function(){self.checkSaveExecute(function(){self.printAppOnTempl("ApplicationModification",0);},true,false);}}));},"printTitle":"Распечатать заявление на модификацию","mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"onDeleteFile":function(fileId,callBack){self.deletePrint("delete_app_print_modification",fileId,callBack);},"onFileDeleted":function(){self.calcFillPercent();},"onFileAdded":function(){self.calcFillPercent();},"onFileSigAdded":function(){self.calcFillPercent();},"onDownload":function(){self.downloadPrint("download_app_print_modification");}}));this.addElement(new EditFile(id+":app_print_audit",{"attrs":{"percentCalc":"true"},"labelClassName":"control-label percentcalc "+bs_print,"labelCaption":"Заявление на аудит цен","template":window.getApp().getTemplate("EditFileApp"),"addControls":function(){this.addElement(new ButtonCtrl(this.getId()+":print",{"glyph":"glyphicon-print","title":"Печать заявления","onClick":function(){self.checkSaveExecute(function(){self.printAppOnTempl("ApplicationAudit",0);},true,false);}}));},"printTitle":"Распечатать заявление на проведение аудита цен","mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"onDeleteFile":function(fileId,callBack){self.deletePrint("delete_app_print_audit",fileId,callBack);},"onFileDeleted":function(){self.calcFillPercent();},"onFileAdded":function(){self.calcFillPercent();},"onFileSigAdded":function(){self.calcFillPercent();},"onDownload":function(){self.downloadPrint("download_app_print_audit");}}));this.addElement(new ApplicationClientEdit(id+":applicant",{"mainView":this}));this.addElement(new ApplicationClientContainer(id+":contractors",{"attrs":{"percentcalc":"true"},"readOnly":options.readOnly,"elementClass":ApplicationClientEdit,"templateOptions":{"isClient":true},"elementOptions":{"mainView":this,"template":window.getApp().getTemplate("ApplicationContractor"),"templateOptions":{"isClient":true}}}));this.addElement(new ApplicationClientEdit(id+":customer",{"mainView":this,"minInf":true}));this.addElement(new ApplicationClientEdit(id+":developer",{"mainView":this,"minInf":true}));this.addDocumentTabs(options.model,options.models.DocumentTemplateAllList_Model);this.addElement(new DocFolder_View(id+":doc_folders",{"items":doc_folders}));options.controlOk=new ButtonOK(id+":cmdOk",{"onClick":function(){self.checkSaveExecute(function(){self.close({"updated":true});},false,false);}});options.controlCancel=new ButtonCancel(id+":cmdCancel",{"onClick":function(){if(self.getForUploadFileCount()){WindowQuestion.show({"text":"Есть незагруженные файлы документации, продолжить?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.onCancel();}}});}
else{self.onCancel();}}});this.addElement(new ButtonCmd(id+":cmdSend",{"enabled":false,"onClick":function(){self.checkRequiredFiles();self.checkPrintFiles();self.checkForUploadFileCount();WindowQuestion.show({"text":"Отправить заявление на проверку?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.setTempDisabled(self.CMD_OK);self.getElement("cmdSend").setEnabled(false);var frm_cmd=self.getCmd();var pm=self.m_controller.getPublicMethod((frm_cmd=="insert"||frm_cmd=="copy")?self.m_controller.METH_INSERT:self.m_controller.METH_UPDATE)
pm.setFieldValue("set_sent",true);if(frm_cmd!="insert"&&frm_cmd!="copy"){pm.setFieldValue("old_id",self.getElement("id").getValue());}
self.onSave(function(){self.close({"updated":true});},function(resp,errCode,errStr){pm.setFieldValue("set_sent",false);self.setError(window.getApp().formatError(errCode,errStr));self.setTempEnabled(self.CMD_OK);self.getElement("cmdSend").setEnabled(true);self.getControlOK().setEnabled(true);});}}});}}));this.addElement(new ButtonCmd(id+":cmdZipAll",{"onClick":function(){self.checkSaveExecute(function(){var contr=new Application_Controller();contr.getPublicMethod("zip_all").setFieldValue("application_id",self.getElement("id").getValue());contr.download("zip_all",null,null,function(n,descr){self.getElement("cmdZipAll").setEnabled(true);if(n){throw new Error(descr);}});},true);}}));}
options.cmdSave=false;ApplicationDialog_View.superclass.constructor.call(this,id,options);var r_binds=[new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("filled_percent")}),new DataBinding({"control":this.getElement("create_dt")}),new DataBinding({"control":this.getElement("offices_ref")}),new DataBinding({"control":this.getElement("service_cont").getElement("expertise_type"),"fieldId":"expertise_type"}),new DataBinding({"control":this.getElement("service_cont").getElement("cost_eval_validity"),"fieldId":"cost_eval_validity"}),new DataBinding({"control":this.getElement("service_cont").getElement("cost_eval_validity_simult"),"fieldId":"cost_eval_validity_simult"}),new DataBinding({"control":this.getElement("service_cont").getElement("modification"),"fieldId":"modification"}),new DataBinding({"control":this.getElement("service_cont").getElement("audit"),"fieldId":"audit"}),new DataBinding({"control":this.getElement("service_cont").getElement("primary_application"),"fieldId":"modif_primary_application"}),new DataBinding({"control":this.getElement("fund_sources_ref")}),new DataBinding({"control":this.getElement("build_types_ref")}),new DataBinding({"control":this.getElement("construction_types_ref")}),new DataBinding({"control":this.getElement("applicant")}),new DataBinding({"control":this.getElement("customer")}),new DataBinding({"control":this.getElement("developer")}),new DataBinding({"control":this.getElement("contractors")}),new DataBinding({"control":this.getElement("constr_name")}),new DataBinding({"control":this.getElement("constr_address")}),new DataBinding({"control":this.getElement("constr_technical_features")}),new DataBinding({"control":this.getElement("constr_technical_features_in_compound_obj")}),new DataBinding({"control":this.getElement("total_cost_eval")}),new DataBinding({"control":this.getElement("limit_cost_eval")}),new DataBinding({"control":this.getElement("pd_usage_info")}),new DataBinding({"control":this.getElement("primary_application")}),new DataBinding({"control":this.getElement("app_print_expertise")}),new DataBinding({"control":this.getElement("app_print_cost_eval")}),new DataBinding({"control":this.getElement("app_print_modification")}),new DataBinding({"control":this.getElement("app_print_audit")}),new DataBinding({"control":this.getElement("applicant").getElement("auth_letter")}),new DataBinding({"control":this.getElement("applicant").getElement("auth_letter_file")})];if(options.templateOptions.is_admin){r_binds.push(new DataBinding({"control":this.getElement("users_ref")}));}
this.setDataBindings(r_binds);w_binds=[new CommandBinding({"control":this.getElement("offices_ref")}),new CommandBinding({"control":this.getElement("filled_percent")}),new CommandBinding({"control":this.getElement("service_cont").getElement("expertise_type"),"fieldId":"expertise_type"}),new CommandBinding({"control":this.getElement("service_cont").getElement("cost_eval_validity"),"fieldId":"cost_eval_validity"}),new CommandBinding({"control":this.getElement("service_cont").getElement("cost_eval_validity_simult"),"fieldId":"cost_eval_validity_simult"}),new CommandBinding({"control":this.getElement("service_cont").getElement("modification"),"fieldId":"modification"}),new CommandBinding({"control":this.getElement("service_cont").getElement("audit"),"fieldId":"audit"}),new CommandBinding({"control":this.getElement("service_cont").getElement("primary_application").getElement("primary_ref"),"fieldId":"modif_primary_application_id"}),new CommandBinding({"control":this.getElement("service_cont").getElement("primary_application").getElement("primary_reg_number"),"fieldId":"modif_primary_application_reg_number"}),new CommandBinding({"control":this.getElement("fund_sources_ref")}),new CommandBinding({"control":this.getElement("build_types_ref")}),new CommandBinding({"control":this.getElement("construction_types_ref")}),new CommandBinding({"control":this.getElement("applicant")}),new CommandBinding({"control":this.getElement("customer")}),new CommandBinding({"control":this.getElement("developer")}),new CommandBinding({"control":this.getElement("contractors")}),new CommandBinding({"control":this.getElement("constr_name")}),new CommandBinding({"control":this.getElement("constr_address")}),new CommandBinding({"control":this.getElement("constr_technical_features"),"fieldId":"constr_technical_features"}),new CommandBinding({"control":this.getElement("constr_technical_features_in_compound_obj"),"fieldId":"constr_technical_features_in_compound_obj"}),new CommandBinding({"control":this.getElement("total_cost_eval")}),new CommandBinding({"control":this.getElement("limit_cost_eval")}),new CommandBinding({"control":this.getElement("pd_usage_info")}),new CommandBinding({"control":this.getElement("primary_application").getElement("primary_ref"),"fieldId":"primary_application_id"}),new CommandBinding({"control":this.getElement("primary_application").getElement("primary_reg_number"),"fieldId":"primary_application_reg_number"}),new CommandBinding({"control":this.getElement("app_print_expertise"),"fieldId":"app_print_expertise_files"}),new CommandBinding({"control":this.getElement("app_print_cost_eval"),"fieldId":"app_print_cost_eval_files"}),new CommandBinding({"control":this.getElement("app_print_modification"),"fieldId":"app_print_modification_files"}),new CommandBinding({"control":this.getElement("app_print_audit"),"fieldId":"app_print_audit_files"}),new CommandBinding({"control":this.getElement("applicant").getElement("auth_letter")}),new CommandBinding({"control":this.getElement("applicant").getElement("auth_letter_file"),"fieldId":"auth_letter_files"})];this.setWriteBindings(w_binds);var f_getFillPercent=function(){return(this.getAttr("percentcalc")=="true"&&this.isNull())?0:100;};this.getElement("offices_ref").getFillPercent=f_getFillPercent;this.getElement("fund_sources_ref").getFillPercent=f_getFillPercent;this.getElement("build_types_ref").getFillPercent=f_getFillPercent;this.getElement("constr_name").getFillPercent=f_getFillPercent;this.getElement("constr_address").getFillPercent=f_getFillPercent;this.getElement("construction_types_ref").getFillPercent=f_getFillPercent;this.getElement("total_cost_eval").getFillPercent=f_getFillPercent;this.getElement("limit_cost_eval").getFillPercent=f_getFillPercent;this.getElement("primary_application").getFillPercent=f_getFillPercent;this.getElement("pd_usage_info").getFillPercent=f_getFillPercent;var f_setAppPrintActive=function(v){this.setVisible(v);this.setAttr("percentcalc",v);}
this.m_getAppPrintFillPercent=function(){var perc;if(this.getAttr("percentCalc")=="true"){var file_list=this.getFileControls();perc=file_list.length?((file_list[0].getAttr("file_signed")=="true")?100:50):0;}
else{perc=100;}
return perc;}
this.getElement("app_print_expertise").setActive=f_setAppPrintActive;this.getElement("app_print_expertise").getFillPercent=this.m_getAppPrintFillPercent;this.getElement("app_print_cost_eval").setActive=f_setAppPrintActive;this.getElement("app_print_cost_eval").getFillPercent=this.m_getAppPrintFillPercent;this.getElement("app_print_modification").setActive=f_setAppPrintActive;this.getElement("app_print_modification").getFillPercent=this.m_getAppPrintFillPercent;this.getElement("app_print_audit").setActive=f_setAppPrintActive;this.getElement("app_print_audit").getFillPercent=this.m_getAppPrintFillPercent;this.getElement("applicant").getElement("auth_letter_file").getFillPercent=this.m_getAppPrintFillPercent;}
extend(ApplicationDialog_View,DocumentDialog_View);ApplicationDialog_View.prototype.NEW_TAB_FLASH_TIME=3000;ApplicationDialog_View.prototype.FORM_SAVE_INTERVAL=1*60*1000;ApplicationDialog_View.prototype.m_technicalFeatures;ApplicationDialog_View.prototype.m_prevConstructionTypeId;ApplicationDialog_View.prototype.m_prevExpertiseType;ApplicationDialog_View.prototype.getPercentClass=function(percent){var new_class;if(percent==0){new_class="badge-danger";}
else if(percent==100){new_class="badge-success";}
else if(percent>=50){new_class="badge-info";}
else{new_class="badge-warning";}
return new_class;}
ApplicationDialog_View.prototype.calcFillPercent=function(){var tot_cnt=0;var tot_percent=0;var tab_values={"common_inf-tab":{"percent":0,"cnt":0,"alias":"Общая информация"},"applicant-tab":{"percent":0,"cnt":0,"alias":"Заявитель"},"contractors-tab":{"percent":0,"cnt":0,"alias":"Исполнители работ"},"construction-tab":{"percent":0,"cnt":0,"alias":"Объект строительства"},"customer-tab":{"percent":0,"cnt":0,"alias":"Технический заказчик"},"developer-tab":{"percent":0,"cnt":0,"alias":"Застройщик"},"application_prints-tab":{"percent":0,"cnt":0,"alias":"Заявления"}}
for(var id in this.m_elements){if(this.m_elements[id]&&this.m_elements[id].getFillPercent&&this.m_elements[id].getAttr("percentcalc")=="true"){var ctrl_perc=this.m_elements[id].getFillPercent();if(!this.m_elements[id].tabId){var par=this.m_elements[id].getNode().parentNode;while(par&&!DOMHelper.hasClass(par,"tab-pane")){par=par.parentNode;}
if(par){this.m_elements[id].tabId=par.id;}}
if(this.m_elements[id].tabId){tab_values[this.m_elements[id].tabId].percent+=ctrl_perc;tab_values[this.m_elements[id].tabId].cnt++;}
tot_percent+=ctrl_perc;tot_cnt++;}}
var filled_percent=(tot_cnt)?(Math.floor(tot_percent/tot_cnt)):0;this.getElement("filled_percent").setValue(filled_percent);var ctrl=this.getElement("fill_percent");ctrl.setValue(filled_percent+"%");ctrl.setAttr("class","badge "+this.getPercentClass(filled_percent));this.setCmdEnabled();for(var id in tab_values){ctrl=this.getElement(id+"-fill_percent");var av_p=(tab_values[id].cnt)?(Math.floor(tab_values[id].percent/tab_values[id].cnt)):0;ctrl.setValue(av_p+"%");ctrl.setAttr("class","badge pull-right "+this.getPercentClass(av_p));}
return tab_values;}
ApplicationDialog_View.prototype.onGetData=function(resp,cmd){ApplicationDialog_View.superclass.onGetData.call(this,resp,cmd);var m=this.getModel();if(cmd=="copy"){m.setFieldValue("application_state","filling");this.getElement("create_dt").setValue(DateHelper.time());this.getElement("app_print_expertise").reset();this.getElement("app_print_cost_eval").reset();this.getElement("app_print_modification").reset();this.getElement("app_print_audit").reset();}
var do_expertise=(m.getFieldValue("expertise_type")=="pd"||m.getFieldValue("expertise_type")=="eng_survey"||m.getFieldValue("expertise_type")=="pd_eng_survey");this.getElement("service_cont").getElement("expertise").setValue(do_expertise);this.calcFillPercent();var st=m.getFieldValue("application_state");var mes_id="inf_"+st;if(cmd!="insert"){var app_ref=new RefType({"keys":{"id":m.getFieldValue("id")},"descr":m.getFieldValue("select_descr")});var tab_out=new DocFlowOutClientList_View(this.getId()+":doc_flow_out",{"application":app_ref,"readOnly":(st!="waiting_for_contract"&&st!="waiting_for_pay"&&st!="expertise"),"models":{"DocFlowOutClientList_Model":this.m_DocFlowOutClientList_Model}});var dlg_m=new DocFlowOutClientDialog_Model();dlg_m.setFieldValue("applications_ref",app_ref);dlg_m.setFieldValue("subject","Ответы на замечания");dlg_m.recInsert();tab_out.getElement("grid").setInsertViewOptions({"models":{"DocFlowOutClientDialog_Model":dlg_m,"ApplicationDialog_Model":this.getModel()}});tab_out.toDOM();this.addElement(tab_out);var tab_in=new DocFlowInClientList_View(this.getId()+":doc_flow_in",{"application":app_ref,"models":{"DocFlowInClientList_Model":this.m_DocFlowInClientList_Model}});tab_in.toDOM();this.addElement(tab_in);}
if(!cmd||cmd=="edit"){DOMHelper.delClass(document.getElementById(this.getId()+":tab-doc_flow_in"),"hidden");DOMHelper.delClass(document.getElementById(this.getId()+":tab-doc_flow_out"),"hidden");if(this.getModel().getField("doc_folders").isSet()){DOMHelper.delClass(document.getElementById(this.getId()+":tab-doc_folders"),"hidden");}}
if((st=="filling"||st=="correcting")&&cmd!="copy"){for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name]&&this.m_documentTabs[tab_name].control){this.m_documentTabs[tab_name].control.initDownload();}}}
if(m.getField("application_state_end_date").isSet()&&(st=="correcting"||st=="checking")){document.getElementById(this.getId()+":application_state_end_date_"+st).textContent=DateHelper.format(m.getFieldValue("application_state_end_date"),"d/m/Y");}
if(this.m_readOnly){this.disableAll();}
if(!m.getField("derived_applications_ref").isNull()||!m.getField("base_applications_ref").isNull()){var self=this;EventHelper.add(document.getElementById(this.getId()+":linkedApp"),"click",function(){var m=self.getModel();var ref=(!m.getField("base_applications_ref").isNull())?m.getFieldValue("base_applications_ref"):m.getFieldValue("derived_applications_ref")
var cl=window.getApp().getDataType(ref.getDataType()).dialogClass;(new cl({"id":CommonHelper.uniqid(),"keys":ref.getKeys(),"params":{"cmd":"edit","editViewOptions":{}}})).open();});}
DOMHelper.delClass(document.getElementById(this.getId()+":"+mes_id),"hidden");this.getElement("applicant").setAuthLetterRequired(true);}
ApplicationDialog_View.prototype.setCmdEnabled=function(){var tot=this.getTotalFileCount();var unloaded_tot=(tot==0)?0:this.getFileCount(false);var st=this.getModel().getFieldValue("application_state");this.getElement("cmdSend").setEnabled((this.getElement("filled_percent").getValue()==100&&!unloaded_tot&&tot>0&&(st=="filling"||st=="correcting")));this.getElement("cmdZipAll").setEnabled((tot>0&&!unloaded_tot));}
ApplicationDialog_View.prototype.removeDocumentTypeWithWarn=function(docTypesForRemove,onYes,onNo){if(docTypesForRemove.length){var self=this;var doc_types_str="";for(var i=0;i<docTypesForRemove.length;i++){doc_types_str+=(doc_types_str=="")?"":", ";doc_types_str+="'"+this.m_documentTabs[docTypesForRemove[i]].title+"'";}
var mes;if(docTypesForRemove.length==1){mes="ВНИМАНИЕ! Раздел "+doc_types_str+" будет удален со всеми загруженными файлами, продолжить?"}
else{mes="ВНИМАНИЕ! Разделы "+doc_types_str+" будут удалены со всеми загруженными файлами, продолжить?";}
WindowQuestion.show({"text":mes,"cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var contr=new Application_Controller();var pm=contr.getPublicMethod("remove_document_types");pm.setFieldValue("application_id",self.getElement("id").getValue());pm.setFieldValue("document_types",docTypesForRemove);pm.run({"ok":function(){for(var i=0;i<docTypesForRemove.length;i++){var print_id;switch(docTypesForRemove[i]){case"pd":case"eng_survey":print_id="app_print_expertise";break;case"cost_eval_validity":print_id="app_print_cost_eval";break;case"modification":print_id="app_print_modification";break;case"audit":print_id="app_print_audit";break;default:print_id="";break;}
if(print_id)self.getElement(print_id).reset();}
onYes();},"fail":function(resp,eN,eS){window.showError(eS,function(){if(onNo){onNo();}})}});}
else if(onNo){onNo();}}});}
else{onYes();}}
ApplicationDialog_View.prototype.toggleDocTypeVis=function(){ApplicationDialog_View.superclass.toggleDocTypeVis.call(this);this.setCmdEnabled();this.m_prevConstructionTypeId=(!this.getElement("construction_types_ref").isNull())?this.getElement("construction_types_ref").getValue().getKey():null;this.m_prevExpertiseType=this.getElement("service_cont").getElement("expertise_type").getValue();this.calcFillPercent();}
ApplicationDialog_View.prototype.fillDefTechnicalFeatures=function(callBack){if(!this.getElement("construction_types_ref").isNull()){var constr_type=this.getElement("construction_types_ref").getValue().getKey();if(!this.m_technicalFeatures[constr_type]){var self=this;var contr=new ConstructionType_Controller();contr.getPublicMethod("get_object").setFieldValue("id",constr_type);contr.run("get_object",{"ok":function(resp){var o=new ConstructionType_Model({"data":resp.getModelData("ConstructionType_Model")});if(o.getNextRow()){self.m_technicalFeatures[constr_type]=new TechnicalFeature_Model({"data":o.getFieldValue("technical_features")});self.getElement("constr_technical_features").setValue(self.m_technicalFeatures[constr_type].getData());callBack.call(self);}}});}
else{this.getElement("constr_technical_features").setValue(this.m_technicalFeatures[constr_type].getData());callBack.call(this);}}}
ApplicationDialog_View.prototype.checkSaveExecute=function(func,checkReqFiles,checkPrintFiles){this.checkForUploadFileCount();if(checkReqFiles)this.checkRequiredFiles();if(checkPrintFiles)this.checkPrintFiles();if(!this.getModified()){func.call(this);}
else{var frm_cmd=this.getCmd();var pm=this.m_controller.getPublicMethod((frm_cmd=="insert"||frm_cmd=="copy")?this.m_controller.METH_INSERT:this.m_controller.METH_UPDATE);pm.setFieldValue("set_sent",false);var self=this;this.m_commands[this.CMD_OK].setAsync(false);this.getControlOK().setEnabled(false);this.m_sendState=this.getElement("cmdSend").getEnabled();if(this.m_sendState)this.getElement("cmdSend").setEnabled(false);this.onSave(function(){if(func)func.call(self);},null,function(){self.getControlOK().setEnabled(true);if(self.m_sendState)self.getElement("cmdSend").setEnabled(true);});}}
ApplicationDialog_View.prototype.checkBeforePrint=function(){var tab_values=this.calcFillPercent();for(var id in tab_values){if(id!="application_prints-tab"&&tab_values[id].percent<100){throw new Error("Закладка "+tab_values[id].alias+" не заполнена на 100%!");}}
var no_files=true;for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name].control&&this.m_documentTabs[tab_name].control.getTotalFileCount()){no_files=false;break;}}
if(no_files){throw new Error('Нет ни одного вложенного файла с документацией!');}}
ApplicationDialog_View.prototype.printApp=function(){this.printAppOnTempl("Application",0);if(this.getElement("service_cont").getElement("cost_eval_validity").getValue()){this.printAppOnTempl("ApplicationCostEvalValidity",50);}}
ApplicationDialog_View.prototype.printAppOnTempl=function(templ,offset){this.checkBeforePrint();var contr=new Application_Controller();var pm=contr.getPublicMethod("get_print");pm.setFieldValue("id",this.getElement("id").getValue());pm.setFieldValue("templ",templ);pm.setFieldValue("inline","1");var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;contr.openHref("get_print","ViewPDF","location=0,menubar=0,status=0,titlebar=0,top="+(50+offset)+",left="+(left+offset)+",width="+w+",height="+h);window.showNote("Подпишите и загрузить заявление");}
ApplicationDialog_View.prototype.disableAll=function(){this.setEnabled(false);document.getElementById(this.getId()+":cmdOk").setAttribute("disabled","disabled");this.getElement("doc_flow_out").setEnabled(true);this.getElement("doc_flow_in").setEnabled(true);this.getElement("applicant").getElement("auth_letter_file").setEnabled(false);this.getElement("doc_folders").setEnabled(true);var serv_cont=this.getElement("service_cont");if(serv_cont.getElement("expertise").getValue()){DOMHelper.swapClasses(document.getElementById("ApplicationDialog:service_cont:expertise-panel"),"service-type-en","service-type-dis");}
if(serv_cont.getElement("cost_eval_validity").getValue()){DOMHelper.swapClasses(document.getElementById("ApplicationDialog:service_cont:cost_eval_validity-panel"),"service-type-en","service-type-dis");}
if(serv_cont.getElement("modification").getValue()){DOMHelper.swapClasses(document.getElementById("ApplicationDialog:service_cont:modification-panel"),"service-type-en","service-type-dis");}
if(serv_cont.getElement("audit").getValue()){DOMHelper.swapClasses(document.getElementById("ApplicationDialog:service_cont:audit-panel"),"service-type-en","service-type-dis");}
this.setCmdEnabled();$(".fileDeleteBtn").attr("disabled","disabled");$(".fillClientData").attr("disabled","disabled");$(".uploader-file-add").attr("disabled","disabled");$("a[download_href=true]").removeAttr("disabled");if(window.getApp().getServVar("role_id")=="admin"&&window.getApp().getServVar("temp_doc_storage")=="1"){this.getElement("users_ref").setEnabled(true);}}
ApplicationDialog_View.prototype.getFileCount=function(total,tabs){var tot=0;for(var id in this.m_documentTabs){if(this.m_documentTabs[id].control){var tab_tot=(total)?this.m_documentTabs[id].control.getTotalFileCount():this.m_documentTabs[id].control.getForUploadFileCount();if(tabs&&tab_tot){tabs.push(this.m_documentTabs[id].title);}
tot+=tab_tot;}}
return tot;}
ApplicationDialog_View.prototype.getTotalFileCount=function(){return this.getFileCount(true);}
ApplicationDialog_View.prototype.getForUploadFileCount=function(tabs){return this.getFileCount(false,tabs);}
ApplicationDialog_View.prototype.checkForUploadFileCount=function(){var tabs=[];if(this.getForUploadFileCount(tabs)){var mes="Есть незагруженные файлы документации "+((tabs.length==1)?(" в разделе "+tabs[0]):(" в разделах:"+tabs.join(", ")));throw new Error(mes);}}
ApplicationDialog_View.prototype.checkRequiredFiles=function(){for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name]&&this.m_documentTabs[tab_name].control){this.m_documentTabs[tab_name].control.checkRequiredFiles();}}}
ApplicationDialog_View.prototype.checkPrintFiles=function(){var m="Нет файла заявления или подписи по ";if(this.getElement("app_print_expertise").getVisible()&&!this.getElement("app_print_expertise").getFileControls().length)throw new Error(m+" гос. экспертизе!");if(this.getElement("app_print_cost_eval").getVisible()&&!this.getElement("app_print_cost_eval").getFileControls().length)throw new Error(m+" достоверности!");if(this.getElement("app_print_modification").getVisible()&&!this.getElement("app_print_modification").getFileControls().length)throw new Error(m+" модификации!");if(this.getElement("app_print_audit").getVisible()&&!this.getElement("app_print_audit").getFileControls().length)throw new Error(m+" аудиту!");}
ApplicationDialog_View.prototype.deletePrint=function(printMeth,fileId,callBack){var self=this;WindowQuestion.show({"text":"Удалить файл "+((printMeth=="delete_auth_letter_file")?"доверенности":"заявления")+"?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var pm=self.getController().getPublicMethod(printMeth);pm.setFieldValue("id",self.getElement("id").getValue());pm.run({"ok":callBack});}}});}
ApplicationDialog_View.prototype.downloadPrint=function(meth){var pm=this.getController().getPublicMethod(meth);pm.setFieldValue("id",this.getElement("id").getValue());pm.download();var pm2=this.getController().getPublicMethod(meth+"_sig");pm2.setFieldValue("id",this.getElement("id").getValue());pm2.download(null,1);}
ApplicationDialog_View.prototype.getModified=function(){if(!this.getEnabled()){return false;}
return ApplicationDialog_View.superclass.getModified.call(this);}
ApplicationDialog_View.prototype.toDOM=function(parent){ApplicationDialog_View.superclass.toDOM.call(this,parent);}
ApplicationDialog_View.prototype.delDOM=function(){if(this.m_mainSave)clearInterval(this.m_mainSave);ApplicationDialog_View.superclass.delDOM.call(this);}
ApplicationDialog_View.prototype.onSaveOk=function(resp){this.updateControlsFromResponse(resp);} 
ApplicationDialog_View.prototype.FIELD_CAP_office="Место проведения экспертизы:";ApplicationDialog_View.prototype.FIELD_CAP_expertise_type="Вид государственной экспертизы:";ApplicationDialog_View.prototype.FIELD_CAP_fund_source="Источник финансирования:";ApplicationDialog_View.prototype.FIELD_CAP_cost_eval_validity="Провести проверку достоверности определения сметной стоимости";ApplicationDialog_View.prototype.FIELD_CAP_cost_eval_validity_simult="Провести одновременно с государственной экспертизой";ApplicationDialog_View.prototype.COL_contractors_DESCR="Наименование";ApplicationDialog_View.prototype.FIELD_CAP_constr_name="Наименование объекта:";ApplicationDialog_View.prototype.TITLE_constr_name="Наименование:";ApplicationDialog_View.prototype.FIELD_CAP_constr_address="Почтовый (строительный) адрес:";ApplicationDialog_View.prototype.COL_constr_technical_features_NAME="Наименование";ApplicationDialog_View.prototype.COL_constr_technical_features_VALUE="Значение";ApplicationDialog_View.prototype.FIELD_CAP_construction_types_ref="Функциональное назначение объекта:"
ApplicationDialog_View.prototype.FIELD_CAP_total_cost_eval="Стоимость изгот. ПД и материалов инженерных изысканий в ценах 2001 года (руб.):";ApplicationDialog_View.prototype.FIELD_CAP_limit_cost_eval="Сметная или предполагаемая (предельная) стоимость объекта (тыс.руб.):";ApplicationDialog_View.prototype.FIELD_CAP_pd_usage_info="Сведения об использовании (о причинах неиспользования) повторного использования пд:"; 
function ViewBankAcc(id,options){options=options||{};options.className=options.className||"form-group";var self=this;options.addElement=function(){var id=this.getId();var bs=window.getBsCol(4);this.addElement(new BankEditRef(id+":bank",{"labelClassName":"control-label "+bs+(options.calcPercent?" percentcalc":""),"keyIds":["bik"],"cmdOpen":false,"attrs":{"autofocus":"true"}}));this.addElement(new EditBankAcc(id+":acc_number",{"labelClassName":"control-label "+bs+(options.calcPercent?" percentcalc":""),"labelCaption":"Номер счета:"}));}
ViewBankAcc.superclass.constructor.call(this,id,options);}
extend(ViewBankAcc,EditJSON); 
function ViewPersonIdPaper(id,options){options=options||{};options.className=options.className||"form-group";var self=this;options.addElement=function(){this.addElement(new PersonIdPaperSelect(id+":paper",{"labelCaption":"Вид документа:","addNotSelected":false}));this.addElement(new EditString(id+":series",{"attrs":{"autofocus":true},"labelCaption":"Серия документа:","maxLength":"20"}));this.addElement(new EditString(id+":number",{"labelCaption":"Номер документа:","maxLength":"20"}));this.addElement(new EditString(id+":issue_body",{"labelCaption":"Кем выдан:","maxLength":"250"}));this.addElement(new EditDate(id+":issue_date",{"labelCaption":"Дата выдачи:"}));}
ViewPersonIdPaper.superclass.constructor.call(this,id,options);this.setValue(options.values||{});}
extend(ViewPersonIdPaper,EditJSON); 
function ViewPersonRegistrPaper(id,options){options=options||{};options.className=options.className||"form-group";var self=this;options.addElement=function(){this.addElement(new EditString(id+":id",{"attrs":{"autofocus":true},"labelCaption":"Серия, №:","placeholder":"Серия и номер свителельства","maxLength":"200"}));this.addElement(new EditDate(id+":issue_date",{"labelCaption":"Дата выдачи:"}));}
ViewPersonRegistrPaper.superclass.constructor.call(this,id,options);this.setValue(options.values||{});}
extend(ViewPersonRegistrPaper,EditJSON); 
function KladrEditRef(id,options){options=options||{};this.m_view=options.view;if(options.labelCaption!=""){options.labelCaption=options.labelCaption||this.LAB_CAPION;}
options.title=this.TITLE;options.placeholder=this.PLACEHOLDER;this.m_controller=options.controller;options.acMinLengthForQuery=options.acMinLengthForQuery||1;options.acController=options.controller;options.acModel=options.model;options.acPatternFieldId="pattern";options.acICase=options.acICase||"1";options.acDescrFields=[options.model.getField("full_name")];options.acMid=options.acMid||"0";options.acPublicMethod=this.m_controller.getPublicMethod(options.publicMethod),KladrEditRef.superclass.constructor.call(this,id,options);}
extend(KladrEditRef,EditRef);function RegionEditRef(id,options){options.keyIds=["region_code"];options.publicMethod="get_region_list",options.acKeyFields=[options.model.getField("region_code")];RegionEditRef.superclass.constructor.call(this,id,options);}
extend(RegionEditRef,KladrEditRef);function RaionEditRef(id,options){options.keyIds=["raion_code"];var self=this;options.events={"focus":function(){var pm=self.m_controller.getPublicMethod("get_raion_list");pm.setFieldValue("region_code",self.m_view.getElement("region").getKeyValue());}};options.acMinLengthForQuery=1;options.publicMethod="get_raion_list",options.acKeyFields=[options.model.getField("raion_code")];RaionEditRef.superclass.constructor.call(this,id,options);}
extend(RaionEditRef,KladrEditRef);function NaspunktEditRef(id,options){options.keyIds=["naspunkt_code"];var self=this;options.events={"focus":function(){var pm=self.m_controller.getPublicMethod("get_naspunkt_list");pm.setFieldValue("region_code",self.m_view.getElement("region").getKeyValue());pm.setFieldValue("raion_code",self.m_view.getElement("raion").getKeyValue());}};options.acMinLengthForQuery=1;options.publicMethod="get_naspunkt_list",options.acKeyFields=[options.model.getField("naspunkt_code")];NaspunktEditRef.superclass.constructor.call(this,id,options);}
extend(NaspunktEditRef,KladrEditRef);function GorodEditRef(id,options){options.keyIds=["gorod_code"];var self=this;options.events={"focus":function(){var pm=self.m_controller.getPublicMethod("get_gorod_list");pm.setFieldValue("region_code",self.m_view.getElement("region").getKeyValue());pm.setFieldValue("raion_code",self.m_view.getElement("raion").getKeyValue());}};options.acMinLengthForQuery=1;options.publicMethod="get_gorod_list",options.acKeyFields=[options.model.getField("gorod_code")];GorodEditRef.superclass.constructor.call(this,id,options);}
extend(GorodEditRef,KladrEditRef);function UlitsaEditRef(id,options){options.keyIds=["ulitsa_code"];var self=this;options.events={"focus":function(){var pm=self.m_controller.getPublicMethod("get_ulitsa_list");pm.setFieldValue("region_code",self.m_view.getElement("region").getKeyValue());pm.setFieldValue("raion_code",self.m_view.getElement("raion").getKeyValue());var np_code=self.m_view.getElement("naspunkt").getKeyValue();if(np_code&&np_code.length&&np_code!="null"){pm.setFieldValue("naspunkt_code",np_code);pm.setFieldValue("gorod_code",null);}
else{pm.setFieldValue("naspunkt_code",null);pm.setFieldValue("gorod_code",self.m_view.getElement("gorod").getKeyValue());}}};options.acMinLengthForQuery=1;options.publicMethod="get_ulitsa_list",options.acKeyFields=[options.model.getField("ulitsa_code")];UlitsaEditRef.superclass.constructor.call(this,id,options);}
extend(UlitsaEditRef,KladrEditRef);function ViewKladr(id,options){options=options||{};options.className=options.className||"form-group";this.m_controller=new Kladr_Controller();this.m_model=new Kladr_Model();var self=this;options.addElement=function(){var id=this.getId();this.addElement(new RegionEditRef(id+":region",{"view":self,"controller":self.m_controller,"model":self.m_model,"attrs":{"autofocus":"true"}}));this.addElement(new RaionEditRef(id+":raion",{"view":self,"controller":self.m_controller,"model":self.m_model}));this.addElement(new NaspunktEditRef(id+":naspunkt",{"view":self,"controller":self.m_controller,"model":self.m_model}));this.addElement(new GorodEditRef(id+":gorod",{"view":self,"controller":self.m_controller,"model":self.m_model}));this.addElement(new UlitsaEditRef(id+":ulitsa",{"view":self,"controller":self.m_controller,"model":self.m_model}));this.addElement(new EditString(id+":dom",{"labelCaption":self.DOM_LAB_CAPION,"title":self.DOM_TITLE,"placeholder":self.DOM_PLACEHOLDER,"cmdSelect":false,"cmdOpen":false,"cmdOpen":false}));this.addElement(new EditString(id+":korpus",{"labelCaption":self.KORPUS_LAB_CAPION,"title":self.KORPUS_TITLE,"placeholder":self.KORPUS_PLACEHOLDER,"cmdSelect":false,"cmdOpen":false}));this.addElement(new EditString(id+":kvartira",{"labelCaption":self.KV_LAB_CAPION,"title":self.KV_TITLE,"placeholder":self.KV_PLACEHOLDER,"cmdSelect":false,"cmdOpen":false}));}
ViewKladr.superclass.constructor.call(this,id,options);}
extend(ViewKladr,EditJSON); 
ViewKladr.prototype.HEAD_TITLE="Редактирование адреса";RegionEditRef.prototype.LAB_CAPION="Регион:";RegionEditRef.prototype.TITLE="регион,область,край и т.д.";RegionEditRef.prototype.PLACEHOLDER="регион,область,край и т.д.";RaionEditRef.prototype.LAB_CAPION="Район:";RaionEditRef.prototype.TITLE="район";RaionEditRef.prototype.PLACEHOLDER="район";NaspunktEditRef.prototype.LAB_CAPION="Населенный пункт:";NaspunktEditRef.prototype.TITLE="населенный пункт (село,поселок и т.д.)";NaspunktEditRef.prototype.PLACEHOLDER="населенный пункт (село,поселок и т.д.)";GorodEditRef.prototype.LAB_CAPION="Город:";GorodEditRef.prototype.TITLE="город";GorodEditRef.prototype.PLACEHOLDER="город";UlitsaEditRef.prototype.LAB_CAPION="Улица:";UlitsaEditRef.prototype.TITLE="улица,проспект,переулок и т.д";UlitsaEditRef.prototype.PLACEHOLDER="улица,проспект,переулок и т.д";ViewKladr.prototype.DOM_LAB_CAPION="Дом (владение):";ViewKladr.prototype.DOM_TITLE="номер дом";ViewKladr.prototype.DOM_PLACEHOLDER="дом,владение";ViewKladr.prototype.KORPUS_LAB_CAPION="Корпус (строение):";ViewKladr.prototype.KORPUS_TITLE="номер корпуса,строение";ViewKladr.prototype.KORPUS_PLACEHOLDER="номер корпуса,строение";ViewKladr.prototype.KV_LAB_CAPION="Квартира (помещение):";ViewKladr.prototype.KV_TITLE="номер квартиры,помещения";ViewKladr.prototype.KV_PLACEHOLDER="номер квартиры,помещения"; 
function ApplicationClientList_View(id,options){options=options||{};ApplicationClientList_View.superclass.constructor.call(this,id,options);var model=options.models.ApplicationClientList_Model;var contr=new Application_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["name"],"controller":contr,"editInline":false,"editWinClass":ApplicationDialog_Form,"popUpMenu":popup_menu,"commands":null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":this.COL_CAP_name,"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:inn_kpp",{"value":this.COL_CAP_inn_kpp,"columns":[new GridColumnDate({"field":model.getField("inn"),"formatFunction":function(fields){var res="";if(fields.inn.isSet()){res=fields.inn.getValue();if(fields.kpp.isSet()&&fields.client_type.getValue()=="enterprise"){res+="/"+fields.kpp.getValue();}}
return res;}})]}),new GridCellHead(id+":grid:head:constr_ogrn",{"value":this.COL_CAP_ogrn,"columns":[new GridColumn({"field":model.getField("ogrn")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ApplicationClientList_View,ViewAjxList); 
ApplicationClientList_View.prototype.HEAD_TITLE="Список контрагентов";ApplicationClientList_View.prototype.COL_CAP_name="Наименование";ApplicationClientList_View.prototype.COL_CAP_inn_kpp="ИНН/КПП";ApplicationClientList_View.prototype.COL_CAP_ogrn="ОГРН"; 
function ConstructionTypeList_View(id,options){options=options||{};ConstructionTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.ConstructionType_Model;var contr=new ConstructionType_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":ConstructionTypeDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Тип объекта","columns":[new GridColumn({"field":model.getField("name")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ConstructionTypeList_View,ViewAjxList); 
function ConstructionTypeDialog_View(id,options){options=options||{};options.model=options.model||options.models.ConstructionType_Model;options.controller=options.controller||new ConstructionType_Controller();ConstructionTypeDialog_View.superclass.constructor.call(this,id,options);var self=this;this.addElement(new EditString(id+":name",{"maxLength":"200","required":true}));var model=new TechnicalFeature_Model();this.addElement(new GridAjx(id+":technical_features",{"model":model,"keyIds":["name"],"controller":new TechnicalFeature_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":technical_features:cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":technical_features:head",{"elements":[new GridRow(id+":technical_features:head:row0",{"elements":[new GridCellHead(id+":technical_features:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})]}),new GridCellHead(id+":technical_features:head:value",{"value":"Значение","columns":[new GridColumn({"field":model.getField("value")})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true,"focus":true}));var read_b=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("technical_features"),"fieldId":"technical_features"})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("technical_features"),"fieldId":"technical_features"})];this.setWriteBindings(write_b);}
extend(ConstructionTypeDialog_View,ViewObjectAjx); 
function HolidayList_View(id,options){options=options||{};HolidayList_View.superclass.constructor.call(this,id,options);var model=options.models.Holiday_Model;var contr=new Holiday_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["date"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date"),"ctrlClass":EditDate})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(HolidayList_View,ViewAjx); 
function DocFlowOutList_View(id,options){options=options||{};this.HEAD_TITLE=DocFlowOutList_View.prototype.HEAD_TITLE;DocFlowOutList_View.superclass.constructor.call(this,id,options);var model;if(options.models){model=options.models.DocFlowOutList_Model;}
else{model=new DocFlowOutList_Model();}
var contr=new DocFlowOut_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"mail_type":{"binding":new CommandBinding({"control":new DocFlowTypeSelect(id+":filter-ctrl-doc_flow_type",{"type_id":"out","contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_type_id")})},"state":{"binding":new CommandBinding({"control":new Enum_doc_flow_out_states(id+":filter-ctrl-state",{"labelCaption":"Статус:","contClassName":"form-group-filter"}),"field":new FieldString("state")})}};var columns=[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:reg_number",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("reg_number")})],"sortable":true}),new GridCellHead(id+":grid:head:doc_flow_types_ref",{"value":"Вид письма","columns":[new GridColumnRef({"field":model.getField("doc_flow_types_ref")})],"sortable":true}),];if(!options.fromApp){columns.push(new GridCellHead(id+":grid:head:to_constr_name",{"value":"Объект","columns":[new GridColumn({"field":model.getField("to_constr_name")})]}));columns.push(new GridCellHead(id+":grid:head:to_addr_names",{"value":"Получатель","columns":[new GridColumn({"field":model.getField("to_addr_names"),"formatFunction":function(fields){var res="";if(fields.to_addr_names.isSet()){var contacts=CommonHelper.unserialize(fields.to_addr_names.getValue().contacts);var list=contacts.rows;res=list.length?list[0].fields["name"]:"";res+=(list.length>1)?",еще ("+(list.length-1)+")":"";}
else if(fields.applicant_descr.isSet()){res=fields.applicant_descr.getValue();}
return res;}})]}));}
columns.push(new GridCellHead(id+":grid:head:state",{"value":"Статус","columns":[new GridColumn({"field":model.getField("state"),"formatFunction":function(fields){var st=fields.state.getValue();var st_descr="";if(st){st_descr=window.getApp().getEnum("doc_flow_out_states",st);if(CommonHelper.inArray(st,["approving","confirming","registering"])>=0){st_descr+=" до "+DateHelper.format(fields.state_end_dt.getValue(),"d/m/Y H:i");}}
return st_descr;}})],"sortable":true}));columns.push(new GridCellHead(id+":grid:head:employee_short_name",{"value":"Отправитель","columns":[new GridColumn({"field":model.getField("employee_short_name")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowOutDialog_Form,"popUpMenu":popup_menu,"commands":!options.readOnly?new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":true,"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}):null,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":(options.autoRefresh!=undefined)?options.autoRefresh:false,"filters":options.filters,"refreshInterval":!options.fromApp?(constants.grid_refresh_interval.getValue()*1000):0,"rowSelect":false,"focus":true}));}
extend(DocFlowOutList_View,ViewAjxList); 
function DocFlowOutDialog_View(id,options){options=options||{};options.controller=new DocFlowOut_Controller();options.model=options.models.DocFlowOutDialog_Model;var self=this;this.m_dataType="doc_flow_out";options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var role=window.getApp().getServVar("role_id");var is_admin=(role=="admin");var akt1c=(role=="boss"||role=="admin");var order1c=(role=="lawyer"||role=="boss"||role=="admin");this.addElement(new HiddenKey(id+":id"));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"value":DateHelper.time(),"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"enabled":is_admin}));this.addElement(new EditString(id+":reg_number",{"attrs":{"autofocus":"autofocus","style":"width:150px;"},"inline":true,"cmdClear":false,"maxLength":"15","placeholder":"Номер"}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Подготовил:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref"))}));this.addElement(new EmployeeEditRef(id+":signed_by_employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Подписал:","keyIds":["employee_id"]}));this.addElement(new DocFlowInEditRef(id+":doc_flow_in_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"В ответ на:","keyIds":["id"]}));this.addElement(new EditContactList(id+":to_addr_names",{"labelCaption":"Получатель:","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new ApplicationEditRef(id+":to_applications_ref",{"labelCaption":"Заявление:","editContClassName":editContClassName,"labelClassName":labelClassName,"visible":false}));this.addElement(new EditString(id+":new_contract_number",{"labelCaption":"№ контракта:","editContClassName":editContClassName,"labelClassName":labelClassName,"visible":false,"buttonClear":new BtnNextContractNum(id+":cmdNextContractNum",{"view":this})}));this.addElement(new ContractEditRef(id+":to_contracts_ref",{"labelCaption":"Контракт:","editContClassName":editContClassName,"labelClassName":labelClassName,"visible":false,"onSelect":function(fields){if(self.elementExists("order1c")){self.getElement("order1c").updateList(fields.id.getValue());}
if(self.elementExists("akt1c")){self.getElement("akt1c").update(fields);}}}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:","placeholder":"Тема письма"}));this.addElement(new EditText(id+":content",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","placeholder":"Содержание письма"}));this.addElement(new EditText(id+":comment_text",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Комментарий:","rows":2}));this.addElement(new DocFlowTypeSelect(id+":doc_flow_types_ref",{"labelCaption":"Вид письма:","editContClassName":editContClassName,"labelClassName":labelClassName,"type_id":"out","events":{"change":function(){self.setDocVis();}}}));this.addElement(new ExpertiseRejectTypeSelect(id+":expertise_reject_types_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"visible":false}));this.addElement(new Enum_expertise_results(id+":expertise_result",{"labelCaption":"Вид заключения:","editContClassName":editContClassName,"labelClassName":labelClassName,"visible":false,"events":{"change":function(){var v=this.getValue();if(v=="positive"){self.getElement("expertise_reject_types_ref").reset();}
self.getElement("expertise_reject_types_ref").setVisible((v=="negative"));}}}));var files;var st;var model_exists=false;if(options.model&&(options.model.getRowIndex()==0||(options.model.getRowIndex()<0&&options.model.getNextRow()))){files=options.model.getFieldValue("files")||[];st=options.model.getFieldValue("state");model_exists=true;}
else{files=[];}
this.addElement(new FileUploaderDocFlowOut_View(this.getId()+":attachments",{"mainView":this,"items":files,"templateOptions":{"isNotSent":(st!="registered")},"akt1c":akt1c,"order1c":order1c}));options.controlOk=new ButtonOK(id+":cmdOk",{"onClick":function(){self.checkForUploadFileCount();self.onOK();}});this.addElement(new ButtonCmd(id+":cmdApprove",{"onClick":function(){self.checkForUploadFileCount();if(self.getModified()){self.onSave(function(){self.passToApprove();})}
else{self.passToApprove();}}}));this.addElement(new ButtonCmd(id+":cmdRegister",{"onClick":function(){self.checkForUploadFileCount();if(self.getModified()){self.onSave(function(){self.passToRegister();})}
else{self.passToRegister();}}}));this.addElement(new ButtonCmd(id+":attachments:attFromTemplate",{"caption":"Создать из шаблона ","glyph":"glyphicon-duplicate","onClick":function(){self.createFromTemplate();}}));if(akt1c){this.addElement(new Doc1cAkt(id+":attachments:akt1c",{"model":options.model,"getContractId":function(){return self.getElement("to_contracts_ref").getValue().getKey("id");},"visible":(model_exists&&options.model.getFieldValue("to_contracts_ref")),"contractId":(model_exists&&options.model.getFieldValue("to_contracts_ref"))?options.model.getFieldValue("to_contracts_ref").getKey("id"):null}));}
if(order1c){this.addElement(new Doc1cOrder(id+":attachments:order1c",{"getContractId":function(){return self.getElement("to_contracts_ref").getValue().getKey("id");},"visible":(model_exists&&options.model.getFieldValue("to_contracts_ref")),"contractId":(model_exists&&options.model.getFieldValue("to_contracts_ref"))?options.model.getFieldValue("to_contracts_ref").getKey("id"):null}));}
this.addElement(new BtnNextNum(id+":cmdNextNum",{"view":this}));}
this.addProcessChain(options);DocFlowOutDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("reg_number"),"model":this.m_model}),new DataBinding({"control":this.getElement("doc_flow_types_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("to_addr_names"),"model":this.m_model}),new DataBinding({"control":this.getElement("to_applications_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("new_contract_number"),"model":this.m_model}),new DataBinding({"control":this.getElement("to_contracts_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("doc_flow_in_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("subject"),"model":this.m_model}),new DataBinding({"control":this.getElement("content"),"model":this.m_model}),new DataBinding({"control":this.getElement("comment_text"),"model":this.m_model}),new DataBinding({"control":this.getElement("employees_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("signed_by_employees_ref")}),new DataBinding({"control":this.getElement("expertise_reject_types_ref")}),new DataBinding({"control":this.getElement("expertise_result")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("reg_number")}),new CommandBinding({"control":this.getElement("doc_flow_types_ref"),"fieldId":"doc_flow_type_id"}),new CommandBinding({"control":this.getElement("to_addr_names")}),new CommandBinding({"control":this.getElement("to_applications_ref"),"fieldId":"to_application_id"}),new CommandBinding({"control":this.getElement("new_contract_number")}),new CommandBinding({"control":this.getElement("to_contracts_ref"),"fieldId":"to_contract_id"}),new CommandBinding({"control":this.getElement("doc_flow_in_ref"),"fieldId":"doc_flow_in_id"}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("content")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("signed_by_employees_ref"),"fieldId":"signed_by_employee_id"}),new CommandBinding({"control":this.getElement("expertise_reject_types_ref"),"fieldId":"expertise_reject_type_id"}),new CommandBinding({"control":this.getElement("expertise_result")})]);}
extend(DocFlowOutDialog_View,DocFlowBaseDialog_View);DocFlowOutDialog_View.prototype.setDocVis=function(){var v=this.getElement("doc_flow_types_ref").getValue();var app_vis=false;var contr_vis=false;var new_contr_num_vis=false;var result_vis=false;if(v){var v_key=v.getKey();var doc_type;if(v_key==window.getApp().getPredefinedItem("doc_flow_types","app_resp").getKey()){app_vis=true;doc_type="app_resp";new_contr_num_vis=true;}
else if(v_key==window.getApp().getPredefinedItem("doc_flow_types","app_resp_return").getKey()){app_vis=true;doc_type="app_resp_return";}
else if(v_key==window.getApp().getPredefinedItem("doc_flow_types","contr").getKey()){contr_vis=true;doc_type="contr";}
else if(v_key==window.getApp().getPredefinedItem("doc_flow_types","contr_close").getKey()){contr_vis=true;doc_type="contr_close";result_vis=true;}
else if(v_key==window.getApp().getPredefinedItem("doc_flow_types","contr_return").getKey()){contr_vis=true;doc_type="contr_return";}
if(app_vis||contr_vis){this.getElement("subject").setValue(window.getApp().getPredefinedItem("doc_flow_types",doc_type).getDescr());}}
this.getElement("to_applications_ref").setVisible(app_vis);this.getElement("new_contract_number").setVisible(new_contr_num_vis);this.getElement("to_contracts_ref").setVisible(contr_vis);this.getElement("expertise_result").setVisible(result_vis);this.getElement("expertise_reject_types_ref").setVisible((result_vis&&this.getElement("expertise_result").getValue()=="negative"));if(this.elementExists("order1c")){this.getElement("order1c").setVisible(contr_vis||new_contr_num_vis);}
if(this.elementExists("akt1c")){this.getElement("akt1c").setVisible(contr_vis);}
this.getElement("to_addr_names").setVisible(!app_vis&&!contr_vis);this.getElement("doc_flow_in_ref").setVisible(!app_vis&&!contr_vis);}
DocFlowOutDialog_View.prototype.onGetData=function(resp,cmd){DocFlowOutDialog_View.superclass.onGetData.call(this,resp,cmd);this.setDocVis();var st=this.getModel().getFieldValue("state");if(st){this.getElement("cmdApprove").setEnabled((st=="not_approved"||st=="approved_with_notes"));var n=document.getElementById(this.getId()+":state_descr");$(n).text(window.getApp().getEnum("doc_flow_out_states",st)+" ("+DateHelper.format(this.getModel().getFieldValue("state_dt"),"d/m/y H:i")+
(this.getModel().getFieldValue("state_end_dt")?(" - "+DateHelper.format(this.getModel().getFieldValue("state_end_dt"),"d/m/y H:i")):"")+")");var self=this;EventHelper.add(n,"click",function(){self.showStateReport();},true);DOMHelper.delClass(n,"hidden");}
if(st=="registered"){this.setEnabled(false);this.getElement("attachments").setEnabled(true);}
else{this.getElement("attachments").initDownload();}}
DocFlowOutDialog_View.prototype.passToRegister=function(){if(!this.getElement("reg_number").getValue()){throw Error("У документ нет регистрационного номера!");}
var self=this;var model=new DocFlowRegistrationDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));var doc_descr="Исходящий документ №"+this.getElement("reg_number").getValue()+" от "+DateHelper.format(this.getElement("date_time").getValue(),"d/m/Y");model.setFieldValue("subject_docs_ref",new RefType({"keys":{"id":this.getElement("id").getValue()},"descr":doc_descr,"dataType":"doc_flow_out"}));model.recInsert();this.m_docForm=new DocFlowRegistration_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.m_editResult.updated=true;self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowRegistrationDialog_Model":model}}}});this.m_docForm.open();}
DocFlowOutDialog_View.prototype.passToApprove=function(){if(!this.getElement("reg_number").getValue()&&!this.getElement("subject").getValue()){throw Error("У документ нет ни регистрационного номера ни темы!");}
var self=this;var model=new DocFlowApprovementDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));var doc_descr="Исходящий документ "+
(this.getElement("reg_number").getValue()?"№"+this.getElement("reg_number").getValue():this.getElement("subject").getValue())+" от "+DateHelper.format(this.getElement("date_time").getValue(),"d/m/Y");model.setFieldValue("subject","Согласовать "+doc_descr);model.setFieldValue("subject_docs_ref",new RefType({"keys":{"id":this.getElement("id").getValue()},"descr":doc_descr,"dataType":"doc_flow_out"}));var imp_ref=window.getApp().getPredefinedItem("doc_flow_importance_types","common");model.setFieldValue("doc_flow_importance_types_ref",imp_ref);model.setFieldValue("subject_docs_ref",new RefType({"keys":{"id":this.getElement("id").getValue()},"descr":doc_descr,"dataType":"doc_flow_out"}));var pm=(new DocFlowImportanceType_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",imp_ref.getKey("id"));pm.run({"ok":function(resp){var imp_m=resp.getModel("DocFlowImportanceTypeDialog_Model");if(imp_m.getNextRow()){model.setFieldValue("end_date_time",new Date(Date.now()+DateHelper.timeToMS(imp_m.getFieldValue("approve_interval"))));model.recInsert();self.m_docForm=new DocFlowApprovement_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.m_editResult.updated=true;self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowApprovementDialog_Model":model}}}});self.m_docForm.open();}}});}
DocFlowOutDialog_View.prototype.showStateReport=function(){alert("DocFlowOutDialog")}
DocFlowOutDialog_View.prototype.addProcessChain=function(options){DocFlowOutDialog_View.superclass.addProcessChain.call(this,options,"doc_flow_out_processes_chain");}
DocFlowOutDialog_View.prototype.addProcessChainEvents=function(){DocFlowOutDialog_View.superclass.addProcessChainEvents.call(this,"doc_flow_out_processes_chain");} 
function DocFlowInList_View(id,options){options=options||{};var is_client=(window.getApp().getServVar("role_id")=="client");this.HEAD_TITLE=is_client?DocFlowOutList_View.prototype.HEAD_TITLE:DocFlowInList_View.prototype.HEAD_TITLE;DocFlowInList_View.superclass.constructor.call(this,id,options);var model;if(options.models){model=is_client?options.models.DocFlowInClientList_Model:options.models.DocFlowInList_Model;}
else{model=(is_client)?new DocFlowInClientList_Model():new DocFlowInList_Model();}
var contr=new DocFlowIn_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var commands;if(!options.fromApp){var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"doc_flow_type":{"binding":new CommandBinding({"control":new DocFlowTypeSelect(id+":filter-ctrl-doc_flow_type",{"type_id":"in","contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_type_id")})},"state":{"binding":new CommandBinding({"control":new Enum_doc_flow_in_states(id+":filter-ctrl-state",{"labelCaption":"Статус:","contClassName":"form-group-filter"}),"field":new FieldString("state")})}};commands=new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage});}
var columns=[new GridCellHead(id+":grid:head:reg_number",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("reg_number")})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:doc_flow_types_ref",{"value":"Вид письма","columns":[new GridColumnRef({"field":model.getField("doc_flow_types_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:sender_construction_name",{"value":"Объект","columns":[new GridColumn({"field":model.getField("sender_construction_name")})]}),new GridCellHead(id+":grid:head:state",{"value":"Статус","columns":[new GridColumn({"field":model.getField("state"),"formatFunction":function(fields){var st=fields.state.getValue();var st_descr="";if(st){st_descr=window.getApp().getEnum("doc_flow_in_states",st);if(CommonHelper.inArray(st,["examining","fulfilling","fulfilling","registering"])>=0){st_descr+=" до "+DateHelper.format(fields.state_end_dt.getValue(),"d/m/Y H:i");}}
return st_descr;}})],"sortable":true}),new GridCellHead(id+":grid:head:sender",{"value":"От кого","columns":[new GridColumn({"field":model.getField("sender")})]}),new GridCellHead(id+":grid:head:recipient",{"value":"Кому","columns":[new GridColumnRef({"field":model.getField("recipient")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"readPublicMethod":(is_client)?contr.getPublicMethod("get_client_list"):null,"editInline":false,"editWinClass":DocFlowInDialog_Form,"popUpMenu":popup_menu,"commands":commands,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":(options.autoRefresh!=undefined)?options.autoRefresh:false,"refreshInterval":!options.fromApp?(constants.grid_refresh_interval.getValue()*1000):0,"filters":options.filters,"rowSelect":false,"focus":true}));}
extend(DocFlowInList_View,ViewAjxList); 
function DocFlowInDialog_View(id,options){options=options||{};options.controller=new DocFlowIn_Controller();options.model=options.models.DocFlowInDialog_Model;var self=this;this.m_dataType="doc_flow_in";options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var is_admin=(window.getApp().getServVar("role_id")=="admin");this.addElement(new HiddenKey(id+":id"));this.addElement(new EditDateTime(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"enabled":is_admin}));this.addElement(new EditString(id+":reg_number",{"attrs":{"autofocus":"autofocus","style":"width:150px;"},"inline":true,"cmdClear":false,"maxLength":"15","placeholder":"Номер"}));this.addElement(new ApplicationEditRef(id+":from_applications_ref",{"labelCaption":"Заявление:","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new DocFlowTypeSelect(id+":doc_flow_types_ref",{"labelCaption":"Вид письма:","editContClassName":editContClassName,"labelClassName":labelClassName,"type_id":"in","events":{"change":function(){self.setAppVis();}}}));var ac_m=new ContactList_Model();this.addElement(new EditString(id+":from_addr_name",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"От кого:","placeholder":"Адрес электронной почты и имя отправителя","cmdAutoComplete":true,"acMinLengthForQuery":1,"acModel":ac_m,"acPublicMethod":(new Contact_Controller()).getPublicMethod("get_complete_list"),"acPatternFieldId":"search","control":function(){return self.getElement("from_addr_name");},"acKeyFields":[ac_m.getField("contact")],"acDescrFields":[ac_m.getField("contact")],"acICase":"1","acMid":"1"}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Автор:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"enabled":is_admin}));this.addElement(new DocFlowOutEditRef(id+":doc_flow_out_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"В ответ на:"}));this.addElement(new EditDate(id+":from_client_date",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"от:"}));this.addElement(new EditString(id+":from_client_number",{"maxLength":"20","editContClassName":"input-group "+bs+"6","labelClassName":"control-label "+bs+"4","labelCaption":"№ отправителя:"}));var files=[];this.m_notSent=true;if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){files=options.model.getFieldValue("files")||[];var st=options.model.getFieldValue("state");if(options.model.getFieldValue("from_doc_flow_out_client_id")||(st&&(st=="examining"||st=="acquainting"||st=="fulfilling"))){this.m_notSent=false;}}
this.addElement(new FileUploaderDocFlowIn_View(this.getId()+":attachments",{"mainView":this,"items":files,"templateOptions":{"isNotSent":this.m_notSent}}));this.addElement(new EditText(id+":content",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","placeholder":"Содержание письма"}));this.addElement(new EditText(id+":content",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","placeholder":"Содержание письма"}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Наименование:","placeholder":"Тема письма"}));this.addElement(new EditString(id+":from_client_signed_by",{"maxLength":"250","editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Подписал:"}));this.addElement(new EditText(id+":comment_text",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Комментарий:","rows":2}));this.addElement(new DocFlowRecipientRef(id+":recipients_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Кому:"}));this.addElement(new EditDateTime(id+":end_date_time",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Срок исполнения:","editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i"}));options.controlOk=new ButtonOK(id+":cmdOk",{"onClick":function(){self.checkForUploadFileCount();self.onOK();}});this.addElement(new ButtonCmd(id+":cmdExamination",{"onClick":function(){self.checkForUploadFileCount();if(self.getModified()){self.onSave(function(){self.passToExamination();})}
else{self.passToExamination();}}}));this.addElement(new ButtonCmd(id+":cmdDocFlowOut",{"onClick":function(){self.checkForUploadFileCount();if(self.getModified()){self.onSave(function(){self.createDocFlowOut();})}
else{self.createDocFlowOut();}}}));this.addElement(new BtnNextNum(id+":cmdNextNum",{"view":this}));if(options.model&&options.model.getNextRow()){var chain=options.model.getFieldValue("doc_flow_in_processes_chain");for(var i=0;i<chain.length;i++){chain[i].step=(i+1);chain[i]["tab-class"]=(i==0)?"first selected":((i==chain.length-1)?"last":"");chain[i]["aria-selected"]=(i==0)?"true":"false";}
options.templateOptions.doc_flow_in_processes_chain=chain;}}
this.addProcessChain(options);DocFlowInDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("reg_number")}),new DataBinding({"control":this.getElement("doc_flow_types_ref")}),new DataBinding({"control":this.getElement("from_applications_ref")}),new DataBinding({"control":this.getElement("from_client_number")}),new DataBinding({"control":this.getElement("from_addr_name")}),new DataBinding({"control":this.getElement("from_client_date")}),new DataBinding({"control":this.getElement("from_client_signed_by")}),new DataBinding({"control":this.getElement("doc_flow_out_ref")}),new DataBinding({"control":this.getElement("recipients_ref")}),new DataBinding({"control":this.getElement("end_date_time")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("content")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("comment_text")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("reg_number")}),new CommandBinding({"control":this.getElement("doc_flow_types_ref"),"fieldId":"doc_flow_type_id"}),new CommandBinding({"control":this.getElement("from_applications_ref"),"fieldId":"from_application_id"}),new CommandBinding({"control":this.getElement("from_client_number")}),new CommandBinding({"control":this.getElement("from_client_date")}),new CommandBinding({"control":this.getElement("from_addr_name")}),new CommandBinding({"control":this.getElement("from_client_signed_by")}),new CommandBinding({"control":this.getElement("doc_flow_out_ref"),"fieldId":"doc_flow_out_id"}),new CommandBinding({"control":this.getElement("recipients_ref"),"fieldId":"recipient"}),new CommandBinding({"control":this.getElement("end_date_time")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("content")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("comment_text")})]);}
extend(DocFlowInDialog_View,DocFlowBaseDialog_View);DocFlowInDialog_View.prototype.addFileToContainer=function(container,itemFile,isNotSent){var self=this;container.addElement(new Control(this.getId()+":file_"+itemFile.file_id,"LI",{"attrs":{"file_uploaded":itemFile.file_uploaded},"template":window.getApp().getTemplate("MailAttachment"),"templateOptions":{"file_id":itemFile.file_id,"file_uploaded":itemFile.file_uploaded,"file_not_uploaded":(itemFile.file_uploaded!=undefined)?!itemFile.file_uploaded:true,"file_signed":itemFile.file_signed,"file_not_signed":(itemFile.file_signed!=undefined)?!itemFile.file_signed:true,"file_name":itemFile.file_name,"file_size_formatted":CommonHelper.byteForamt(itemFile.file_size),"isNotSent":isNotSent}}));if(isNotSent){container.addElement(new ButtonCtrl(this.getId()+":file_"+itemFile.file_id+"_del",{"attrs":{"file_id":itemFile.file_id},"glyph":"glyphicon-trash","onClick":function(){self.removeFile(this.getAttr("file_id"));}}));}
container.addElement(new Control(this.getId()+":file_"+itemFile.file_id+"_href","A",{"attrs":{"file_id":itemFile.file_id,"file_uploaded":itemFile.file_uploaded},"events":{"click":function(){if(this.getAttr("file_uploaded")=="true"){var contr=new DocFlowIn_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("id",this.getAttr("file_id"));contr.download("get_file");}}}}));container.addElement(new Control(this.getId()+":file_"+itemFile.file_id+"_href_sig","A",{"attrs":{"file_id":itemFile.file_id,"file_uploaded":itemFile.file_uploaded},"events":{"click":function(){if(this.getAttr("file_uploaded")=="true"){var contr=new DocFlowIn_Controller();var pm=contr.getPublicMethod("get_file_sig");pm.setFieldValue("id",this.getAttr("file_id"));contr.download("get_file_sig");}}}}));}
DocFlowInDialog_View.prototype.setAppVis=function(){var v=this.getElement("doc_flow_types_ref").getValue();v=v?v.getKey():null;var app_vis=(v&&(v==window.getApp().getPredefinedItem("doc_flow_types","app").getKey()||v==window.getApp().getPredefinedItem("doc_flow_types","contr_resp").getKey()||v==window.getApp().getPredefinedItem("doc_flow_types","contr_paper_return").getKey()));this.getElement("from_applications_ref").setVisible(app_vis);this.getElement("employees_ref").setVisible(!app_vis);this.getElement("from_addr_name").setVisible(!app_vis);this.getElement("doc_flow_out_ref").setVisible(!app_vis);this.getElement("content").setVisible(!app_vis);this.getElement("attachments").setVisible(app_vis);var cont_n=document.getElementById(this.getId()+":from_client_cont");if(!app_vis&&cont_n){DOMHelper.delClass(cont_n,"hidden");}
else if(app_vis&&cont_n){DOMHelper.addClass(cont_n,"hidden");}}
DocFlowInDialog_View.prototype.onGetData=function(resp){DocFlowInDialog_View.superclass.onGetData.call(this,resp);this.setAppVis();var m=this.getModel();var st=m.getFieldValue("state");var read_only=(m.getFieldValue("from_client_app")||st);this.setEnabled(!read_only);this.getElement("cmdDocFlowOut").setEnabled(true);if(m.getFieldValue("from_client_app")&&!st){this.getElement("cmdExamination").setEnabled(true);this.getElement("comment_text").setEnabled(true);}
if(!this.m_notSent){var n=document.getElementById(this.getId()+":state_descr");$(n).text("Статус: "+window.getApp().getEnum("doc_flow_in_states",this.getModel().getFieldValue("state")));var self=this;EventHelper.add(n,"click",function(){self.showStateReport();},true);DOMHelper.delClass(n,"hidden");$(".fileDeleteBtn").attr("disabled","disabled");$(".fillClientData").attr("disabled","disabled");$(".uploader-file-add").attr("disabled","disabled");$("a[download_href=true]").removeAttr("disabled");}
else{this.getElement("attachments").initDownload();}}
DocFlowInDialog_View.prototype.checkForUploadFileCount=function(){if(this.getElement("attachments").getForUploadFileCount()){throw new Error("Есть незагруженные вложения");}}
DocFlowInDialog_View.prototype.getRef=function(){return(new RefType({"dataType":"doc_flow_in","keys":{"id":this.getElement("id").getValue()},"descr":"Входящий документ №"+this.getElement("reg_number").getValue()+" от "+DateHelper.format(this.getElement("date_time").getValue(),"d/m/Y")}));}
DocFlowInDialog_View.prototype.createDocFlowOut=function(){var model=new DocFlowOutDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));if(!this.getElement("subject").isNull()){model.setFieldValue("subject",this.getElement("subject").getValue());}
if(this.getElement("doc_flow_types_ref").getValue().getKey()==window.getApp().getPredefinedItem("doc_flow_types","app").getKey()){model.setFieldValue("doc_flow_types_ref",window.getApp().getPredefinedItem("doc_flow_types","app_resp"));model.setFieldValue("to_applications_ref",this.getElement("from_applications_ref").getValue());}
model.setFieldValue("signed_by_employees_ref",null);model.setFieldValue("doc_flow_in_ref",this.getRef());model.recInsert();var self=this;this.m_docForm=new DocFlowOutDialog_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowOutDialog_Model":model}}}});this.m_docForm.open();}
DocFlowInDialog_View.prototype.checkDocFlowType=function(){var tp=this.getElement("doc_flow_types_ref");if(tp.isNull()){tp.setNotValid("Значение не выбрано");throw new Error("Есть ошибки!");}
return tp.getValue().getKey();}
DocFlowInDialog_View.prototype.passToExamination=function(){this.checkDocFlowType();var model=new DocFlowExaminationDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));if(!this.getElement("end_date_time").isNull()){model.setFieldValue("end_date_time",this.getElement("end_date_time").getValue());}
if(!this.getElement("subject").isNull()){model.setFieldValue("subject",this.getElement("subject").getValue());}
if(!this.getElement("content").isNull()){model.setFieldValue("description",this.getElement("content").getValue());}
if(!this.getElement("recipients_ref").isNull()){model.setFieldValue("recipients_ref",this.getElement("recipients_ref").getValue());}
model.setFieldValue("doc_flow_importance_types_ref",window.getApp().getPredefinedItem("doc_flow_importance_types","common"));model.setFieldValue("subject_docs_ref",this.getRef());model.recInsert();var self=this;this.m_docForm=new DocFlowExamination_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowExaminationDialog_Model":model}}}});this.m_docForm.open();}
DocFlowInDialog_View.prototype.showStateReport=function(){}
DocFlowInDialog_View.prototype.addProcessChain=function(options){DocFlowInDialog_View.superclass.addProcessChain.call(this,options,"doc_flow_in_processes_chain");}
DocFlowInDialog_View.prototype.addProcessChainEvents=function(){DocFlowInDialog_View.superclass.addProcessChainEvents.call(this,"doc_flow_in_processes_chain");} 
function DocFlowInsideList_View(id,options){options=options||{};DocFlowInsideList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.DocFlowInsideList_Model)?options.models.DocFlowInsideList_Model:new DocFlowInsideList_Model();var contr=new DocFlowInside_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters;if(!options.fromApp){filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"employee":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-employee",{"contClassName":"form-group-filter"}),"field":new FieldInt("employee_id")})},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type",{"type_id":"inside","contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_type_importance_id")})},"state":{"binding":new CommandBinding({"control":new Enum_doc_flow_inside_states(id+":filter-ctrl-state",{"labelCaption":"Статус:","contClassName":"form-group-filter"}),"field":new FieldString("state")})}};}
var commands=new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":filters?true:false,"filters":filters,"variantStorage":options.variantStorage});var columns=[new GridCellHead(id+":grid:head:id",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject",{"value":"Тема","columns":[new GridColumn({"field":model.getField("subject")})],"sortable":true}),new GridCellHead(id+":grid:head:doc_flow_importance_type",{"value":"Важность","columns":[new GridColumnRef({"field":model.getField("doc_flow_importance_types_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:state",{"value":"Статус","columns":[new GridColumn({"field":model.getField("state"),"formatFunction":function(fields){var st=fields.state.getValue();var st_descr="";if(st){st_descr=window.getApp().getEnum("doc_flow_inside_states",st);if(CommonHelper.inArray(st,["approving","examining","fulfilling","fulfilling","registering"])>=0){st_descr+=" до "+DateHelper.format(fields.state_end_dt.getValue(),"d/m/Y H:i");}}
return st_descr;}})],"sortable":true}),new GridCellHead(id+":grid:head:employee",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowInsideDialog_Form,"popUpMenu":popup_menu,"commands":commands,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":(options.autoRefresh!=undefined)?options.autoRefresh:false,"refreshInterval":!options.fromApp?(constants.grid_refresh_interval.getValue()*1000):0,"filters":options.filters,"rowSelect":false,"focus":true}));}
extend(DocFlowInsideList_View,ViewAjxList); 
function DocFlowInsideDialog_View(id,options){options=options||{};options.controller=new DocFlowInside_Controller();options.model=options.models.DocFlowInsideDialog_Model;options.cmdSave=true;var self=this;this.m_dataType="doc_flow_out";options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var role=window.getApp().getServVar("role_id");var is_admin=(role=="admin");this.addElement(new EditString(id+":id",{"attrs":{"style":"width:150px;"},"inline":true,"cmdClear":false,"maxLength":"15","placeholder":"Номер","enabled":false}));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"value":DateHelper.time(),"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"enabled":is_admin}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Подготовил:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref"))}));this.addElement(new ContractEditRef(id+":contracts_ref",{"labelCaption":"Контракт:","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:","placeholder":"Тема письма"}));this.addElement(new EditText(id+":content",{"attrs":{"autofocus":"autofocus"},"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","placeholder":"Содержание письма"}));this.addElement(new EditText(id+":comment_text",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Комментарий:","rows":2}));this.addElement(new DocFlowImportanceTypeSelect(id+":doc_flow_importance_types_ref",{"labelCaption":"Важность:","addNotSelected":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"value":window.getApp().getPredefinedItem("doc_flow_importance_types","common")}));var files;var st;var model_exists=false;if(options.model&&(options.model.getRowIndex()==0||(options.model.getRowIndex()<0&&options.model.getNextRow()))){files=options.model.getFieldValue("files")||[];st=options.model.getFieldValue("state");model_exists=true;}
else{files=[];}
this.addElement(new FileUploaderDocFlowInside_View(this.getId()+":attachments",{"mainView":this,"items":files,"templateOptions":{"isNotSent":true}}));options.controlOk=new ButtonOK(id+":cmdOk",{"onClick":function(){self.checkForUploadFileCount();self.onOK();}});this.addElement(new ButtonCmd(id+":cmdApprove",{"onClick":function(){self.checkForUploadFileCount();if(self.getModified()){self.onSave(function(){self.passToApprove();})}
else{self.passToApprove();}}}));this.addElement(new ButtonCmd(id+":attachments:attFromTemplate",{"caption":"Создать из шаблона ","glyph":"glyphicon-duplicate","onClick":function(){self.createFromTemplate();}}));}
this.addProcessChain(options);DocFlowInsideDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id"),"model":this.m_model}),new DataBinding({"control":this.getElement("date_time"),"model":this.m_model}),new DataBinding({"control":this.getElement("doc_flow_importance_types_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("contracts_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("subject"),"model":this.m_model}),new DataBinding({"control":this.getElement("content"),"model":this.m_model}),new DataBinding({"control":this.getElement("comment_text"),"model":this.m_model}),new DataBinding({"control":this.getElement("employees_ref"),"model":this.m_model})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("doc_flow_importance_types_ref"),"fieldId":"doc_flow_importance_type_id"}),new CommandBinding({"control":this.getElement("contracts_ref"),"fieldId":"contract_id"}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("content")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"})]);}
extend(DocFlowInsideDialog_View,DocFlowBaseDialog_View);DocFlowInsideDialog_View.prototype.onGetData=function(resp,cmd){DocFlowInsideDialog_View.superclass.onGetData.call(this,resp,cmd);var st=this.getModel().getFieldValue("state");if(st){this.getElement("cmdApprove").setEnabled((st=="not_approved"||st=="approved_with_notes"));var n=document.getElementById(this.getId()+":state_descr");$(n).text(window.getApp().getEnum("doc_flow_out_states",st)+" ("+DateHelper.format(this.getModel().getFieldValue("state_dt"),"d/m/y H:i")+
(this.getModel().getFieldValue("state_end_dt")?(" - "+DateHelper.format(this.getModel().getFieldValue("state_end_dt"),"d/m/y H:i")):"")+")");var self=this;EventHelper.add(n,"click",function(){self.showStateReport();},true);DOMHelper.delClass(n,"hidden");}
this.getElement("attachments").initDownload();}
DocFlowInsideDialog_View.prototype.passToApprove=function(){if(!this.getElement("id").getValue()){throw Error("Документ не записан!");}
var self=this;var model=new DocFlowApprovementDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));var doc_descr="Внутренний документ "+"№"+this.getElement("id").getValue()+" от "+DateHelper.format(this.getElement("date_time").getValue(),"d/m/Y");model.setFieldValue("subject","Согласовать "+doc_descr);var imp_ref=this.getElement("doc_flow_importance_types_ref").getValue();model.setFieldValue("doc_flow_importance_types_ref",imp_ref);model.setFieldValue("subject_docs_ref",new RefType({"keys":{"id":this.getElement("id").getValue()},"descr":doc_descr,"dataType":"doc_flow_inside"}));var pm=(new DocFlowImportanceType_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",imp_ref.getKey("id"));pm.run({"ok":function(resp){var imp_m=resp.getModel("DocFlowImportanceTypeDialog_Model");if(imp_m.getNextRow()){model.setFieldValue("end_date_time",new Date(Date.now()+DateHelper.timeToMS(imp_m.getFieldValue("approve_interval"))));model.recInsert();self.m_docForm=new DocFlowApprovement_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.m_editResult.updated=true;self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowApprovementDialog_Model":model}}}});self.m_docForm.open();}}});}
DocFlowInsideDialog_View.prototype.showStateReport=function(){alert("DocFlowInsideDialog")}
DocFlowInsideDialog_View.prototype.addProcessChain=function(options){DocFlowInsideDialog_View.superclass.addProcessChain.call(this,options,"doc_flow_inside_processes_chain");}
DocFlowInsideDialog_View.prototype.addProcessChainEvents=function(){DocFlowInsideDialog_View.superclass.addProcessChainEvents.call(this,"doc_flow_inside_processes_chain");} 
function DepartmentList_View(id,options){options=options||{};DepartmentList_View.superclass.constructor.call(this,id,options);var model=options.models.DepartmentList_Model;var contr=new Department_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DepartmentDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":this.COL_CAP_name,"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:email",{"value":"Эл.почта","columns":[new GridColumn({"field":model.getField("email")})]}),new GridCellHead(id+":grid:head:boss_employees_ref",{"value":this.COL_CAP_boss,"columns":[new GridColumnRef({"field":model.getField("boss_employees_ref"),"form":EmployeeDialog_Form})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(DepartmentList_View,ViewAjxList); 
DepartmentList_View.prototype.COL_CAP_name="Наименование";DepartmentList_View.prototype.COL_CAP_boss="Нач.отдела"; 
function DepartmentDialog_View(id,options){options=options||{};options.controller=new Department_Controller();options.model=options.models.DepartmentDialog_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":this.FIELD_CAP_name,"required":true}));this.addElement(new EditEmail(id+":email",{"labelCaption":"Эл.почта:","maxLength":50}));this.addElement(new EmployeeEditRef(id+":boss_employees_ref",{"labelCaption":this.FIELD_CAP_boss,"keyIds":["boss_employee_id"]}));}
DepartmentDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("email")}),new DataBinding({"control":this.getElement("boss_employees_ref"),"fieldId":"boss_employees_ref"})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name"),"fieldId":"name"}),new CommandBinding({"control":this.getElement("email"),"fieldId":"email"}),new CommandBinding({"control":this.getElement("boss_employees_ref"),"fieldId":"boss_employee_id"})]);}
extend(DepartmentDialog_View,ViewObjectAjx); 
DepartmentDialog_View.prototype.FIELD_CAP_name="Наименование:";DepartmentDialog_View.prototype.FIELD_CAP_boss="Нач.отдела:"; 
function EmployeeList_View(id,options){options=options||{};EmployeeList_View.superclass.constructor.call(this,id,options);var model=options.models.EmployeeList_Model;var contr=new Employee_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var filters={"office":{"binding":new CommandBinding({"control":new DepartmentSelect(id+":filter-ctrl-department",{"contClassName":"form-group-filter","labelCaption":this.FLT_CAP_department}),"field":new FieldInt("department_id")}),"sign":"e"}};var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":EmployeeDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":this.COL_CAP_name,"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:departments_ref",{"value":this.COL_CAP_departments_ref,"columns":[new GridColumnRef({"field":model.getField("departments_ref"),"form":DepartmentDialog_Form})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(EmployeeList_View,ViewAjx); 
EmployeeList_View.prototype.COL_CAP_name="ФИО";EmployeeList_View.prototype.COL_CAP_departments_ref="Отдел";EmployeeList_View.prototype.FLT_CAP_department="Отдел:"; 
function EmployeeDialog_View(id,options){options=options||{};options.controller=new Employee_Controller();options.model=options.models.EmployeeDialog_Model;var self=this;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":this.FIELD_CAP_name,"required":true}));this.addElement(new DepartmentSelect(id+":departments_ref",{"labelCaption":this.FIELD_CAP_departments_ref}));this.addElement(new PostEditRef(id+":posts_ref",{"labelCaption":this.FIELD_CAP_posts_ref}));this.addElement(new UserEditRef(id+":users_ref",{"labelCaption":this.FIELD_CAP_users_ref}));this.addElement(new EditFile(id+":picture_file",{"labelCaption":"Фотография:","onDownload":function(){self.downloadPicture();},"onDeleteFile":function(){self.deletePicture();}}));}
EmployeeDialog_View.superclass.constructor.call(this,id,options);this.setReadPublicMethod((new Employee_Controller()).getPublicMethod("get_object"));this.setDataBindings([new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("users_ref"),"model":this.m_model}),new DataBinding({"control":this.getElement("departments_ref")}),new DataBinding({"control":this.getElement("posts_ref")}),new DataBinding({"control":this.getElement("picture_file"),"field":this.m_model.getField("picture_info")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name"),"fieldId":"name"}),new CommandBinding({"control":this.getElement("users_ref"),"fieldId":"user_id"}),new CommandBinding({"control":this.getElement("departments_ref"),"fieldId":"department_id"}),new CommandBinding({"control":this.getElement("posts_ref"),"fieldId":"post_id"}),new CommandBinding({"control":this.getElement("picture_file"),"fieldId":"picture_file"})]);}
extend(EmployeeDialog_View,ViewObjectAjx);EmployeeDialog_View.prototype.downloadPicture=function(){(this.getController().getPublicMethod("download_picture")).download();}
EmployeeDialog_View.prototype.deletePicture=function(){(this.getController().getPublicMethod("delete_picture")).run({"ok":function(){window.showNote("Данные удалены.");}});} 
EmployeeDialog_View.prototype.FIELD_CAP_name="ФИО:";EmployeeDialog_View.prototype.FIELD_CAP_departments_ref="Отдел:";EmployeeDialog_View.prototype.FIELD_CAP_posts_ref="Должность:";EmployeeDialog_View.prototype.FIELD_CAP_users_ref="Аккаунт:"; 
function DocFlowTypeList_View(id,options){options=options||{};DocFlowTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowTypeList_Model;var contr=new DocFlowType_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowTypeDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})]}),new GridCellHead(id+":grid:head:doc_flow_types_type_id",{"value":"Вид","columns":[new EnumGridColumn_doc_flow_type_types({"field":model.getField("doc_flow_types_type_id")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:num_prefix",{"value":"Префикс","columns":[new GridColumn({"field":model.getField("num_prefix")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocFlowTypeList_View,ViewAjx); 
function DocFlowTypeDialog_View(id,options){options=options||{};options.controller=new DocFlowType_Controller();options.model=options.models.DocFlowTypeDialog_Model;options.addElement=function(){this.addElement(new EditString(id+":name",{"labelCaption":this.FIELD_CAP_name}));this.addElement(new EditString(id+":num_prefix",{"labelCaption":this.FIELD_CAP_num_prefix}));this.addElement(new EditInterval(id+":def_interval",{"labelCaption":this.FIELD_CAP_def_interval,"editMask":"99:99:99"}));this.addElement(new Enum_doc_flow_type_types(id+":doc_flow_type_types",{"labelCaption":this.FIELD_CAP_doc_flow_type_types}));}
DocFlowTypeDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("num_prefix")}),new DataBinding({"control":this.getElement("def_interval")}),new DataBinding({"control":this.getElement("doc_flow_type_types"),"field":options.model.getField("doc_flow_types_type_id")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name"),"fieldId":"name"}),new CommandBinding({"control":this.getElement("num_prefix"),"fieldId":"num_prefix"}),new CommandBinding({"control":this.getElement("def_interval")}),new CommandBinding({"control":this.getElement("doc_flow_type_types"),"fieldId":"doc_flow_types_type_id"})]);}
extend(DocFlowTypeDialog_View,ViewObjectAjx); 
DocFlowTypeDialog_View.prototype.FIELD_CAP_name="Наименование";DocFlowTypeDialog_View.prototype.FIELD_CAP_num_prefix="Префикс номеров:";DocFlowTypeDialog_View.prototype.FIELD_CAP_def_interval="Период исполнения:";DocFlowTypeDialog_View.prototype.FIELD_CAP_doc_flow_type_types="Тип:"; 
function PostList_View(id,options){options=options||{};PostList_View.superclass.constructor.call(this,id,options);var model=options.models.Post_Model;var contr=new Post_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(PostList_View,ViewAjx); 
function FundSourceList_View(id,options){options=options||{};FundSourceList_View.superclass.constructor.call(this,id,options);var model=options.models.FundSource_Model;var contr=new FundSource_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd"),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":this.COL_CAP_name,"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(FundSourceList_View,ViewAjx); 
function DocFlowImportanceTypeList_View(id,options){options=options||{};DocFlowImportanceTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowImportanceTypeList_Model;var contr=new DocFlowImportanceType_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var filters={};var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowImportanceTypeDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":this.COL_CAP_name,"columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:approve_interval",{"value":"Срок для согласования (часов)","columns":[new GridColumn({"field":model.getField("approve_interval"),"ctrlClass":EditInterval,"editMask":"99:99"})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(DocFlowImportanceTypeList_View,ViewAjx); 
function DocFlowImportanceTypeDialog_View(id,options){options=options||{};options.controller=new DocFlowImportanceType_Controller();options.model=options.models.DocFlowImportanceTypeDialog_Model;DocFlowImportanceTypeDialog_View.superclass.constructor.call(this,id,options);this.addElement(new EditString(id+":name",{"labelCaption":"Наименование"}));this.addElement(new EditInterval(id+":approve_interval",{"labelCaption":"Срок для согласования (часов):","editMask":"99:99"}));this.setReadPublicMethod((new DocFlowImportanceType_Controller()).getPublicMethod("get_object"));this.setDataBindings([new DataBinding({"control":this.getElement("name"),"model":this.m_model}),new DataBinding({"control":this.getElement("approve_interval"),"model":this.m_model})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("name"),"fieldId":"name"}),new CommandBinding({"control":this.getElement("approve_interval"),"fieldId":"approve_interval"}),]);}
extend(DocFlowImportanceTypeDialog_View,ViewObjectAjx); 
function ReportTemplateList_View(id,options){options=options||{};ReportTemplateList_View.superclass.constructor.call(this,id,options);var model=options.models.ReportTemplateList_Model;var contr=new ReportTemplate_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":ReportTemplate_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ReportTemplateList_View,ViewAjx); 
function ReportTemplateFileList_View(id,options){options=options||{};ReportTemplateFileList_View.superclass.constructor.call(this,id,options);var auto_ref=(options.models&&options.models.ReportTemplateFileList_Model)?false:true;var model=!auto_ref?options.models.ReportTemplateFileList_Model:new ReportTemplateFileList_Model();var contr=new ReportTemplateFile_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":ReportTemplateFile_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"addCustomCommands":function(commands){commands.push(new ReportTemplateFileApplyCmd(id+":cmd:apply"));}}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:report_templates_name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("report_templates_name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:file_name",{"value":"Файл шаблона","columns":[new GridColumn({"field":model.getField("file_name")})],"sortable":true}),new GridCellHead(id+":grid:head:employees_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})],"sortable":true})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":auto_ref,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ReportTemplateFileList_View,ViewAjx); 
function ReportTemplate_View(id,options){options=options||{};options.model=options.models.ReportTemplateDialog_Model;options.controller=options.controller||new ReportTemplate_Controller();var self=this;options.addElement=function(){this.addElement(new HiddenKey(id+":id"));this.addElement(new EditString(id+":name",{"labelCaption":"Наименование:","maxLength":"100"}));this.addElement(new EditString(id+":db_entity",{"labelCaption":"Объект базы данных:","maxLength":"100"}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий",}));var model=new ReportTemplateField_Model();this.addElement(new ReportTemplateFieldGrid(id+":fields"));var model_in_param=new ReportTemplateInParam_Model();this.addElement(new GridAjx(id+":in_params",{"model":model_in_param,"keyIds":["id"],"controller":new ReportTemplateInParam_Controller({"clientModel":model_in_param}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":in_params:cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":in_params:head",{"elements":[new GridRow(id+":in_params:head:row0",{"elements":[new GridCellHead(id+":in_params:head:row0:id",{"value":"Поле","columns":[new GridColumn({"field":model_in_param.getField("id"),"ctrlClass":EditString,"maxLength":"50","ctrlOptions":{"required":true}})]}),new GridCellHead(id+":in_params:head:row0:cond",{"value":"Поле условия запроса","columns":[new GridColumnBool({"field":model_in_param.getField("cond"),"ctrlClass":EditCheckBox})]}),new GridCellHead(id+":in_params:head:row0:editCtrlClass",{"value":"Элемент управления js","columns":[new GridColumn({"field":model_in_param.getField("editCtrlClass"),"ctrlClass":EditString,"maxLength":"100","ctrlOptions":{"required":true}})]}),new GridCellHead(id+":in_params:head:row0:editCtrlOptions",{"value":"Опции элемента управления","columns":[new GridColumn({"field":model_in_param.getField("editCtrlOptions"),"ctrlClass":EditString,"maxLength":"500"})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true,"focus":true}));}
ReportTemplate_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("db_entity")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("fields")}),new DataBinding({"control":this.getElement("in_params")})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("db_entity")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("fields"),"fieldId":"fields"}),new CommandBinding({"control":this.getElement("in_params"),"fieldId":"in_params"})];this.setWriteBindings(write_b);}
extend(ReportTemplate_View,ViewObjectAjx); 
function ReportTemplateFile_View(id,options){options=options||{};options.model=options.models.ReportTemplateFileDialog_Model;options.controller=options.controller||new ReportTemplateFile_Controller();var self=this;options.addElement=function(){this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий",}));this.addElement(new ReportTemplateEditRef(id+":report_templates_ref",{"labelCaption":"Описание шаблона:","onSelect":function(fields){self.loadFields(fields.id.getValue());}}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"labelCaption":"Автор:","enabled":(window.getApp().getServVar("role_id")=="admin"),"value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref"))}));this.addElement(new EditFile(id+":file_inf",{"labelCaption":"Файл шаблона:","onDownload":function(){self.downloadTemplate();},"onDeleteFile":function(fileId,callBack){self.deleteTemplate(fileId,callBack);}}));this.addElement(new ReportTemplateFieldGrid(id+":fields",{"readOnly":true}));this.addElement(new AccessPermissionGrid(id+":permissions"));this.addElement(new ViewLocalGrid(id+":views"));this.addElement(new EditCheckBox(id+":for_all_views",{"labelCaption":"Использовать шаблон для всех форм"}));}
ReportTemplateFile_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("report_templates_ref"),"fieldId":"report_template_id"}),new DataBinding({"control":this.getElement("template_file"),"fieldId":"file_inf"}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("fields")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("permissions")}),new DataBinding({"control":this.getElement("file_inf")}),new DataBinding({"control":this.getElement("for_all_views")}),new DataBinding({"control":this.getElement("views")})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("report_templates_ref"),"fieldId":"report_template_id"}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("permissions"),"fieldId":"permissions"}),new CommandBinding({"control":this.getElement("file_inf"),"fieldId":"template_file"}),new CommandBinding({"control":this.getElement("views"),"fieldId":"views"}),new CommandBinding({"control":this.getElement("for_all_views")})];this.setWriteBindings(write_b);}
extend(ReportTemplateFile_View,ViewObjectAjx);ReportTemplateFile_View.prototype.downloadTemplate=function(){var ctrl=this.getElement("id");if(!ctrl.isNull()){var pm=this.getController().getPublicMethod("download_file");pm.setFieldValue("id",ctrl.getValue());pm.download("ViewXML");}}
ReportTemplateFile_View.prototype.deleteTemplate=function(fileId,callBack){if(this.m_readOnly||!this.getElement("id").getValue())return;var self=this;WindowQuestion.show({"text":"Удалить файл шаблона?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var pm=self.getController().getPublicMethod("delete_file");pm.setFieldValue("id",self.getElement("id").getValue());pm.run({"ok":callBack});}}});}
ReportTemplateFile_View.prototype.loadFields=function(id){var pm=(new ReportTemplate_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",id);var self=this;pm.run({"ok":function(resp){var m=resp.getModel("ReportTemplateDialog_Model");if(m.getNextRow()){var el=self.getElement("fields");el.getModel().setData(m.getFieldValue("fields"));el.onRefresh();}}})}
ReportTemplateFile_View.prototype.onGetData=function(resp,cmd){ReportTemplateFile_View.superclass.onGetData.call(this,resp,cmd);this.m_readOnly=(this.getModel().getFieldValue("id")&&window.getApp().getServVar("role_id")!="admin"&&CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey()!=this.getModel().getFieldValue("employees_ref").getKey());if(this.m_readOnly){this.setEnabled(false);}} 
function ReportTemplateApply_View(id,options){options=options||{};var self=this;this.m_paramControls={};options.addElement=function(){for(var i=0;i<options.inParams.length;i++){var edit_class=eval(options.inParams[i].fields.editCtrlClass);var edit_opts=(options.inParams[i].fields.editCtrlOptions)?CommonHelper.unserialize(options.inParams[i].fields.editCtrlOptions):{};var ctrl=new edit_class(id+":param"+i,edit_opts);this.addElement(ctrl);this.m_paramControls[options.inParams[i].fields.id]={"ctrl":ctrl,"form_set":options.inParams[i].fields.form_set,"cond":options.inParams[i].fields.cond};}}
ReportTemplateApply_View.superclass.constructor.call(this,id,options);}
extend(ReportTemplateApply_View,View);ReportTemplateApply_View.prototype.getParams=function(){var res=[];for(var id in this.m_paramControls){res.push({"id":id,"val":this.m_paramControls[id].ctrl.getValue(),"cond":(this.m_paramControls[id].cond===true)});}
return res;} 
function DocFlowExaminationList_View(id,options){options=options||{};DocFlowExaminationList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowExaminationList_Model;var contr=new DocFlowExamination_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type",{"contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_importance_type_id")})},"closed":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-closed",{"contClassName":"form-group-filter","labelCaption":"Состояние","addNotSelected":true,"options":[{"value":"true","descr":"Рассмотренные"},{"value":"false","descr":"На рассмотрении"}]}),"field":new FieldBool("closed")})},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type",{"contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_importance_type_id")})},"close_employees_ref":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-close_employees_ref",{"contClassName":"form-group-filter"}),"field":new FieldInt("close_employee_id")})}};var columns=[new GridCellHead(id+":grid:head:id",{"value":"Номер","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject",{"value":"Тема","columns":[new GridColumn({"field":model.getField("subject")})]}),new GridCellHead(id+":grid:head:subject_docs_ref",{"value":"Документ","columns":[new GridColumnRef({"field":model.getField("subject_docs_ref")})]}),new GridCellHead(id+":grid:head:recipients_ref",{"value":"Кому","columns":[new GridColumnRef({"field":model.getField("recipients_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:end_date_time",{"value":"Срок","columns":[new GridColumnDateTime({"field":model.getField("end_date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("end_date_time"),"searchType":"on_beg"}})],"sortable":true}),new GridCellHead(id+":grid:head:close_date_time",{"value":"Результат","colAttrs":{"application_resolution_state":function(fields){return fields.application_resolution_state.getValue();}},"columns":[new GridColumn({"field":model.getField("close_date_time"),"formatFunction":function(fields){var res="";if(fields.application_resolution_state.getValue()){res=window.getApp().getEnum("application_states",fields.application_resolution_state.getValue())+" ("+DateHelper.format(fields.close_date_time.getValue(),"d/m/Y H:i")+")";}
else if(fields.close_date_time.getValue()){res=DateHelper.format(fields.close_date_time.getValue(),"d/m/Y H:i");}
return res;}})],"sortable":true}),new GridCellHead(id+":grid:head:close_employees_ref",{"value":"Кто рассмотрел","columns":[new GridColumnRef({"field":model.getField("close_employees_ref")})]}),new GridCellHead(id+":grid:head:employees_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})]}),new GridCellHead(id+":grid:head:doc_flow_importance_types_ref",{"value":"Важность","columns":[new GridColumnRef({"field":model.getField("doc_flow_importance_types_ref")})],"sortable":true})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowExamination_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocFlowExaminationList_View,ViewAjxList); 
function DocFlowExamination_View(id,options){options=options||{};options.controller=new DocFlowExamination_Controller();options.model=options.models.DocFlowExaminationDialog_Model;options.templateOptions={"colorClass":window.getApp().getColorClass(),"bsCol":window.getBsCol()};var self=this;this.m_dataType="doc_flow_examinations";if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){if(!options.model.getField("doc_flow_out_ref").isNull()){options.templateOptions.docFlowOut=options.model.getFieldValue("doc_flow_out_ref").getDescr();options.templateOptions.docFlowOutExists=true;}}
options.cmdSave=false;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var is_admin=(window.getApp().getServVar("role_id")=="admin");this.addElement(new EditString(id+":id",{"attrs":{"style":"width:80px;"},"inline":true,"cmdClear":false,"enabled":false}));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"enabled":is_admin}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:"}));this.addElement(new DocFlowImportanceTypeSelect(id+":doc_flow_importance_types_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"required":true,"labelCaption":"Важность:"}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Автор:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"enabled":is_admin}));this.addElement(new EmployeeEditRef(id+":close_employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Кто рассмотрел:","value":CommonHelper.unserialize(window.getApp().getServVar("close_employees_ref")),"enabled":is_admin}));this.addElement(new EditText(id+":description",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Описание:","required":true}));this.addElement(new EditText(id+":resolution",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Решение:"}));this.addElement(new EditDateTime(id+":end_date_time",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Срок исполнения:","required":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i"}));this.addElement(new EditDateTime(id+":close_date_time",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Дата исполнения:","editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i"}));this.addElement(new DocFlowRecipientRef(id+":recipients_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Исполнитель:","required":true}));var app=window.getApp();this.addElement(new EditSelect(id+":application_resolution_state",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Новый статус заявления:","addNotSelected":false,"options":[{"value":"waiting_for_contract","descr":app.getPredefinedItem("doc_flow_types","app_resp").getDescr(),"checked":true},{"value":"returned","descr":app.getPredefinedItem("doc_flow_types","app_resp_return").getDescr()}]}));this.addElement(new EditCompound(id+":subject_docs_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Документ:","possibleDataTypes":{"doc_flow_in":window.getApp().getDataType("doc_flow_in")}}));this.addElement(new ButtonCmd(id+":cmdResolve",{"caption":"Рассмотрено","onClick":function(){if(self.getModified()){self.onSave(function(){self.resolve();})}
else{self.resolve();}}}));this.addElement(new ButtonCmd(id+":cmdDocFlowOut",{"caption":"Подготовить исх.документ","onClick":function(){if(self.getModified()){self.onSave(function(){self.createDocFlowOut();})}
else{self.createDocFlowOut();}}}));this.addElement(new ButtonCmd(id+":cmdCorrect",{"caption":"Разрешить редактирование","title":"Сделать заявление доступным для редактирования заказчику","onClick":function(){self.returnAppToCorrection();}}));this.addElement(new ButtonCmd(id+":cmdUnresolve",{"visible":false,"enabled":false,"caption":"Отменить рассмотрение","onClick":function(){if(self.getModified()){self.onSave(function(){self.unresolve();})}
else{self.unresolve();}}}));}
this.addProcessChain(options);DocFlowExamination_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("subject_docs_ref")}),new DataBinding({"control":this.getElement("recipients_ref")}),new DataBinding({"control":this.getElement("doc_flow_importance_types_ref")}),new DataBinding({"control":this.getElement("end_date_time")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("description")}),new DataBinding({"control":this.getElement("resolution")}),new DataBinding({"control":this.getElement("close_date_time")}),new DataBinding({"control":this.getElement("application_resolution_state")}),new DataBinding({"control":this.getElement("close_employees_ref")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("subject_docs_ref"),"fieldId":"subject_doc"}),new CommandBinding({"control":this.getElement("recipients_ref"),"fieldId":"recipient"}),new CommandBinding({"control":this.getElement("doc_flow_importance_types_ref"),"fieldId":"doc_flow_importance_type_id"}),new CommandBinding({"control":this.getElement("end_date_time")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("description")}),new CommandBinding({"control":this.getElement("resolution")}),new CommandBinding({"control":this.getElement("close_date_time")}),new CommandBinding({"control":this.getElement("close_employees_ref")})]);}
extend(DocFlowExamination_View,DocFlowBaseDialog_View);DocFlowExamination_View.prototype.onGetData=function(resp,cmd){DocFlowExamination_View.superclass.onGetData.call(this,resp,cmd);var model=this.getModel();var is_new=(this.getCmd()=="insert");if(is_new){DOMHelper.addClass(document.getElementById(this.getId()+":result-toggle"),"hidden");}
if(model.getFieldValue("closed")||model.getFieldValue("state")=="examining"){this.setEnabled(false);this.getControlOK().setEnabled(false);}
var is_admin=(window.getApp().getServVar("role_id")=="admin");this.getElement("application_resolution_state").setVisible(model.getFieldValue("application_based"));if(!model.getFieldValue("closed")){this.getElement("cmdResolve").setEnabled(true);this.getElement("cmdDocFlowOut").setEnabled(true);this.getElement("cmdUnresolve").setEnabled(true);this.getElement("cmdCorrect").setEnabled(true);this.getElement("resolution").setEnabled(true);this.getElement("application_resolution_state").setEnabled(true);this.getElement("end_date_time").setEnabled(is_admin);this.getElement("close_employees_ref").setEnabled(is_admin);}
var res="";if(model.getField("closed").getValue()){res="Рассмотрено ("+
DateHelper.format(model.getField("close_date_time").getValue(),"d/m/Y")+")";if(model.getField("application_based").getValue()){res+=" "+window.getApp().getEnum("application_states",model.getField("application_resolution_state").getValue());}}
else if(model.getField("state_end_dt").getValue()){res="На рассмотрении до "+DateHelper.format(model.getField("state_end_dt").getValue(),"d/m/Y");}
if(res!=""){var n=document.getElementById(this.getId()+":state_descr");if(n){$(n).text(res);DOMHelper.delClass(n,"hidden");}}
if(!model.getField("doc_flow_out_ref").isNull()){this.getElement("cmdDocFlowOut").setEnabled(false);var self=this;EventHelper.add(document.getElementById(this.getId()+":docFlowOut"),"click",function(){var m=self.getModel();var ref=m.getFieldValue("doc_flow_out_ref");var cl=window.getApp().getDataType(ref.getDataType()).dialogClass;(new cl({"id":CommonHelper.uniqid(),"keys":ref.getKeys(),"params":{"cmd":"edit","editViewOptions":{}}})).open();});}}
DocFlowExamination_View.prototype.createDocFlowOut=function(){var model=new DocFlowOutDialog_Model();model.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));var subject="";if(this.getModel().getFieldValue("application_based")){var app_st=this.getElement("application_resolution_state").getValue();var doc_type;if(app_st=="waiting_for_contract"){doc_type="app_resp";}
else if(app_st=="returned"){doc_type="app_resp_return";}
else if(app_st=="filling"){doc_type="app_resp_correct";}
type_ref=window.getApp().getPredefinedItem("doc_flow_types",doc_type);subject=type_ref.getDescr();model.setFieldValue("doc_flow_types_ref",type_ref);model.setFieldValue("to_applications_ref",this.getModel().getFieldValue("applications_ref"));}
model.setFieldValue("subject",subject);model.setFieldValue("signed_by_employees_ref",null);model.setFieldValue("doc_flow_in_ref",this.getElement("subject_docs_ref").getValue());model.recInsert();var self=this;this.m_docForm=new DocFlowOutDialog_Form({"id":CommonHelper.uniqid(),"onClose":function(res){self.m_docForm.close({"updated":true});self.close({"updated":true});},"keys":{},"params":{"cmd":"insert","editViewOptions":{"models":{"DocFlowOutDialog_Model":model}}}});this.m_docForm.open();}
DocFlowExamination_View.prototype.resolve=function(){var pm=this.getController().getPublicMethod("resolve");pm.setFieldValue("id",this.getElement("id").getValue());pm.setFieldValue("resolution",this.getElement("resolution").getValue());pm.setFieldValue("close_date_time",this.getElement("close_date_time").getValue());pm.setFieldValue("close_employee_id",this.getElement("close_employees_ref").getValue().getKey());pm.setFieldValue("application_resolution_state",this.getElement("application_resolution_state").getValue());var self=this;pm.run({"ok":function(resp){self.close({"updated":true});}});}
DocFlowExamination_View.prototype.unresolve=function(){var pm=this.getController().getPublicMethod("unresolve");pm.setFieldValue("id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(resp){self.onGetData(resp,"edit");}});}
DocFlowExamination_View.prototype.addProcessChain=function(options){DocFlowExamination_View.superclass.addProcessChain.call(this,options,"doc_flow_in_processes_chain");}
DocFlowExamination_View.prototype.addProcessChainEvents=function(){DocFlowExamination_View.superclass.addProcessChainEvents.call(this,"doc_flow_in_processes_chain");}
DocFlowExamination_View.prototype.returnAppToCorrection=function(){var self=this;WindowQuestion.show({"text":"Сделать заявление доступным для редактирования?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var pm=self.getController().getPublicMethod("return_app_to_correction");pm.setFieldValue("id",self.getElement("id").getValue());pm.run({"ok":function(){self.close({"updated":true});}});}}});} 
function DocFlowApprovementList_View(id,options){options=options||{};DocFlowApprovementList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowApprovementList_Model;var contr=new DocFlowApprovement_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type",{"contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_importance_type_id")})},"closed":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-closed",{"contClassName":"form-group-filter","labelCaption":"Состояние","addNotSelected":true,"options":[{"value":"true","descr":"Согласованные"},{"value":"false","descr":"На согласовании"}]}),"field":new FieldBool("closed")})},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type",{"contClassName":"form-group-filter"}),"field":new FieldInt("doc_flow_importance_type_id")})}};var columns=[new GridCellHead(id+":grid:head:id",{"value":"Номер","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true}),new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject",{"value":"Тема","columns":[new GridColumn({"field":model.getField("subject")})]}),new GridCellHead(id+":grid:head:subject_docs_ref",{"value":"Документ","columns":[new GridColumnRef({"field":model.getField("subject_docs_ref")})]}),new GridCellHead(id+":grid:head:recipient_list",{"value":"Кому","columns":[new GridColumn({"field":model.getField("recipient_list")})]}),new GridCellHead(id+":grid:head:end_date_time",{"value":"Срок","columns":[new GridColumnDateTime({"field":model.getField("end_date_time"),"ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("end_date_time"),"searchType":"on_beg"}})],"sortable":true}),new GridCellHead(id+":grid:head:close_date_time",{"value":"Результат","colAttrs":{"close_result":function(fields){return fields.close_result.getValue();}},"columns":[new GridColumn({"field":model.getField("close_date_time"),"formatFunction":function(fields){var res="";if(fields.closed.getValue()){res=window.getApp().getEnum("doc_flow_approvement_results",fields.close_result.getValue())+" ("+DateHelper.format(fields.close_date_time.getValue(),"d/m/Y")+")";}
else{res="Шаг "+fields.current_step.getValue()+" из "+fields.step_count.getValue();}
return res;}})],"sortable":true}),new GridCellHead(id+":grid:head:employees_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})]}),new GridCellHead(id+":grid:head:doc_flow_importance_types_ref",{"value":"Важность","columns":[new GridColumnRef({"field":model.getField("doc_flow_importance_types_ref")})],"sortable":true})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowApprovement_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocFlowApprovementList_View,ViewAjxList); 
function DocFlowApprovement_View(id,options){options=options||{};options.controller=new DocFlowApprovement_Controller();options.model=options.models.DocFlowApprovementDialog_Model;var self=this;this.m_dataType="doc_flow_approvements";options.cmdSave=false;options.templateOptions=options.templateOptions||{};this.m_formVariant="setTask";if(options.model&&options.model.getNextRow()){var list=options.model.getFieldValue("recipient_list_ref");var cur_employee_id=CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey();var list_closed=true;var employee_in_list=false;var employee_closed=false;for(var i=0;i<list.rows.length;i++){if(list_closed&&!list.rows[i].fields.closed){list_closed=false;}
if(!employee_in_list&&cur_employee_id==list.rows[i].fields.employee.getKey()){employee_in_list=true;employee_closed=list.rows[i].fields.closed;}}
if(employee_in_list&&!employee_closed&&!options.model.getFieldValue("closed")){this.m_formVariant="approve";options.templateOptions.title="Согласовать: "+options.model.getFieldValue("subject");}
else if(!options.model.getFieldValue("closed")&&list_closed&&cur_employee_id==options.model.getFieldValue("employees_ref").getKey()){options.templateOptions.title="Ознакомиться с результатов согласования: "+options.model.getFieldValue("subject");this.m_formVariant="notification";}}
options.templateOptions.approve=(this.m_formVariant=="approve");options.templateOptions.setTask=(this.m_formVariant=="setTask");options.templateOptions.notification=(this.m_formVariant=="notification");options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var is_admin=(window.getApp().getServVar("role_id")=="admin");this.addElement(new DocFlowImportanceTypeSelect(id+":doc_flow_importance_types_ref",{"editContClassName":"input-group "+bs+"9","labelClassName":"control-label "+bs+"3","required":true,"labelCaption":"Важность:","value":window.getApp().getPredefinedItem("doc_flow_importance_types","common"),"events":{"change":function(){self.calcEndDate();}}}));this.addElement(new EditText(id+":description",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Описание:","rows":2}));this.addElement(new EditDateTime(id+":end_date_time",{"editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","labelCaption":"Срок исполнения:","required":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i"}));this.addElement(new EditCompound(id+":subject_docs_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Документ:","possibleDataTypes":{"doc_flow_out":window.getApp().getDataType("doc_flow_out"),"doc_flow_inside":window.getApp().getDataType("doc_flow_inside")},"placeholder":"Введите номер документа"}));if(this.m_formVariant=="setTask"){this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Автор:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"enabled":is_admin}));this.addElement(new EditString(id+":id",{"attrs":{"style":"width:80px;"},"inline":true,"cmdClear":false,"enabled":false}));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"enabled":is_admin}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:"}));this.addElement(new DocFlowApprovementTypeEdit(id+":doc_flow_approvement_type",{"view":this}));this.addElement(new EditDateTime(id+":close_date_time",{"editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","labelCaption":"Дата исполнения:","editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","enabled":is_admin}));}
else if(this.m_formVariant=="approve"){this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Автор:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"enabled":is_admin}));options.cmdOk=false;this.addElement(new ButtonCmd(id+":cmdApprove",{"caption":"Согласовано","onClick":function(){self.approve();}}));this.addElement(new ButtonCmd(id+":cmdApproveWithRemarks",{"caption":"Согласовано с змечниями","onClick":function(){self.approveWithRemarks();}}));this.addElement(new ButtonCmd(id+":cmdDisapprove",{"caption":"Не согласовано","onClick":function(){self.disapprove();}}));this.addElement(new EditText(id+":employee_comment",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Комментрий согласавния:","rows":5}));}
else{options.cmdOk=false;this.addElement(new ButtonCmd(id+":cmdSetClosed",{"caption":"Ознакомился","onClick":function(){self.setClosed();}}));}
this.addElement(new DocFlowApprovementRecipientGrid(id+":recipient_list_ref",{"view":this}));}
this.addProcessChain(options);DocFlowApprovement_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("subject_docs_ref")}),new DataBinding({"control":this.getElement("doc_flow_importance_types_ref")}),new DataBinding({"control":this.getElement("doc_flow_approvement_type")}),new DataBinding({"control":this.getElement("end_date_time")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("description")})];if(this.m_formVariant=="setTask"){read_b.push(new DataBinding({"control":this.getElement("close_date_time")}));}
read_b.push(new DataBinding({"control":this.getElement("recipient_list_ref")}));this.setDataBindings(read_b);if(this.m_formVariant=="setTask"){var write_b=[new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("subject_docs_ref"),"fieldId":"subject_doc"}),new CommandBinding({"control":this.getElement("doc_flow_importance_types_ref"),"fieldId":"doc_flow_importance_type_id"}),new CommandBinding({"control":this.getElement("doc_flow_approvement_type"),"fieldId":"doc_flow_approvement_type"}),new CommandBinding({"control":this.getElement("end_date_time")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("description")})];write_b.push(new CommandBinding({"control":this.getElement("recipient_list_ref"),"fieldId":"recipient_list"}));write_b.push(new CommandBinding({"control":this.getElement("close_date_time")}));this.setWriteBindings(write_b);}}
extend(DocFlowApprovement_View,DocFlowBaseDialog_View);DocFlowApprovement_View.prototype.onGetData=function(resp,cmd){DocFlowApprovement_View.superclass.onGetData.call(this,resp,cmd);var model=this.getModel();var grid=this.getElement("recipient_list_ref");if(is_new){grid.setColumnVisible(["employee_comment","author_comment","approvement_dt","approvement_result"],false);this.calcEndDate();}
else if(model.getFieldValue("doc_flow_approvement_type")!="mixed"){grid.setColumnVisible("approvement_order",false);}
if(this.m_formVariant=="setTask"){var is_new=(this.getCmd()=="insert");if(!is_new){this.setEnabled(false);this.getControlOK().setEnabled(false);var res="";if(model.getField("closed").getValue()){res=window.getApp().getEnum("doc_flow_approvement_results",model.getField("close_result").getValue())+" ("+DateHelper.format(model.getField("close_date_time").getValue(),"d/m/Y")+")";}
else{res="На согласовании, шаг "+model.getField("current_step").getValue()+" из "+model.getField("step_count").getValue();}
var n=document.getElementById(this.getId()+":state_descr");if(n){$(n).text(res);DOMHelper.delClass(n,"hidden");}}}
else if(this.m_formVariant=="approve"){this.setEnabled(false);this.getElement("employee_comment").setEnabled(true);this.getElement("cmdApprove").setEnabled(true);this.getElement("cmdApproveWithRemarks").setEnabled(true);this.getElement("cmdDisapprove").setEnabled(true);}
else{this.setEnabled(false);this.getElement("cmdSetClosed").setEnabled(true);}}
DocFlowApprovement_View.prototype.calcEndDate=function(){var v=this.getElement("doc_flow_importance_types_ref").getModelRow().approve_interval.getValue();if(v){var ctrl_dt=this.getElement("date_time").getValue();var from_dt=ctrl_dt?ctrl_dt:new Date();this.getElement("end_date_time").setValue(new Date(from_dt.getTime()+DateHelper.timeToMS(v)));}}
DocFlowApprovement_View.prototype.runApprovePm=function(pmId){var pm=this.getController().getPublicMethod(pmId);pm.setFieldValue("id",this.getElement("id").getValue());pm.setFieldValue("employee_comment",this.getElement("employee_comment").getValue());var self=this;pm.run({"ok":function(){self.close({"updated":true});}});}
DocFlowApprovement_View.prototype.approve=function(){this.runApprovePm("set_approved")}
DocFlowApprovement_View.prototype.approveWithRemarks=function(){this.runApprovePm("set_approved_with_remarks")}
DocFlowApprovement_View.prototype.disapprove=function(){this.runApprovePm("set_disapproved")}
DocFlowApprovement_View.prototype.setClosed=function(){var pm=this.getController().getPublicMethod("set_closed");pm.setFieldValue("id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(){self.close({"updated":true});}});}
DocFlowApprovement_View.prototype.validate=function(cmd,validate_res){DocFlowApprovement_View.superclass.validate.call(this,cmd,validate_res);if(!this.getElement("recipient_list_ref").getModel().getRowCount()){validate_res.incorrect_vals=true;this.getElement("recipient_list_ref").setNotValid("Не заполнен список сотрудников для согласования!");}
return!validate_res.incorrect_vals;}
DocFlowApprovement_View.prototype.addProcessChain=function(options){DocFlowApprovement_View.superclass.addProcessChain.call(this,options,"doc_flow_out_processes_chain");}
DocFlowApprovement_View.prototype.addProcessChainEvents=function(){DocFlowApprovement_View.superclass.addProcessChainEvents.call(this,"doc_flow_out_processes_chain");} 
function DocFlowRegistrationList_View(id,options){options=options||{};DocFlowRegistrationList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowRegistrationList_Model;var contr=new DocFlowRegistration_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var columns=[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:subject_docs_ref",{"value":"Документ","columns":[new GridColumnRef({"field":model.getField("subject_docs_ref")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowRegistration_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocFlowRegistrationList_View,ViewAjxList); 
function DocFlowRegistration_View(id,options){options=options||{};options.controller=new DocFlowRegistration_Controller();options.model=options.models.DocFlowRegistrationDialog_Model;options.templateOptions={"colorClass":window.getApp().getColorClass(),"bsCol":window.getBsCol()};var self=this;options.cmdSave=false;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";var is_admin=(window.getApp().getServVar("role_id")=="admin");this.addElement(new EditString(id+":id",{"inline":true,"cmdClear":false,"cmdSelect":false,"enabled":false}));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"dateFormat":"d/m/Y H:i","cmdClear":false,"cmdSelect":false,"enabled":false}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Автор:","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"required":true,"enabled":is_admin}));this.addElement(new EditText(id+":comment_text",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Комментарий:"}));this.addElement(new EditCompound(id+":subject_docs_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Документ:","possibleDataTypes":{"doc_flow_out":{"dataTypeDescrLoc":"Исходящий документ","ctrlClass":DocFlowOutEditRef,"ctrlOptions":{"keyIds":["id"]}}},"enabled":false}));}
DocFlowRegistration_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("subject_docs_ref")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("comment_text")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("subject_docs_ref"),"fieldId":"subject_doc"}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("comment_text")})]);}
extend(DocFlowRegistration_View,ViewObjectAjx);DocFlowRegistration_View.prototype.m_stateControl; 
function BuildTypeList_View(id,options){options=options||{};BuildTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.BuildType_Model;var contr=new BuildType_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Тип объекта","columns":[new GridColumn({"field":model.getField("name")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(BuildTypeList_View,ViewAjxList); 
function DocFlowOutClientList_View(id,options){options=options||{};DocFlowOutClientList_View.superclass.constructor.call(this,id,options);var model;if(options.models&&options.models.DocFlowOutClientList_Model){model=options.models.DocFlowOutClientList_Model;}
else{model=new DocFlowOutClientList_Model();}
var contr=new DocFlowOutClient_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var grid_filters=[];if(options.application){grid_filters.push({"field":"application_id","sign":"e","val":options.application.getKey()});}
else{filters.application={"binding":new CommandBinding({"control":new ApplicationEditRef(id+":flt-application"),"field":new FieldInt("application_id")}),"sign":"e"};}
var columns=[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:reg_number_in",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("reg_number_in")})]}),new GridCellHead(id+":grid:head:reg_number",{"value":"Наш рег.номер","columns":[new GridColumn({"field":model.getField("reg_number")})],"sortable":true}),new GridCellHead(id+":grid:head:subject",{"value":"Тема","columns":[new GridColumn({"field":model.getField("subject")})],"sortable":true}),new GridCellHead(id+":grid:head:sent",{"value":"Отправлен","columns":[new GridColumnBool({"field":model.getField("sent")})]})];if(!options.application){columns.push(new GridCellHead(id+":grid:head:applications_ref",{"value":"Заявление","columns":[new GridColumnRef({"field":model.getField("applications_ref"),"form":ApplicationDialog_Form})],"sortable":true}));}
this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowOutClientDialog_Form,"popUpMenu":popup_menu,"filters":grid_filters,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":!options.readOnly,"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(DocFlowOutClientList_View,ViewAjxList); 
function DocFlowOutClientDialog_View(id,options){options=options||{};options.controller=new DocFlowOutClient_Controller();options.model=options.models.DocFlowOutClientDialog_Model;options.uploaderClass=FileUploaderDocFlowOutClient_View;options.cmdOkAsync=false;var self=this;this.m_subjects={"contr_resp":"Ответы на замечания","contr_return":"Возврат контракта"}
var attachments;var sent=false;if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){options.readOnly=options.model.getFieldValue("sent");attachments=options.model.getFieldValue("attachment_files");sent=options.model.getFieldValue("sent");}
options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"dateFormat":"d/m/Y H:i","cmdClear":false,"cmdSelect":false,"enabled":false}));this.addElement(new EditString(id+":reg_number_in",{"attrs":{"style":"width:150px;"},"inline":true,"cmdClear":false,"maxLength":"15","enabled":false}));this.addElement(new EditString(id+":reg_number",{"editContClassName":editContClassName,"labelClassName":labelClassName,"cmdClear":false,"labelCaption":"Наш рег.номер:"}));var app_ctrl=new ApplicationEditRef(id+":applications_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Заявление:","onSelect":function(fields){self.onAppSelect(fields);}});app_ctrl.orig_reset=app_ctrl.reset;app_ctrl.reset=function(){this.orig_reset();self.onAppClear();}
this.addElement(app_ctrl);this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:","value":this.m_subjects.contr_resp}));this.addElement(new EditText(id+":content",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","placeholder":"Содержание письма"}));var t_opts=[{"value":"contr_resp","descr":this.m_subjects.contr_resp,"checked":true},{"value":"contr_return","descr":this.m_subjects.contr_return}];if(options.readOnly){t_opts.push({"value":"app","descr":window.getApp().getEnum("doc_flow_out_client_types","app")});}
this.addElement(new EditSelect(id+":doc_flow_out_client_type",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Вид письма:","addNotSelected":false,"options":t_opts,"events":{"change":function(){self.getElement("subject").setValue(self.m_subjects[this.getValue()]);self.setType(this.getValue());}}}));this.addElement(new EditFile(id+":contract_file",{"labelClassName":"control-label "+window.getBsCol(2),"labelCaption":"Файл контракта:","template":window.getApp().getTemplate("EditFileApp"),"mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"multipleFiles":true,"onDeleteFile":function(fileId,callBack){self.deleteContract(fileId,callBack);},"onDownload":function(fileId){self.downloadContract(fileId);}}));this.addDocumentTabs(options.models.ApplicationDialog_Model,options.models.DocumentTemplateAllList_Model);this.addElement(new DocFolderClient_View(id+":attachments",{"items":attachments,"templateOptions":{"isNotSent":!sent},"mainView":this}));options.controlOk=new ButtonOK(id+":cmdOk",{"onClick":function(){if(self.getElement("doc_flow_out_client_type").getValue()=="contr_resp"){self.checkRequiredFiles();self.checkForUploadFileCount();}
WindowQuestion.show({"text":"Отправить исходящее письмо?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.setSent(true);self.getControlSave().setEnabled(false);self.onOK(function(){self.getControlSave().setEnabled(true);});}}});}});options.cmdSave=true;}
DocFlowOutClientDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("applications_ref"),"fieldId":"applications_ref"}),new DataBinding({"control":this.getElement("reg_number_in")}),new DataBinding({"control":this.getElement("reg_number")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("content")}),new DataBinding({"control":this.getElement("doc_flow_out_client_type"),"fieldId":"doc_flow_out_client_type"}),new DataBinding({"control":this.getElement("contract_file"),"fieldId":"contract_files"})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("applications_ref"),"fieldId":"application_id"}),new CommandBinding({"control":this.getElement("reg_number")}),new CommandBinding({"control":this.getElement("subject")}),new CommandBinding({"control":this.getElement("content")}),new CommandBinding({"control":this.getElement("doc_flow_out_client_type"),"fieldId":"doc_flow_out_client_type"}),new CommandBinding({"control":this.getElement("contract_file"),"fieldId":"contract_files"})]);}
extend(DocFlowOutClientDialog_View,DocumentDialog_View);DocFlowOutClientDialog_View.prototype.m_subjects;DocFlowOutClientDialog_View.prototype.onAppClear=function(){this.m_appModel=undefined;this.toggleDocTypeVis();DOMHelper.addClass(document.getElementById(this.getId()+":documentFiles"),"hidden");}
DocFlowOutClientDialog_View.prototype.onAppSelect=function(fields){if(fields.application_state.getValue()!="waiting_for_contract"&&fields.application_state.getValue()!="waiting_for_pay"&&fields.application_state.getValue()!="expertise"){this.getElement("applications_ref").reset();throw new Error("Неверный статус заявления!");}
var pm=this.getController().getPublicMethod("get_application_dialog");pm.setFieldValue("application_id",fields.id.getValue());pm.setFieldValue("id",this.getElement("id").getValue());var self=this;pm.run({"ok":function(resp){self.onGetAppModel(resp);}});}
DocFlowOutClientDialog_View.prototype.onGetAppModel=function(resp){this.addDocumentTabs(resp.getModel("ApplicationDialog_Model"),resp.getModel("DocumentTemplateAllList_Model"),true);this.toggleDocTypeVis();this.setType(this.getElement("doc_flow_out_client_type").getValue());}
DocFlowOutClientDialog_View.prototype.constrTypeIsNull=function(){return this.m_appModel?this.m_appModel.getFieldValue("construction_types_ref").isNull():true;}
DocFlowOutClientDialog_View.prototype.getConstrType=function(){return this.m_appModel?this.m_appModel.getFieldValue("construction_types_ref"):null;}
DocFlowOutClientDialog_View.prototype.toggleDocTypeVis=function(){this.toggleDocTypeVisOnModel(this.m_appModel);}
DocFlowOutClientDialog_View.prototype.onGetData=function(resp,cmd){DocFlowOutClientDialog_View.superclass.onGetData.call(this,resp,cmd);if(this.getModel().getFieldValue("sent")){this.setEnabled(false);this.getControlOK().setEnabled(false);this.getElement("reg_number").setEnabled(true);this.getControlSave().setEnabled(true);this.getControlCancel().setEnabled(true);$(".fileDeleteBtn").attr("disabled","disabled");$(".uploader-file-add").attr("disabled","disabled");$("a[download_href=true]").removeAttr("disabled");}
else{for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name]&&this.m_documentTabs[tab_name].control){this.m_documentTabs[tab_name].control.initDownload();}}
this.setType(this.getModel().getFieldValue("doc_flow_out_client_type"));this.getElement("attachments").initDownload();}
this.setType(this.getElement("doc_flow_out_client_type").getValue());}
DocFlowOutClientDialog_View.prototype.setSent=function(v){var frm_cmd=this.getCmd();var pm=this.m_controller.getPublicMethod((frm_cmd=="insert"||frm_cmd=="copy")?this.m_controller.METH_INSERT:this.m_controller.METH_UPDATE)
pm.setFieldValue("sent",v);}
DocFlowOutClientDialog_View.prototype.setType=function(tp){var app=this.getElement("applications_ref").getValue();var docs_vis=false,contr_vis=false;if(tp=="contr_resp"){docs_vis=app?true:false;}
else if(tp=="contr_return"){contr_vis=app?!this.getElement("applications_ref").isNull():false;}
var docs_n=document.getElementById(this.getId()+":documentFiles");if(!docs_vis){DOMHelper.addClass(docs_n,"hidden");}
else{DOMHelper.delClass(docs_n,"hidden");}
this.getElement("contract_file").setVisible(contr_vis);}
DocFlowOutClientDialog_View.prototype.deleteContract=function(fileId,callBack){var self=this;WindowQuestion.show({"text":"Удалить файл контракта?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var pm=self.getController().getPublicMethod("remove_contract_file");pm.setFieldValue("id",self.getElement("id").getValue());pm.setFieldValue("file_id",fileId);pm.run({"ok":callBack});}}});}
DocFlowOutClientDialog_View.prototype.downloadContract=function(fileId){var contr=this.getController();var pm=contr.getPublicMethod("download_contract_file");pm.setFieldValue("file_id",fileId);pm.setFieldValue("id",this.getElement("id").getValue());pm.download();var pm_sig=contr.getPublicMethod("download_contract_file_sig");pm_sig.setFieldValue("file_id",fileId);pm_sig.setFieldValue("id",this.getElement("id").getValue());pm_sig.download(null,1);}
DocFlowOutClientDialog_View.prototype.getTotalFileCount=function(){return this.getFileCount(true);}
DocFlowOutClientDialog_View.prototype.getForUploadFileCount=function(tabs){return this.getFileCount(false,tabs);}
DocFlowOutClientDialog_View.prototype.checkForUploadFileCount=function(){var tabs=[];if(this.getForUploadFileCount(tabs)){var mes="Есть незагруженные файлы документации "+((tabs.length==1)?(" в разделе "+tabs[0]):(" в разделах:"+tabs.join(", ")));throw new Error(mes);}}
DocFlowOutClientDialog_View.prototype.checkRequiredFiles=function(){for(var tab_name in this.m_documentTabs){if(this.m_documentTabs[tab_name]&&this.m_documentTabs[tab_name].control){this.m_documentTabs[tab_name].control.checkRequiredFiles();}}
this.getElement("attachments").checkRequiredFiles();}
DocFlowOutClientDialog_View.prototype.getFileCount=function(total,tabs){var tot=0;for(var id in this.m_documentTabs){if(this.m_documentTabs[id].control){var tab_tot=total?this.m_documentTabs[id].control.getTotalFileCount():this.m_documentTabs[id].control.getForUploadFileCount();if(tabs&&tab_tot){tabs.push(this.m_documentTabs[id].title);}
tot+=tab_tot;}}
var tab_tot=total?this.getElement("attachments").getTotalFileCount():this.getElement("attachments").getForUploadFileCount();if(tabs&&tab_tot){tabs.push("Прочие файлы");}
tot+=tab_tot;return tot;} 
function DocFlowInClientList_View(id,options){options=options||{};DocFlowInClientList_View.superclass.constructor.call(this,id,options);var model;if(options.models&&options.models.DocFlowInClientList_Model){model=options.models.DocFlowInClientList_Model;}
else{model=new DocFlowInClientList_Model();}
var contr=new DocFlowInClient_Controller();var grid_filters=[];if(options.application){grid_filters.push({"field":"application_id","sign":"e","val":options.application.getKey()});}
var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}};var columns=[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:reg_number",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("reg_number")})],"sortable":true}),new GridCellHead(id+":grid:head:reg_number_out",{"value":"Наш рег.номер","columns":[new GridColumn({"field":model.getField("reg_number_out")})]}),new GridCellHead(id+":grid:head:subject",{"value":"Тема","columns":[new GridColumn({"field":model.getField("subject")})],"sortable":true}),new GridCellHead(id+":grid:head:viewed_dt",{"value":"Ознакомлен","columns":[new GridColumnDateTime({"field":model.getField("viewed_dt"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("viewed_dt"),"searchType":"on_beg"}})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowInClientDialog_Form,"popUpMenu":popup_menu,"filters":grid_filters,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(DocFlowInClientList_View,ViewAjxList); 
function DocFlowInClientDialog_View(id,options){options=options||{};options.controller=new DocFlowInClient_Controller();options.model=options.models.DocFlowInClientDialog_Model;options.cmdOkAsync=false;options.cmdSave=true;options.cmdOk=true;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";this.addElement(new HiddenKey(this.getId()+":id"));this.addElement(new EditString(id+":reg_number",{"attrs":{"style":"width:150px;"},"inline":true,"cmdClear":false,"maxLength":"15","placeholder":"Номер","enabled":false}));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"dateFormat":"d/m/Y H:i","cmdClear":false,"cmdSelect":false,"enabled":false}));this.addElement(new EditString(id+":reg_number_out",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Наш рег.номер:","cmdClear":false}));this.addElement(new EditString(id+":subject",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тема:","cmdClear":false,"enabled":false}));this.addElement(new EditText(id+":content",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Содержание:","enabled":false}));var files;if(options.model&&(options.model.getRowIndex()==0||(options.model.getRowIndex()<0&&options.model.getNextRow()))){files=options.model.getFieldValue("files")||[];}
else{files=[];}
this.addElement(new FileUploaderDocFlowInClient_View(this.getId()+":attachments",{"mainView":this,"items":files,"templateOptions":{"isNotSent":false}}));};DocFlowInClientDialog_View.superclass.constructor.call(this,id,options);this.setDataBindings([new DataBinding({"control":this.getElement("id")}),new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("reg_number")}),new DataBinding({"control":this.getElement("reg_number_out")}),new DataBinding({"control":this.getElement("subject")}),new DataBinding({"control":this.getElement("content")}),new DataBinding({"control":this.getElement("comment_text")})]);this.setWriteBindings([new CommandBinding({"control":this.getElement("id")}),new CommandBinding({"control":this.getElement("reg_number_out")})]);}
extend(DocFlowInClientDialog_View,ViewObjectAjx);DocFlowInClientDialog_View.prototype.onGetData=function(resp,cmd){DocFlowInClientDialog_View.superclass.onGetData.call(this,resp,cmd);var id=this.getElement("id").getValue();if(id&&!this.getModel().getFieldValue("viewed")){var self=this;var pm=this.getController().getPublicMethod("set_viewed");pm.setFieldValue("doc_id",id);pm.run({"ok":function(resp){var m=new ModelXML("UnviewedCount_Model",{"data":resp.getModelData("UnviewedCount_Model")});if(m.getNextRow()){if(window.opener){var n=window.opener.document.getElementById("unviewed_in_docs_cnt");if(n){n.textContent=m.getFieldValue("cnt");self.m_editResult={"updated":true};}
else if(window.opener.opener){var n=window.opener.opener.document.getElementById("unviewed_in_docs_cnt");if(n){n.textContent=m.getFieldValue("cnt");self.m_editResult={"updated":true};}}}}}});}} 
function DocFlowTaskList_View(id,options){options=options||{};this.HEAD_TITLE=DocFlowTaskList_View.prototype.HEAD_TITLE;DocFlowTaskList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowTaskList_Model;var contr=new DocFlowTask_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var self=this;var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"doc_flow_importance_type":{"binding":new CommandBinding({"control":new DocFlowImportanceTypeSelect(id+":filter-ctrl-doc_flow_importance_type"),"field":new FieldInt("doc_flow_importance_type_id")})},"recipient":{"binding":new CommandBinding({"control":new DocFlowRecipientRef(id+":filter-ctrl-recipient",{"labelCaption":"Исполнитель:"}),"field":new FieldJSON("recipient")})},"employee":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-employee",{"labelCaption":"Автор:"}),"field":new FieldInt("employee_id")})},"close_employee":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-close_employee",{"labelCaption":"Кто завершил:"}),"field":new FieldInt("close_employee_id")})},"closed":{"binding":new CommandBinding({"control":new EditSelect(id+":filter-ctrl-closed",{"labelCaption":"Состояние","addNotSelected":true,"options":[{"value":"true","descr":"Выполненные"},{"value":"false","descr":"На выполнении"}]}),"field":new FieldBool("closed")})}};var columns=[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDate,"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:description",{"value":"Описание","columns":[new GridColumn({"field":model.getField("description")})]}),new GridCellHead(id+":grid:head:doc_flow_importance_types_ref",{"value":"Важность","columns":[new GridColumnRef({"field":model.getField("doc_flow_importance_types_ref")})]}),new GridCellHead(id+":grid:head:recipients_ref",{"value":"Исполнитель","columns":[new GridColumnRef({"field":model.getField("recipients_ref")})]}),new GridCellHead(id+":grid:head:employees_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})]}),new GridCellHead(id+":grid:head:register_docs_ref",{"value":"Документ","columns":[new GridColumnRef({"field":model.getField("register_docs_ref")})]}),new GridCellHead(id+":grid:head:close_docs_ref",{"value":"Дата завершения","columns":[new GridColumnRef({"field":model.getField("close_docs_ref")})],"sortable":true}),new GridCellHead(id+":grid:head:close_employees_ref",{"value":"Кто завершил","columns":[new GridColumnRef({"field":model.getField("close_employees_ref")})]})];this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":function(winParams){var doc=this.m_model.getFields().register_docs_ref.getValue();winParams.keys=doc.getKeys();return window.getApp().getDataType(doc.getDataType()).dialogClass;},"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":new GridCmd(id+":grid:cmd:open",{"caption":"Открыть задачу ","glyph":"glyphicon-pencil","title":"Открыть задачу","showCmdControl":true,"onCommand":function(){this.getGrid().edit("edit");}}),"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":columns})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(DocFlowTaskList_View,ViewAjx); 
function ViewContact(id,options){options=options||{};options.className=options.className||"form-group";var self=this;options.addElement=function(){var id=this.getId();var model=new ContactName_Model({"sequences":{"id":0}});this.addElement(new GridAjx(id+":contacts",{"model":model,"showHead":false,"keyIds":["id"],"controller":new ContactName_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":[new GridCellHead(id+":head:name",{"value":"Контакт","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditContact})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true}));}
ViewContact.superclass.constructor.call(this,id,options);}
extend(ViewContact,EditJSON); 
function ReminderList_View(id,options){ReminderList_View.superclass.constructor.call(this,id,options);var model=options.models.Reminder_Model;var contr=new User_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var popup_menu=new PopUpMenu();var pagClass=window.getApp().getPaginationClass();this.addElement(new GridAjx(id+":grid",{"model":model,"controller":contr,"editInline":false,"editWinClass":null,"commands":null,"popUpMenu":popup_menu,"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"На дату","columns":[new GridColumnDateTime({"field":model.getField("date_time")})],"sortable":true,"sort":"descr"}),new GridCellHead(id+":grid:head:content",{"value":"Сообщение","columns":[new GridColumn({"field":model.getField("content")})]}),new GridCellHead(id+":grid:head:docs_ref",{"value":"Ссылка","columns":[new GridColumnRef({"field":model.getField("docs_ref")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));}
extend(ReminderList_View,ViewAjx); 
function DocFlowTaskShortList_View(id,options){options=options||{};var rows=[];var model=options.models.DocFlowTaskShortList_Model;while(model.getNextRow()){rows.push({"fields":{"description":model.getFieldValue("description"),"passed_time":model.getFieldValue("passed_time"),"docs_ref":CommonHelper.serialize(model.getFieldValue("docs_ref"))}});}
options.template=window.getApp().getTemplate("DocFlowTaskShortList");options.templateOptions={"rows":rows};var self=this;options.events={"click":function(e){e=EventHelper.fixMouseEvent(e);var ref=e.target.getAttribute("docs_ref");if(ref){ref=CommonHelper.unserialize(ref);var cl=window.getApp().getDataType(ref.getDataType()).dialogClass;(new cl({"id":CommonHelper.uniqid(),"keys":ref.getKeys(),"params":{"cmd":"edit","editViewOptions":{}}})).open();DOMHelper.delClass(self.getNode().parentNode,"open");self.getNode().previousSibling.setAttribute("aria-expanded","false");}}}
DocFlowTaskShortList_View.superclass.constructor.call(this,id,"DIV",options);}
extend(DocFlowTaskShortList_View,Control); 
function ContractList_View(id,options){options=options||{};ContractList_View.superclass.constructor.call(this,id,options);this.addGrid(options);}
extend(ContractList_View,ViewAjxList);ContractList_View.prototype.GRID_READ_PM="get_list";ContractList_View.prototype.GRID_ALL=true;ContractList_View.prototype.addGrid=function(options){var model=options.models.ContractList_Model;var contr=new Contract_Controller();var constants={"doc_per_page_count":null,"grid_refresh_interval":null};window.getApp().getConstantManager().get(constants);var role_id=window.getApp().getServVar("role_id");var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();var id=this.getId();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDateTime("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]},"client":{"binding":new CommandBinding({"control":new ClientEditRef(id+":filter-ctrl-client",{"labelCaption":"Заявитель:","contClassName":"form-group-filter"}),"field":new FieldInt("client_id")}),"sign":"e"},"expert":{"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-expert",{"labelCaption":"Эксперт:","contClassName":"form-group-filter"}),"field":new FieldInt("main_expert_id")}),"sign":"e"},"constr_name":{"binding":new CommandBinding({"control":new EditString(id+":filter-ctrl-constr_name",{"labelCaption":"Объект:","contClassName":"form-group-filter"}),"field":new FieldString("constr_name")}),"sign":"lk","icase":true,"lwcards":true,"rwcards":true}};if(this.GRID_ALL){filters.document_type={"binding":new CommandBinding({"control":new Enum_document_types(id+":filter-ctrl-document_type",{"labelCaption":"Услуга:","contClassName":"form-group-filter"}),"field":new FieldString("document_type")})};}
var fields=[];if(this.GRID_ALL){fields.push(new GridCellHead(id+":grid:head:document_type",{"value":"Услуга","columns":[new EnumGridColumn_document_types({"field":model.getField("document_type"),"ctrlClass":Enum_document_types,"searchOptions":{"searchType":"on_match","typeChange":false}})]}));}
fields.push(new GridCellHead(id+":grid:head:expertise_result_number",{"value":"№ эксп.закл.","columns":[new GridColumn({"field":model.getField("expertise_result_number")})],"sortable":true}));fields.push(new GridCellHead(id+":grid:head:contract_date",{"value":"Дата контракта","columns":[new GridColumnDate({"field":model.getField("contract_date"),"ctrlClass":EditDate})]}));fields.push(new GridCellHead(id+":grid:head:client_descr",{"value":"Заявитель","columns":[new GridColumn({"field":model.getField("client_descr"),"ctrlClass":ClientEditRef,"searchOptions":{"field":new FieldInt("client_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}));fields.push(new GridCellHead(id+":grid:head:constr_name",{"value":"Объект","columns":[new GridColumn({"field":model.getField("constr_name")})],"sortable":true}));fields.push(new GridCellHead(id+":grid:head:reg_number",{"value":"Рег.номер","columns":[new GridColumn({"field":model.getField("reg_number")})],"sortable":true}));fields.push(new GridCellHead(id+":grid:head:main_expert_descr",{"value":"Эксперт","columns":[new GridColumn({"field":model.getField("main_expert_descr"),"ctrlClass":EmployeeEditRef,"searchOptions":{"field":new FieldInt("main_expert_id"),"searchType":"on_match","typeChange":false}})],"sortable":true}));fields.push(new GridCellHead(id+":grid:head:state",{"value":"Статус","colAttrs":{"state":function(fields){return fields.state.getValue();}},"columns":[new EnumGridColumn_application_states({"field":model.getField("state"),"ctrlClass":Enum_application_states,"ctrlOptions":{"labelCaption":"Статус:"},"searchOptions":{"searchType":"on_match","typeChange":false},"formatFunction":function(fields){var val=fields.state.getValue();var res=this.getAssocValueList()[val];if(val=="expertise"){res+=" ";res+=DateHelper.format(fields.state_end_date.getValue(),"d/m/Y");}
return res;}})]}));fields.push(new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text")})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"readPublicMethod":contr.getPublicMethod(this.GRID_READ_PM),"editInline":false,"editWinClass":ContractDialog_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdDelete":(role_id=="admin"),"cmdEdit":true,"cmdFilter":true,"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":fields})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":constants.grid_refresh_interval.getValue()*1000,"rowSelect":false,"focus":true}));} 
function ContractPdList_View(id,options){options=options||{};ContractPdList_View.superclass.constructor.call(this,id,options);}
extend(ContractPdList_View,ContractList_View);ContractPdList_View.prototype.GRID_READ_PM="get_pd_list";ContractPdList_View.prototype.GRID_ALL=false; 
function ContractCostEvalValidityList_View(id,options){options=options||{};ContractCostEvalValidityList_View.superclass.constructor.call(this,id,options);}
extend(ContractCostEvalValidityList_View,ContractList_View);ContractCostEvalValidityList_View.prototype.GRID_READ_PM="get_cost_eval_validity_list";ContractCostEvalValidityList_View.prototype.GRID_ALL=false; 
function ContractModificationList_View(id,options){options=options||{};ContractModificationList_View.superclass.constructor.call(this,id,options);}
extend(ContractModificationList_View,ContractList_View);ContractModificationList_View.prototype.GRID_READ_PM="get_modification_list";ContractModificationList_View.prototype.GRID_ALL=false; 
function ContractAuditList_View(id,options){options=options||{};ContractAuditList_View.superclass.constructor.call(this,id,options);}
extend(ContractAuditList_View,ContractList_View);ContractAuditList_View.prototype.GRID_READ_PM="get_audit_list";ContractAuditList_View.prototype.GRID_ALL=false; 
function ContractDialog_View(id,options){options=options||{};options.model=options.models.ContractDialog_Model;options.controller=options.controller||new Contract_Controller();options.dataType="contracts";var self=this;options.uploaderClass=FileUploaderContract_View;options.templateOptions=options.templateOptions||{};options.templateOptions.bsCol=window.getBsCol();if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){options.templateOptions.expertise_sections=options.model.getFieldValue("expertise_sections");}
var doc_folders=options.model.getFieldValue("doc_folders");options.templateOptions.primaryContractExists=(!options.model.getField("primary_contracts_ref").isNull()||options.model.getField("primary_contract_reg_number").isSet());options.templateOptions.modifPrimaryContractExists=(!options.model.getField("modif_primary_contracts_ref").isNull()||options.model.getField("modif_primary_contract_reg_number").isSet());options.templateOptions.costEvalValidity=options.model.getFieldValue("cost_eval_validity");options.templateOptions.pd=(options.model.getFieldValue("document_type")=="pd");options.templateOptions.notExpert=(window.getApp().getServVar("role_id")!="expert");options.templateOptions.expert=!options.templateOptions.notExpert;options.templateOptions.setAccess=(options.templateOptions.notExpert||options.model.getFieldValue("main_experts_ref").getKey("id")==CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey("id")||(options.model.getFieldValue("main_departments_ref").getKey("id")==CommonHelper.unserialize(window.getApp().getServVar("departments_ref")).getKey("id")&&window.getApp().getServVar("department_boss")=="1"));options.templateOptions.notSetAccess=!options.templateOptions.setAccess;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"9";var labelClassName="control-label "+bs+"3";var role=window.getApp().getServVar("role_id");var is_admin=(role=="admin");this.addElement(new HiddenKey(id+":id"));this.addElement(new EditDate(id+":date_time",{"attrs":{"style":"width:250px;"},"inline":true,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false,"cmdSelect":options.templateOptions.notExpert,"enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":expertise_result_number",{"attrs":{"style":"width:100px;"},"inline":true,"cmdClear":false,"enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":applicant_descr",{"cmdClear":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Заявитель:","enabled":false}));this.addElement(new EditString(id+":customer_descr",{"cmdClear":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Технич.заказчик:","enabled":false}));this.addElement(new EditString(id+":developer_descr",{"cmdClear":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Застройщик:","enabled":false}));this.addElement(new LinkedContractListGrid(id+":linked_contracts",{"enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":contract_number",{"labelCaption":"Номер контракта:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new EditDate(id+":contract_date",{"labelCaption":"Дата контракта:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));if(options.templateOptions.notExpert){if(options.templateOptions.pd){this.addElement(new Enum_expertise_types(id+":expertise_type",{"labelCaption":"Вид гос.экспертизы:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));}
this.addElement(new Enum_document_types(id+":document_type",{"labelCaption":"Услуга:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new ApplicationEditRef(id+":applications_ref",{"cmdClear":false,"cmdSelect":false,"labelCaption":"Заявление:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new EditMoney(id+":expertise_cost_budget",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Стоимость эксп.работ (бюджет):"}));this.addElement(new EditMoney(id+":expertise_cost_self_fund",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Стоимость эксп.работ (собств.средства):"}));this.addElement(new EditMoney(id+":total_cost_eval",{"cmdClear":false,"labelCaption":ApplicationDialog_View.prototype.FIELD_CAP_total_cost_eval,"editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new EditMoney(id+":limit_cost_eval",{"cmdClear":false,"labelCaption":ApplicationDialog_View.prototype.FIELD_CAP_limit_cost_eval,"editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new EditDate(id+":contract_return_date",{"labelCaption":"Дата возврата контракта:","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new EditString(id+":akt_number",{"labelCaption":"Номер акта вып.работ:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4"}));this.addElement(new EditDate(id+":akt_date",{"labelCaption":"Дата акта вып.работ:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4"}));this.addElement(new FundSourceSelect(id+":fund_sources_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));this.addElement(new ClientPaymentList_View(id+":client_payment_list",{"detail":true}));this.addElement(new ApplicationProcessList_View(id+":application_process_list",{"detail":true}));this.addElement(new EditAddress(id+":constr_address",{"mainView":this,"cmdClear":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Адрес объекта строительства:","enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":kadastr_number",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Кадастровый номер:","enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":grad_plan_number",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Номер град.плана:","enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":area_document",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Документы на з/у:","enabled":options.templateOptions.notExpert}));this.addElement(new ConstrTechnicalFeatureGrid(id+":constr_technical_features",{"editEnabled":options.templateOptions.notExpert}));this.addElement(new ConstructionTypeSelect(id+":construction_types_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":ApplicationDialog_View.prototype.FIELD_CAP_construction_types_ref,"enabled":false}));this.addElement(new BuildTypeSelect(id+":build_types_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":false}));if(options.templateOptions.costEvalValidity){this.addElement(new Enum_cost_eval_validity_pd_orders(id+":cost_eval_validity_pd_order",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Тип проверки ПД:","enabled":false}));this.addElement(new EditString(id+":order_document",{"maxLength":"1000","labelCaption":"Распорядительный акт:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4"}));}
if(options.templateOptions.primaryContractExists){this.addElement(new ApplicationPrimaryCont(id+":primary_contracts_ref",{"isModification":false,"editClass":ContractEditRef,"editLabelCaption":"Первичный контракт модификации:","primaryFieldId":"primary_contract_reg_number","template":window.getApp().getTemplate("ApplicationPrimaryContTmpl"),"enabled":false}));}
if(options.templateOptions.modifPrimaryContractExists){this.addElement(new ApplicationPrimaryCont(id+":modif_primary_contracts_ref",{"isModification":true,"editClass":ContractEditRef,"editLabelCaption":"Первичный контракт:","primaryFieldId":"modif_primary_contract_reg_number","enabled":false}));}
this.addElement(new Enum_expertise_results(id+":expertise_result",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Результат экспертизы:","enabled":options.templateOptions.notExpert}));this.addElement(new EditDate(id+":expertise_result_date",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Дата заключения:","enabled":options.templateOptions.notExpert}));this.addElement(new ApplicationRegNumber(id+":reg_number",{"labelCaption":"Регистрационный номер:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new ExpertiseRejectTypeSelect(id+":expertise_reject_types_ref",{"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Вид отрицательного закл.:","enabled":options.templateOptions.notExpert}));this.addElement(new EmployeeListGrid(id+":result_sign_expert_list",{"notExpert":options.templateOptions.notExpert}));if(options.templateOptions.costEvalValidity&&options.templateOptions.notExpert){this.addElement(new EditMoney(id+":in_estim_cost",{"labelCaption":"Входящая сметная стоимость (тыс.руб.):","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new EditMoney(id+":in_estim_cost_recommend",{"labelCaption":"Рекомендованнная сметная стоимость (тыс.руб.):","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new EditMoney(id+":cur_estim_cost",{"labelCaption":"Текущая сметная стоимость (тыс.руб.):","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new EditMoney(id+":cur_estim_cost_recommend",{"labelCaption":"Текущая рекомендованнная сметная стоимость (тыс.руб.):","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));}
this.addElement(new EditString(id+":argument_document",{"maxLength":"150","labelCaption":"Акт оспаривания:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4"}));this.addElement(new EditString(id+":auth_letter",{"maxLength":"150","labelCaption":"Доверенность:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","enabled":false}));this.addElement(new ContractorListGrid(id+":contractors_list"));this.addElement(new DocFolder_View(id+":doc_folders",{"items":doc_folders}));}
this.addElement(new DepartmentSelect(id+":main_departments_ref",{"labelCaption":"Главный отдел:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.setAccess}));this.addElement(new EmployeeEditRef(id+":main_experts_ref",{"labelCaption":"Главный эксперт:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.setAccess}));if(options.templateOptions.setAccess){this.addElement(new AccessPermissionGrid(id+":permissions",{"enabled":(role=="admin")}));this.addElement(new EditCheckBox(id+":for_all_employees",{"labelCaption":"Контракт доступен всем:"}));}
this.addElement(new EmployeeEditRef(id+":employees_ref",{"labelCaption":"Автор:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":is_admin}));this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий:","editContClassName":editContClassName,"labelClassName":labelClassName,"enabled":options.templateOptions.notExpert}));this.addElement(new EditString(id+":constr_name",{"cmdClear":false,"editContClassName":editContClassName,"labelClassName":labelClassName,"labelCaption":"Объект строительства:","enabled":options.templateOptions.notExpert}));this.addElement(new EditDate(id+":work_start_date",{"labelCaption":"Дата начала работ:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","enabled":options.templateOptions.notExpert}));this.addElement(new EditDate(id+":work_end_date",{"labelCaption":"Дата выдачи заключ.:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","buttonClear":new BtnEndDate(id+":btnEndDate",{"view":this,"enabled":options.templateOptions.notExpert}),"cmdSelect":options.templateOptions.notExpert,"enabled":options.templateOptions.notExpert}));this.addElement(new EditDate(id+":expert_work_end_date",{"labelCaption":"Дата заверш.работ:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","buttonClear":options.templateOptions.notExpert?new BtnEndDate(id+":btnExpEndDate",{"view":this}):null,"cmdSelect":options.templateOptions.notExpert,"enabled":options.templateOptions.notExpert}));this.addElement(new EditInt(id+":expert_work_day_count",{"labelCaption":"Срок оценки:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","enabled":options.templateOptions.notExpert}));this.addElement(new EditInt(id+":expertise_day_count",{"labelCaption":"Срок экспертизы:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","enabled":options.templateOptions.notExpert}));this.addElement(new Enum_date_types(id+":date_type",{"labelCaption":"Дни:","editContClassName":"input-group "+bs+"8","labelClassName":"control-label "+bs+"4","enabled":options.templateOptions.notExpert}));this.addDocumentTabs(options.model,null,true);var app_key=options.model.getFieldValue("applications_ref").getKey("id");var tab_out=new DocFlowOutList_View(id+":doc_flow_out_list",{"fromApp":true,"autoRefresh":true,"filters":[{"field":"to_application_id","sign":"e","val":app_key}],"readOnly":!options.templateOptions.setAccess});this.addElement(tab_out);var this_ref=new RefType({"keys":{"id":options.model.getFieldValue("id")},"descr":"Контракт №"+options.model.getFieldValue("expertise_result_number")+" от "+DateHelper.format(options.model.getFieldValue("date_time"),"d/m/Y"),"dataType":"contract"});var dlg_m=new DocFlowOutDialog_Model();dlg_m.setFieldValue("to_contracts_ref",this_ref);dlg_m.setFieldValue("subject","Замечания по "+this_ref.getDescr());dlg_m.setFieldValue("doc_flow_types_ref",window.getApp().getPredefinedItem("doc_flow_types","contr"));dlg_m.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));dlg_m.setFieldValue("signed_by_employees_ref",null);dlg_m.recInsert();tab_out.getElement("grid").setInsertViewOptions({"models":{"DocFlowOutDialog_Model":dlg_m}});this.addElement(new DocFlowInList_View(id+":doc_flow_in_list",{"fromApp":true,"autoRefresh":true,"filters":[{"field":"from_application_id","sign":"e","val":app_key}]}));var tab_inside=new DocFlowInsideList_View(id+":doc_flow_inside_list",{"fromApp":true,"autoRefresh":true,"filters":[{"field":"contract_id","sign":"e","val":options.model.getFieldValue("id")}],"readOnly":false});this.addElement(tab_inside);var dlg_m=new DocFlowInsideDialog_Model();dlg_m.setFieldValue("contracts_ref",this_ref);dlg_m.setFieldValue("subject","По контракту "+this_ref.getDescr());dlg_m.setFieldValue("doc_flow_importance_types_ref",window.getApp().getPredefinedItem("doc_flow_importance_types","common"));dlg_m.setFieldValue("employees_ref",CommonHelper.unserialize(window.getApp().getServVar("employees_ref")));dlg_m.recInsert();tab_inside.getElement("grid").setInsertViewOptions({"models":{"DocFlowInsideDialog_Model":dlg_m}});};ContractDialog_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("date_time")}),new DataBinding({"control":this.getElement("expertise_result_number")}),new DataBinding({"control":this.getElement("applications_ref")}),new DataBinding({"control":this.getElement("applicant_descr")}),new DataBinding({"control":this.getElement("customer_descr")}),new DataBinding({"control":this.getElement("developer_descr")}),new DataBinding({"control":this.getElement("employees_ref")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("constr_name")}),new DataBinding({"control":this.getElement("reg_number")}),new DataBinding({"control":this.getElement("expertise_reject_types_ref")}),new DataBinding({"control":this.getElement("result_sign_expert_list")}),new DataBinding({"control":this.getElement("expertise_day_count")}),new DataBinding({"control":this.getElement("date_type"),"field":this.m_model.getField("date_type")}),new DataBinding({"control":this.getElement("work_start_date")}),new DataBinding({"control":this.getElement("work_end_date")}),new DataBinding({"control":this.getElement("expert_work_end_date")}),new DataBinding({"control":this.getElement("expert_work_day_count")}),new DataBinding({"control":this.getElement("linked_contracts")}),new DataBinding({"control":this.getElement("contract_number")}),new DataBinding({"control":this.getElement("contract_date")})];if(options.templateOptions.costEvalValidity&&options.templateOptions.notExpert){read_b.push(new DataBinding({"control":this.getElement("in_estim_cost")}));read_b.push(new DataBinding({"control":this.getElement("in_estim_cost_recommend")}));read_b.push(new DataBinding({"control":this.getElement("cur_estim_cost")}));read_b.push(new DataBinding({"control":this.getElement("cur_estim_cost_recommend")}));}
if(options.templateOptions.notExpert){read_b.push(new DataBinding({"control":this.getElement("document_type")}));read_b.push(new DataBinding({"control":this.getElement("kadastr_number")}));read_b.push(new DataBinding({"control":this.getElement("grad_plan_number")}));read_b.push(new DataBinding({"control":this.getElement("area_document")}));read_b.push(new DataBinding({"control":this.getElement("constr_technical_features")}));read_b.push(new DataBinding({"control":this.getElement("build_types_ref")}));read_b.push(new DataBinding({"control":this.getElement("construction_types_ref")}));read_b.push(new DataBinding({"control":this.getElement("cost_eval_validity_simult")}));read_b.push(new DataBinding({"control":this.getElement("expertise_result"),"field":this.m_model.getField("expertise_result")}));read_b.push(new DataBinding({"control":this.getElement("expertise_result_date")}));read_b.push(new DataBinding({"control":this.getElement("auth_letter")}));read_b.push(new DataBinding({"control":this.getElement("argument_document")}));read_b.push(new DataBinding({"control":this.getElement("constr_address")}));read_b.push(new DataBinding({"control":this.getElement("contractors_list")}));read_b.push(new DataBinding({"control":this.getElement("expertise_cost_budget")}));read_b.push(new DataBinding({"control":this.getElement("expertise_cost_self_fund")}));read_b.push(new DataBinding({"control":this.getElement("total_cost_eval")}));read_b.push(new DataBinding({"control":this.getElement("limit_cost_eval")}));read_b.push(new DataBinding({"control":this.getElement("fund_sources_ref")}));read_b.push(new DataBinding({"control":this.getElement("contract_return_date")}));read_b.push(new DataBinding({"control":this.getElement("akt_number")}));read_b.push(new DataBinding({"control":this.getElement("akt_date")}));}
read_b.push(new DataBinding({"control":this.getElement("main_departments_ref")}));read_b.push(new DataBinding({"control":this.getElement("main_experts_ref")}));if(options.templateOptions.setAccess){read_b.push(new DataBinding({"control":this.getElement("permissions")}));read_b.push(new DataBinding({"control":this.getElement("for_all_employees")}));}
if(options.templateOptions.primaryContractExists){read_b.push(new DataBinding({"control":this.getElement("primary_contracts_ref")}));}
if(options.templateOptions.costEvalValidity){read_b.push(new DataBinding({"control":this.getElement("cost_eval_validity_pd_order")}));read_b.push(new DataBinding({"control":this.getElement("order_document")}));}
if(options.templateOptions.pd){read_b.push(new DataBinding({"control":this.getElement("expertise_type")}));}
if(options.templateOptions.modifPrimaryContractExists){read_b.push(new DataBinding({"control":this.getElement("modif_primary_contracts_ref")}));}
this.setDataBindings(read_b);var write_b;if(options.templateOptions.notExpert){write_b=[new CommandBinding({"control":this.getElement("date_time")}),new CommandBinding({"control":this.getElement("expertise_result_number")}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("kadastr_number")}),new CommandBinding({"control":this.getElement("grad_plan_number")}),new CommandBinding({"control":this.getElement("area_document")}),new CommandBinding({"control":this.getElement("expertise_result"),"fieldId":"expertise_result"}),new CommandBinding({"control":this.getElement("expertise_result_date")}),new CommandBinding({"control":this.getElement("expertise_reject_types_ref"),"fieldId":"expertise_reject_type_id"}),new CommandBinding({"control":this.getElement("result_sign_expert_list"),"fieldId":"result_sign_expert_list"}),new CommandBinding({"control":this.getElement("expertise_day_count")}),new CommandBinding({"control":this.getElement("argument_document")}),new CommandBinding({"control":this.getElement("date_type")}),new CommandBinding({"control":this.getElement("reg_number")}),new CommandBinding({"control":this.getElement("contract_date")}),new CommandBinding({"control":this.getElement("contract_return_date")}),new CommandBinding({"control":this.getElement("akt_number")}),new CommandBinding({"control":this.getElement("akt_date")}),new CommandBinding({"control":this.getElement("contract_number")}),new CommandBinding({"control":this.getElement("work_start_date")}),new CommandBinding({"control":this.getElement("work_end_date")}),new CommandBinding({"control":this.getElement("expert_work_end_date")}),new CommandBinding({"control":this.getElement("expert_work_day_count")}),new CommandBinding({"control":this.getElement("linked_contracts"),"fieldId":"linked_contracts"}),new CommandBinding({"control":this.getElement("constr_name")}),new CommandBinding({"control":this.getElement("constr_address"),"fieldId":"constr_address"}),new CommandBinding({"control":this.getElement("constr_technical_features"),"fieldId":"constr_technical_features"}),new CommandBinding({"control":this.getElement("expertise_cost_budget")}),new CommandBinding({"control":this.getElement("expertise_cost_self_fund")})];if(options.templateOptions.costEvalValidity){write_b.push(new CommandBinding({"control":this.getElement("order_document")}));}}
else{write_b=[];}
if(options.templateOptions.costEvalValidity&&options.templateOptions.notExpert){write_b.push(new CommandBinding({"control":this.getElement("in_estim_cost")}));write_b.push(new CommandBinding({"control":this.getElement("in_estim_cost_recommend")}));write_b.push(new CommandBinding({"control":this.getElement("cur_estim_cost")}));write_b.push(new CommandBinding({"control":this.getElement("cur_estim_cost_recommend")}));}
if(options.templateOptions.setAccess){write_b.push(new CommandBinding({"control":this.getElement("main_departments_ref"),"fieldId":"main_department_id"}));write_b.push(new CommandBinding({"control":this.getElement("main_experts_ref"),"fieldId":"main_expert_id"}));write_b.push(new CommandBinding({"control":this.getElement("permissions"),"fieldId":"permissions"}));write_b.push(new CommandBinding({"control":this.getElement("for_all_employees"),"fieldId":"for_all_employees"}));}
this.setWriteBindings(write_b);this.m_grids={};if(options.templateOptions.notExpert){this.addDetailDataSet({"control":this.getElement("client_payment_list").getElement("grid"),"controlFieldId":"contract_id","value":options.model.getFieldValue("id")});this.addDetailDataSet({"control":this.getElement("application_process_list").getElement("grid"),"controlFieldId":"application_id","value":options.model.getFieldValue("application_id")});}}
extend(ContractDialog_View,DocumentDialog_View);ContractDialog_View.prototype.m_grids;ContractDialog_View.prototype.constrTypeIsNull=function(){return this.getModel().getField("construction_types_ref").isNull();}
ContractDialog_View.prototype.getConstrType=function(){return this.getModel().getField("construction_types_ref").getValue();}
ContractDialog_View.prototype.toggleDocTypeVis=function(){this.toggleDocTypeVisOnModel(this.getModel());}
ContractDialog_View.prototype.toDOM=function(p){ContractDialog_View.superclass.toDOM.call(this,p);var self=this;var m=this.getModel();var sec=m.getFieldValue("expertise_sections");$('.easy-tree').EasyTree({addable:false,editable:false,deletable:false,onExpand:function(e,node){var sec_id=node.getAttribute("section_id");var cont=document.getElementById(self.getId()+":cont-"+sec_id);var grid_id="Sec"+sec_id;if(!self.m_grids[grid_id]){self.m_grids[grid_id]=new ExpertWorkGrid(grid_id,{"section_id":sec_id,"contract_id":self.getElement("id").getValue()});self.m_grids[grid_id].toDOM(cont);}
else{self.m_grids[grid_id].onRefresh(function(){this.setVisible(true);});}},onCollapse:function(e,node){var sec_id=node.getAttribute("section_id");var grid_id="Sec"+sec_id;if(self.m_grids[grid_id]){var m=self.m_grids[grid_id].getModel();if(m.getLocked())m.setLocked(false);self.m_grids[grid_id].setVisible(false);}}});} 
function ContactList_View(id,options){options=options||{};ContactList_View.superclass.constructor.call(this,id,options);var model=options.models.Contact_Model;var contr=new Contact_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var filters=null;var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["parent_id","parent_type","parent_ind"],"controller":contr,"editInline":null,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdInsert":false,"cmdEdit":false}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:contact",{"value":"Контакт","columns":[new GridColumn({"field":model.getField("contact")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ContactList_View,ViewAjxList); 
function ExpertiseRejectTypeList_View(id,options){options=options||{};ExpertiseRejectTypeList_View.superclass.constructor.call(this,id,options);var model=options.models.ExpertiseRejectType_Model;var contr=new ExpertiseRejectType_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var filters={};var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ExpertiseRejectTypeList_View,ViewAjx); 
function OfficeDayScheduleList_View(id,options){options=options||{};OfficeDayScheduleList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.OfficeDaySchedule_Model)?options.models.OfficeDaySchedule_Model:new OfficeDaySchedule_Model();var contr=new OfficeDaySchedule_Controller();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["office_id","day"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:day",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("day")})]}),new GridCellHead(id+":grid:head:work_hours",{"value":"Часы работы","columns":[new GridColumn({"field":model.getField("work_hours"),"ctrlClass":WorkHourEdit,"ctrlOptions":{},"formatFunction":function(fields){var res;var wh=fields.work_hours.getValue();if(wh){res=wh.from+" - "+wh.to;}
return res;}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false}));}
extend(OfficeDayScheduleList_View,ViewAjx); 
function Reminder_View(id,options){options=options||{};options.model=options.models.Reminder_Model;options.controller=options.controller||new ReportTemplate_Controller();options.templateOptions={"HEAD_TITLE":this.HEAD_TITLE};var self=this;if(options.model&&(options.model.getRowIndex()>=0||options.model.getNextRow())){}
options.addElement=function(){this.addElement(new Control(id+":content","TEMPLATE",{"value":options.model.getFieldValue("content")}));var docs_ref=options.model.getFieldValue("docs_ref");this.addElement(new Control(id+":docs_ref","TEMPLATE",{"value":docs_ref.getDescr(),"attrs":{"docs_ref":CommonHelper.serialize(docs_ref)},"events":{"click":function(e){var ref=CommonHelper.unserialize(this.getAttr("docs_ref"));var cl=window.getApp().getDataType(ref.getDataType()).dialogClass;(new cl({"id":CommonHelper.uniqid(),"keys":ref.getKeys(),"params":{"cmd":"edit","editViewOptions":{}}})).open();}}}));}
Reminder_View.superclass.constructor.call(this,id,"TEMPLATE",options);}
extend(Reminder_View,ControlContainer); 
function DocFlowApprovementTemplate_View(id,options){options=options||{};options.model=options.models.DocFlowApprovementTemplateDialog_Model;options.controller=options.controller||new DocFlowApprovementTemplate_Controller();var self=this;options.addElement=function(){this.addElement(new EditText(id+":comment_text",{"labelCaption":"Комментарий",}));this.addElement(new EditString(id+":name",{"maxLength":"100","labelCaption":"Наименование",}));this.addElement(new EmployeeEditRef(id+":employees_ref",{"labelCaption":"Автор:","enabled":(window.getApp().getServVar("role_id")=="admin"),"value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref"))}));this.addElement(new AccessPermissionGrid(id+":permissions"));this.addElement(new DocFlowApprovementRecipientGrid(id+":recipient_list_ref",{"view":this}));this.addElement(new EditCheckBox(id+":for_all_employees",{"labelCaption":"Разрешить использование шаблона для сотрудников"}));this.addElement(new DocFlowApprovementTypeEdit(id+":doc_flow_approvement_type",{"view":this}));}
DocFlowApprovementTemplate_View.superclass.constructor.call(this,id,options);var read_b=[new DataBinding({"control":this.getElement("name")}),new DataBinding({"control":this.getElement("comment_text")}),new DataBinding({"control":this.getElement("recipient_list_ref")}),new DataBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new DataBinding({"control":this.getElement("permissions")}),new DataBinding({"control":this.getElement("for_all_employees")}),new DataBinding({"control":this.getElement("doc_flow_approvement_type")})];this.setDataBindings(read_b);var write_b=[new CommandBinding({"control":this.getElement("name")}),new CommandBinding({"control":this.getElement("comment_text")}),new CommandBinding({"control":this.getElement("recipient_list_ref"),"fieldId":"recipient_list"}),new CommandBinding({"control":this.getElement("permissions"),"fieldId":"permissions"}),new CommandBinding({"control":this.getElement("employees_ref"),"fieldId":"employee_id"}),new CommandBinding({"control":this.getElement("for_all_employees")}),new CommandBinding({"control":this.getElement("doc_flow_approvement_type"),"fieldId":"doc_flow_approvement_type"})];this.setWriteBindings(write_b);}
extend(DocFlowApprovementTemplate_View,ViewObjectAjx);DocFlowApprovementTemplate_View.prototype.onGetData=function(resp,cmd){DocFlowApprovementTemplate_View.superclass.onGetData.call(this,resp,cmd);this.m_readOnly=(this.getModel().getFieldValue("id")&&window.getApp().getServVar("role_id")!="admin"&&CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey()!=this.getModel().getFieldValue("employees_ref").getKey());if(this.m_readOnly){this.setEnabled(false);}} 
function DocFlowApprovementTemplateList_View(id,options){options=options||{};DocFlowApprovementTemplateList_View.superclass.constructor.call(this,id,options);var model=options.models.DocFlowApprovementTemplateList_Model;var contr=new DocFlowApprovementTemplate_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":false,"editWinClass":DocFlowApprovementTemplate_Form,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:employees_ref",{"value":"Автор","columns":[new GridColumnRef({"field":model.getField("employees_ref")})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(DocFlowApprovementTemplateList_View,ViewAjxList); 
function ClientPaymentList_View(id,options){options=options||{};ClientPaymentList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ClientPaymentList_Model)?options.models.ClientPaymentList_Model:new ClientPaymentList_Model();var contr=new ClientPayment_Controller();var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("pay_date")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}}
var grid_columns;var pagination;if(!options.detail){var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});filters.client={"binding":new CommandBinding({"control":new ClientEditRef(id+":filter-ctrl-client",{"labelCaption":"Заявитель:"}),"field":new FieldInt("client_id")}),"sign":"e"};filters.contract={"binding":new CommandBinding({"control":new ContractEditRef(id+":filter-ctrl-contract",{"labelCaption":"Контракт:"}),"field":new FieldInt("contract_id")}),"sign":"e"};grid_columns=[new GridCellHead(id+":grid:head:clients_ref",{"value":"Клиент","columns":[new GridColumnRef({"field":model.getField("clients_ref"),"ctrlClass":ClientEditRef,"searchOptions":{"field":model.getField("client_id"),"searchType":"on_match","typeChange":false},"ctrlOptions":{"labelCaption":"","cmdClear":false,"cmdOpen":false}})],"sortable":true}),new GridCellHead(id+":grid:head:contracts_ref",{"value":"Контракт","columns":[new GridColumnRef({"field":model.getField("contracts_ref"),"ctrlClass":ContractEditRef,"searchOptions":{"field":model.getField("contract_id"),"searchType":"on_match","typeChange":false},"ctrlOptions":{"labelCaption":"","cmdClear":false,"cmdOpen":false}})],"sortable":true})];}
else{grid_columns=[];}
grid_columns.push(new GridCellHead(id+":grid:head:pay_date",{"value":"Дата","columns":[new GridColumnDate({"field":model.getField("pay_date"),"ctrlOptions":{"cmdClear":false},"searchOptions":{"field":new FieldDate("pay_date"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}));grid_columns.push(new GridCellHead(id+":grid:head:total",{"value":"Сумма","columns":[new GridColumnFloat({"field":model.getField("total"),"ctrlOptions":{"cmdClear":false}})]}));grid_columns.push(new GridCellHead(id+":grid:head:pay_docum_date",{"value":"Дата п/п","columns":[new GridColumnDate({"field":model.getField("pay_docum_date"),"ctrlOptions":{"cmdClear":false}})]}));grid_columns.push(new GridCellHead(id+":grid:head:pay_docum_number",{"value":"Номер п/п","columns":[new GridColumn({"field":model.getField("pay_docum_number"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":20,"cmdClear":false}})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"addCustomCommands":options.detail?null:function(commands){commands.push(new ClientPaymentLoaderCmd(id+":cmd:clientLoader"));},"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_columns})]}),"pagination":pagination,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ClientPaymentList_View,ViewAjxList); 
function NewOrder_View(id,options){options=options||{};this.m_onNewOrderCreated=options.onNewOrderCreated;this.m_getContractId=options.getContractId;var self=this;options.addElement=function(){var id=this.getId();this.addElement(new EditMoney(id+":total",{"autofocus":true,"labelCaption":"Сумма счета:","placeholder":"сумма счета, руб."}));this.addElement(new ButtonCmd(id+":ok",{"caption":"ОК","onClick":function(){var contr_id=self.m_getContractId();if(!contr_id){throw Error("Контракт не задан!");}
self.setEnabled(false);self.getCommand("ok").getPublicMethod().setFieldValue("id",contr_id);self.execCommand("ok",function(resp){self.setEnabled(true);var m=new ModelXML("ExtDoc_Model",{"fields":{"doc_ext_id":new FieldString("doc_ext_id"),"doc_number":new FieldString("doc_number"),"doc_date":new FieldDate("doc_date"),"doc_total":new FieldFloat("doc_total")},"data":resp.getModelData("ExtDoc_Model")});self.m_onNewOrderCreated.call(self,m);});}}));this.addElement(new ButtonCmd(id+":cancel",{"caption":"Отмена","onClick":function(){self.m_onNewOrderCreated();}}));}
NewOrder_View.superclass.constructor.call(this,id,options);this.addCommand(new Command("ok",{"publicMethod":(new Contract_Controller()).getPublicMethod("make_order"),"control":this.getElement("ok"),"async":true,"bindings":[new CommandBinding({"control":this.getElement("total")})]}));}
extend(NewOrder_View,ViewAjx); 
function ClientPaymentLoader_View(id,options){options=options||{};this.m_onClose=options.onClose;var self=this;options.addElement=function(){var id=this.getId();this.addElement(new EditDate(id+":date_from",{"autofocus":true,"labelCaption":"дата начала:"}));this.addElement(new EditDate(id+":date_to",{"labelCaption":"дата окончания:"}));this.addElement(new ButtonCmd(id+":ok",{"caption":"ОК","onClick":function(){self.setEnabled(false);self.getCommand("ok").getPublicMethod().setFieldValue("interactive",1);self.execCommand("ok",function(resp){window.showOk("Загружены оплаты из 1с.",function(){self.m_onClose(true);});},function(resp,errCode,errStr){window.showError("Ошибка загрузки оплат из 1с "+errStr,function(){self.m_onClose(false);});});}}));this.addElement(new ButtonCmd(id+":cancel",{"caption":"Отмена","onClick":function(){self.m_onClose(false);}}));}
ClientPaymentLoader_View.superclass.constructor.call(this,id,options);this.addCommand(new Command("ok",{"publicMethod":(new ClientPayment_Controller()).getPublicMethod("get_from_1c"),"control":this.getElement("ok"),"async":true,"bindings":[new CommandBinding({"control":this.getElement("date_from")}),new CommandBinding({"control":this.getElement("date_to")})]}));}
extend(ClientPaymentLoader_View,ViewAjx); 
function ApplicationProcessList_View(id,options){options=options||{};ApplicationProcessList_View.superclass.constructor.call(this,id,options);var model=(options.models&&options.models.ApplicationProcessList_Model)?options.models.ApplicationProcessList_Model:new ApplicationProcessList_Model();var contr=new ApplicationProcess_Controller();contr.getPublicMethod("insert").setFieldValue("user_id",0);var popup_menu=new PopUpMenu();var period_ctrl=new EditPeriodDate(id+":filter-ctrl-period",{"field":new FieldDate("date_time")});var filters={"period":{"binding":new CommandBinding({"control":period_ctrl,"field":period_ctrl.getField()}),"bindings":[{"binding":new CommandBinding({"control":period_ctrl.getControlFrom(),"field":period_ctrl.getField()}),"sign":"ge"},{"binding":new CommandBinding({"control":period_ctrl.getControlTo(),"field":period_ctrl.getField()}),"sign":"le"}]}}
var grid_columns;var pagination;if(!options.detail){var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();pagination=new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()});filters.contract={"binding":new CommandBinding({"control":new ContractEditRef(id+":filter-ctrl-contract",{"labelCaption":"Контракт:"}),"field":new FieldInt("contract_id")}),"sign":"e"};filters.application={"binding":new CommandBinding({"control":new ApplicationEditRef(id+":filter-ctrl-application",{"labelCaption":"Заявление:"}),"field":new FieldInt("application_id")}),"sign":"e"};filters.employee={"binding":new CommandBinding({"control":new EmployeeEditRef(id+":filter-ctrl-employee",{"labelCaption":"Сотрудник:"}),"field":new FieldInt("employee_id")}),"sign":"e"};grid_columns=[new GridCellHead(id+":grid:head:contracts_ref",{"value":"Контракт","columns":[new GridColumnRef({"field":model.getField("contracts_ref"),"ctrlClass":ContractEditRef,"searchOptions":{"field":model.getField("contract_id"),"searchType":"on_match","typeChange":false},"ctrlOptions":{"labelCaption":"","cmdClear":false,"cmdOpen":false}})],"sortable":true}),new GridCellHead(id+":grid:head:applications_ref",{"value":"Заявление","columns":[new GridColumnRef({"field":model.getField("applications_ref"),"ctrlClass":ApplicationEditRef,"searchOptions":{"field":model.getField("application_id"),"searchType":"on_match","typeChange":false},"ctrlOptions":{"labelCaption":"","cmdClear":false,"cmdOpen":false}})],"sortable":true})];}
else{grid_columns=[];}
grid_columns.push(new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDateTime,"ctrlOptions":{"cmdClear":false},"searchOptions":{"field":new FieldDate("date_time"),"searchType":"on_beg"}})],"sortable":true,"sort":"desc"}));grid_columns.push(new GridCellHead(id+":grid:head:state",{"value":"Статус","columns":[new EnumGridColumn_application_states({"field":model.getField("state"),"ctrlClass":Enum_application_states})]}));grid_columns.push(new GridCellHead(id+":grid:head:end_date_time",{"value":"Дата окончания","columns":[new GridColumnDateTime({"field":model.getField("end_date_time"),"ctrlClass":EditDateTime,"ctrlOptions":{"cmdClear":false},"searchOptions":{"field":new FieldDate("end_date_time"),"searchType":"on_beg"},"dateFormat":"d/m/Y H:i"})]}));grid_columns.push(new GridCellHead(id+":grid:head:employees_ref",{"value":"Сотрудник","columns":[new GridColumnRef({"field":model.getField("employees_ref"),"ctrlClass":EmployeeEditRef,"ctrlEdit":false})]}));this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["application_id","date_time"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"filters":filters,"variantStorage":options.variantStorage}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":grid_columns})]}),"pagination":pagination,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ApplicationProcessList_View,ViewAjxList); 
function ProjectManager_View(id,options){options=options||{};options.addElement=function(){this.addElement(new ButtonCmd(id+":apply_patch",{"caption":"Установить обновление","onClick":function(){(new ProjectManager_Controller()).getPublicMethod("apply_patch").run({"ok":function(resp){}})}}));this.addElement(new ButtonCmd(id+":apply_sql",{"caption":"Выполнить скрипты sql","onClick":function(){(new ProjectManager_Controller()).getPublicMethod("apply_sql").run({"ok":function(resp){}})}}));}
ProjectManager_View.superclass.constructor.call(this,id,options);}
extend(ProjectManager_View,View); 
function ServiceList_View(id,options){options=options||{};ServiceList_View.superclass.constructor.call(this,id,options);var model=options.models.ServiceList_Model;var contr=new Service_Controller();var constants={"doc_per_page_count":null};window.getApp().getConstantManager().get(constants);var pagClass=window.getApp().getPaginationClass();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+"-grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":50}})]}),new GridCellHead(id+":grid:head:contract_postf",{"value":"Префикс контракта","columns":[new GridColumn({"field":model.getField("contract_postf"),"ctrlClass":EditString,"ctrlOptions":{"maxLength":5}})]}),new GridCellHead(id+":grid:head:date_type",{"value":"Тип дней","columns":[new EnumGridColumn_day_types({"field":model.getField("date_type"),"ctrlClass":Enum_date_types})]}),new GridCellHead(id+":grid:head:work_day_count",{"value":"Тип дней","columns":[new GridColumn({"field":model.getField("work_day_count"),"ctrlClass":EditInt})]})]})]}),"pagination":new pagClass(id+"_page",{"countPerPage":constants.doc_per_page_count.getValue()}),"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ServiceList_View,ViewAjx); 
function ApplicationDocFolderList_View(id,options){options=options||{};ApplicationDocFolderList_View.superclass.constructor.call(this,id,options);var model=options.models.ApplicationDocFolder_Model;var contr=new ApplicationDocFolder_Controller();var popup_menu=new PopUpMenu();this.addElement(new GridAjx(id+":grid",{"model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:id",{"value":"Код","columns":[new GridColumn({"field":model.getField("id")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":grid:head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":false,"focus":true}));}
extend(ApplicationDocFolderList_View,ViewAjxList); 
function DocFolder_View(id,options){options=options||{};options=options||{};this.m_mainView=options.mainView;options.templateOptions=options.templateOptions||{};options.allowFileDeletion=false;options.filePicClass="file-pic-doc";options.fileAddClass="uploader-file-add-doc";options.fileListClass="uploader-file-list-doc";options.template=window.getApp().getTemplate("DocFolderAttachments");options.fileTemplate=window.getApp().getTemplate("ApplicationFile");DocFolder_View.superclass.constructor.call(this,id,options);}
extend(DocFolder_View,FileUploader_View);DocFolder_View.prototype.downloadFile=function(btnCtrl){var contr=new Application_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("id",btnCtrl.getAttr("file_id"));pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("id",btnCtrl.getAttr("file_id"));pm_sig.download(null,1);}}
DocFolder_View.prototype.downloadOutSig=function(fileId){var contr=new Application_Controller();var pm=contr.getPublicMethod("get_file_out_sig");pm.setFieldValue("id",fileId);pm.download();} 
function DocFolderClient_View(id,options){options=options||{};options=options||{};this.m_mainView=options.mainView;options.customFolder=false;DocFolderClient_View.superclass.constructor.call(this,id,options);}
extend(DocFolderClient_View,FileUploaderDocFlowOut_View);DocFolderClient_View.prototype.deleteFileFromServer=function(fileId,itemId){var self=this;var pm=(new Application_Controller()).getPublicMethod("remove_file");pm.setFieldValue("file_id",fileId);pm.run({"ok":function(){window.showNote(self.NT_FILE_DELETED);self.decTotalFileCount();file_cont=self.getElement("file-list_"+itemId);file_cont.delElement("file_"+fileId);file_cont.delElement("file_"+fileId+"_del");file_cont.delElement("file_"+fileId+"_href");self.decTotalFileCount();self.calcFileTotals(itemId);}});}
DocFolderClient_View.prototype.downloadFile=function(btnCtrl){var contr=new Application_Controller();var pm=contr.getPublicMethod("get_file");pm.setFieldValue("id",btnCtrl.getAttr("file_id"));pm.download();if(btnCtrl.getAttr("file_signed")=="true"){var pm_sig=contr.getPublicMethod("get_file_sig");pm_sig.setFieldValue("id",btnCtrl.getAttr("file_id"));pm_sig.download(null,1);}}
DocFolderClient_View.prototype.getQuerySruc=function(file){var struc=FileUploaderApplication_View.superclass.getQuerySruc.call(this,file);struc.f="app_file_upload";struc.application_id=this.m_mainView.getElement("applications_ref").getValue().getKey("id");struc.doc_type="documents";struc.doc_flow_out_client_id=this.m_mainView.getElement("id").getValue()
struc.file_path="Исходящие заявителя";struc.doc_id="Исходящие заявителя";return struc;} 
function ShortMessage_View(id,options){options=options||{};options.model=options.models?options.models.ShortMessageList_Model:null;options.controller=new ShortMessage_Controller();options.writePublicMethod=options.controller.getPublicMethod("send_message");var self=this;var chat_recipient;if(!options.model){options.template=window.getApp().getTemplate("ShortMessage");options.writePublicMethod.setFieldValue("recipient_ids",options.recipient_ids.join(","));this.m_multyRecipients=options.multyRecipients;if(!this.m_multyRecipients){var toRecipientId=options.recipient_ids[0];var pm=options.controller.getPublicMethod("get_chat_list");pm.setFieldValue("to_recipient_id",toRecipientId);pm.run({"ok":function(resp){self.showChat(resp.getModel("ShortMessageChat_Model"),new ModelXML("RecipientPicture_Model",{"data":resp.getModelData("RecipientPicture_Model")}),toRecipientId);}})}}
else{options.templateOptions={};if(options.model.getNextRow()){var rec_field=(CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey("id")==options.model.getFieldValue("to_recipients_ref").getKey("id"))?"recipients_ref":"to_recipients_ref";options.templateOptions.recipients={"recipient":options.model.getFieldValue(rec_field).getDescr()};options.templateOptions.notMultyRecipients=true;chat_recipient=options.model.getFieldValue(rec_field).getKey("id");options.writePublicMethod.setFieldValue("recipient_ids",chat_recipient);}}
options.cmdSave=false;options.addElement=function(){var bs=window.getBsCol();this.addElement(new DocFlowImportanceTypeSelect(id+":doc_flow_importance_types_ref",{"value":window.getApp().getPredefinedItem("doc_flow_importance_types","common"),"editContClassName":"input-group "+bs+10,"labelClassName":"control-label "+bs+2}));this.addElement(new EditText(id+":content",{"editContClassName":"input-group col-lg-12","rows":5,"focus":true}));this.addElement(new EditFile(id+":files",{"labelCaption":"Файлы:","labelClassName":"control-label "+bs+2,"template":window.getApp().getTemplate("EditFile"),"separateSignature":true,"multipleFiles":true,"allowOnlySignedFiles":false,"onDeleteFile":function(fileId,callBack){alert("Delete file")},"onDownload":function(){alert("Download file")}}));}
ShortMessage_View.superclass.constructor.call(this,id,options);var r_binds=[];this.setDataBindings(r_binds);var w_binds=[new CommandBinding({"control":this.getElement("content"),"field":options.writePublicMethod.getField("content")}),new CommandBinding({"control":this.getElement("files"),"field":options.writePublicMethod.getField("files")}),new CommandBinding({"control":this.getElement("doc_flow_importance_types_ref"),"field":options.writePublicMethod.getField("doc_flow_importance_type_id")})];this.getCommands()[this.CMD_OK].setBindings(w_binds);if(options.models){this.showChat(options.models.ShortMessageChat_Model,options.models.RecipientPicture_Model,chat_recipient);}}
extend(ShortMessage_View,ViewObjectAjx);ShortMessage_View.prototype.showChat=function(model,modelPicture,toRecipientId){this.m_chatView=new ShortMessageChat_View(this.getId()+":message_list",{"to_recipient_id":toRecipientId,"model":model,"modelPicture":modelPicture});this.m_chatView.toDOM(this.getNode());}
ShortMessage_View.prototype.onCancel=function(){this.close(this.m_editResult);}
ShortMessage_View.prototype.toDOM=function(p){ShortMessage_View.superclass.toDOM.call(this,p);}
ShortMessage_View.prototype.onOK=function(failFunc){var self=this;this.execCommand(this.CMD_OK,function(resp){self.onAfterUpsert(resp,false);self.getElement("content").reset();self.getControlOK().setEnabled(true);},failFunc);} 
function ShortMessageChat_View(id,options){options=options||{};var self=this;this.m_employeeId=CommonHelper.unserialize(window.getApp().getServVar("employees_ref")).getKey("id");this.m_publicMethod=(new ShortMessage_Controller()).getPublicMethod("get_chat_list");this.m_publicMethod.setFieldValue("to_recipient_id",options.to_recipient_id);ShortMessageChat_View.superclass.constructor.call(this,id,"DIV",options);this.renderData(options.model,options.modelPicture);}
extend(ShortMessageChat_View,Control);ShortMessageChat_View.prototype.REFRESH_INTERVAL=2*1000;ShortMessageChat_View.prototype.downloadFile=function(e){var pm=(new ShortMessage_Controller()).getPublicMethod("download_file");pm.setFieldValue("id",e.id)
pm.setFieldValue("message_id",e.getAttribute("message_id"));pm.download();}
ShortMessageChat_View.prototype.onRefresh=function(){var self=this;this.m_publicMethod.run({"ok":function(resp){self.renderData(resp.getModel("ShortMessageChat_Model"),resp.getModel("RecipientPicture_Model"));}})}
ShortMessageChat_View.prototype.renderData=function(modelChat,modelPicture){if(this.m_renderedCnt&&this.m_renderedCnt==modelChat.getRowCount())return;var picture;if(modelPicture&&modelPicture.getNextRow()){picture=modelPicture.getFieldValue("picture");}
this.m_renderedCnt=0;var rows=[];var prev_dt;while(modelChat.getNextRow()){var dt_comp=modelChat.getFieldValue("date_time");dt_comp.setHours(0,0,0,0);var from_me=(this.m_employeeId==modelChat.getFieldValue("recipients_ref").getKey("id"));var imp_ref=modelChat.getFieldValue("doc_flow_importance_types_ref");var files=modelChat.getFieldValue("files");var mess_id=modelChat.getFieldValue("id");if(files){for(var i=0;i<files.length;i++){files[i].ind=i?i:null;files[i].file_size_formatted=CommonHelper.byteFormat(files[i].file_size,2);files[i].message_id=mess_id;}}
var dt=modelChat.getFieldValue("date_time");rows.push({"pic":from_me?null:picture,"messageType":from_me?"FromMe":"ToMe","newDay":(!prev_dt||(prev_dt.getTime()!=dt_comp.getTime()))?DateHelper.format(dt,"l, j F Y г."):null,"content":modelChat.getFieldValue("content"),"time":DateHelper.format(dt,"H:i"),"name":from_me?null:modelChat.getFieldValue("recipients_ref").getDescr(),"viewTime":DateHelper.format(modelChat.getFieldValue("view_date_time"),"d/m/y H:i"),"importance":(imp_ref.getKey("id")!=window.getApp().getPredefinedItem("doc_flow_importance_types","common").getKey("id"))?imp_ref.getDescr():null,"files":files});prev_dt=dt_comp;this.m_renderedCnt+=1;}
if(this.m_listControl)this.m_listControl.delDOM();this.m_listControl=new Control(this.getId()+":listCtrl","TEMPLATE",{template:window.getApp().getTemplate("ShortMessageChat"),templateOptions:{"rows":rows}});this.m_listControl.toDOM(this.m_node);var self=this;$(".chat_attachment").click(function(){self.downloadFile(this);});this.m_listControl.m_node.scrollTop=this.m_listControl.m_node.scrollHeight;}
ShortMessageChat_View.prototype.toDOM=function(p){ShortMessageChat_View.superclass.toDOM.call(this,p);var self=this;this.m_refIntervalObj=setInterval(function(){self.onRefresh();},this.REFRESH_INTERVAL);}
ShortMessageChat_View.prototype.delDOM=function(){if(this.m_refIntervalObj!=undefined){window.clearInterval(this.m_refIntervalObj);}
ShortMessageChat_View.superclass.delDOM.call(this);} 
App.prototype.m_templates={"FatalException":"<div class=\"panel panel-flat\"> \n\t <!--      \n\t <div class=\"panel-heading\">\n\t  <h1>Ошибка <strong>{{code}}</strong></h1>\n\t </div>\n\t -->\n\t <div class=\"panel-body\">\n\t      <h3>{{message}}\n\t      </h3>\n\t      <div>Необходима повторная <a href=\"{{baseURL}}\">авторизация</a>.</div>\n\t </div>\n\t</div>\n\t\n\t","DbException":"<div class=\"panel panel-flat\"> \n\t <div class=\"panel-body\">\n\t      <h3>{{message}}\n\t      </h3>\n\t </div>\n\t</div>\n\t\n\t","VersException":"<div class=\"panel panel-flat\"> \n\t <div class=\"panel-body\">\n\t      <h3>Версия программы на сервере была обновлена!\n\t      </h3>\n\t      <h4>Необходимо обновить страницу (обычно F5) или полностью закрыть старницу и открыть заново!\n\t      </h4>\n\t </div>\n\t</div>\n\t\n\t","VersException":"<div class=\"panel panel-flat\"> \n\t <div class=\"panel-body\">\n\t      <h3>Версия программы на сервере была обновлена!\n\t      </h3>\n\t      <h4>Необходимо обновить страницу (обычно F5) или полностью закрыть старницу и открыть заново!\n\t      </h4>\n\t </div>\n\t</div>\n\t\n\t","GridCmdContainerAjx":"<div id=\"{{id}}\">\n\t {{#this.getCmdInsert()}}\n\t <div id=\"{{id}}:insert\"></div> \n\t {{/this.getCmdInsert()}}\n\t \n\t {{#this.getCmdSearch()}}\n\t <div class=\"btn-group\">\n\t  <div id=\"{{id}}:search:set\"></div>\n\t  <div id=\"{{id}}:search:unset\"></div>\n\t </div>\n\t {{/this.getCmdSearch()}}\n\t \n\t {{#this.getCmdFilter()}}\n\t <div id=\"{{id}}:filter\"></div>\n\t {{/this.getCmdFilter()}}\n\t  \n\t {{#this.getCmdPrintObj()}}\n\t <div id=\"{{id}}:printObj\"></div>\n\t {{/this.getCmdPrintObj()}}\n\t  \n\t {{#this.getCmdAllCommands()}}\n\t <div id=\"{{id}}:allCommands\"></div>\n\t {{/this.getCmdAllCommands()}}\n\t \n\t {{#cmdFilterInfo}}\n\t <div id=\"{{id}}:inf\" class=\"hidden\"></div>\n\t {{/cmdFilterInfo}}\n\t \n\t</div>\n\t","ViewGridColManager":"<div id=\"{{id}}\">\n\t <div class=\"form-group {{bsCol}}12\">\n\t  <div id=\"{{id}}:save\"></div>\n\t  <div id=\"{{id}}:open\"></div>\n\t </div>\n\t\n\t <div class=\"tabbable\">\n\t  <ul class=\"nav nav-tabs nav-tabs-highlight\">    \n\t   <li class=\"active\"><a href=\"#columns\" data-toggle=\"tab\" aria-expanded=\"true\">{{TAB_COLUMNS}}</a></li>\n\t   <li><a href=\"#sortings\" data-toggle=\"tab\" aria-expanded=\"false\">{{TAB_SORT}}</a></li>\n\t  </ul>\n\t </div>\n\t\n\t <!-- Tab panes -->\n\t <div class=\"tab-content\"> \n\t  <div class=\"tab-pane fade in active\" id=\"columns\">\n\t   <div id=\"{{id}}:view-visibility\"></div>\n\t  </div>\n\t\n\t  <div class=\"tab-pane fade\" id=\"sortings\">\n\t   <div id=\"{{id}}:view-order\"></div>\n\t  </div>\n\t<!-- \n\t  <div role=\"tabpanel\" class=\"tab-pane\" id=\"filters\">\n\t   <div class=\"panel panel-body\">\n\t    <div id=\"{{id}}:view-filter\"></div>\n\t   </div>\n\t  </div>\n\t-->\n\t</div>\n\t\n\t","PopOver":"<div id=\"{{id}}\" class=\"popover\" role=\"tooltip\" style=\"position:absolute;display:block;max-width:100%;\">\n\t <div class=\"tooltip-arrow\"></div>\n\t <h3 id=\"{{id}}:title\" class=\"popover-title\"></h3>\n\t <div id=\"{{id}}:content\" class=\"popover-content\"></div>\n\t</div>\n\t","GridCmdFilterView":"<form id=\"{{id}}\" class=\"form-horizontal\">\n\t <div class=\"form-group {{bsCol}}12\">\n\t  <div id=\"{{id}}:set\"></div>\n\t  <div id=\"{{id}}:unset\"></div>\n\t  <div id=\"{{id}}:save\"></div>\n\t  <div id=\"{{id}}:open\"></div>\n\t </div>\n\t</form>\n\t","EditPeriodDate":"<div id=\"{{id}}\" class=\"form-group {{bsCol}}12\">\n\t <a class=\"{{bsCol}}2\" id=\"{{id}}:periodSelect\"></a> \n\t \n\t <div class=\"btn-group {{bsCol}}2\">\n\t  <div id=\"{{id}}:downFast\" title=\"{{CONTR_DOWN_FAST_TITLE}}\"></div>\n\t  <div id=\"{{id}}:down\" title=\"{{CONTR_DOWN_TITLE}}\"></div>\n\t </div>\n\t \n\t <div id=\"{{id}}:d-cont\" class=\"{{bsCol}}6\" style=\"padding-right:0px;padding-left:0px;\">\n\t  <div id=\"{{id}}:from\" class=\"{{bsCol}}6\" style=\"padding:0px 20px 0px 0px;\"></div>\n\t  <!--<span class=\"{{bsCol}}1\" style=\"padding-left:0px;padding-right:0px\">-</span>-->\n\t  <div id=\"{{id}}:to\" class=\"{{bsCol}}6\" style=\"padding:0px 0px;margin:0px 0px;\"></div> \n\t </div>\n\t \n\t <div class=\"btn-group {{bsCol}}2\">  \n\t  <div id=\"{{id}}:up\" title=\"{{CONTR_UP_TITLE}}\"></div>\n\t  <div id=\"{{id}}:upFast\" title=\"{{CONTR_UP_FAST_TITLE}}\"></div>\n\t </div>\n\t \n\t</div>\n\t","WindowPrint":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n\t<html>\n\t <head>\n\t  <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\">\n\t  <link rel=\"stylesheet\" href=\"js20/custom-css/print.css?'+{{scriptId}}+'\" type=\"text/css\" media=\"all\">\n\t  <title>{{title}}</title>\n\t </head>\n\t <body>{{content}}</body>\n\t</html>\n\t\n\t","VariantStorageSaveView":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:variants\"></div>\n\t <div id=\"{{id}}:name\"></div>\n\t <div id=\"{{id}}:default_variant\"></div>\n\t <div id=\"{{id}}:cmdSave\"></div>\n\t <div id=\"{{id}}:cmdCancel\"></div>\n\t</div>\n\t","VariantStorageOpenView":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:variants\"></div>\n\t <div id=\"{{id}}:cmdOpen\"></div>\n\t <div id=\"{{id}}:cmdCancel\"></div>\n\t</div>\n\t","ViewKladr":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:region\"></div>\n\t <div id=\"{{id}}:raion\"></div>\n\t <div id=\"{{id}}:gorod\"></div>\n\t <div id=\"{{id}}:naspunkt\"></div> \n\t <div id=\"{{id}}:ulitsa\"></div>\n\t \n\t <div class=\"row\">\n\t  <div class=\"{{bsCol}}6\">   \n\t   <div id=\"{{id}}:dom\">\n\t   </div>\n\t  </div>\n\t  <div class=\"{{bsCol}}6\">    \n\t   <div id=\"{{id}}:korpus\">\n\t   </div>\n\t  </div>\n\t </div> \n\t \n\t <div class=\"row\">\n\t  <div id=\"{{id}}:kvartira\" class=\"{{bsCol}}6\">\n\t  </div>\n\t </div> \n\t\n\t</div>\n\t","Captcha":"<div id=\"{{id}}\">\n\t <div class=\"text-center\">\n\t  <button id=\"{{id}}:refresh\" glyph=\"glyphicon-refresh\" title=\"Обновить\">\n\t  </button>\n\t  \n\t  <img id=\"{{id}}:img\">\n\t  </img>\n\t </div>\n\t <div class=\"form-group has-feedback has-feedback-left\">\n\t  <input id=\"{{id}}:key\" type=\"text\" class=\"form-control\" style=\"width:100%;\" placeholder=\"Код с картинки\" title=\"Введите код с картинки\"></input>\n\t  <div class=\"form-control-feedback\"><i class=\"icon-alert text-muted\"></i></div> \n\t  <span class=\"help-block text-danger hidden\" id=\"{{id}}:error\" name=\"error\">\n\t   <i class=\"icon-cancel-circle2 position-left\"></i>\n\t  </span>  \n\t </div>\n\t</div>\n\t","ErrorControl":"<span class=\"help-block text-danger\">\n\t <i class=\"icon-cancel-circle2 position-left\">\n\t </i>\n\t</span>\n\t","ApplicationClientTab":"<div id=\"{{id}}\"> \n\t <div class=\"dropdown\">\n\t  <h3 class=\"app-client-header\">\n\t  {{#isCustomer}}Сведения о техническом заказчике{{/isCustomer}}\n\t  {{#isApplicant}}Сведения о заявителе{{/isApplicant}}\n\t  {{#isDeveloper}}Сведения о застройщике{{/isDeveloper}}  \n\t  </h3>\n\t  {{#isClient}}\n\t  <button class=\"btn bg-{{colorClass}} dropdown-toggle fillClientData\" type=\"button\" data-toggle=\"dropdown\">Заполнить\n\t   <span class=\"caret\"></span>\n\t  </button>\n\t  <ul class=\"dropdown-menu\" title=\"Зполнить по другим данным\">\n\t   {{#isDeveloper}}\n\t   <li><a id=\"{{id}}:fillOnApplicant\" href=\"#\">По заявителю</a></li>\n\t   <li><a id=\"{{id}}:fillOnCustomer\" href=\"#\">По техн.заказчику</a></li>\n\t   <li><a id=\"{{id}}:fillOnContractor\" href=\"#\">По исполнителю</a></li>   \n\t   {{/isDeveloper}}  \n\t   {{#isCustomer}}\n\t   <li><a id=\"{{id}}:fillOnApplicant\" href=\"#\">По заявителю</a></li>\n\t   <li><a id=\"{{id}}:fillOnContractor\" href=\"#\">По исполнителю</a></li>   \n\t   <li><a id=\"{{id}}:fillOnDeveloper\" href=\"#\">По застройщику</a></li>      \n\t   {{/isCustomer}}\n\t   {{#isApplicant}}\n\t   <li><a id=\"{{id}}:fillOnCustomer\" href=\"#\">По техн.заказчику</a></li>\n\t   <li><a id=\"{{id}}:fillOnContractor\" href=\"#\">По исполнителю</a></li>\n\t   <li><a id=\"{{id}}:fillOnDeveloper\" href=\"#\">По застройщику</a></li>      \n\t   {{/isApplicant}}   \n\t   <li><a id=\"{{id}}:fillOnClientList\" href=\"#\">Выбрать из списка клиентов</a></li>\n\t  </ul>\n\t  {{/isClient}}\n\t </div>  \n\t <div id=\"{{id}}:client_type\">\n\t </div>\n\t <div id=\"{{id}}:name\">\n\t </div>\n\t <div id=\"{{id}}:name_full\">\n\t </div>\n\t \n\t <div id=\"{{id}}:inn\">\n\t </div>\n\t <div id=\"{{id}}:kpp\">\n\t </div>\n\t \n\t <div id=\"{{id}}:ogrn\">\n\t </div>\n\t \n\t <div id=\"{{id}}:person_id_paper\">\n\t </div>\n\t\n\t <div id=\"{{id}}:snils\">\n\t </div>\n\t\n\t <div id=\"{{id}}:person_registr_paper\">\n\t </div>\n\t\n\t <div id=\"{{id}}:legal_address\">\n\t </div>\n\t\n\t <div id=\"{{id}}:post_address\">\n\t </div>\n\t\n\t <div id=\"{{id}}:corp_email\">\n\t </div>\n\t\n\t <div id=\"{{id}}:responsable_person_head\">\n\t </div>\n\t\n\t <div id=\"{{id}}:base_document_for_contract\">\n\t </div>\n\t\n\t <div id=\"{{id}}:bank\">\n\t </div>\n\t\n\t <div class=\"panel panel-flat\">\n\t  <div class=\"panel-heading\">\n\t   <h5 class=\"panel-title\">\n\t   {{#isApplicant}}<span style=\"font-size:120%;color:red;\">*</span>{{/isApplicant}}Контакты\n\t   </h5>\n\t  </div>\n\t  <div class=\"panel-body\">\n\t   <div id=\"{{id}}:responsable_persons\">\n\t   </div>\n\t  </div> \n\t </div>\n\t \n\t {{#isApplicant}}\n\t <div class=\"panel panel-flat\">\n\t  <div class=\"panel-heading\">\n\t   <h5 class=\"panel-title\">Доверенность</h5>\n\t   <p class=\"panel-title\">Заполняется в том случае, если заявитель не является ни заказчиком ни застройщиком</p>\n\t  </div>\n\t  <div class=\"panel-body\">\n\t   <div id=\"{{id}}:auth_letter\">\n\t   </div>\n\t   <div id=\"{{id}}:auth_letter_file\">\n\t   </div>\n\t  </div> \n\t </div>\n\t {{/isApplicant}}\n\t</div>\n\t","ApplicationContractor":"<div id=\"{{id}}\" class=\"{{panelClass}}\">\n\t <div class=\"panel-heading\">\n\t  <h6 class=\"panel-title\">\n\t   <span class=\"text-semibold\">{{IND}}) Сведения об исполнителе</span>\n\t   <a class=\"heading-elements-toggle\">\n\t    <i class=\"icon-more\"></i>\n\t   </a>\n\t  </h6>    \n\t  <div class=\"heading-elements\">\n\t   <ul class=\"icons-list\">\n\t    <li><a id=\"{{id}}:cmdToggle\" data-action=\"collapse\" class=\"\"></a></li>\n\t    {{#cmdClose}}\n\t    <li><a id=\"{{id}}:cmdClose\" data-action=\"close\"></a></li>\n\t    {{/cmdClose}}\n\t   </ul>\n\t  </div>\n\t </div>\n\t \n\t <div class=\"panel-body\" style=\"display: block;\"> \n\t  <div class=\"dropdown\">\n\t   {{#isClient}}\n\t   <button class=\"btn bg-{{colorClass}} dropdown-toggle fillClientData\" type=\"button\" data-toggle=\"dropdown\">Заполнить\n\t    <span class=\"caret\"></span>\n\t   </button>\n\t   <ul class=\"dropdown-menu\" title=\"Зполнить по другим данным\">\n\t    <li><a id=\"{{id}}:fillOnApplicant\" href=\"#\">По заявителю</a></li>\n\t    <li><a id=\"{{id}}:fillOnCustomer\" href=\"#\">По техн.заказчику</a></li>    \n\t    <li><a id=\"{{id}}:fillOnApplicant\" href=\"#\">По застройщику</a></li>      \n\t    <li><a id=\"{{id}}:fillOnClientList\" href=\"#\">Выбрать из списка клиентов</a></li>\n\t   </ul>\n\t   {{/isClient}}\n\t  </div> \n\t \n\t  <div id=\"{{id}}:client_type\">\n\t  </div>\n\t  <div id=\"{{id}}:name\">\n\t  </div>\n\t  <div id=\"{{id}}:name_full\">\n\t  </div>\n\t \n\t  <div id=\"{{id}}:inn\">\n\t  </div>\n\t  <div id=\"{{id}}:kpp\">\n\t  </div>\n\t \n\t  <div id=\"{{id}}:ogrn\">\n\t  </div>\n\t \n\t  <div id=\"{{id}}:person_id_paper\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:snils\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:person_registr_paper\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:legal_address\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:post_address\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:corp_email\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:responsable_person_head\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:base_document_for_contract\">\n\t  </div>\n\t\n\t  <div id=\"{{id}}:bank\">\n\t  </div>\n\t\n\t  <div class=\"panel panel-flat\">\n\t   <div class=\"panel-heading\">\n\t    <h5 class=\"panel-title\">Прочие контакты</h5>\n\t   </div>\n\t   <div class=\"panel-body\">\n\t    <div id=\"{{id}}:responsable_persons\">\n\t    </div>\n\t   </div> \n\t  </div>\n\t \n\t </div>\n\t</div>\n\t\n\t","ApplicationDocuments":"<div id=\"{{id}}\">\n\t {{#notReadOnly}}\n\t <p>Электронные документы на государственную экспертизу представляются в следующих форматах: {{#allowedFileExt}}<mark>{{ext}}</mark>{{/allowedFileExt}}</p>\n\t <p>Максимальный размер файла для загрузки:<mark>{{maxFileSize}}</mark></p>\n\t <p>Добавьте файлы в нужные разделы, затем нажмите \"загрузить\".</p>\n\t \n\t <div id=\"upload-container\">\n\t  <div id=\"{{id}}:file-upload\" class=\"btn bg-{{COLOR_CLASS}}\" type=\"button\" title=\"Загрузить на сервер добавленные файлы\">Загрузить все файлы  <span id=\"{{id}}:total_upload_files\" class=\"badge badge-danger\" title=\"Количество файлов для загрузки\">0</span></div>\n\t \n\t  <div class=\"progress hide\" id=\"{{id}}:upload-progress\">\n\t   <div class=\"progress-bar progress-bar-success\" role=\"progressbar\"\n\t   aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width:0%\">\n\t    <span id=\"{{id}}:upload-progress-val\"></span>\n\t   </div>\n\t  </div>   \n\t </div> \n\t {{/notReadOnly}}\n\t \n\t <div class=\"panel-group panel-group-control content-group-lg\"> \n\t  {{#items}}\n\t  <div class=\"panel\">\n\t   <div class=\"panel-heading bg-info\">\n\t    <h6 class=\"panel-title\">\n\t     <a data-toggle=\"collapse\" href=\"#collapsible-control-group_{{docType}}_{{fields.id}}\" aria-expanded=\"false\" class=\"collapsed file_section\">\n\t     {{#no_items}}<span id=\"{{id}}:total_item_files_{{fields.id}}\" class=\"badge badge-danger\" title=\"Количество файлов в разделе\">{{files.length}}</span>{{/no_items}} {{fields.descr}}</a>\n\t    </h6>\n\t   </div>\n\t   <div id=\"collapsible-control-group_{{docType}}_{{fields.id}}\" class=\"panel-collapse collapse\" aria-expanded=\"false\" style=\"height: 0px;\">\n\t    <div class=\"panel-body\">    \n\t     {{#no_items}}\n\t     <div class=\"uploader-file-list-{{docType}}\" item_id=\"{{fields.id}}\">      \n\t      {{#notReadOnly}}\n\t      <div class=\"uploader-file-add-{{docType}} btn btn-sm\" title=\"Добавить файл к данному разделу\">\n\t       <span class=\"glyphicon glyphicon-plus\"/>\n\t       <span class=\"text-thin\">Файлы можно добавить перетаскиванием в эту область</span>\n\t      </div>      \n\t      {{/notReadOnly}}\n\t      <ul id=\"{{id}}:file-list_{{fields.id}}\">\n\t      {{#files}}\n\t       <li id=\"{{id}}:file_{{file_id}}\">\n\t       </li>\n\t      {{/files}}\n\t      </ul>\n\t     </div>     \n\t     {{/no_items}}\n\t     {{#items}}\n\t     <div class=\"panel-group panel-group-control content-group-sm\">\n\t      <div class=\"panel panel-white\">\n\t       <div class=\"panel-heading\">\n\t        <h6 class=\"panel-title\">\n\t         <a class=\"collapsed\" data-toggle=\"collapse\" href=\"#collapsible-control-right-group-{{docType}}-{{fields.id}}\" aria-expanded=\"false\" class=\"file_section\">\n\t          <span id=\"{{id}}:total_item_files_{{fields.id}}\" class=\"badge badge-danger\" title=\"Количество файлов в разделе\">{{files.length}}</span> {{fields.descr}}\n\t         </a>\n\t        </h6>\n\t       </div>\n\t       <div id=\"collapsible-control-right-group-{{docType}}-{{fields.id}}\" class=\"panel-collapse collapse\" aria-expanded=\"false\" style=\"height: 0px;\">\n\t        <div class=\"panel-body\">\n\t         <div class=\"uploader-file-list-{{docType}}\" item_id=\"{{fields.id}}\">      \n\t          {{#notReadOnly}}\n\t          <div class=\"uploader-file-add uploader-file-add-{{docType}} btn btn-sm\" title=\"Добавить файл к данному разделу\">\n\t           <span class=\"glyphicon glyphicon-plus\"/>\n\t           <span class=\"text-thin\">Файлы можно добавить перетаскиванием в эту область</span>\n\t          </div>          \n\t          {{/notReadOnly}}\n\t          <ul id=\"{{id}}:file-list_{{fields.id}}\">\n\t          {{#files}}\n\t           <li id=\"{{id}}:file_{{file_id}}\">\n\t           </li>          \n\t          {{/files}}\n\t          </ul>\n\t         </div>     \n\t        </div>\n\t       </div>\n\t      </div>\n\t     </div> \n\t     {{/items}}   \n\t    </div>\n\t   </div>\n\t  </div>\n\t  {{/items}}\n\t </div>\n\t</div> \n\t","DocFlowAttachments":"<div id=\"{{id}}\" class=\"panel-group panel-group-control content-group-lg\">\n\t <h4> <span id=\"{{id}}:total_item_files_doc\" class=\"badge badge-danger\" title=\"Количество файлов в разделе\">{{#items}}{{files.length}}{{/items}}</span> Вложенные файлы\n\t </h4>\n\t <div>\n\t  {{#isNotSent}}\n\t  <p>Поддерживаются следующие форматы: {{#allowedFileExt}}<mark>{{ext}}</mark>{{/allowedFileExt}}</p>\n\t  <p>Максимальный размер файла для загрузки:<mark>{{maxFileSize}}</mark></p>\n\t  <p>Добавьте файлы и затем нажмите \"загрузить\".</p>\n\t  \n\t  <div id=\"upload-container\">\n\t   <div id=\"{{id}}:file-upload\" style=\"display:inline;\" class=\"btn bg-{{COLOR_CLASS}}\" type=\"button\" title=\"Загрузить на сервер добавленные файлы\">Загрузить все файлы  <span id=\"{{id}}:total_upload_files\" class=\"badge badge-danger\" title=\"Количество файлов для загрузки\">0</span></div>\n\t   {{#attFromTemplate}}\n\t   <div id=\"{{id}}:attFromTemplate\" style=\"display:inline;\">\n\t   </div>\n\t   {{/attFromTemplate}}\n\t   {{#order1c}}\n\t   <div id=\"{{id}}:order1c\" style=\"display:inline;\" title=\"Выписать новый счет в 1с\">\n\t    <img id=\"{{id}}:order1c:wait\" src=\"img/wait-sm.gif\">\n\t    </img>\n\t   </div>\n\t   {{/order1c}}\n\t   {{#akt1c}}\n\t   <div id=\"{{id}}:akt1c\" title=\"Выписать новый акт в 1с\">\n\t    <img id=\"{{id}}:akt1c:wait\" src=\"img/wait-sm.gif\">\n\t    </img>\n\t   </div>\n\t   {{/akt1c}}\n\t   \n\t\n\t   <div class=\"progress hide\" id=\"{{id}}:upload-progress\" style=\"margin-top:7px;\">\n\t    <div class=\"progress-bar progress-bar-success\" role=\"progressbar\"\n\t    aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"width:0%\">\n\t     <span id=\"{{id}}:upload-progress-val\"></span>\n\t    </div>\n\t   </div>   \n\t  </div> \n\t  {{/isNotSent}}\n\t  <div class=\"uploader-file-list-doc\" item_id=\"doc\">\n\t   {{#isNotSent}}\n\t   \n\t   <div id=\"{{id}}:file-add\" class=\"uploader-file-add-doc btn btn-sm\" title=\"Добавить файл\">\n\t    <i class=\"glyphicon glyphicon-plus\"></i>\n\t    <span class=\"text-thin\">Добавьте файлы кнопкой или перетаскиванием в эту область</span>\n\t   </div>\n\t   {{/isNotSent}}\n\t\n\t   <ul id=\"{{id}}:file-list_doc\">\n\t   {{#items}}\n\t   {{#files}}\n\t    <li id=\"{{id}}:file_{{file_id}}\">\n\t    </li>\n\t   {{/files}}\n\t   {{/items}}\n\t   </ul>\n\t  </div>      \n\t </div>\n\t</div> \n\t","DocFolderAttachments":"<div id=\"{{id}}\">\n\t <div class=\"panel-group panel-group-control content-group-lg\"> \n\t  {{#items}}\n\t  <div class=\"panel\">\n\t   <div class=\"panel-heading bg-info\">\n\t    <h6 class=\"panel-title\">\n\t     <a data-toggle=\"collapse\" href=\"#collapsible-control-group_{{fields.id}}\" aria-expanded=\"false\" class=\"collapsed file_section\">\n\t     <span id=\"{{id}}:total_item_files_{{fields.id}}\" class=\"badge badge-danger\" title=\"Количество файлов в разделе\">{{files.length}}</span> {{fields.descr}}</a>\n\t    </h6>\n\t   </div>\n\t   <div id=\"collapsible-control-group_{{fields.id}}\" class=\"panel-collapse collapse\" aria-expanded=\"false\" style=\"height: 0px;\">\n\t    <div class=\"panel-body\">    \n\t     <div class=\"uploader-file-list\" item_id=\"{{fields.id}}\">      \n\t      <ul id=\"{{id}}:file-list_{{fields.id}}\">\n\t      {{#files}}\n\t       <li id=\"{{id}}:file_{{file_id}}\">\n\t       </li>\n\t      {{/files}}\n\t      </ul>\n\t     </div>     \n\t    </div>\n\t   </div>\n\t  </div>\n\t  {{/items}}\n\t </div>\n\t</div> \n\t","ApplicationFile":"<li id=\"{{id}}\" {{#file_uploaded}}uploaded=\"true\"{{/file_uploaded}} file_id=\"{{file_id}}\" file_name=\"{{file_name}}\" class=\"appFileItem\">\n\t {{#file_not_deleted}}\n\t  {{#file_uploaded}}\n\t  <i class=\"glyphicon glyphicon-ok\" title=\"Файл загружен на сервер\"></i> \n\t  {{/file_uploaded}}\n\t  \n\t  {{#file_not_uploaded}}\n\t  <i class=\"file-pic-{{docType}} glyphicon glyphicon-cloud-upload\" title=\"Необходимо загрузить файл!\"></i>\n\t  {{/file_not_uploaded}}\n\t    \n\t  {{#separateSignature}}  \n\t   {{#file_signed}}\n\t   <i id=\"{{id}}_sig\" class=\"icon-file-locked\" title=\"Файл подписан ЭЦП\"></i> \n\t   {{/file_signed}}\n\t  \n\t   {{#file_not_signed}}\n\t   <i id=\"{{id}}_sig\" class=\"icon-file-minus\" title=\"Необходимо загрузить файл ЭЦП\"></i> \n\t   {{/file_not_signed}}  \n\t  {{/separateSignature}}\n\t  \n\t {{/file_not_deleted}}\n\t \n\t {{#file_deleted}}\n\t  <i class=\"glyphicon glyphicon-remove\" title=\"Файл удален\"></i> \n\t {{/file_deleted}}\n\t \n\t {{file_path}}\n\t <a id=\"{{id}}_href\" href=\"#\" title=\"{{refTitle}}\" download_href=\"true\" file_uploaded=\"{{file_uploaded}}\" class=\"{{refClass}}\">\n\t  {{#file_not_deleted}}\n\t  {{file_name}} ({{file_size_formatted}}, {{file_date_time_formatted}})\n\t  {{/file_not_deleted}}\n\t  \n\t  {{#file_deleted}}\n\t  <span class=\"text-thin appFileDeleted\" title=\"Удален {{file_deleted_dt}}\">\n\t  {{file_name}} ({{file_size_formatted}}, {{file_date_time_formatted}})\n\t  </span>\n\t  {{/file_deleted}}  \n\t </a>\n\t \n\t {{#file_not_deleted}}\n\t \n\t {{#file_deletable}}\n\t <div id=\"{{id}}_del\" class=\"btn btn-sm fileDeleteBtn\" title=\"Удалить файл\">\n\t  <i class=\"glyphicon glyphicon-trash\"></i> \n\t </div>\n\t {{/file_deletable}}\n\t\n\t {{#out_file_id}}\n\t <a id=\"{{id}}_outSig\" href=\"#\" class=\"btn btn-sm fileOutSigBtn\" title=\"Скачать ЭЦП заказчика\">ЭЦП заказчика\n\t </a>\n\t {{/out_file_id}}\n\t \n\t {{#customFolder}}\n\t <span id=\"{{id}}:include\">\n\t <span id=\"{{id}}:include:check\"></span>\n\t <span id=\"{{id}}:include:folder\"></span>\n\t </span>\n\t {{/customFolder}}\n\t \n\t {{/file_not_deleted}}\n\t</li>\n\t\n\t","MailAttachment":"<li id=\"{{id}}\" {{#file_uploaded}}uploaded=\"true\"{{/file_uploaded}} file_id=\"{{file_id}}\" file_name=\"{{file_name}}\">\n\t {{#file_uploaded}}\n\t <i class=\"glyphicon glyphicon-ok\" title=\"Файл загружен на сервер\"></i> \n\t {{/file_uploaded}}\n\t {{#file_not_uploaded}}\n\t <i class=\"file-pic glyphicon glyphicon-cloud-upload\" title=\"Необходимо загрузить файл!\"></i>\n\t {{/file_not_uploaded}}\n\t \n\t {{#file_signed}}\n\t <a id=\"{{id}}_href_sig\" href=\"#\">\n\t  <i class=\"icon-file-locked\" title=\"Файл подписан ЭЦП\"></i> \n\t </a>\n\t {{/file_signed}}\n\t {{#file_not_signed}}\n\t <a id=\"{{id}}_href_sig\" href=\"#\">\n\t  <i class=\"icon-file-minus\" title=\"Необходимо загрузить файл ЭЦП\"></i> \n\t </a> \n\t {{/file_not_signed}}\n\t \n\t <a id=\"{{id}}_href\" href=\"#\" title=\"Скачать файл\">\n\t  {{file_name}}({{file_size_formatted}})\n\t </a>\n\t {{#isNotSent}}<div id=\"{{id}}_del\" class=\"btn btn-sm fileDeleteBtn\" title=\"Удалить файл\"></div>{{/isNotSent}}\n\t</li>\n\t\n\t","ApplicationClientContainer":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:container\">\n\t </div>\n\t {{#isClient}}\n\t <div id=\"{{id}}:cmdAdd\">\n\t </div> \n\t {{/isClient}}\n\t</div>\n\t","CompoundObjTechFeatureCont":"<div id=\"{{id}}\">\n\t {{#isClient}}\n\t <div id=\"{{id}}:cmdAdd\">\n\t </div> \n\t {{/isClient}}\n\t\n\t <div id=\"{{id}}:container\">\n\t </div>\n\t</div>\n\t","CompoundObjTechFeature":"<div id=\"{{id}}\" class=\"{{panelClass}}\">\n\t <div class=\"panel-heading\">\n\t  <!--  {{IND}} -->\n\t  <h6 class=\"panel-title\">\n\t   <span class=\"text-semibold\">{{IND}}) Сведения о здании, сооружении в составе сложного</span>\n\t   <a class=\"heading-elements-toggle\">\n\t    <i class=\"icon-more\"></i>\n\t   </a>\n\t  </h6>    \n\t  <div class=\"heading-elements\">\n\t   <ul class=\"icons-list\">\n\t    <li><a id=\"{{id}}:cmdToggle\" data-action=\"collapse\" class=\"\"></a></li>\n\t    {{#cmdClose}}\n\t    <li><a id=\"{{id}}:cmdClose\" data-action=\"close\" ind=\"{{IND}}\"></a></li>\n\t    {{/cmdClose}}\n\t   </ul>\n\t  </div>\n\t </div>\n\t \n\t <div class=\"panel-body\" style=\"display: block;\"> \n\t \n\t  <div id=\"{{id}}:grid\">\n\t  </div> \n\t </div>\n\t</div>\n\t\n\t","ApplicationPrimaryContTmpl":"<fieldset id=\"{{id}}\">\n\t <legend>Первичная или повторная экспертиза</legend>\n\t <div class=\"col-lg-4\">\n\t  <div id=\"{{id}}:grp\">\n\t  </div>\n\t </div> \n\t <div class=\"col-lg-8\">\n\t  <div id=\"{{id}}:primary_ref\">\n\t  </div>\n\t  <div id=\"{{id}}:primary_reg_number\">\n\t  </div>\n\t </div> \n\t</fieldset>\n\t","ApplicationServiceCont":"<div id=\"{{id}}\">\n\t <div class=\"row\">\n\t  <div class=\"col-lg-6 service-type-out\">\n\t   <div id=\"{{id}}:expertise-panel\" class=\"panel service-type service-type-en bg-grey-300\">\n\t    <div class=\"panel-heading\">\n\t     <h4 class=\"panel-title\" title=\"Провести государственную экспертизу проектной документации и/или результатов инженерных изысканий\">\n\t      <div id=\"{{id}}:expertise\">\n\t      </div>\n\t     </h4>\n\t    </div>\n\t    <div class=\"panel-body\">\n\t     <div id=\"{{id}}:expertise_type\">\n\t     </div>\n\t    </div> \n\t   </div> \n\t  </div> \n\t\n\t  <div class=\"col-lg-6 service-type-out\">\n\t   <div id=\"{{id}}:cost_eval_validity-panel\" class=\"panel service-type service-type-en bg-grey-300\">\n\t    <div class=\"panel-heading\">\n\t     <h4 class=\"panel-title\" title=\"Провести проверку достоверности определения сметной стоимости\">\n\t      <div id=\"{{id}}:cost_eval_validity\"/>\n\t     </h4>\n\t    </div>\n\t    <div class=\"panel-body\">\n\t     <div id=\"{{id}}:cost_eval_validity_simult\">\n\t     </div>\n\t    </div>    \n\t   </div> \n\t  </div> \n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"col-lg-6 service-type-out\">\n\t   <div id=\"{{id}}:modification-panel\" class=\"panel service-type service-type-en bg-grey-300\">\n\t    <div class=\"panel-heading\">\n\t     <h4 class=\"panel-title\" title=\"Провести модификацию\">\n\t      <div id=\"{{id}}:modification\"/>\n\t     </h4>\n\t    </div>\n\t    <div class=\"panel-body\">\n\t     <div id=\"{{id}}:primary_application\">\n\t     </div>\n\t    </div> \n\t   </div> \n\t  \n\t  </div> \n\t  <div class=\"col-lg-6 service-type-out\">\n\t   <div id=\"{{id}}:audit-panel\" class=\"panel service-type service-type-en bg-grey-300\">\n\t    <div class=\"panel-heading\">\n\t     <h4 class=\"panel-title\" title=\"Провести аудит\">\n\t      <div id=\"{{id}}:audit\"/>\n\t     </h4>\n\t    </div>\n\t   </div> \n\t  </div> \n\t </div>  \n\t</div>\n\t","IcomoonList":"<div class=\"row glyphs\">\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home\"></i> icon-home</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home2\"></i> icon-home2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home5\"></i> icon-home5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home7\"></i> icon-home7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home8\"></i> icon-home8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home9\"></i> icon-home9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-office\"></i> icon-office</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-city\"></i> icon-city</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-newspaper\"></i> icon-newspaper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magazine\"></i> icon-magazine</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-design\"></i> icon-design</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil\"></i> icon-pencil</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil3\"></i> icon-pencil3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil4\"></i> icon-pencil4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil5\"></i> icon-pencil5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil6\"></i> icon-pencil6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil7\"></i> icon-pencil7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser\"></i> icon-eraser</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser2\"></i> icon-eraser2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eraser3\"></i> icon-eraser3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quill2\"></i> icon-quill2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quill4\"></i> icon-quill4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen\"></i> icon-pen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen-plus\"></i> icon-pen-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen-minus\"></i> icon-pen-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen2\"></i> icon-pen2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blog\"></i> icon-blog</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pen6\"></i> icon-pen6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-brush\"></i> icon-brush</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spray\"></i> icon-spray</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-color-sampler\"></i> icon-color-sampler</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-toggle\"></i> icon-toggle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bucket\"></i> icon-bucket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gradient\"></i> icon-gradient</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper\"></i> icon-eyedropper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper2\"></i> icon-eyedropper2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eyedropper3\"></i> icon-eyedropper3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplet\"></i> icon-droplet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplet2\"></i> icon-droplet2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-color-clear\"></i> icon-color-clear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paint-format\"></i> icon-paint-format</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stamp\"></i> icon-stamp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image2\"></i> icon-image2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image-compare\"></i> icon-image-compare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-images2\"></i> icon-images2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image3\"></i> icon-image3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-images3\"></i> icon-images3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image4\"></i> icon-image4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-image5\"></i> icon-image5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-camera\"></i> icon-camera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shutter\"></i> icon-shutter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-headphones\"></i> icon-headphones</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-headset\"></i> icon-headset</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-music\"></i> icon-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-album\"></i> icon-album</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tape\"></i> icon-tape</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-piano\"></i> icon-piano</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speakers\"></i> icon-speakers</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play\"></i> icon-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clapboard-play\"></i> icon-clapboard-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clapboard\"></i> icon-clapboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-media\"></i> icon-media</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-presentation\"></i> icon-presentation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-movie\"></i> icon-movie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film\"></i> icon-film</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film2\"></i> icon-film2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film3\"></i> icon-film3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-film4\"></i> icon-film4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera\"></i> icon-video-camera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera2\"></i> icon-video-camera2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera-slash\"></i> icon-video-camera-slash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-video-camera3\"></i> icon-video-camera3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dice\"></i> icon-dice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess-king\"></i> icon-chess-king</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess-queen\"></i> icon-chess-queen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chess\"></i> icon-chess</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-megaphone\"></i> icon-megaphone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new\"></i> icon-new</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-connection\"></i> icon-connection</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-station\"></i> icon-station</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-satellite-dish2\"></i> icon-satellite-dish2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed\"></i> icon-feed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mic2\"></i> icon-mic2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mic-off2\"></i> icon-mic-off2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book\"></i> icon-book</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book2\"></i> icon-book2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book-play\"></i> icon-book-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-book3\"></i> icon-book3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark\"></i> icon-bookmark</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-books\"></i> icon-books</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-archive\"></i> icon-archive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reading\"></i> icon-reading</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-library2\"></i> icon-library2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graduation2\"></i> icon-graduation2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text\"></i> icon-file-text</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-profile\"></i> icon-profile</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-empty\"></i> icon-file-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-empty2\"></i> icon-file-empty2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-files-empty\"></i> icon-files-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-files-empty2\"></i> icon-files-empty2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-plus\"></i> icon-file-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-plus2\"></i> icon-file-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-minus\"></i> icon-file-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-minus2\"></i> icon-file-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-download\"></i> icon-file-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-download2\"></i> icon-file-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-upload\"></i> icon-file-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-upload2\"></i> icon-file-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-check\"></i> icon-file-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-check2\"></i> icon-file-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-eye\"></i> icon-file-eye</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-eye2\"></i> icon-file-eye2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text2\"></i> icon-file-text2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-text3\"></i> icon-file-text3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-picture\"></i> icon-file-picture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-picture2\"></i> icon-file-picture2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-music\"></i> icon-file-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-music2\"></i> icon-file-music2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-play\"></i> icon-file-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-play2\"></i> icon-file-play2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-video\"></i> icon-file-video</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-video2\"></i> icon-file-video2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy\"></i> icon-copy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy2\"></i> icon-copy2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-zip\"></i> icon-file-zip</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-zip2\"></i> icon-file-zip2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-xml\"></i> icon-file-xml</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-xml2\"></i> icon-file-xml2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-css\"></i> icon-file-css</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-css2\"></i> icon-file-css2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-presentation\"></i> icon-file-presentation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-presentation2\"></i> icon-file-presentation2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-stats\"></i> icon-file-stats</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-stats2\"></i> icon-file-stats2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-locked\"></i> icon-file-locked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-locked2\"></i> icon-file-locked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-spreadsheet\"></i> icon-file-spreadsheet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-spreadsheet2\"></i> icon-file-spreadsheet2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy3\"></i> icon-copy3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-copy4\"></i> icon-copy4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste\"></i> icon-paste</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste2\"></i> icon-paste2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste3\"></i> icon-paste3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paste4\"></i> icon-paste4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack\"></i> icon-stack</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack2\"></i> icon-stack2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack3\"></i> icon-stack3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder\"></i> icon-folder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-search\"></i> icon-folder-search</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download\"></i> icon-folder-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload\"></i> icon-folder-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus\"></i> icon-folder-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus2\"></i> icon-folder-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus\"></i> icon-folder-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus2\"></i> icon-folder-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-check\"></i> icon-folder-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-heart\"></i> icon-folder-heart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-remove\"></i> icon-folder-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder2\"></i> icon-folder2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open\"></i> icon-folder-open</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder3\"></i> icon-folder3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder4\"></i> icon-folder4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus3\"></i> icon-folder-plus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus3\"></i> icon-folder-minus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-plus4\"></i> icon-folder-plus4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-minus4\"></i> icon-folder-minus4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download2\"></i> icon-folder-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload2\"></i> icon-folder-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-download3\"></i> icon-folder-download3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-upload3\"></i> icon-folder-upload3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder5\"></i> icon-folder5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open2\"></i> icon-folder-open2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder6\"></i> icon-folder6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-folder-open3\"></i> icon-folder-open3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-certificate\"></i> icon-certificate</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cc\"></i> icon-cc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag\"></i> icon-price-tag</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag2\"></i> icon-price-tag2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tags\"></i> icon-price-tags</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tag3\"></i> icon-price-tag3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-price-tags2\"></i> icon-price-tags2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-barcode2\"></i> icon-barcode2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-qrcode\"></i> icon-qrcode</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ticket\"></i> icon-ticket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-theater\"></i> icon-theater</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-store\"></i> icon-store</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-store2\"></i> icon-store2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart\"></i> icon-cart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart2\"></i> icon-cart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart4\"></i> icon-cart4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart5\"></i> icon-cart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-add\"></i> icon-cart-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-add2\"></i> icon-cart-add2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cart-remove\"></i> icon-cart-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-basket\"></i> icon-basket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bag\"></i> icon-bag</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-percent\"></i> icon-percent</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coins\"></i> icon-coins</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-dollar\"></i> icon-coin-dollar</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-euro\"></i> icon-coin-euro</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-pound\"></i> icon-coin-pound</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coin-yen\"></i> icon-coin-yen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-piggy-bank\"></i> icon-piggy-bank</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wallet\"></i> icon-wallet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash\"></i> icon-cash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash2\"></i> icon-cash2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash3\"></i> icon-cash3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cash4\"></i> icon-cash4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-credit-card\"></i> icon-credit-card</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-credit-card2\"></i> icon-credit-card2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator4\"></i> icon-calculator4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator2\"></i> icon-calculator2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator3\"></i> icon-calculator3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chip\"></i> icon-chip</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lifebuoy\"></i> icon-lifebuoy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone\"></i> icon-phone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone2\"></i> icon-phone2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-slash\"></i> icon-phone-slash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-wave\"></i> icon-phone-wave</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-plus\"></i> icon-phone-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-minus\"></i> icon-phone-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-plus2\"></i> icon-phone-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-minus2\"></i> icon-phone-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-incoming\"></i> icon-phone-incoming</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-outgoing\"></i> icon-phone-outgoing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-phone-hang-up\"></i> icon-phone-hang-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book\"></i> icon-address-book</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book2\"></i> icon-address-book2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-address-book3\"></i> icon-address-book3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-notebook\"></i> icon-notebook</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop\"></i> icon-envelop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop2\"></i> icon-envelop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop3\"></i> icon-envelop3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop4\"></i> icon-envelop4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelop5\"></i> icon-envelop5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mailbox\"></i> icon-mailbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pushpin\"></i> icon-pushpin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-location3\"></i> icon-location3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-location4\"></i> icon-location4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-compass4\"></i> icon-compass4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map\"></i> icon-map</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map4\"></i> icon-map4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-map5\"></i> icon-map5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-direction\"></i> icon-direction</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reset\"></i> icon-reset</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-history\"></i> icon-history</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-watch\"></i> icon-watch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-watch2\"></i> icon-watch2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm\"></i> icon-alarm</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-add\"></i> icon-alarm-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-check\"></i> icon-alarm-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alarm-cancel\"></i> icon-alarm-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell2\"></i> icon-bell2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell3\"></i> icon-bell3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-plus\"></i> icon-bell-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-minus\"></i> icon-bell-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-check\"></i> icon-bell-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bell-cross\"></i> icon-bell-cross</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar\"></i> icon-calendar</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar2\"></i> icon-calendar2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar3\"></i> icon-calendar3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar52\"></i> icon-calendar52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer\"></i> icon-printer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer2\"></i> icon-printer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-printer4\"></i> icon-printer4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shredder\"></i> icon-shredder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse\"></i> icon-mouse</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse-left\"></i> icon-mouse-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mouse-right\"></i> icon-mouse-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-keyboard\"></i> icon-keyboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-typewriter\"></i> icon-typewriter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-display\"></i> icon-display</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-display4\"></i> icon-display4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-laptop\"></i> icon-laptop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile\"></i> icon-mobile</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile2\"></i> icon-mobile2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tablet\"></i> icon-tablet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mobile3\"></i> icon-mobile3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tv\"></i> icon-tv</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio\"></i> icon-radio</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cabinet\"></i> icon-cabinet</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer\"></i> icon-drawer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer2\"></i> icon-drawer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer-out\"></i> icon-drawer-out</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer-in\"></i> icon-drawer-in</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drawer3\"></i> icon-drawer3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box\"></i> icon-box</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box-add\"></i> icon-box-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-box-remove\"></i> icon-box-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download\"></i> icon-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload\"></i> icon-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-floppy-disk\"></i> icon-floppy-disk</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-floppy-disks\"></i> icon-floppy-disks</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-usb-stick\"></i> icon-usb-stick</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drive\"></i> icon-drive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-server\"></i> icon-server</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database\"></i> icon-database</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database2\"></i> icon-database2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database4\"></i> icon-database4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-menu\"></i> icon-database-menu</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-add\"></i> icon-database-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-remove\"></i> icon-database-remove</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-insert\"></i> icon-database-insert</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-export\"></i> icon-database-export</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-upload\"></i> icon-database-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-refresh\"></i> icon-database-refresh</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-diff\"></i> icon-database-diff</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-edit2\"></i> icon-database-edit2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-check\"></i> icon-database-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-arrow\"></i> icon-database-arrow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-database-time2\"></i> icon-database-time2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-undo\"></i> icon-undo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-redo\"></i> icon-redo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw\"></i> icon-rotate-ccw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw\"></i> icon-rotate-cw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw2\"></i> icon-rotate-ccw2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw2\"></i> icon-rotate-cw2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-ccw3\"></i> icon-rotate-ccw3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rotate-cw3\"></i> icon-rotate-cw3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical2\"></i> icon-flip-vertical2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-horizontal2\"></i> icon-flip-horizontal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical3\"></i> icon-flip-vertical3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flip-vertical4\"></i> icon-flip-vertical4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-angle\"></i> icon-angle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shear\"></i> icon-shear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-left\"></i> icon-align-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-center-horizontal\"></i> icon-align-center-horizontal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-right\"></i> icon-align-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-top\"></i> icon-align-top</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-center-vertical\"></i> icon-align-center-vertical</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-align-bottom\"></i> icon-align-bottom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-undo2\"></i> icon-undo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-redo2\"></i> icon-redo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward\"></i> icon-forward</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reply\"></i> icon-reply</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reply-all\"></i> icon-reply-all</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble\"></i> icon-bubble</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles\"></i> icon-bubbles</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles2\"></i> icon-bubbles2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble2\"></i> icon-bubble2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles3\"></i> icon-bubbles3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles4\"></i> icon-bubbles4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-notification\"></i> icon-bubble-notification</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles5\"></i> icon-bubbles5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles6\"></i> icon-bubbles6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble6\"></i> icon-bubble6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles7\"></i> icon-bubbles7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble7\"></i> icon-bubble7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles8\"></i> icon-bubbles8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble8\"></i> icon-bubble8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-dots3\"></i> icon-bubble-dots3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-lines3\"></i> icon-bubble-lines3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble9\"></i> icon-bubble9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-dots4\"></i> icon-bubble-dots4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubble-lines4\"></i> icon-bubble-lines4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles9\"></i> icon-bubbles9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bubbles10\"></i> icon-bubbles10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user\"></i> icon-user</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users\"></i> icon-users</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-plus\"></i> icon-user-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-minus\"></i> icon-user-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-cancel\"></i> icon-user-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-block\"></i> icon-user-block</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-lock\"></i> icon-user-lock</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-check\"></i> icon-user-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users2\"></i> icon-users2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-users4\"></i> icon-users4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-user-tie\"></i> icon-user-tie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-collaboration\"></i> icon-collaboration</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vcard\"></i> icon-vcard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hat\"></i> icon-hat</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bowtie\"></i> icon-bowtie</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-left\"></i> icon-quotes-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-right\"></i> icon-quotes-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-left2\"></i> icon-quotes-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-quotes-right2\"></i> icon-quotes-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass\"></i> icon-hour-glass</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass2\"></i> icon-hour-glass2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hour-glass3\"></i> icon-hour-glass3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner\"></i> icon-spinner</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner2\"></i> icon-spinner2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner3\"></i> icon-spinner3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner4\"></i> icon-spinner4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner6\"></i> icon-spinner6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner9\"></i> icon-spinner9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner10\"></i> icon-spinner10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spinner11\"></i> icon-spinner11</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-microscope\"></i> icon-microscope</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge\"></i> icon-enlarge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink\"></i> icon-shrink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge3\"></i> icon-enlarge3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink3\"></i> icon-shrink3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge5\"></i> icon-enlarge5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink5\"></i> icon-shrink5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge6\"></i> icon-enlarge6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink6\"></i> icon-shrink6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enlarge7\"></i> icon-enlarge7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shrink7\"></i> icon-shrink7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-key\"></i> icon-key</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock\"></i> icon-lock</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock2\"></i> icon-lock2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock4\"></i> icon-lock4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlocked\"></i> icon-unlocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lock5\"></i> icon-lock5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlocked2\"></i> icon-unlocked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-safe\"></i> icon-safe</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench\"></i> icon-wrench</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench2\"></i> icon-wrench2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wrench3\"></i> icon-wrench3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer\"></i> icon-equalizer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer2\"></i> icon-equalizer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer3\"></i> icon-equalizer3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-equalizer4\"></i> icon-equalizer4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog\"></i> icon-cog</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cogs\"></i> icon-cogs</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog2\"></i> icon-cog2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog3\"></i> icon-cog3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog4\"></i> icon-cog4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog52\"></i> icon-cog52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog6\"></i> icon-cog6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog7\"></i> icon-cog7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer\"></i> icon-hammer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer-wrench\"></i> icon-hammer-wrench</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magic-wand\"></i> icon-magic-wand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-magic-wand2\"></i> icon-magic-wand2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pulse2\"></i> icon-pulse2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-aid-kit\"></i> icon-aid-kit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bug2\"></i> icon-bug2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-construction\"></i> icon-construction</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-traffic-cone\"></i> icon-traffic-cone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-traffic-lights\"></i> icon-traffic-lights</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart\"></i> icon-pie-chart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart2\"></i> icon-pie-chart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart3\"></i> icon-pie-chart3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart4\"></i> icon-pie-chart4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart5\"></i> icon-pie-chart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart6\"></i> icon-pie-chart6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart7\"></i> icon-pie-chart7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-dots\"></i> icon-stats-dots</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars\"></i> icon-stats-bars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie-chart8\"></i> icon-pie-chart8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars2\"></i> icon-stats-bars2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars3\"></i> icon-stats-bars3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-bars4\"></i> icon-stats-bars4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chart\"></i> icon-chart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-growth\"></i> icon-stats-growth</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-decline\"></i> icon-stats-decline</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-growth2\"></i> icon-stats-growth2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stats-decline2\"></i> icon-stats-decline2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs-up\"></i> icon-stairs-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs-down\"></i> icon-stairs-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stairs\"></i> icon-stairs</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ladder\"></i> icon-ladder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating\"></i> icon-rating</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating2\"></i> icon-rating2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rating3\"></i> icon-rating3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-podium\"></i> icon-podium</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stars\"></i> icon-stars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-star\"></i> icon-medal-star</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal\"></i> icon-medal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal2\"></i> icon-medal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-first\"></i> icon-medal-first</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-second\"></i> icon-medal-second</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-medal-third\"></i> icon-medal-third</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crown\"></i> icon-crown</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy2\"></i> icon-trophy2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy3\"></i> icon-trophy3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond\"></i> icon-diamond</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trophy4\"></i> icon-trophy4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gift\"></i> icon-gift</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pipe\"></i> icon-pipe</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mustache\"></i> icon-mustache</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cup2\"></i> icon-cup2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-coffee\"></i> icon-coffee</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paw\"></i> icon-paw</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-footprint\"></i> icon-footprint</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rocket\"></i> icon-rocket</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter2\"></i> icon-meter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter-slow\"></i> icon-meter-slow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-meter-fast\"></i> icon-meter-fast</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hammer2\"></i> icon-hammer2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-balance\"></i> icon-balance</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fire\"></i> icon-fire</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fire2\"></i> icon-fire2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lab\"></i> icon-lab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-atom\"></i> icon-atom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-atom2\"></i> icon-atom2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bin\"></i> icon-bin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bin2\"></i> icon-bin2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-briefcase\"></i> icon-briefcase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-briefcase3\"></i> icon-briefcase3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane2\"></i> icon-airplane2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane3\"></i> icon-airplane3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-airplane4\"></i> icon-airplane4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paperplane\"></i> icon-paperplane</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-car\"></i> icon-car</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steering-wheel\"></i> icon-steering-wheel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-car2\"></i> icon-car2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gas\"></i> icon-gas</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bus\"></i> icon-bus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-truck\"></i> icon-truck</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bike\"></i> icon-bike</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-road\"></i> icon-road</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-train\"></i> icon-train</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-train2\"></i> icon-train2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ship\"></i> icon-ship</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-boat\"></i> icon-boat</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chopper\"></i> icon-chopper</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube\"></i> icon-cube</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube2\"></i> icon-cube2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube3\"></i> icon-cube3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cube4\"></i> icon-cube4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pyramid\"></i> icon-pyramid</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pyramid2\"></i> icon-pyramid2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-package\"></i> icon-package</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle\"></i> icon-puzzle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle2\"></i> icon-puzzle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle3\"></i> icon-puzzle3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-puzzle4\"></i> icon-puzzle4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-glasses-3d2\"></i> icon-glasses-3d2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-brain\"></i> icon-brain</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-accessibility\"></i> icon-accessibility</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-accessibility2\"></i> icon-accessibility2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strategy\"></i> icon-strategy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-target\"></i> icon-target</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-target2\"></i> icon-target2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield-check\"></i> icon-shield-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield-notice\"></i> icon-shield-notice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shield2\"></i> icon-shield2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-racing\"></i> icon-racing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-finish\"></i> icon-finish</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power2\"></i> icon-power2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power3\"></i> icon-power3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch\"></i> icon-switch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch22\"></i> icon-switch22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-power-cord\"></i> icon-power-cord</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard\"></i> icon-clipboard</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard2\"></i> icon-clipboard2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard3\"></i> icon-clipboard3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard4\"></i> icon-clipboard4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard5\"></i> icon-clipboard5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clipboard6\"></i> icon-clipboard6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-playlist\"></i> icon-playlist</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-playlist-add\"></i> icon-playlist-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-numbered\"></i> icon-list-numbered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list\"></i> icon-list</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list2\"></i> icon-list2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-more\"></i> icon-more</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-more2\"></i> icon-more2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid\"></i> icon-grid</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid2\"></i> icon-grid2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid3\"></i> icon-grid3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid4\"></i> icon-grid4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid52\"></i> icon-grid52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid6\"></i> icon-grid6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid7\"></i> icon-grid7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree5\"></i> icon-tree5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree6\"></i> icon-tree6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tree7\"></i> icon-tree7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan\"></i> icon-lan</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan2\"></i> icon-lan2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lan3\"></i> icon-lan3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu\"></i> icon-menu</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-small\"></i> icon-circle-small</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu2\"></i> icon-menu2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu3\"></i> icon-menu3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu4\"></i> icon-menu4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu5\"></i> icon-menu5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu62\"></i> icon-menu62</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu7\"></i> icon-menu7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu8\"></i> icon-menu8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu9\"></i> icon-menu9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu10\"></i> icon-menu10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud\"></i> icon-cloud</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-download\"></i> icon-cloud-download</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-upload\"></i> icon-cloud-upload</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-check\"></i> icon-cloud-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud2\"></i> icon-cloud2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-download2\"></i> icon-cloud-download2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-upload2\"></i> icon-cloud-upload2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cloud-check2\"></i> icon-cloud-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-import\"></i> icon-import</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download4\"></i> icon-download4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload4\"></i> icon-upload4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download7\"></i> icon-download7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload7\"></i> icon-upload7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-download10\"></i> icon-download10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-upload10\"></i> icon-upload10</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sphere\"></i> icon-sphere</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sphere3\"></i> icon-sphere3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-earth\"></i> icon-earth</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-link\"></i> icon-link</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlink\"></i> icon-unlink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-link2\"></i> icon-link2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unlink2\"></i> icon-unlink2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-anchor\"></i> icon-anchor</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag3\"></i> icon-flag3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag4\"></i> icon-flag4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag7\"></i> icon-flag7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flag8\"></i> icon-flag8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-attachment\"></i> icon-attachment</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-attachment2\"></i> icon-attachment2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye\"></i> icon-eye</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-plus\"></i> icon-eye-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-minus\"></i> icon-eye-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-blocked\"></i> icon-eye-blocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye2\"></i> icon-eye2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye-blocked2\"></i> icon-eye-blocked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye4\"></i> icon-eye4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark2\"></i> icon-bookmark2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark3\"></i> icon-bookmark3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmarks\"></i> icon-bookmarks</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bookmark4\"></i> icon-bookmark4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spotlight2\"></i> icon-spotlight2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-starburst\"></i> icon-starburst</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-snowflake\"></i> icon-snowflake</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-weather-windy\"></i> icon-weather-windy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fan\"></i> icon-fan</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-umbrella\"></i> icon-umbrella</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sun3\"></i> icon-sun3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-contrast\"></i> icon-contrast</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bed2\"></i> icon-bed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-furniture\"></i> icon-furniture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chair\"></i> icon-chair</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-empty3\"></i> icon-star-empty3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-half\"></i> icon-star-half</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-star-full2\"></i> icon-star-full2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart5\"></i> icon-heart5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart6\"></i> icon-heart6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-heart-broken2\"></i> icon-heart-broken2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-up2\"></i> icon-thumbs-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-down2\"></i> icon-thumbs-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-up3\"></i> icon-thumbs-up3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-thumbs-down3\"></i> icon-thumbs-down3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-height\"></i> icon-height</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-man\"></i> icon-man</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-woman\"></i> icon-woman</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-man-woman\"></i> icon-man-woman</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yin-yang\"></i> icon-yin-yang</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cursor\"></i> icon-cursor</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cursor2\"></i> icon-cursor2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lasso2\"></i> icon-lasso2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-select2\"></i> icon-select2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-up\"></i> icon-point-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-right\"></i> icon-point-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-down\"></i> icon-point-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-point-left\"></i> icon-point-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pointer\"></i> icon-pointer</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reminder\"></i> icon-reminder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-left-right\"></i> icon-drag-left-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-left\"></i> icon-drag-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-drag-right\"></i> icon-drag-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch\"></i> icon-touch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-multitouch\"></i> icon-multitouch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch-zoom\"></i> icon-touch-zoom</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-touch-pinch\"></i> icon-touch-pinch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hand\"></i> icon-hand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grab\"></i> icon-grab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-empty\"></i> icon-stack-empty</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-plus\"></i> icon-stack-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-minus\"></i> icon-stack-minus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-star\"></i> icon-stack-star</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-picture\"></i> icon-stack-picture</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-down\"></i> icon-stack-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-up\"></i> icon-stack-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-cancel\"></i> icon-stack-cancel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-check\"></i> icon-stack-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-text\"></i> icon-stack-text</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack4\"></i> icon-stack4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-music\"></i> icon-stack-music</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stack-play\"></i> icon-stack-play</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move\"></i> icon-move</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dots\"></i> icon-dots</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning\"></i> icon-warning</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning22\"></i> icon-warning22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-notification2\"></i> icon-notification2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question3\"></i> icon-question3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question4\"></i> icon-question4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus3\"></i> icon-plus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus3\"></i> icon-minus3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus-circle2\"></i> icon-plus-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus-circle2\"></i> icon-minus-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-circle2\"></i> icon-cancel-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blocked\"></i> icon-blocked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-square\"></i> icon-cancel-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cancel-square2\"></i> icon-cancel-square2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spam\"></i> icon-spam</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross2\"></i> icon-cross2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross3\"></i> icon-cross3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark\"></i> icon-checkmark</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark3\"></i> icon-checkmark3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark2\"></i> icon-checkmark2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark4\"></i> icon-checkmark4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spell-check\"></i> icon-spell-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-spell-check2\"></i> icon-spell-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter\"></i> icon-enter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit\"></i> icon-exit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter2\"></i> icon-enter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit2\"></i> icon-exit2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter3\"></i> icon-enter3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exit3\"></i> icon-exit3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wall\"></i> icon-wall</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fence\"></i> icon-fence</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play3\"></i> icon-play3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pause\"></i> icon-pause</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stop\"></i> icon-stop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-previous\"></i> icon-previous</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-next\"></i> icon-next</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backward\"></i> icon-backward</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward2\"></i> icon-forward2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-play4\"></i> icon-play4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pause2\"></i> icon-pause2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stop2\"></i> icon-stop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backward2\"></i> icon-backward2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forward3\"></i> icon-forward3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-first\"></i> icon-first</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-last\"></i> icon-last</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-previous2\"></i> icon-previous2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-next2\"></i> icon-next2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eject\"></i> icon-eject</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-high\"></i> icon-volume-high</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-medium\"></i> icon-volume-medium</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-low\"></i> icon-volume-low</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute\"></i> icon-volume-mute</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speaker-left\"></i> icon-speaker-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-speaker-right\"></i> icon-speaker-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute2\"></i> icon-volume-mute2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-increase\"></i> icon-volume-increase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-decrease\"></i> icon-volume-decrease</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-volume-mute5\"></i> icon-volume-mute5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop\"></i> icon-loop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop3\"></i> icon-loop3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-infinite-square\"></i> icon-infinite-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-infinite\"></i> icon-infinite</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-loop4\"></i> icon-loop4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shuffle\"></i> icon-shuffle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wave\"></i> icon-wave</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wave2\"></i> icon-wave2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-split\"></i> icon-split</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-merge\"></i> icon-merge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up5\"></i> icon-arrow-up5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right5\"></i> icon-arrow-right5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down5\"></i> icon-arrow-down5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left5\"></i> icon-arrow-left5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left2\"></i> icon-arrow-up-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up7\"></i> icon-arrow-up7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right2\"></i> icon-arrow-up-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right7\"></i> icon-arrow-right7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right2\"></i> icon-arrow-down-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down7\"></i> icon-arrow-down7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left2\"></i> icon-arrow-down-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left7\"></i> icon-arrow-left7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left3\"></i> icon-arrow-up-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up8\"></i> icon-arrow-up8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right3\"></i> icon-arrow-up-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right8\"></i> icon-arrow-right8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right3\"></i> icon-arrow-down-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down8\"></i> icon-arrow-down8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left3\"></i> icon-arrow-down-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left8\"></i> icon-arrow-left8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-up2\"></i> icon-circle-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-right2\"></i> icon-circle-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-down2\"></i> icon-circle-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-left2\"></i> icon-circle-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-resize7\"></i> icon-arrow-resize7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-resize8\"></i> icon-arrow-resize8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up-left\"></i> icon-square-up-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up\"></i> icon-square-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-up-right\"></i> icon-square-up-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-right\"></i> icon-square-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down-right\"></i> icon-square-down-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down\"></i> icon-square-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-down-left\"></i> icon-square-down-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square-left\"></i> icon-square-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up15\"></i> icon-arrow-up15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right15\"></i> icon-arrow-right15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down15\"></i> icon-arrow-down15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left15\"></i> icon-arrow-left15</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up16\"></i> icon-arrow-up16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right16\"></i> icon-arrow-right16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down16\"></i> icon-arrow-down16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left16\"></i> icon-arrow-left16</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-open\"></i> icon-menu-open</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-open2\"></i> icon-menu-open2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-close\"></i> icon-menu-close</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu-close2\"></i> icon-menu-close2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter5\"></i> icon-enter5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-esc\"></i> icon-esc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-enter6\"></i> icon-enter6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backspace\"></i> icon-backspace</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-backspace2\"></i> icon-backspace2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tab\"></i> icon-tab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-transmission\"></i> icon-transmission</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort\"></i> icon-sort</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-up2\"></i> icon-move-up2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-down2\"></i> icon-move-down2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-alpha-asc\"></i> icon-sort-alpha-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-alpha-desc\"></i> icon-sort-alpha-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-numeric-asc\"></i> icon-sort-numeric-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-numberic-desc\"></i> icon-sort-numberic-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-amount-asc\"></i> icon-sort-amount-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-amount-desc\"></i> icon-sort-amount-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-time-asc\"></i> icon-sort-time-asc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sort-time-desc\"></i> icon-sort-time-desc</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-6\"></i> icon-battery-6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-0\"></i> icon-battery-0</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-battery-charging\"></i> icon-battery-charging</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-command\"></i> icon-command</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-shift\"></i> icon-shift</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ctrl\"></i> icon-ctrl</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-opt\"></i> icon-opt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-checked\"></i> icon-checkbox-checked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-unchecked\"></i> icon-checkbox-unchecked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-partial\"></i> icon-checkbox-partial</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-square\"></i> icon-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-triangle\"></i> icon-triangle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-triangle2\"></i> icon-triangle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond3\"></i> icon-diamond3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diamond4\"></i> icon-diamond4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-checked2\"></i> icon-checkbox-checked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-unchecked2\"></i> icon-checkbox-unchecked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkbox-partial2\"></i> icon-checkbox-partial2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-checked\"></i> icon-radio-checked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-checked2\"></i> icon-radio-checked2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-radio-unchecked\"></i> icon-radio-unchecked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark-circle\"></i> icon-checkmark-circle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle\"></i> icon-circle</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle2\"></i> icon-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circles\"></i> icon-circles</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circles2\"></i> icon-circles2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crop\"></i> icon-crop</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-crop2\"></i> icon-crop2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-make-group\"></i> icon-make-group</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ungroup\"></i> icon-ungroup</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vector\"></i> icon-vector</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vector2\"></i> icon-vector2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rulers\"></i> icon-rulers</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pencil-ruler\"></i> icon-pencil-ruler</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-scissors\"></i> icon-scissors</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-filter3\"></i> icon-filter3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-filter4\"></i> icon-filter4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font\"></i> icon-font</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ampersand2\"></i> icon-ampersand2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ligature\"></i> icon-ligature</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font-size\"></i> icon-font-size</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-typography\"></i> icon-typography</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-height\"></i> icon-text-height</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-width\"></i> icon-text-width</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-height2\"></i> icon-height2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-width\"></i> icon-width</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strikethrough2\"></i> icon-strikethrough2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-font-size2\"></i> icon-font-size2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bold2\"></i> icon-bold2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-underline2\"></i> icon-underline2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-italic2\"></i> icon-italic2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-strikethrough3\"></i> icon-strikethrough3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-omega\"></i> icon-omega</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sigma\"></i> icon-sigma</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-nbsp\"></i> icon-nbsp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-page-break\"></i> icon-page-break</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-page-break2\"></i> icon-page-break2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-superscript\"></i> icon-superscript</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subscript\"></i> icon-subscript</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-superscript2\"></i> icon-superscript2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subscript2\"></i> icon-subscript2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-text-color\"></i> icon-text-color</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-highlight\"></i> icon-highlight</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pagebreak\"></i> icon-pagebreak</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clear-formatting\"></i> icon-clear-formatting</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-table\"></i> icon-table</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-table2\"></i> icon-table2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-insert-template\"></i> icon-insert-template</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pilcrow\"></i> icon-pilcrow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ltr\"></i> icon-ltr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rtl\"></i> icon-rtl</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ltr2\"></i> icon-ltr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-rtl2\"></i> icon-rtl2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-section\"></i> icon-section</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-left2\"></i> icon-paragraph-left2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-center2\"></i> icon-paragraph-center2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-right2\"></i> icon-paragraph-right2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-justify2\"></i> icon-paragraph-justify2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-increase\"></i> icon-indent-increase</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-decrease\"></i> icon-indent-decrease</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-left3\"></i> icon-paragraph-left3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-center3\"></i> icon-paragraph-center3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-right3\"></i> icon-paragraph-right3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paragraph-justify3\"></i> icon-paragraph-justify3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-increase2\"></i> icon-indent-increase2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-indent-decrease2\"></i> icon-indent-decrease2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share\"></i> icon-share</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share2\"></i> icon-share2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new-tab\"></i> icon-new-tab</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-new-tab2\"></i> icon-new-tab2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-popout\"></i> icon-popout</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-embed\"></i> icon-embed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-embed2\"></i> icon-embed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-markup\"></i> icon-markup</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-regexp\"></i> icon-regexp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-regexp2\"></i> icon-regexp2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-code\"></i> icon-code</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-css\"></i> icon-circle-css</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-circle-code\"></i> icon-circle-code</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-terminal\"></i> icon-terminal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unicode\"></i> icon-unicode</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-0\"></i> icon-seven-segment-0</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-1\"></i> icon-seven-segment-1</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-2\"></i> icon-seven-segment-2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-3\"></i> icon-seven-segment-3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-4\"></i> icon-seven-segment-4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-5\"></i> icon-seven-segment-5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-6\"></i> icon-seven-segment-6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-7\"></i> icon-seven-segment-7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-8\"></i> icon-seven-segment-8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-seven-segment-9\"></i> icon-seven-segment-9</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share3\"></i> icon-share3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-share4\"></i> icon-share4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google\"></i> icon-google</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-plus\"></i> icon-google-plus</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-plus2\"></i> icon-google-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-google-drive\"></i> icon-google-drive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-facebook\"></i> icon-facebook</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-facebook2\"></i> icon-facebook2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-instagram\"></i> icon-instagram</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-twitter\"></i> icon-twitter</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-twitter2\"></i> icon-twitter2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed2\"></i> icon-feed2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-feed3\"></i> icon-feed3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube\"></i> icon-youtube</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube2\"></i> icon-youtube2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-youtube3\"></i> icon-youtube3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vimeo\"></i> icon-vimeo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-vimeo2\"></i> icon-vimeo2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lanyrd\"></i> icon-lanyrd</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr\"></i> icon-flickr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr2\"></i> icon-flickr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flickr3\"></i> icon-flickr3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-picassa\"></i> icon-picassa</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-picassa2\"></i> icon-picassa2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble\"></i> icon-dribbble</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble2\"></i> icon-dribbble2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dribbble3\"></i> icon-dribbble3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forrst\"></i> icon-forrst</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-forrst2\"></i> icon-forrst2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-deviantart\"></i> icon-deviantart</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-deviantart2\"></i> icon-deviantart2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steam\"></i> icon-steam</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-steam2\"></i> icon-steam2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dropbox\"></i> icon-dropbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-onedrive\"></i> icon-onedrive</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github\"></i> icon-github</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github4\"></i> icon-github4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-github5\"></i> icon-github5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wordpress\"></i> icon-wordpress</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-wordpress2\"></i> icon-wordpress2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-joomla\"></i> icon-joomla</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blogger\"></i> icon-blogger</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-blogger2\"></i> icon-blogger2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tumblr\"></i> icon-tumblr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tumblr2\"></i> icon-tumblr2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yahoo\"></i> icon-yahoo</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-tux\"></i> icon-tux</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-apple2\"></i> icon-apple2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-finder\"></i> icon-finder</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-android\"></i> icon-android</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows\"></i> icon-windows</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows8\"></i> icon-windows8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-soundcloud\"></i> icon-soundcloud</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-soundcloud2\"></i> icon-soundcloud2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-skype\"></i> icon-skype</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reddit\"></i> icon-reddit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-linkedin\"></i> icon-linkedin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-linkedin2\"></i> icon-linkedin2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lastfm\"></i> icon-lastfm</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-lastfm2\"></i> icon-lastfm2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-delicious\"></i> icon-delicious</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stumbleupon\"></i> icon-stumbleupon</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stumbleupon2\"></i> icon-stumbleupon2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-stackoverflow\"></i> icon-stackoverflow</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pinterest2\"></i> icon-pinterest2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-xing\"></i> icon-xing</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-flattr\"></i> icon-flattr</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-foursquare\"></i> icon-foursquare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paypal\"></i> icon-paypal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-paypal2\"></i> icon-paypal2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-yelp\"></i> icon-yelp</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-pdf\"></i> icon-file-pdf</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-openoffice\"></i> icon-file-openoffice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-word\"></i> icon-file-word</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-excel\"></i> icon-file-excel</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-libreoffice\"></i> icon-libreoffice</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-html5\"></i> icon-html5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-html52\"></i> icon-html52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-css3\"></i> icon-css3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git\"></i> icon-git</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-svg\"></i> icon-svg</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-codepen\"></i> icon-codepen</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chrome\"></i> icon-chrome</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-firefox\"></i> icon-firefox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-IE\"></i> icon-IE</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-opera\"></i> icon-opera</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-safari\"></i> icon-safari</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-check2\"></i> icon-check2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-home4\"></i> icon-home4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-people\"></i> icon-people</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark-circle2\"></i> icon-checkmark-circle2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-left32\"></i> icon-arrow-up-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up52\"></i> icon-arrow-up52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up-right32\"></i> icon-arrow-up-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right6\"></i> icon-arrow-right6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-right32\"></i> icon-arrow-down-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down52\"></i> icon-arrow-down52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down-left32\"></i> icon-arrow-down-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left52\"></i> icon-arrow-left52</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar5\"></i> icon-calendar5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-alt1\"></i> icon-move-alt1</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-reload-alt\"></i> icon-reload-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-vertical\"></i> icon-move-vertical</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-horizontal\"></i> icon-move-horizontal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hash\"></i> icon-hash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-bars-alt\"></i> icon-bars-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-eye8\"></i> icon-eye8</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-search4\"></i> icon-search4</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-zoomin3\"></i> icon-zoomin3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-zoomout3\"></i> icon-zoomout3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-add\"></i> icon-add</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-subtract\"></i> icon-subtract</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-exclamation\"></i> icon-exclamation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question6\"></i> icon-question6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-close2\"></i> icon-close2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-task\"></i> icon-task</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-inbox\"></i> icon-inbox</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-inbox-alt\"></i> icon-inbox-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-envelope\"></i> icon-envelope</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-compose\"></i> icon-compose</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-newspaper2\"></i> icon-newspaper2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calendar22\"></i> icon-calendar22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-hyperlink\"></i> icon-hyperlink</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trash\"></i> icon-trash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-trash-alt\"></i> icon-trash-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid5\"></i> icon-grid5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-grid-alt\"></i> icon-grid-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-menu6\"></i> icon-menu6</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list3\"></i> icon-list3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gallery\"></i> icon-gallery</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-calculator\"></i> icon-calculator</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-windows2\"></i> icon-windows2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-browser\"></i> icon-browser</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-portfolio\"></i> icon-portfolio</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comments\"></i> icon-comments</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen3\"></i> icon-screen3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-iphone\"></i> icon-iphone</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ipad\"></i> icon-ipad</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-googleplus5\"></i> icon-googleplus5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pin\"></i> icon-pin</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pin-alt\"></i> icon-pin-alt</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cog5\"></i> icon-cog5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graduation\"></i> icon-graduation</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-air\"></i> icon-air</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-droplets\"></i> icon-droplets</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-statistics\"></i> icon-statistics</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-pie5\"></i> icon-pie5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-cross\"></i> icon-cross</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-minus2\"></i> icon-minus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus2\"></i> icon-plus2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-info3\"></i> icon-info3</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-info22\"></i> icon-info22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-question7\"></i> icon-question7</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-help\"></i> icon-help</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-warning2\"></i> icon-warning2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-add-to-list\"></i> icon-add-to-list</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left12\"></i> icon-arrow-left12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down12\"></i> icon-arrow-down12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up12\"></i> icon-arrow-up12</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right13\"></i> icon-arrow-right13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left22\"></i> icon-arrow-left22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down22\"></i> icon-arrow-down22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up22\"></i> icon-arrow-up22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right22\"></i> icon-arrow-right22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left32\"></i> icon-arrow-left32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down32\"></i> icon-arrow-down32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up32\"></i> icon-arrow-up32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right32\"></i> icon-arrow-right32</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-switch2\"></i> icon-switch2</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-checkmark5\"></i> icon-checkmark5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-ampersand\"></i> icon-ampersand</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alert\"></i> icon-alert</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-align\"></i> icon-alignment-align</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-aligned-to\"></i> icon-alignment-aligned-to</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-alignment-unalign\"></i> icon-alignment-unalign</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-down132\"></i> icon-arrow-down132</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-up13\"></i> icon-arrow-up13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-left13\"></i> icon-arrow-left13</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-right14\"></i> icon-arrow-right14</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-down\"></i> icon-arrow-small-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-left\"></i> icon-arrow-small-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-right\"></i> icon-arrow-small-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-arrow-small-up\"></i> icon-arrow-small-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-check\"></i> icon-check</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-down\"></i> icon-chevron-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-left\"></i> icon-chevron-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-right\"></i> icon-chevron-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-chevron-up\"></i> icon-chevron-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-clippy\"></i> icon-clippy</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comment\"></i> icon-comment</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-comment-discussion\"></i> icon-comment-discussion</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-dash\"></i> icon-dash</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff\"></i> icon-diff</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-added\"></i> icon-diff-added</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-ignored\"></i> icon-diff-ignored</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-modified\"></i> icon-diff-modified</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-removed\"></i> icon-diff-removed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-diff-renamed\"></i> icon-diff-renamed</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-file-media\"></i> icon-file-media</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-fold\"></i> icon-fold</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-gear\"></i> icon-gear</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-branch\"></i> icon-git-branch</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-commit\"></i> icon-git-commit</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-compare\"></i> icon-git-compare</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-merge\"></i> icon-git-merge</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-git-pull-request\"></i> icon-git-pull-request</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-graph\"></i> icon-graph</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-law\"></i> icon-law</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-ordered\"></i> icon-list-ordered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-list-unordered\"></i> icon-list-unordered</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mail5\"></i> icon-mail5</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mail-read\"></i> icon-mail-read</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mention\"></i> icon-mention</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-mirror\"></i> icon-mirror</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-down\"></i> icon-move-down</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-left\"></i> icon-move-left</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-right\"></i> icon-move-right</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-move-up\"></i> icon-move-up</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-person\"></i> icon-person</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-plus22\"></i> icon-plus22</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-primitive-dot\"></i> icon-primitive-dot</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-primitive-square\"></i> icon-primitive-square</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-repo-forked\"></i> icon-repo-forked</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen-full\"></i> icon-screen-full</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-screen-normal\"></i> icon-screen-normal</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-sync\"></i> icon-sync</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-three-bars\"></i> icon-three-bars</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-unfold\"></i> icon-unfold</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-versions\"></i> icon-versions</div>\n\t <div class=\"col-md-3 col-sm-4\"><i class=\"icon-x\"></i> icon-x</div>\n\t</div>\n\t","ColorPaletteList":"<div class=\"panel\">\n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-800 demo-color\" color_palette=\"pink-800\">\n\t       <span>pink-800</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-700 demo-color\" color_palette=\"pink-700\">\n\t       <span>pink-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-600 demo-color\" color_palette=\"pink-600\">\n\t       <span>pink-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink demo-color\" color_palette=\"pink\">\n\t       <span>pink</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-400 demo-color\" color_palette=\"pink-400\">\n\t       <span>pink-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-pink-300 demo-color\" color_palette=\"pink-300\">\n\t       <span>pink-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-800 demo-color\" color_palette=\"violet-800\">\n\t       <span>violet</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-700 demo-color\" color_palette=\"violet-700\">\n\t       <span>violet-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-600 demo-color\" color_palette=\"violet-600\">\n\t       <span>violet-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet demo-color\" color_palette=\"violet\">\n\t       <span>violet</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-400 demo-color\" color_palette=\"violet-400\">\n\t       <span>violet-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-violet-300 demo-color\" color_palette=\"violet-300\">\n\t       <span>violet-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-800 demo-color\" color_palette=\"purple-800\">\n\t       <span>purple</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-700 demo-color\" color_palette=\"purple-700\">\n\t       <span>purple-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-600 demo-color\" color_palette=\"purple-600\">\n\t       <span>purple-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple demo-color\" color_palette=\"purple\">\n\t       <span>purple</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-400 demo-color\" color_palette=\"purple-400\">\n\t       <span>purple-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-purple-300 demo-color\" color_palette=\"purple-300\">\n\t       <span>purple-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-800 demo-color\" color_palette=\"indigo-800\">\n\t       <span>indigo</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-700 demo-color\" color_palette=\"indigo-700\">\n\t       <span>indigo-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-600 demo-color\" color_palette=\"indigo-600\">\n\t       <span>indigo-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo demo-color\" color_palette=\"indigo\">\n\t       <span>indigo</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-400 demo-color\" color_palette=\"indigo-400\">\n\t       <span>indigo-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-indigo-300 demo-color\" color_palette=\"indigo-300\">\n\t       <span>indigo-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-800 demo-color\" color_palette=\"blue-800\">\n\t       <span>blue</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-700 demo-color\" color_palette=\"blue-700\">\n\t       <span>blue-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-600 demo-color\" color_palette=\"blue-600\">\n\t       <span>blue-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue demo-color\" color_palette=\"blue\">\n\t       <span>blue</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-400 demo-color\" color_palette=\"blue-400\">\n\t       <span>blue-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-blue-300 demo-color\" color_palette=\"blue-300\">\n\t       <span>blue-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-800 demo-color\" color_palette=\"teal-800\">\n\t       <span>teal</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-700 demo-color\" color_palette=\"teal-700\">\n\t       <span>teal-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-600 demo-color\" color_palette=\"teal-600\">\n\t       <span>teal-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal demo-color\" color_palette=\"teal\">\n\t       <span>teal</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-400 demo-color\" color_palette=\"teal-400\">\n\t       <span>teal-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-teal-300 demo-color\" color_palette=\"teal-300\">\n\t       <span>teal-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-800 demo-color\" color_palette=\"green-800\">\n\t       <span>green</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-700 demo-color\" color_palette=\"green-700\">\n\t       <span>green-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-600 demo-color\" color_palette=\"green-600\">\n\t       <span>green-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green demo-color\" color_palette=\"green\">\n\t       <span>green</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-400 demo-color\" color_palette=\"green-400\">\n\t       <span>green-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-green-300 demo-color\" color_palette=\"green-300\">\n\t       <span>green-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div>  \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-800 demo-color\" color_palette=\"orange-800\">\n\t       <span>orange</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-700 demo-color\" color_palette=\"orange-700\">\n\t       <span>orange-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-600 demo-color\" color_palette=\"orange-600\">\n\t       <span>orange-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange demo-color\" color_palette=\"orange\">\n\t       <span>orange</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-400 demo-color\" color_palette=\"orange-400\">\n\t       <span>orange-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-orange-300 demo-color\" color_palette=\"orange-300\">\n\t       <span>orange-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-800 demo-color\" color_palette=\"brown-800\">\n\t       <span>brown</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-700 demo-color\" color_palette=\"brown-700\">\n\t       <span>brown-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-600 demo-color\" color_palette=\"brown-600\">\n\t       <span>brown-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown demo-color\" color_palette=\"brown\">\n\t       <span>brown</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-400 demo-color\" color_palette=\"brown-400\">\n\t       <span>brown-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-brown-300 demo-color\" color_palette=\"brown-300\">\n\t       <span>brown-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-800 demo-color\" color_palette=\"grey-800\">\n\t       <span>grey</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-700 demo-color\" color_palette=\"grey-700\">\n\t       <span>grey-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-600 demo-color\" color_palette=\"grey-600\">\n\t       <span>grey-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey demo-color\" color_palette=\"grey\">\n\t       <span>grey</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-400 demo-color\" color_palette=\"grey-400\">\n\t       <span>grey-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-grey-300 demo-color\" color_palette=\"grey-300\">\n\t       <span>grey-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t <div class=\"row\">\n\t  <div class=\"panel\">\n\t   <div class=\"panel-body\">\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-800 demo-color\" color_palette=\"slate-800\">\n\t       <span>slate</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-700 demo-color\" color_palette=\"slate-700\">\n\t       <span>slate-700</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-600 demo-color\" color_palette=\"slate-600\">\n\t       <span>slate-600</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate demo-color\" color_palette=\"slate\">\n\t       <span>slate</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-400 demo-color\" color_palette=\"slate-400\">\n\t       <span>slate-400</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t    <div class=\"col-sm-4 col-lg-2\">\n\t     <div class=\"panel\">\n\t      <div class=\"bg-slate-300 demo-color\" color_palette=\"slate-300\">\n\t       <span>slate-300</span>\n\t      </div>\n\t     </div>\n\t    </div>\n\t   \n\t   </div>\n\t  </div>\n\t </div> \n\t \n\t</div> \n\t","DocFlowTaskShortList":"<div id={{id}} class=\"dropdown-menu dropdown-content\">\n\t <div class=\"dropdown-content-heading\">\n\t  Активные задачи\n\t </div>\n\t\n\t <ul class=\"media-list dropdown-content-body width-350\">\n\t  {{#rows}}\n\t  <li class=\"media\">\n\t   <div class=\"media-left\">\n\t    <div href=\"#\" class=\"btn border-primary text-primary btn-flat btn-rounded btn-icon btn-sm\">\n\t     <i class=\"icon-bell3\"></i>\n\t    </div>\n\t   </div>\n\t\n\t   <div class=\"media-body task-short-descr\" docs_ref=\"{{fields.docs_ref}}\">\n\t    {{fields.description}}\n\t    <div class=\"media-annotation\">{{fields.passed_time}}</div>\n\t   </div>\n\t  </li>\n\t  {{/rows}}\n\t </ul>\n\t</div>\n\t","EditFile":"<div id=\"{{id}}\" class=\"form-group\">\n\t <label id=\"{{id}}:label\" for=\"{{id}}\">\n\t </label>\n\t <div id=\"{{id}}:add\">\n\t </div>\n\t <span id=\"{{id}}:file_cont\">\n\t </span>\n\t <input id=\"{{id}}:file\" type=\"file\" style=\"display:none;\">\n\t </input>\n\t</div>\n\t","EditFileApp":"<div id=\"{{id}}\" class=\"form-group {{bsColClass}}\">\n\t <label id=\"{{id}}:label\" for=\"{{id}}\">\n\t </label>\n\t <div id=\"{{id}}:print\">\n\t </div>\n\t\n\t <div id=\"{{id}}:add\">\n\t </div>\n\t <span id=\"{{id}}:file_cont\">\n\t </span>\n\t <input id=\"{{id}}:file\" type=\"file\" style=\"display:none;\">\n\t </input>\n\t</div>\n\t","EditFileInf":"<span id=\"{{id}}\">\n\t \n\t {{#file_signed}}\n\t <i id=\"{{id}}_sig\" class=\"icon-file-locked\" title=\"Файл подписан ЭЦП\"></i> \n\t {{/file_signed}}\n\t\n\t {{#file_not_signed}}\n\t {{#allowOnlySignedFiles}} \n\t <i id=\"{{id}}_sig\" class=\"icon-file-minus\" title=\"Необходимо загрузить файл ЭЦП\"></i> \n\t {{/allowOnlySignedFiles}}\n\t \n\t {{#allowNotOnlySignedFiles}} \n\t <i id=\"{{id}}_sig\" class=\"icon-file-empty\" title=\"Файл с данными\"></i> \n\t {{/allowNotOnlySignedFiles}}\n\t \n\t {{/file_not_signed}}  \n\t \n\t\n\t <a id=\"{{id}}-href\" file_id=\"{{id}}\" href=\"#\" title=\"Скачать файл\" file_uploaded=\"{{file_uploaded}}\" class=\"uploadedFile\">\n\t  {{name}}({{file_size_formatted}})\n\t </a>\n\t\n\t {{#file_deletable}}\n\t <div id=\"{{id}}-del\" class=\"btn btn-sm fileDeleteBtn\" title=\"Удалить файл\" file_id=\"{{id}}\" file_uploaded=\"{{file_uploaded}}\">\n\t  <i class=\"glyphicon glyphicon-trash\"></i> \n\t </div>\n\t {{/file_deletable}}\n\t</span>\n\t","DocFlowApprovementRecipientEdit":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:employee\">\n\t </div>\n\t \n\t <div id=\"{{id}}:employee_comment\">\n\t </div>\n\t \n\t <div id=\"{{id}}:approvement_order\">\n\t </div>\n\t</div>\n\t","WorkHoursEdit":"<div id=\"{{id}}\" class=\"form-group\">\n\t <div class=\"row\">\n\t  <div id=\"{{id}}:monday\">\n\t  </div>\n\t  <div id=\"{{id}}:monday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:monday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row\">\n\t  <div id=\"{{id}}:tuesday\">\n\t  </div>\n\t  <div id=\"{{id}}:tuesday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:tuesday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row\">\n\t  <div id=\"{{id}}:wednesday\">\n\t  </div>\n\t  <div id=\"{{id}}:wednesday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:wednesday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row\">\n\t  <div id=\"{{id}}:thursday\">\n\t  </div>\n\t  <div id=\"{{id}}:thursday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:thursday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row\">\n\t  <div id=\"{{id}}:friday\">\n\t  </div>\n\t  <div id=\"{{id}}:friday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:friday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row workHoursEdit-daysoff\">\n\t  <div id=\"{{id}}:saturday\">\n\t  </div>\n\t  <div id=\"{{id}}:saturday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:saturday_to\">\n\t  </div>\n\t </div>\n\t <div class=\"row workHoursEdit-daysoff\">\n\t  <div id=\"{{id}}:sunday\">\n\t  </div>\n\t  <div id=\"{{id}}:sunday_from\">\n\t  </div>\n\t  <div id=\"{{id}}:sunday_to\">\n\t  </div>\n\t </div>\n\t \n\t \n\t</div>\n\t","Doc1c":"<div id=\"{{id}}\">\n\t <div id=\"{{id}}:makeDoc\">\n\t </div>\n\t <ul id=\"{{id}}:docList\">\n\t </ul>\n\t</div>\n\t","ShortMessage":"<div id=\"{{id}}\">\n\t <!-- Две формы:\n\t  - для многоадресного сообщения: получатели и сообщение\n\t  - для одного получателя: переписка и сообщение\n\t -->\n\t <div class=\"form-group\">\n\t  <label class=\"control-label {{bsCol}}2\">Кому:</label>\n\t  {{#recipients}}\n\t  <span class=\"mesRecipient\">{{#ind}},  {{/ind}}{{recipient}}</span>\n\t  {{/recipients}} \n\t </div>\n\t \n\t <!-- Переписка если получатель один сотр-->\n\t {{#notMultyRecipients}}\n\t <div id=\"{{id}}:message_list\">\n\t </div> \n\t {{/notMultyRecipients}}\n\t \n\t <div id=\"{{id}}:doc_flow_importance_types_ref\">\n\t </div> \n\t\n\t <div id=\"{{id}}:content\"></div>\n\t \n\t <div id=\"{{id}}:files\"></div>\n\t \n\t <div id=\"{{id}}:cmd-cont\">\n\t  <div id=\"{{id}}:cmdOk\" options=\"{'glyph':'glyphicon-send','caption':'Отправить '}\" title=\"Отправить сообщение {{#multyRecipients}}получателям{{/multyRecipients}}{{#notMultyRecipients}}получателяю{{/notMultyRecipients}}\"></div>\n\t  <div id=\"{{id}}:cmdCancel\"></div>\n\t </div>\n\t \n\t</div> \n\t","ShortMessageChat":"<ul class=\"media-list chatMessageList\">\n\t {{#rows}}\n\t {{#newDay}}\n\t <span class=\"messageNewDay badger bg-info\">{{newDay}}\n\t </span>\n\t {{/newDay}}\n\t <li class=\"media chatMessage chatMessage{{messageType}}\">\n\t  <div class=\"media-body\">\n\t   {{#pic}}\n\t   <span class=\"media-annotation pull-left\" style=\"margin-right:10px;\">\n\t    <img src=\"data:image/png;base64,{{pic}}\" height=\"50\" width=\"50\">\n\t    </img>\n\t   </span>\n\t   {{/pic}}\n\t   <div class=\"text-muted\">Создано:{{time}}\n\t   </div>  \n\t   {{#viewTime}}\n\t   <div class=\"text-muted\">Прочитано:{{viewTime}}\n\t   </div>\n\t   {{/viewTime}}\n\t   {{#importance}}\n\t   <div class=\"text-muted\">Важность:{{importance}}\n\t   </div>  \n\t   {{/importance}}\n\t   \n\t   <div>{{content}}\n\t   </div>\n\t   {{#files}}\n\t   {{#ind}}, {{/ind}}<a id=\"{{file_id}}\" message_id=\"{{message_id}}\" href=\"#\" class=\"chat_attachment\">{{file_name}}({{file_size_formatted}})\n\t   </a>\n\t   {{/files}}\n\t  </div>\n\t </li>\n\t {{/rows}}\n\t</ul>\n\t"}; 
App.prototype.m_enums={"locales":{"ru":"ru_Русский"},"role_types":{"ru_admin":"Администратор","ru_client":"Клиент","ru_lawyer":"Юрист отдела приема","ru_expert":"Эксперт","ru_boss":"Руководитель","ru_accountant":"Бухгалтер"},"email_types":{"ru_new_account":"Новый акаунт","ru_reset_pwd":"Установка пароля","ru_user_email_conf":"Подтверждение пароля","ru_out_mail":"Исходящее письмо"},"application_states":{"ru_filling":"Заполнение анкеты","ru_correction":"Исправление анкеты","ru_sent":"Анкета отправлена на проверку","ru_checking":"Проверка анкеты","ru_returned":"Возврат без рассмотрения","ru_closed_no_expertise":"Возврат без экспертизы","ru_waiting_for_contract":"Подписание контракта","ru_waiting_for_pay":"Ожидание оплаты","ru_expertise":"Экспертиза проекта"},"doc_flow_in_states":{"ru_examining":"Рассмотрение","ru_examined":"Рассмотрен","ru_fulfilling":"Исполнение","ru_fulfilled":"Исполнен","ru_acquainting":"Ознакомление","ru_acquainted":"Ознакомлен","ru_acquainted":"Ознакомлены","ru_registered":"Зарегистрировано","ru_registering":"Зарегистрация"},"doc_flow_out_states":{"ru_approving":"На согласовании","ru_not_approved":"Не согласован","ru_approved_with_notes":"Согласован с замечаниями","ru_fulfilled":"Исполнен","ru_approved":"Согласован","ru_confirming":"На утверждении","ru_not_confirmed":"Не утвержден","ru_registered":"Отправлен","ru_registering":"На регистрации"},"data_types":{"ru_users":"Пользователи","ru_employees":"Сотрудники","ru_departments":"Отделы","ru_doc_flow_out":"Исходящие документы","ru_doc_flow_in":"Входящие документы","ru_doc_flow_inside":"Внутренние документы","ru_doc_flow_approvements":"Утверждения","ru_doc_flow_confirmations":"Согласования","ru_doc_flow_acqaintances":"Ознакомления","ru_doc_flow_examinations":"Рассмотрения","ru_doc_flow_fulfilments":"Исполнения","ru_doc_flow_registrations":"Регистрации","ru_application_applicants":"Заявители заявлений","ru_application_customers":"Заказчики заявлений","ru_application_contractors":"Исполнители заявлений","ru_applications":"Заявления","ru_doc_flow_importance_types":"Виды важностей"},"doc_flow_approvement_results":{"ru_approved":"Согласовано","ru_not_approved":"Не согласовано","ru_approved_with_notes":"Согласовано с замечаниями"},"doc_flow_inside_states":{"ru_approving":"На согласовании","ru_not_approved":"Не согласован","ru_approved_with_notes":"Согласован с замечаниями","ru_approved":"Согласован","ru_confirming":"На утверждении","ru_not_confirmed":"Не утвержден","ru_confirmed":"Утвержден","ru_examining":"На рассмотрении","ru_examined":"Рассмотрен","ru_fulfilling":"На исполнении","ru_fulfilled":"Исполнен","ru_acquainting":"На ознакомлении","ru_acquainted":"Ознакомлен"},"doc_flow_out_client_types":{"ru_app":"Заявление","ru_contr_resp":"Ответы на замечания по контракту","ru_contr_return":"Возврат контракта","contr_other":"Прочее"}}; 
App.prototype.m_predefinedItems={"doc_flow_importance_types":{"common":new RefType({"dataType":"doc_flow_importance_types","descr":"Обычная","keys":{"id":1}})},"doc_flow_types":{"app":new RefType({"dataType":"doc_flow_types","descr":"Заявление","keys":{"id":1}}),"app_resp":new RefType({"dataType":"doc_flow_types","descr":"Контракт по заявлению","keys":{"id":2}}),"app_resp_return":new RefType({"dataType":"doc_flow_types","descr":"Возврат без рассмотрения на стадии приема","keys":{"id":8}}),"app_resp_correct":new RefType({"dataType":"doc_flow_types","descr":"Разрешение на редактирование","keys":{"id":12}}),"contr_resp":new RefType({"dataType":"doc_flow_types","descr":"Ответы на замечания","keys":{"id":3}}),"contr":new RefType({"dataType":"doc_flow_types","descr":"Замечания экспертизы","keys":{"id":7}}),"contr_close":new RefType({"dataType":"doc_flow_types","descr":"Заключение экспертизы","keys":{"id":9}}),"contr_return":new RefType({"dataType":"doc_flow_types","descr":"Отзыв (возврат) в ходе экспертизы","keys":{"id":13}}),"contr_paper_return":new RefType({"dataType":"doc_flow_types","descr":"Возврат контракта","keys":{"id":14}})},"services":{"expertise":new RefType({"dataType":"services","descr":"Государственная экспертиза","keys":{"id":1}}),"expertise":new RefType({"dataType":"eng_survey","descr":"Достоверность","keys":{"id":2}}),"modification":new RefType({"dataType":"eng_survey","descr":"Модификация","keys":{"id":3}}),"audit":new RefType({"dataType":"audit","descr":"Аудит","keys":{"id":4}})},"short_message_recipient_states":{"free":new RefType({"dataType":"short_message_recipient_states","descr":"Свободен","keys":{"id":1}})}} 
function ErrorControl(id,options){options=options||{};options.template=window.getApp().getTemplate("ErrorControl");options.visible=false;ErrorControl.superclass.constructor.call(this,id,"SPAN",options);}
extend(ErrorControl,Control);ErrorControl.prototype.DEF_TAG="SPAN";ErrorControl.prototype.setValue=function(val){if(!val||val.trim()==""){DOMHelper.addClass(this.getNode(),"hidden");}
else{DOMHelper.delClass(this.getNode(),"hidden");}
var node;if(this.m_node.childNodes){for(var i=0;i<this.m_node.childNodes.length;i++){if(this.m_node.childNodes[i].nodeType==3){this.m_node.childNodes[i].parentNode.removeChild(this.m_node.childNodes[i]);break;}}}
if(!node){node=document.createTextNode(val);DOMHelper.insertAfter(node,DOMHelper.firstChildElement(this.m_node));}
node.nodeValue=val;}
ErrorControl.prototype.clear=function(){this.setValue("");} 
function AppExpert(options){options=options||{};options.lang="rus";options.paginationClass=Pagination;this.setColorClass(options.servVars.color_palette||this.COLOR_CLASS);this.setDataTypes({"doc_flow_registrations":{"dialogClass":DocFlowRegistration_Form},"doc_flow_examinations":{"dialogClass":DocFlowExamination_Form},"doc_flow_approvements":{"dialogClass":DocFlowApprovement_Form},"departments":{"dataTypeDescrLoc":"Отдел","ctrlClass":DepartmentSelect,"ctrlOptions":{"keyIds":["id"]}},"employees":{"dataTypeDescrLoc":"Сотрудник","ctrlClass":EmployeeEditRef,"ctrlOptions":{"keyIds":["id"]}},"doc_flow_out":{"dataTypeDescrLoc":"Исходящий документ","ctrlClass":DocFlowOutEditRef,"ctrlOptions":{"keyIds":["id"]},"dialogClass":DocFlowOutDialog_Form},"doc_flow_in":{"dataTypeDescrLoc":"Входяший документ","ctrlClass":DocFlowInEditRef,"ctrlOptions":{"keyIds":["id"]},"dialogClass":DocFlowInDialog_Form},"doc_flow_inside":{"dataTypeDescrLoc":"Внутренний документ","ctrlClass":DocFlowInsideEditRef,"ctrlOptions":{"keyIds":["id"]},"dialogClass":DocFlowInsideDialog_Form},"applications":{"dataTypeDescrLoc":"Заявление","ctrlClass":ApplicationEditRef,"ctrlOptions":{"keyIds":["id"]},"dialogClass":ApplicationDialog_Form},"contracts":{"dataTypeDescrLoc":"Контракт","ctrlClass":ContractEditRef,"ctrlOptions":{"keyIds":["id"]},"dialogClass":ContractDialog_Form},"short_messages":{"dataTypeDescrLoc":"Сообщение чата","ctrlClass":null,"ctrlOptions":{"keyIds":["id"]},"dialogClass":ShortMessage_Form}});AppExpert.superclass.constructor.call(this,"Expert72",options);if(this.storageGet(this.getSidebarId())=="xs"){$('body').toggleClass('sidebar-xs');}}
extend(AppExpert,App);AppExpert.prototype.m_colorClass;AppExpert.prototype.makeItemCurrent=function(elem){if(elem){var l=DOMHelper.getElementsByAttr("active",document.body,"class",true,"LI");for(var i=0;i<l.length;i++){DOMHelper.delClass(l[i],"active");}
DOMHelper.addClass(elem.parentNode,"active");if(elem.nextSibling){elem.nextSibling.style="display: block;";}}}
AppExpert.prototype.showMenuItem=function(item,c,f,t,extra){AppExpert.superclass.showMenuItem.call(this,c,f,t,extra);this.makeItemCurrent(item);}
AppExpert.prototype.getSidebarId=function(){return this.getServVar("user_name")+"_"+"sidebar-xs";}
AppExpert.prototype.toggleSidebar=function(){var id=this.getSidebarId();this.storageSet(id,(this.storageGet(id)=="xs")?"":"xs");}
AppExpert.prototype.formatError=function(erCode,erStr){return(erStr+((erCode)?(", код:"+erCode):""));}
AppExpert.prototype.getColorClass=function(){return this.m_colorClass;}
AppExpert.prototype.setColorClass=function(v){this.m_colorClass=v;} 
function EditAddress(id,options){options.viewClass=ViewKladr;options.viewTemplate="ViewKladr";options.headTitle="Редактирование адреса";this.m_mainView=options.mainView;EditAddress.superclass.constructor.call(this,id,options);}
extend(EditAddress,EditModalDialog);EditAddress.prototype.formatValue=function(val){var descr="";if(val){if(val.region&&val.region.getDescr())descr+=((descr=="")?"":", ")+val.region.getDescr();if(val.raion&&val.raion.getDescr())descr+=((descr=="")?"":", ")+val.raion.getDescr();if(val.naspunkt&&val.naspunkt.getDescr())descr+=((descr=="")?"":", ")+val.naspunkt.getDescr();if(val.gorod&&val.gorod.getDescr())descr+=((descr=="")?"":", ")+val.gorod.getDescr();if(val.ulitsa&&val.ulitsa.getDescr())descr+=((descr=="")?"":", ")+val.ulitsa.getDescr();if(val.dom)descr+=((descr=="")?"":", ")+"д."+val.dom;if(val.korpus)descr+=((descr=="")?"":", ")+"корп."+val.korpus;if(val.kvartira)descr+=((descr=="")?"":", ")+"кв/оф."+val.kvartira;}
return descr;}
EditAddress.prototype.getFillPercent=function(){return(((this.m_valueJSON&&this.m_valueJSON.region&&this.m_valueJSON.region.getDescr()!="")?34:0)
+((this.m_valueJSON&&this.m_valueJSON.ulitsa&&this.m_valueJSON.ulitsa.getDescr()!="")?33:0)
+((this.m_valueJSON&&this.m_valueJSON.dom&&this.m_valueJSON.dom.getDescr()!="")?33:0))}
EditAddress.prototype.closeSelect=function(){if(this.m_mainView&&this.m_mainView.calcFillPercent)this.m_mainView.calcFillPercent();EditAddress.superclass.closeSelect.call(this);} 
function ClientResponsableGrid(id,options){options=options||{};this.m_mainView=options.mainView;this.m_minInf=options.minInf;var model=new ClientResponsablePerson_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:dep",{"value":"Отдел","columns":[new GridColumn({"field":model.getField("dep")})]}),new GridCellHead(id+":head:name",{"value":"ФИО","columns":[new GridColumn({"field":model.getField("name")})],"sortable":true,"sort":"asc"}),new GridCellHead(id+":head:post",{"value":"Должность","columns":[new GridColumn({"field":model.getField("post")})]}),new GridCellHead(id+":head:tel",{"value":"Телефон","columns":[new GridColumnPhone({"field":model.getField("tel"),"ctrlClass":EditPhone})]}),new GridCellHead(id+":head:email",{"value":"Эл.почта","columns":[new GridColumnEmail({"field":model.getField("email"),"ctrlClass":EditEmail})]})];if(window.getApp().getServVar("role_id")!="client"){cells.push(new GridCellHead(id+":head:person_type",{"value":"Вид должн.лица","columns":[new EnumGridColumn_responsable_person_types({"field":model.getField("person_type"),"ctrlClass":Enum_responsable_person_types,"ctrlOptions":{"required":true}})]}));}
options={"model":model,"keyIds":["id"],"controller":new ClientResponsablePerson_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};this.m_orig_afterServerDelRow=this.afterServerDelRow;this.afterServerDelRow=function(){if(this.m_mainView){this.m_mainView.calcFillPercent();}
this.m_orig_afterServerDelRow();}
ClientResponsableGrid.superclass.constructor.call(this,id,options);}
extend(ClientResponsableGrid,GridAjx);ClientResponsableGrid.prototype.setClientType=function(ctp){this.m_clientType=ctp;this.setColumnVisible(["dep","post","person_type"],(ctp!="person"));}
ClientResponsableGrid.prototype.getFillPercent=function(){var percent=0;if(this.m_minInf){percent=100;}
else if(this.getModel().getRowCount()){this.getModel().setRowIndex(0);percent=this.getModel().getField("name").isSet()?50:0;percent+=((this.getModel().getField("email").isSet()||this.getModel().getField("tel").isSet())?50:0);}
this.setAttr("title","Заполнено на "+percent+"%");if(percent>0&&percent<100){DOMHelper.addClass(this.m_node,"null-ref");}
else{DOMHelper.delClass(this.m_node,"null-ref");}
return percent;}
ClientResponsableGrid.prototype.edit=function(cmd){if(cmd=="edit"){var sel_n=this.getSelectedRow();this.setModelToCurrentRow(sel_n);}
this.m_view=new ClientResponsablePersonEdit(this.getId()+":view:body:view",{"calcPercent":(this.m_mainView!=undefined)?true:false,"clientTypePerson":(this.m_clientType=="person"),"valueJSON":{"dep":(cmd=="edit"&&this.m_clientType!="person")?this.getModel().getFieldValue("dep"):null,"name":(cmd=="edit")?this.getModel().getFieldValue("name"):null,"post":(cmd=="edit"&&this.m_clientType!="person")?this.getModel().getFieldValue("post"):null,"tel":(cmd=="edit")?this.getModel().getFieldValue("tel"):null,"email":(cmd=="edit")?this.getModel().getFieldValue("email"):null,"person_type":(cmd=="edit"&&this.m_clientType!="person")?this.getModel().getFieldValue("person_type"):null}});var self=this;this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.BTN_OK_CAP,"controlOkTitle":this.BTN_OK_TITLE,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){var v=self.m_view.getValueJSON();var pm=(cmd=="edit")?self.getUpdatePublicMethod():self.getInsertPublicMethod();if(cmd=="edit")pm.setFieldValue("old_id",self.getModel().getFieldValue("id"));if(v.dep&&self.m_clientType!="person")pm.setFieldValue("dep",v.dep);pm.setFieldValue("name",v["name"]);pm.setFieldValue("post",v["post"]);pm.setFieldValue("email",v["email"]);pm.setFieldValue("tel",v["tel"])
if(v["person_type"]&&self.m_clientType!="person")pm.setFieldValue("person_type",v["person_type"]);pm.run({"ok":function(){self.closeSelect();self.onRefresh(function(){if(self.m_mainView)self.m_mainView.calcFillPercent();});}});},"content":this.m_view,"contentHead":"Редактирование контакта"});this.m_form.open();}
ClientResponsableGrid.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}} 
function ConstrTechnicalFeatureGrid(id,options){options=options||{};var model=new TechnicalFeature_Model();CommonHelper.merge(options,{"model":model,"keyIds":["name"],"controller":new TechnicalFeature_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdInsert":(options.editEnabled==undefined||options.editEnabled),"cmdEdit":(options.editEnabled==undefined||options.editEnabled),"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":[new GridCellHead(id+":head:name",{"value":"Наименование","columns":[new GridColumn({"field":model.getField("name"),"ctrlClass":EditString})]}),new GridCellHead(id+":head:value",{"value":"Значение","columns":[new GridColumn({"field":model.getField("value"),"ctrlClass":EditString})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true});ConstrTechnicalFeatureGrid.superclass.constructor.call(this,id,options);}
extend(ConstrTechnicalFeatureGrid,GridAjx); 
function ViewSectionSelect(id,options){options=options||{};options.model=new ViewSectionList_Model();options.required=true;if(options.labelCaption!=""){options.labelCaption=options.labelCaption||this.LABEL_CAPTION;}
options.keyIds=options.keyIds||["section"];options.modelKeyFields=[options.model.getField("section")];options.modelDescrFields=[options.model.getField("section")];var contr=new View_Controller();options.readPublicMethod=contr.getPublicMethod("get_section_list");ViewSectionSelect.superclass.constructor.call(this,id,options);}
extend(ViewSectionSelect,EditSelectRef); 
function ViewEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||this.LABEL_CAPTION;}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["viewId"];options.selectWinClass=ViewList_Form;options.selectDescrIds=options.selectDescrIds||["user_descr"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new View_Controller();options.acModel=new ViewList_Model();options.acPatternFieldId=options.acPatternFieldId||"user_descr";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("user_descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";this.m_menuTree=options.menuTree;var self=this;options.onSelect=function(fields){if(self.m_menuTree)self.m_menuTree.m_editViewDescr=fields.user_descr.getValue();}
ViewEditRef.superclass.constructor.call(this,id,options);}
extend(ViewEditRef,EditRef); 
function UserEdit(id,options){options=options||{};options.winOptions={"URLParams":"c=User_Controller&f=get_list&t=UserList&v=Child"};var contr=new User_Controller(options.app);options.acMinLengthForQuery=1;options.acModel=new UserList_Model();options.acPublicMethod=contr.getPublicMethod("complete");options.acPublicMethod.getField("ic").setValue("1");options.acLookupFields=[options.acModel.getField("id")];options.acResultFields=[options.acModel.getField("name")];UserEdit.superclass.constructor.call(this,id,options);}
extend(UserEdit,EditRef); 
function UserEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Пользователь:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=UserList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=User_Form;options.acMinLengthForQuery=1;options.acController=new User_Controller();options.acModel=new UserList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";UserEditRef.superclass.constructor.call(this,id,options);}
extend(UserEditRef,EditRef); 
function UserNameEdit(id,options){options=options||{};if(options.labelCaption==undefined){options.labelCaption="Наименование:";}
options.placeholder="Краткое наименование пользователя";options.required=true;options.maxLength=50;options.minLength=this.NAME_MIN_LEN;options.cmdClear=false;this.m_takenNames=[];UserNameEdit.superclass.constructor.call(this,id,options);}
extend(UserNameEdit,EditString);UserNameEdit.prototype.m_nameCheckTimeout;UserNameEdit.prototype.m_takenNames;UserNameEdit.prototype.m_takenError;UserNameEdit.prototype.NAME_MIN_LEN=3;UserNameEdit.prototype.NAME_CHECK_DELAY=1000;UserNameEdit.prototype.checkName=function(){if(this.m_nameCheckTimeout){window.clearTimeout(this.m_nameCheckTimeout);}
var self=this;var v=this.getValue();if(!v||v.length<=this.NAME_MIN_LEN){this.getErrorControl().setValue("");return;}
if(CommonHelper.inArray(v,this.m_takenNames)>=0){this.getErrorControl().setValue(this.m_takenError);return;}
this.m_nameCheckTimeout=window.setTimeout(function(){var pm=new User_Controller().getPublicMethod("name_check");pm.setFieldValue("name",self.getValue());pm.run({"ok":function(resp){self.getErrorControl().setValue("");},"fail":function(resp,errCode,errStr){self.m_takenError=errStr;self.getErrorControl().setValue(errStr);self.m_takenNames.push(v);}});},this.NAME_CHECK_DELAY);} 
function UserPwdEdit(id,options){options=options||{};options.maxLength=50;options.minLength=this.PWD_MIN_LEN;options.cmdClear=false;var self=this;options.events=options.events||{};this.m_origKeyup=options.events.keyup;options.events.keyup=function(e){if(self.m_origKeyup){self.m_origKeyup.call(self,e);}
e=EventHelper.fixKeyEvent(e);if(e.keyCode==13){e.preventDefault();e.stopPropagation();}
self.m_view.getElement("pwd").checkPassDelay();}
this.m_view=options.view;UserPwdEdit.superclass.constructor.call(this,id,options);}
extend(UserPwdEdit,EditPassword);UserPwdEdit.prototype.m_nameCheckTimeout;UserPwdEdit.prototype.m_takenNames;UserPwdEdit.prototype.m_takenError;UserPwdEdit.prototype.PWD_CHECK_DELAY=500;UserPwdEdit.prototype.PWD_MIN_LEN="6";UserPwdEdit.prototype.m_pwdCheckTimeout;UserPwdEdit.prototype.m_view;UserPwdEdit.prototype.checkPassDelay=function(){if(this.m_pwdCheckTimeout){window.clearTimeout(this.m_pwdCheckTimeout);}
var self=this;this.m_pwdCheckTimeout=window.setTimeout(function(){self.checkPass();},this.PWD_CHECK_DELAY);}
UserPwdEdit.prototype.checkPass=function(){var pwd=this.m_view.getElement("pwd").getValue();if(pwd&&pwd.length){var pwd_conf=this.m_view.getElement("pwd_confirm").getValue();if(pwd.length<this.PWD_MIN_LEN){this.m_view.getElement("pwd").setNotValid(this.TXT_PWD_TOO_SHORT);this.m_view.getElement("pwd_confirm").setValid();}
else if(pwd_conf&&pwd_conf.length&&pwd!=pwd_conf){this.m_view.getElement("pwd_confirm").setNotValid(this.TXT_PWD_ER);this.m_view.getElement("pwd").setValid();}
else if(pwd_conf&&pwd_conf.length){this.m_view.getElement("pwd_confirm").setValid();this.m_view.getElement("pwd").setValid();}
else{this.m_view.getElement("pwd").setValid();}}} 
UserPwdEdit.prototype.TXT_PWD_TOO_SHORT="Длина пароля должна быть не меньше "+UserPwdEdit.prototype.PWD_MIN_LEN+" символов.";UserPwdEdit.prototype.TXT_PWD_ER="Пароли не совпадают"; 
function Pagination(id,options){options=options||{};options.ctrlGoFirstCaption="⇤";options.ctrlGoNextCaption="⇢";options.ctrlGoPrevCaption="⇠";options.ctrlGoLastCaption="⇥";options.ctrlGoFirstGlyph="";options.ctrlGoNextGlyph="";options.ctrlGoPrevGlyph="";options.ctrlGoLastGlyph="";options.pageClassName="page";options.pageTagName="A";options.pageCurClassName="page active";options.pagesTagName="UL";options.pagesClassName="pagination-flat pagination-sm twbs-prev-next pagination";Pagination.superclass.constructor.call(this,id,options);}
extend(Pagination,GridPagination);Pagination.prototype.createPageElement=function(options){var cont_class=options.className;options.className="page-link";return(new ControlContainer(null,"LI",{"className":cont_class,"elements":[new Control(null,"A",options)]}));} 
function BankEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Банк:";}
this.m_descrFunction=function(fields){return fields["bik"].getValue()+", "+
fields["name"].getValue()+
(fields["korshet"].isSet()?(", к/с "+fields["korshet"].getValue()):"")};options.placeholder="Введите БИК для поиска";options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["bank_bik"];options.selectWinClass=BankList_Form;options.selectFormatFunction=this.m_descrFunction;options.selectKeyIds=options.selectKeyIds||["bik"];options.editWinClass=Bank_Form;options.acMinLengthForQuery=1;options.acController=new Bank_Controller();options.acModel=new BankList_Model();options.acPatternFieldId=options.acPatternFieldId||"bik";options.acKeyFields=options.acKeyFields||[options.acModel.getField("bik")];options.acDescrFunction=this.m_descrFunction;options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";this.m_view=options.view;var self=this;options.onSelect=options.onSelect||function(fields){if(self.m_view){self.m_view.m_bankDescr=self.m_descrFunction(fields);}}
BankEditRef.superclass.constructor.call(this,id,options);}
extend(BankEditRef,EditRef); 
function EditUserClientBankAcc(id,options){options=options||{};options.viewClass=ViewBankAcc;options.viewOptions={"calcPercent":true};options.viewTemplate="ViewBankAcc";options.labelCaption="Банк:";options.headTitle="Редактирование банковского счета";this.m_mainView=options.mainView;this.m_minInf=options.minInf;EditUserClientBankAcc.superclass.constructor.call(this,id,options);}
extend(EditUserClientBankAcc,EditModalDialog);EditUserClientBankAcc.prototype.formatValue=function(val){var descr="";if(val){if(val.acc_number&&val.acc_number.length)descr+=((descr=="")?"":", ")+val.acc_number;if(val.bank&&val.bank.isNull&&!val.bank.isNull())descr+=((descr=="")?"":", ")+val.bank.getDescr();}
return descr;}
EditUserClientBankAcc.prototype.getFillPercent=function(){var percent=(this.m_minInf?100:(((this.m_valueJSON&&this.m_valueJSON.bank&&!this.m_valueJSON.bank.isNull())?50:0)
+((this.m_valueJSON&&this.m_valueJSON.acc_number&&this.m_valueJSON.acc_number!="")?50:0)));this.setAttr("title","Заполнено на "+percent+"%");if(percent>0&&percent<100){DOMHelper.addClass(this.m_node,"null-ref");}
else{DOMHelper.delClass(this.m_node,"null-ref");}
return percent;}
EditUserClientBankAcc.prototype.closeSelect=function(){if(this.m_mainView&&this.m_mainView.calcFillPercent){this.m_mainView.calcFillPercent();}
EditUserClientBankAcc.superclass.closeSelect.call(this);} 
function ClientEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Контрагент:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ClientList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=Client_Form;options.acMinLengthForQuery=1;options.acController=new Client_Controller();options.acModel=new ClientList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ClientEditRef.superclass.constructor.call(this,id,options);}
extend(ClientEditRef,EditRef); 
function EditRespPerson(id,options){options=options||{};options.viewClass=ClientResponsablePersonEdit;options.viewOptions={"clientTypePerson":true,"calcPercent":true,"showPost":true,};options.viewTemplate="EditRespPerson";options.headTitle="Редактирование данных физического лица";this.m_minInf=options.minInf;this.m_mainView=options.mainView;EditRespPerson.superclass.constructor.call(this,id,options);}
extend(EditRespPerson,EditModalDialog);EditRespPerson.prototype.formatValue=function(val){var res="";for(var id in val){if(id=="tel"&&val[id]){var input=new Control(this.getId()+":mask","input",{"attrs":{"value":val[id]},"visible":false});$(input.getNode()).mask(window.getApp().getPhoneEditMask());res+=((res=="")?"":", ")+input.getNode().value;}
else if(val[id]&&typeof(val[id])=="object"&&val[id].isNull()){res+=((res=="")?"":", ")+val[id].getDescr();}
else if(val[id]&&val[id]!=""){res+=((res=="")?"":", ")+val[id];}}
return res;}
EditRespPerson.prototype.getFillPercent=function(){var percent=(this.m_minInf?100:(((this.m_valueJSON&&this.m_valueJSON["name"])?34:0)
+((this.m_valueJSON&&this.m_valueJSON.post)?33:0)
+((this.m_valueJSON&&this.m_valueJSON.tel)?33:0)));this.setAttr("title","Заполнено на "+percent+"%");if(percent>0&&percent<100){DOMHelper.addClass(this.m_node,"null-ref");}
else{DOMHelper.delClass(this.m_node,"null-ref");}
return percent;}
EditRespPerson.prototype.closeSelect=function(){this.m_mainView.calcFillPercent();EditRespPerson.superclass.closeSelect.call(this);} 
function ApplicationClientEdit(id,options){options=options||{};options.template=options.template||window.getApp().getTemplate("ApplicationClientTab");options.templateOptions=options.templateOptions||{};options.templateOptions.colorClass=window.getApp().getColorClass();options.templateOptions.isCustomer=(id=="ApplicationDialog:customer");options.templateOptions.isApplicant=(id=="ApplicationDialog:applicant");options.templateOptions.isDeveloper=(id=="ApplicationDialog:developer");options.templateOptions.isClient=true;this.m_isApplicant=options.templateOptions.isApplicant;this.m_isDeveloper=options.templateOptions.isDeveloper;this.m_isCustomer=options.templateOptions.isCustomer;this.m_minInf=options.minInf;this.m_mainView=options.mainView;options.attrs=options.attrs||{};options.attrs.percentcalc="true";var self=this;options.addElement=function(){this.addElement(new Control(id+":fillOnApplicant","A",{"events":{"click":function(){self.fillOnApplicant();}}}));if(!options.cmdClose){this.addElement(new Control(id+":fillOnContractor","A",{"events":{"click":function(){self.fillOnContractor();}}}));}
this.addElement(new Control(id+":fillOnCustomer","A",{"events":{"click":function(){self.fillOnCustomer();}}}));this.addElement(new Control(id+":fillOnDeveloper","A",{"events":{"click":function(){self.fillOnDeveloper();}}}));this.addElement(new Control(id+":fillOnClientList","A",{"events":{"click":function(){self.fillOnClientList();}}}));this.addElement(new ClientType(id+":client_type",{"mainView":this.m_mainView,"view":this,"minInf":options.minInf}));var bs=window.getBsCol(4);this.addElement(new ClientNameEdit(id+":name",{"attrs":{"percentcalc":"true"},"labelClassName":"control-label percentcalc "+bs,"view":this,"events":{"blur":function(){if(self.m_isApplicant||self.m_isDeveloper||self.m_isCustomer)self.setAuthLetterRequired();self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientNameFullEdit(id+":name_full",{"attrs":{"percentcalc":"true"},"labelClassName":"control-label percentcalc "+bs,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientINN(id+":inn",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientKPP(id+":kpp",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientOGRN(id+":ogrn",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientSNILS(id+":snils",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new EditEmail(id+":corp_email",{"labelCaption":"Электронная почта:","labelClassName":"control-label "+bs}));var leg_addr=new ClientLegalAddressEdit(id+":legal_address",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this.m_mainView});this.addElement(leg_addr);this.addElement(new ClientPostAddressEdit(id+":post_address",{"enabled":options.enabled,"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this.m_mainView,"view":this,"legalAddress":leg_addr}));this.addElement(new EditRespPerson(id+":responsable_person_head",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"labelCaption":"Руководитель:","mainView":this.m_mainView,"minInf":options.minInf}));this.addElement(new EditUserClientBankAcc(id+":bank",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this.m_mainView,"minInf":options.minInf}));this.addElement(new EditPersonIdPaper(id+":person_id_paper",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this.m_mainView}));this.addElement(new EditPersonRegistrPaper(id+":person_registr_paper",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"mainView":this.m_mainView}));this.addElement(new ClientDocForContract(id+":base_document_for_contract",{"attrs":{"percentcalc":!options.minInf},"labelClassName":!options.minInf?("control-label percentcalc "+bs):undefined,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new ClientResponsableGrid(id+":responsable_persons",{"mainView":this.m_mainView,"attrs":{"percentcalc":!options.minInf},"minInf":options.minInf}));if(this.m_isApplicant){this.addElement(new EditString(id+":auth_letter",{"maxLength":200,"attrs":{"percentcalc":"false","notForValue":"true"},"contClassName":"form-group "+window.getBsCol(6),"placeholder":"Номер и дата доверенности","editContClassName":"input-group "+window.getBsCol(12),"view":this,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));this.addElement(new EditFile(id+":auth_letter_file",{"attrs":{"percentcalc":"false","notForValue":"true"},"labelClassName":"control-label "+window.getBsCol(4),"labelCaption":"Файлы (бланк и ЭЦП)","editContClassName":"input-group "+window.getBsCol(8),"template":window.getApp().getTemplate("EditFileApp"),"templateOptions":{"bsColClass":window.getBsCol(6)},"addControls":null,"mainView":this,"separateSignature":true,"allowOnlySignedFiles":true,"onDeleteFile":function(fileId,callBack){self.m_mainView.deletePrint("delete_auth_letter_file",fileId,callBack);},"onFileDeleted":function(){self.m_mainView.calcFillPercent();},"onFileAdded":function(){self.m_mainView.calcFillPercent();},"onFileSigAdded":function(){self.m_mainView.calcFillPercent();},"onDownload":function(){self.m_mainView.downloadPrint("download_auth_letter_file");}}));}
if(options.cmdClose){this.addElement(new Control(id+":cmdClose","A",{"title":"Удалить исполнителя","events":{"click":function(){WindowQuestion.show({"text":"Удалить исполнителя?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){options.onClosePanel.call(self);}}});}}}));}}
ApplicationClientEdit.superclass.constructor.call(this,id,options);var f_getFillPercent=function(){return(this.getAttr("percentcalc")=="true"&&this.isNull())?0:100;};this.getElement("name").getFillPercent=f_getFillPercent;this.getElement("name_full").getFillPercent=f_getFillPercent;this.getElement("inn").getFillPercent=function(){return(self.getElement("client_type").getValue()=="person")?100:((!self.m_minInf&&self.getElement("inn").isNull())?0:100);}
this.getElement("kpp").getFillPercent=function(){return(self.getElement("client_type").getValue()=="enterprise")?((!self.m_minInf&&self.getElement("kpp").isNull())?0:100):100;}
this.getElement("person_id_paper").getFillPercent=function(){return(self.getElement("client_type").getValue()!="enterprise")?((!self.m_minInf&&self.getElement("person_id_paper").isNull())?0:100):100;}
this.getElement("person_registr_paper").getFillPercent=function(){return(self.getElement("client_type").getValue()=="pboul")?((!self.m_minInf&&self.getElement("person_registr_paper").isNull())?0:100):100;}
this.getElement("ogrn").getFillPercent=f_getFillPercent;this.getElement("post_address").getFillPercent=f_getFillPercent;this.getElement("legal_address").getFillPercent=f_getFillPercent;this.getElement("post_address").getFillPercent=f_getFillPercent;this.getElement("base_document_for_contract").getFillPercent=f_getFillPercent;this.getElement("client_type").setClientType("enterprise");if(this.m_isApplicant){this.getElement("auth_letter").getFillPercent=f_getFillPercent;}}
extend(ApplicationClientEdit,EditJSON);ApplicationClientEdit.prototype.setInitValue=function(v){ApplicationClientEdit.superclass.setInitValue.call(this,v);this.getElement("client_type").setClientType(v.client_type);}
ApplicationClientEdit.prototype.getFillPercent=function(){var tot=0,cnt=0;for(var id in this.m_elements){if(this.m_elements[id].getFillPercent&&this.m_elements[id].getVisible()){tot+=this.m_elements[id].getFillPercent();cnt++;}}
return(cnt)?Math.floor(tot/cnt):0;}
ApplicationClientEdit.prototype.fillOnApplicant=function(){var data=this.m_mainView.getElement("applicant").getValueJSON();this.getElement("client_type").setClientType(data.client_type);this.setValue(data);this.m_mainView.calcFillPercent();}
ApplicationClientEdit.prototype.fillOnContractor=function(){var contractors=this.m_mainView.getElement("contractors").getValueJSON();if(!contractors.length){throw new Error("Нет ни одного заявителя!");}
this.getElement("client_type").setClientType(contractors[0].client_type);this.setValue(contractors[0]);this.m_mainView.calcFillPercent();}
ApplicationClientEdit.prototype.fillOnCustomer=function(){var data=this.m_mainView.getElement("customer").getValueJSON();this.getElement("client_type").setClientType(data.client_type);this.setValue(data);this.m_mainView.calcFillPercent();}
ApplicationClientEdit.prototype.fillOnDeveloper=function(){var data=this.m_mainView.getElement("developer").getValueJSON();this.getElement("client_type").setClientType(data.client_type);this.setValue(data);this.m_mainView.calcFillPercent();}
ApplicationClientEdit.prototype.fillOnClientList=function(){this.m_mainView.setEnabled(false);var self=this;this.m_winObj=new ApplicationClientList_Form({"onClose":function(){self.m_mainView.setEnabled(true);}});var win=this.m_winObj.open();win.onSelect=function(fields){var data=fields.client_data.getValue();self.getElement("client_type").setClientType(data.client_type);self.setValue(data);self.m_winObj.close();self.m_mainView.calcFillPercent();}}
ApplicationClientEdit.prototype.getValueJSON=function(){var o=ApplicationClientEdit.superclass.getValueJSON.call(this);if(o["name"]&&o["name_full"]&&!o["name"].length&&o["name_full"].length){o["name"]=o["name_full"];}
return o;}
ApplicationClientEdit.prototype.setAuthLetterRequired=function(init){if(this.m_mainView.m_readOnly||(!this.m_isApplicant&&!this.m_isDeveloper&&!this.m_isCustomer))return;var DIF_FIELD="name";var appl=this.m_mainView.getElement("applicant");var appl_v=appl.getElement(DIF_FIELD).getValue();var appl_f=appl_v?appl_v.toLowerCase():"";var old_auth_req=appl.getElement("auth_letter").getEnabled();var cust_v=this.m_mainView.getElement("customer").getElement(DIF_FIELD).getValue();var dev_v=this.m_mainView.getElement("developer").getElement(DIF_FIELD).getValue();var auth_req=(appl_f.length&&appl_f!=(cust_v?cust_v.toLowerCase():"")&&appl_f!=(dev_v?dev_v.toLowerCase():""));appl.getElement("auth_letter").setEnabled(auth_req);appl.getElement("auth_letter").setAttr("percentcalc",(auth_req&&cust_v!=undefined&&dev_v!=undefined));appl.getElement("auth_letter_file").setEnabled(auth_req);appl.getElement("auth_letter_file").setAttr("percentcalc",(auth_req&&cust_v!=undefined&&dev_v!=undefined));if(!init&&!old_auth_req&&auth_req&&cust_v!=undefined&&dev_v!=undefined){window.showWarn("Заявитель не является ни заказчиком ни застройщиком. Необходимо прикрепить доверенность.");}
else if(!init&&old_auth_req&&!auth_req){appl.getElement("auth_letter").reset();if(appl.getElement("auth_letter_file").getFileControls().length){var app_id=this.m_mainView.getElement("id").getValue();if(app_id){var pm=this.m_mainView.getController().getPublicMethod("delete_auth_letter_file");pm.setFieldValue("id",app_id);pm.run({"ok":function(){appl.getElement("auth_letter_file").reset();}});}}}} 
function BaseContainer(id,options){options=options||{};this.m_elementClass=options.elementClass;this.m_elementOptions=options.elementOptions;this.m_mainView=options.elementOptions.mainView;this.m_readOnly=options.readOnly;options.template.templateOptions={"readOnly":options.readOnly};BaseContainer.superclass.constructor.call(this,id,options.tagName,options);if(options.valueJSON){this.setValue(options.valueJSON);}}
extend(BaseContainer,ControlContainer);BaseContainer.prototype.m_container;BaseContainer.prototype.m_elementClass;BaseContainer.prototype.m_elementOptions;BaseContainer.prototype.getValue=function(){return CommonHelper.serialize(this.getValueJSON());}
BaseContainer.prototype.getValueJSON=function(){var o_ar=[];var elements=this.m_container.getElements();for(var id in elements){o_ar.push(elements[id].getValueJSON());}
return o_ar;}
BaseContainer.prototype.createNewElement=function(){var opts=(this.m_elementOptions)?CommonHelper.clone(this.m_elementOptions):{};var ind=this.m_container.getCount();var id=this.getId()+":container:"+ind;opts.cmdClose=true;opts.attrs=opts.attrs||{};opts.attrs.ind=ind;self=this;opts.onClosePanel=function(e){self.m_container.delElement(this.getAttr("ind"));this.delDOM();self.m_mainView.calcFillPercent();}
opts.templateOptions={"IND":(ind+1),"panelClass":"panel  panel-"+((ind%2==0)?"even":"odd"),"cmdClose":!this.m_readOnly};var new_elem=new this.m_elementClass(id,opts);return new_elem;}
BaseContainer.prototype.setValueOrInit=function(v,isInit){this.m_container.clear();var o_ar;if(typeof(v)=="string"){o_ar=CommonHelper.unserialize(v);}
else{o_ar=v;}
for(var i=0;i<o_ar.length;i++){var new_elem=this.createNewElement();if(isInit&&new_elem.setInitValue){new_elem.setInitValue(o_ar[i]);}
else{new_elem.setValue(o_ar[i]);}
this.m_container.addElement(new_elem);new_elem.toDOM(this.m_container.getNode());}
this.addPanelEvents();}
BaseContainer.prototype.setValue=function(v){this.setValueOrInit(v,false);}
BaseContainer.prototype.setInitValue=function(v){this.setValueOrInit(v,true);}
BaseContainer.prototype.setValid=function(){var elements=this.m_container.getElements();for(var id in elements){elements[id].setValid();}}
BaseContainer.prototype.setNotValid=function(str){}
BaseContainer.prototype.getModified=function(){var res=false;var elements=this.m_container.getElements();for(var id in elements){if(elements[id].getModified()){res=true;break;}}
return res;}
BaseContainer.prototype.isNull=function(){var res=true;var elements=this.m_container.getElements();for(var id in elements){if(!elements[id].isNull()){res=false;break;}}
return res;}
BaseContainer.prototype.getFillPercent=function(){var tot=0,cnt=0;var elements=this.m_container.getElements();for(var o_id in elements){if(elements[o_id]&&elements[o_id].getFillPercent){tot+=elements[o_id].getFillPercent();cnt++;}}
return(cnt)?Math.floor(tot/cnt):0;}
BaseContainer.prototype.addPanelEvents=function(){$('.panel [data-action=collapse]').click(function(e){e.preventDefault();var $panelCollapse=$(this).parent().parent().parent().parent().nextAll();$(this).parents('.panel').toggleClass('panel-collapsed');$(this).toggleClass('rotate-180');var availableHeight=$(window).height()-$('.page-container').offset().top-$('.navbar-fixed-bottom').outerHeight();$('.page-container').attr('style','min-height:'+availableHeight+'px');$panelCollapse.slideToggle(150);});} 
function ApplicationClientContainer(id,options){options=options||{};options.template=window.getApp().getTemplate("ApplicationClientContainer");var self=this;options.addElement=function(){this.m_container=new ControlContainer(id+":container","DIV");this.addElement(this.m_container);this.addElement(new ButtonCmd(this.getId()+":cmdAdd",{"title":"Добавить нового исполнителя","caption":"Добавить исполнителя","onClick":function(){var new_elem=self.createNewElement();self.m_container.addElement(new_elem);new_elem.toDOM(self.m_container.getNode());self.addPanelEvents();self.m_mainView.calcFillPercent();}}));}
ApplicationClientContainer.superclass.constructor.call(this,id,options);}
extend(ApplicationClientContainer,BaseContainer); 
function CompoundObjTechFeatureCont(id,options){options=options||{};options.template=window.getApp().getTemplate("CompoundObjTechFeatureCont");var self=this;options.addElement=function(){this.m_container=new ControlContainer(id+":container","DIV");this.addElement(this.m_container);this.addElement(new ButtonCmd(this.getId()+":cmdAdd",{"title":"Добавить здание, сооружение в составе сложного бъекта (имущественного комплекса)","caption":"Добавить объект в составе сложного","onClick":function(){var new_elem=self.createNewElement();self.m_container.addElement(new_elem);new_elem.toDOM(self.m_container.getNode());self.addPanelEvents();self.m_mainView.calcFillPercent();}}));}
CompoundObjTechFeatureCont.superclass.constructor.call(this,id,options);}
extend(CompoundObjTechFeatureCont,BaseContainer); 
function EditBankAcc(id,options){options=options||{};options.type="text";options.maxLength=20;options.editMask="99999999999999999999";options.fixLength=true;options.cmdSelect=false;EditBankAcc.superclass.constructor.call(this,id,options);}
extend(EditBankAcc,EditString); 
function EditOGRN(id,options){options=options||{};if(options.isEnterprise==undefined){throw new Error("Не определен параметр isEnterprise!");}
this.m_isEnterprise=options.isEnterprise;options.type="text";options.cmdSelect=false;options.maxLength=this.m_isEnterprise?this.ENT_LEN:this.PERS_LEN;options.regExpression=/^[0-9]+$/;options.fixLength=true;options.events=options.events||{};var self=this;options.events.change=function(){self.validate();}
EditOGRN.superclass.constructor.call(this,id,options);}
extend(EditOGRN,EditString);EditOGRN.prototype.m_isEnterprise;EditOGRN.prototype.ENT_LEN=13;EditOGRN.prototype.PERS_LEN=15;EditOGRN.prototype.setIsEnterprise=function(v){var len=(v)?this.ENT_LEN:this.PERS_LEN;this.setAttr("maxlength",len);}
EditOGRN.prototype.getIsEnterprise=function(){return this.m_isEnterprise;} 
function EditINN(id,options){options=options||{};if(options.isEnterprise==undefined){throw new Error("Не определен параметр isEnterprise!");}
this.m_isEnterprise=options.isEnterprise;options.type="text";options.cmdSelect=false;options.maxLength=(this.m_isEnterprise)?this.ENT_LEN:this.PERS_LEN;options.regExpression=/^[0-9]+$/;options.fixLength=true;options.events=options.events||{};var self=this;options.events.change=function(){self.validate();}
EditINN.superclass.constructor.call(this,id,options);}
extend(EditINN,EditString);EditINN.prototype.m_isEnterprise;EditINN.prototype.ENT_LEN=10;EditINN.prototype.PERS_LEN=12;EditINN.prototype.setIsEnterprise=function(v){var len=v?this.ENT_LEN:this.PERS_LEN;this.setAttr("maxlength",len);}
EditINN.prototype.getIsEnterprise=function(){return this.m_isEnterprise;} 
function EditKPP(id,options){options=options||{};options.type="text";options.cmdSelect=false;options.maxLength=this.LEN;options.regExpression=/^[0-9]+$/;options.fixLength=true;options.events=options.events||{};var self=this;options.events.change=function(){self.validate();}
EditKPP.superclass.constructor.call(this,id,options);}
extend(EditKPP,EditString);EditKPP.prototype.m_isEnterprise;EditKPP.prototype.LEN=9; 
function EditPersonIdPaper(id,options){options=options||{};options.viewClass=ViewPersonIdPaper;options.viewTemplate="EditPersonIdPaper";options.headTitle="Документ, удостоверяющий личность";options.labelCaption="Документ, удостоверяющий личность:";this.m_mainView=options.mainView;EditPersonIdPaper.superclass.constructor.call(this,id,options);}
extend(EditPersonIdPaper,EditModalDialog);EditPersonIdPaper.prototype.formatValue=function(val){var res="";res+=((this.m_valueJSON&&this.m_valueJSON.paper&&!this.m_valueJSON.paper.isNull())?this.m_valueJSON.paper.getDescr():"");res+=((this.m_valueJSON&&this.m_valueJSON.series)?(((res=="")?"":", ")+this.m_valueJSON.series):"");res+=((this.m_valueJSON&&this.m_valueJSON.issue_body)?(((res=="")?"":", ")+this.m_valueJSON.issue_body):"");res+=(this.m_valueJSON&&this.m_valueJSON.issue_date)?(((res=="")?"":", ")+DateHelper.format(DateHelper.strtotime(this.m_valueJSON.issue_date),"d/m/Y")):"";return res;}
EditPersonIdPaper.prototype.closeSelect=function(){if(this.m_mainView&&this.m_mainView.calcFillPercent){this.m_mainView.calcFillPercent();}
EditPersonIdPaper.superclass.closeSelect.call(this);} 
function PersonIdPaperSelect(id,options){options=options||{};options.model=new PersonIdPaper_Model();options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new PersonIdPaper_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");PersonIdPaperSelect.superclass.constructor.call(this,id,options);}
extend(PersonIdPaperSelect,EditSelectRef); 
function EditPersonRegistrPaper(id,options){options=options||{};options.viewClass=ViewPersonRegistrPaper;options.viewTemplate="EditPersonRegistrPaper";options.labelCaption="Свидетельство ИП:",options.headTitle="Свидетельство индивидуального предпринимателя";this.m_mainView=options.mainView;EditPersonRegistrPaper.superclass.constructor.call(this,id,options);}
extend(EditPersonRegistrPaper,EditModalDialog);EditPersonRegistrPaper.prototype.getFillPercent=function(){return(((this.m_valueJSON&&this.m_valueJSON.id&&this.m_valueJSON.id!="")?50:0)
+((this.m_valueJSON&&this.m_valueJSON.issue_date&&this.m_valueJSON.issue_date!="")?50:0))}
EditPersonRegistrPaper.prototype.formatValue=function(val){var res="";res+=((this.m_valueJSON&&this.m_valueJSON.id)?this.m_valueJSON.id:"");res+=(this.m_valueJSON&&this.m_valueJSON.issue_date)?(((res=="")?"":", ")+DateHelper.format(DateHelper.strtotime(this.m_valueJSON.issue_date),"d/m/Y")):"";return res;}
EditPersonRegistrPaper.prototype.closeSelect=function(){if(this.m_mainView&&this.m_mainView.calcFillPercent){this.m_mainView.calcFillPercent();}
EditPersonRegistrPaper.superclass.closeSelect.call(this);} 
function OfficeSelect(id,options){options=options||{};options.model=new OfficeList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||ApplicationDialog_View.prototype.FIELD_CAP_office;}
options.keyIds=options.keyIds||["office_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("address")];var contr=new Office_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");OfficeSelect.superclass.constructor.call(this,id,options);}
extend(OfficeSelect,EditSelectRef); 
function DocFlowTypeSelect(id,options){options=options||{};options.model=new DocFlowTypeList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вид письма:";}
options.cashable=false;options.keyIds=options.keyIds||["doc_flow_type_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new DocFlowType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");options.readPublicMethod.setFieldValue("cond_fields","doc_flow_types_type_id");options.readPublicMethod.setFieldValue("cond_vals",options.type_id);options.readPublicMethod.setFieldValue("cond_sgns","e");DocFlowTypeSelect.superclass.constructor.call(this,id,options);}
extend(DocFlowTypeSelect,EditSelectRef); 
function EmployeeEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Сотрудник:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=EmployeeList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=EmployeeDialog_Form;options.acMinLengthForQuery=1;options.acController=new Employee_Controller();options.acModel=new EmployeeList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";EmployeeEditRef.superclass.constructor.call(this,id,options);}
extend(EmployeeEditRef,EditRef); 
function DepartmentSelect(id,options){options=options||{};options.model=new DepartmentList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Отдел:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new Department_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");DepartmentSelect.superclass.constructor.call(this,id,options);}
extend(DepartmentSelect,EditSelectRef); 
function ApplicationDocFolderSelect(id,options){options=options||{};options.model=new ApplicationDocFolder_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Папка:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ApplicationDocFolder_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ApplicationDocFolderSelect.superclass.constructor.call(this,id,options);}
extend(ApplicationDocFolderSelect,EditSelectRef); 
function DepartmentEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Отдел:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=DepartmentList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=DepartmentDialog_Form;options.acMinLengthForQuery=1;options.acController=new Department_Controller();options.acModel=new DepartmentList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DepartmentEditRef.superclass.constructor.call(this,id,options);}
extend(DepartmentEditRef,EditRef); 
function ConstructionTypeSelect(id,options){options=options||{};options.model=new ConstructionType_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вид объекта:";}
options.keyIds=options.keyIds||["construction_type_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ConstructionType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ConstructionTypeSelect.superclass.constructor.call(this,id,options);}
extend(ConstructionTypeSelect,EditSelectRef); 
function FundSourceSelect(id,options){options=options||{};options.model=new FundSource_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Источник финансирования:";}
options.keyIds=options.keyIds||["fund_source_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new FundSource_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");FundSourceSelect.superclass.constructor.call(this,id,options);}
extend(FundSourceSelect,EditSelectRef); 
function BuildTypeSelect(id,options){options=options||{};options.model=new BuildType_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вид строительства:";}
options.keyIds=options.keyIds||["build_type_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new BuildType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");BuildTypeSelect.superclass.constructor.call(this,id,options);}
extend(BuildTypeSelect,EditSelectRef); 
function ExpertiseRejectTypeSelect(id,options){options=options||{};options.model=new ExpertiseRejectType_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вид отрицат.закл.:";}
options.keyIds=options.keyIds||["expertise_reject_type_id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new ExpertiseRejectType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");ExpertiseRejectTypeSelect.superclass.constructor.call(this,id,options);}
extend(ExpertiseRejectTypeSelect,EditSelectRef); 
function DocFlowImportanceTypeSelect(id,options){options=options||{};options.model=new DocFlowImportanceTypeList_Model();if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Важность:";}
options.keyIds=options.keyIds||["id"];options.modelKeyFields=[options.model.getField("id")];options.modelDescrFields=[options.model.getField("name")];var contr=new DocFlowImportanceType_Controller();options.readPublicMethod=contr.getPublicMethod("get_list");DocFlowImportanceTypeSelect.superclass.constructor.call(this,id,options);}
extend(DocFlowImportanceTypeSelect,EditSelectRef); 
function PostEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Сотрудник:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=PostList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=null;options.acMinLengthForQuery=1;options.acController=new Post_Controller();options.acModel=new Post_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";PostEditRef.superclass.constructor.call(this,id,options);}
extend(PostEditRef,EditRef); 
function ApplicationEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Заявление:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ApplicationList_Form;options.selectDescrIds=options.selectDescrIds||["select_descr"];options.editWinClass=ApplicationDialog_Form;options.acMinLengthForQuery=1;options.acController=new Application_Controller();options.acModel=new ApplicationList_Model();options.acPatternFieldId=options.acPatternFieldId||"id";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("select_descr")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ApplicationEditRef.superclass.constructor.call(this,id,options);}
extend(ApplicationEditRef,EditRef); 
function ContractEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Контракт:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ContractList_Form;options.selectDescrIds=options.selectDescrIds||["self_ref"];options.editWinClass=ContractDialog_Form;options.acMinLengthForQuery=1;options.acController=new Contract_Controller();options.acModel=new ContractList_Model();options.acPatternFieldId=options.acPatternFieldId||"expertise_result_number";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("self_ref")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ContractEditRef.superclass.constructor.call(this,id,options);}
extend(ContractEditRef,EditRef); 
function ClientNameEdit(id,options){options=options||{};var self=this;if(options.labelCaption==undefined){options.labelCaption="Наименование:";}
options.labelCaption="Наименование:";options.placeholder="Краткое наименование контрагента";options.maxLength=100;options.events=options.events||{};this.m_onBlur=options.events.blur;options.events.blur=function(){self.fillFullName.call(self);if(self.m_onBlur){self.m_onBlur.call(self);}};this.m_view=options.view;ClientNameEdit.superclass.constructor.call(this,id,options);}
extend(ClientNameEdit,EditString);ClientNameEdit.prototype.m_view;ClientNameEdit.prototype.m_onBlur;ClientNameEdit.prototype.fillFullName=function(){if(this.m_view.getElement("name_full").isNull()&&!this.isNull()){var full_names=[{"short":"ООО","full":"Общество с ограниченной ответственностью"},{"short":"ЗАО","full":"Закрытое акционерное общество"},{"short":"ОАО","full":"Открытое акционерное общество"},{"short":"ПАО","full":"Публичное акционерное общество"},{"short":"АО","full":"Акционерное общество"},{"short":"ИП","full":""}];var short=this.getValue();for(var i=0;i<full_names.length;i++){if(short.substr(0,full_names[i].short.length+1)==(full_names[i].short+" ")){var s=((full_names[i].full.length)?full_names[i].full+" ":"")+short.substr(full_names[i].short.length);s=s.trim();this.m_view.getElement("name_full").setValue(s);if(this.m_view.elementExists("responsable_person_head")&&this.m_view.getElement("client_type")=="person"&&this.m_view.getElement("responsable_person_head").isNull()){this.m_view.getElement("responsable_person_head").getValueJSON()["name"]=s;}
break;}}}} 
function ClientNameFullEdit(id,options){options=options||{};var self=this;if(options.labelCaption==undefined){options.labelCaption="Официальное наименование:";}
options.placeholder="Наименование в точном соответствии с учредительными документами";options.maxLength=500;ClientNameEdit.superclass.constructor.call(this,id,options);}
extend(ClientNameFullEdit,EditString); 
function ClientINN(id,options){options=options||{};options.isEnterprise=true;options.labelCaption="ИНН:";options.placeholder="ИНН организации";this.m_mainView=options.mainView;var self=this;options.buttonSelect=new ButtonOrgSearch(id+":btnOrgSearch",{"viewContext":self.m_mainView,"onGetData":function(model){this.applyResult(model);self.m_mainView.getElement("name_full").reset();self.m_mainView.getElement("name").fillFullName();if(self.m_mainView&&self.m_mainView.m_mainView&&self.m_mainView.m_mainView.calcFillPercent)self.m_mainView.m_mainView.calcFillPercent();}});ClientINN.superclass.constructor.call(this,id,options);}
extend(ClientINN,EditINN);function ClientKPP(id,options){options=options||{};options.labelCaption="КПП:";options.placeholder="КПП организации";ClientKPP.superclass.constructor.call(this,id,options);}
extend(ClientKPP,EditKPP);function ClientOGRN(id,options){options=options||{};options.isEnterprise=true;options.labelCaption="ОГРН:";ClientOGRN.superclass.constructor.call(this,id,options);}
extend(ClientOGRN,EditOGRN);function ClientSNILS(id,options){options=options||{};options.maxLength="14";options.labelCaption="СНИЛС:";options.placeholder="СНИЛС физ.лица";options.editMask="999-999-999 99";ClientSNILS.superclass.constructor.call(this,id,options);}
extend(ClientSNILS,EditString);function ClientOKPO(id,options){options=options||{};options.maxLength="20";options.labelCaption="ОКПО:";options.placeholder="Код ОКПО организации";ClientOKPO.superclass.constructor.call(this,id,options);}
extend(ClientOKPO,EditString);function ClientOKVED(id,options){options=options||{};options.maxLength="200";options.labelCaption="ОКВЭД:";options.placeholder="Коды ОКВЭД организации";ClientOKVED.superclass.constructor.call(this,id,options);}
extend(ClientOKVED,EditString);function ClientDocForContract(id,options){options=options||{};options.maxLength="200";options.placeholder="Устав, доверенность и т.д.";options.labelCaption="Документ, на основании которого действует руководитель при подписании договора:";ClientDocForContract.superclass.constructor.call(this,id,options);}
extend(ClientDocForContract,EditString);function ClientType(id,options){options=options||{};options.editContClassName="input-group "+window.getBsCol(12);this.m_clientTypeLabels={"name":{"labelCaption":{"enterprise":"Краткое наименование:"},"placeholder":{"enterprise":"Сокращенное наименование контрагента"},"visible":{"enterprise":true,"person":false,"pboul":false},"percentcalc":true},"name_full":{"labelCaption":{"enterprise":"Полное наименование:","person":"ФИО:","pboul":"ФИО:"},"placeholder":{"enterprise":"Наименование в точном соответствии с учредительными документами","person":"Фамилия имя отчество физического лица","pboul":"Фамилия имя отчество предпринимателя"},"percentcalc":true},"person_id_paper":{"visible":{"enterprise":false,"person":true,"pboul":true},"percentcalc":!options.minInf},"person_registr_paper":{"visible":{"enterprise":false,"pboul":true,"person":false},"percentcalc":!options.minInf},"inn":{"labelCaption":{"enterprise":"ИНН:","pboul":"ИНН:"},"placeholder":{"enterprise":"ИНН организации","pboul":"ИНН предпринимателя"},"enterpriseAttr":true,"visible":{"enterprise":true,"pboul":true,"person":false},"percentcalc":!options.minInf},"ogrn":{"labelCaption":{"enterprise":"ОГРН:","pboul":"ОГРНИП:"},"placeholder":{"enterprise":"ОГРН организации","pboul":"ОГРН предпринимателя"},"enterpriseAttr":true,"visible":{"enterprise":true,"pboul":true,"person":false},"percentcalc":!options.minInf},"kpp":{"visible":{"enterprise":true,"pboul":false,"person":false},"percentcalc":!options.minInf},"okved":{"visible":{"enterprise":true,"person":false,"pboul":false},"percentcalc":!options.minInf},"okpo":{"visible":{"enterprise":true,"person":false,"pboul":false}},"legal_address":{"labelCaption":{"enterprise":"Юридический адрес:","pboul":"Адрес регистрации:"},"visible":{"enterprise":true,"pboul":true,"person":false},"percentcalc":!options.minInf},"post_address":{"fillTitle":{"enterprise":"Заполнить как юридический адрес","person":"Заполнить как адрес регистрации"},"fillVisible":{"enterprise":true,"pboul":true,"person":false},"percentcalc":!options.minInf},"responsable_person_head":{"visible":{"enterprise":true,"person":false,"pboul":false},"percentcalc":!options.minInf},"bank":{"visible":{"enterprise":true,"pboul":true,"person":false},"percentcalc":!options.minInf},"base_document_for_contract":{"visible":{"enterprise":true,"pboul":false,"person":false},"percentcalc":!options.minInf},"responsable_persons":{"setClientType":true,"percentcalc":!options.minInf},"snils":{"visible":{"enterprise":false,"pboul":false,"person":true},"percentcalc":!options.minInf},"corp_email":{"placeholder":{"enterprise":"Электронная почта организации","pboul":"Электронная почта предпринимателя","person":"Электронная почта физического лица"}}};this.m_mainView=options.mainView;this.m_view=options.view;var self=this;options.elements=[new EditRadio(id+":enterprise",{"name":id,"value":"enterprise","labelCaption":"Юридическое лицо","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(6),"checked":true,"events":{"change":function(){self.recalc();}}}),new EditRadio(id+":pboul",{"name":id,"value":"pboul","labelCaption":"Индивидуальный предприниматель","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(8),"events":{"change":function(){self.recalc();}}}),new EditRadio(id+":person",{"name":id,"value":"person","labelCaption":"Физическое лицо","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(5),"events":{"change":function(){self.recalc();}}})];ClientType.superclass.constructor.call(this,id,options);}
extend(ClientType,EditRadioGroup);ClientType.prototype.recalc=function(){this.setClientType(this.getValue());if(this.m_mainView&&this.m_mainView.calcFillPercent){this.m_mainView.calcFillPercent();}}
ClientType.prototype.setClientType=function(ctp){if(ctp==undefined)return;ctp=(ctp==undefined)?"enterprise":ctp;for(var id in this.m_clientTypeLabels){if(this.m_view.elementExists(id)){if(this.m_clientTypeLabels[id].visible&&!this.m_clientTypeLabels[id].visible[ctp]){this.m_view.getElement(id).setVisible(false);this.m_view.getElement(id).setAttr("percentcalc","false");}
else{if(this.m_clientTypeLabels[id].percentcalc)this.m_view.getElement(id).setAttr("percentcalc","true");var ctrl=this.m_view.getElement(id);if(this.m_clientTypeLabels[id].labelCaption){ctrl.getLabel().setValue(this.m_clientTypeLabels[id].labelCaption[ctp]);}
if(this.m_clientTypeLabels[id].placeholder){ctrl.setAttr("placeholder",this.m_clientTypeLabels[id].placeholder[ctp]);}
if(this.m_clientTypeLabels[id].enterpriseAttr){ctrl.setIsEnterprise(ctp=="enterprise");}
if(this.m_clientTypeLabels[id].fillTitle){ctrl.setFillTitle(this.m_clientTypeLabels[id].fillTitle[ctp]);}
if(this.m_clientTypeLabels[id].fillVisible&&this.m_clientTypeLabels[id].fillVisible[ctp]!=undefined){ctrl.setFillVisible(this.m_clientTypeLabels[id].fillVisible[ctp]);}
if(this.m_clientTypeLabels[id].setClientType){ctrl.setClientType(ctp);}
if(!ctrl.getVisible()){ctrl.setVisible(true);}}}}} 
function ClientPostAddressEdit(id,options){options=options||{};var self=this;options.buttonSelect=new ButtonCtrl(id+":copy-from-legal",{"enabled":options.enabled,"glyph":"glyphicon-arrow-left","title":"заполнить как юридический","onClick":function(){self.copyFromLegal();}});options.labelCaption="Почтовый адрес:";this.m_legalAddress=options.legalAddress;this.m_view=options.view;this.m_mainView=options.mainView;ClientPostAddressEdit.superclass.constructor.call(this,id,options);}
extend(ClientPostAddressEdit,EditAddress);ClientPostAddressEdit.prototype.copyFromLegal=function(){if(this.m_legalAddress)this.setValue(this.m_legalAddress.getValue());if(this.m_mainView&&this.m_mainView.calcFillPercent){this.m_mainView.calcFillPercent();}}
ClientPostAddressEdit.prototype.setFillTitle=function(v){this.getButtonSelect().setAttr("title",v);}
ClientPostAddressEdit.prototype.setFillVisible=function(v){this.getButtonSelect().setVisible(v);}
function ClientLegalAddressEdit(id,options){options=options||{};options.labelCaption="Юридический адрес:";ClientLegalAddressEdit.superclass.constructor.call(this,id,options);}
extend(ClientLegalAddressEdit,EditAddress); 
function ApplicationPrimaryCont(id,options){options=options||{};this.m_isModification=options.isModification;this.m_primaryFieldId=options.primaryFieldId;this.m_mainView=options.mainView;var self=this;options.addElement=function(){if(!this.m_isModification){this.addElement(new EditRadioGroup(id+":grp",{"editContClassName":"input-group "+window.getBsCol(12),"elements":[new EditRadio(id+":grp:primary",{"name":"is_primary","value":"primary","labelCaption":"Первичная","contClassName":window.getBsCol(6),"labelClassName":"control-label "+window.getBsCol(7),"checked":true,"events":{"change":function(){self.m_mainView.getElement("primary_application").setAttr("percentcalc","false");self.setType(self.getElement("grp").getValue());self.m_mainView.calcFillPercent();}}}),new EditRadio(id+":grp:not_primary",{"name":"is_primary","value":"not_primary","labelCaption":"Повторная","contClassName":window.getBsCol(6),"labelClassName":"control-label "+window.getBsCol(7),"events":{"change":function(){self.m_mainView.getElement("primary_application").setAttr("percentcalc","true");self.setType(self.getElement("grp").getValue());self.m_mainView.calcFillPercent();}}})]}));}
this.addElement(new options.editClass(id+":primary_ref",{"labelCaption":options.editLabelCaption,"contClassName":"row","enabled":false,"events":{"blur":function(){self.m_mainView.calcFillPercent();}},"onSelect":function(){if(!self.m_isModification){WindowQuestion.show({"text":"Заполнить по первичному заявлению?","cancel":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){self.fillOnPrimary();}}});}}}));this.addElement(new ApplicationRegNumber(id+":primary_reg_number",{"labelCaption":"Или рег. номер:","contClassName":"row","enabled":false,"events":{"blur":function(){self.m_mainView.calcFillPercent();}}}));}
ApplicationPrimaryCont.superclass.constructor.call(this,id,"DIV",options);this.setType("primary");}
extend(ApplicationPrimaryCont,ControlContainer);ApplicationPrimaryCont.prototype.m_isModification;ApplicationPrimaryCont.prototype.m_primaryFieldId;ApplicationPrimaryCont.prototype.setType=function(tp){if(!this.m_isModification){var prim=(tp=="primary");var ctrl_ref=this.getElement("primary_ref");ctrl_ref.setEnabled(!prim)
var ctrl_num=this.getElement("primary_reg_number")
ctrl_num.setEnabled(!prim);if(prim&&!ctrl_ref.isNull()){ctrl_ref.reset();}
if(prim&&!ctrl_num.isNull()){ctrl_num.reset();}}}
ApplicationPrimaryCont.prototype.setValue=function(v){}
ApplicationPrimaryCont.prototype.setInitValue=function(v){var tp="primary";if(v&&typeof v=="object"){if(v[this.m_primaryFieldId]){this.getElement("primary_reg_number").setValue(v[this.m_primaryFieldId]);tp="not_primary";}
else if(v.backward_ord&&v.backward_ord.length){this.getElement("primary_ref").setValue(v.backward_ord[0]);tp="not_primary";}}
if(!this.m_isModification){this.getElement("grp").setInitValue(tp);this.setType(tp);}}
ApplicationPrimaryCont.prototype.getValue=function(){}
ApplicationPrimaryCont.prototype.reset=function(){this.getElement("primary_ref").reset();this.getElement("primary_reg_number").reset();}
ApplicationPrimaryCont.prototype.isNull=function(){return(this.getElement("primary_ref").isNull()&&this.getElement("primary_reg_number").isNull());}
ApplicationPrimaryCont.prototype.getModified=function(){if(!this.m_isModification){return this.getElement("grp").getModified();}
else{return(this.getElement("primary_ref").getModified()||this.getElement("primary_reg_number").getModified());}}
ApplicationPrimaryCont.prototype.fillOnPrimary=function(){var pm=this.m_mainView.getController().getPublicMethod("get_object");pm.setFieldValue("id",this.getElement("primary_ref").getValue().getKey("id"));pm.setFieldValue("mode","copy");var self=this;pm.run({"ok":function(resp){self.m_mainView.onGetData(resp,"copy");}})} 
function ServiceCheckBox(id,options){ServiceCheckBox.superclass.constructor.call(this,id,options);}
extend(ServiceCheckBox,EditCheckBox);ServiceCheckBox.prototype.setEnabled=function(enable){DOMHelper.swapClasses(document.getElementById(this.getId()+"-panel"),enable?"service-type-en":"service-type-dis",!enable?"service-type-en":"service-type-dis");ServiceCheckBox.superclass.setEnabled.call(this,enable);}
function ApplicationServiceCont(id,options){options=options||{};this.m_mainView=options.mainView;options.templateOptions=options.templateOptions||{};var self=this;options.addElement=function(){this.addElement(new ServiceCheckBox(id+":expertise",{"inline":true,"labelCaption":"Государственная экспертиза","labelAlign":"right","labelClassName":"","events":{"click":function(e){this.switchValue();e.stopPropagation();return false;},"change":function(){var cur_val=this.getValue();self.getElement("modification").setEnabled(!cur_val);self.getElement("audit").setEnabled((!cur_val&&!self.getElement("cost_eval_validity").getValue()));var ctrl=self.getElement("expertise_type");ctrl.setEnabled(cur_val);if(!cur_val){ctrl.setValue(null);self.onChangeExpertiseType();}
self.m_mainView.getElement("app_print_expertise").setActive(cur_val);self.toggleService("expertise",cur_val);var sim_en=(self.getElement("cost_eval_validity").getValue()&&cur_val);self.getElement("cost_eval_validity_simult").setEnabled(sim_en);if(!sim_en&&!self.getElement("cost_eval_validity").getValue()&&self.getElement("cost_eval_validity_simult").getValue()){self.getElement("cost_eval_validity_simult").setValue(false);}}}}));this.addElement(new EditRadioGroup(id+":expertise_type",{"inline":true,"contClassName":"","enabled":false,"elements":[new EditRadio(id+":grp:pd",{"name":"expertise_type","value":"pd","labelCaption":"ПД","labelAlign":"right","labelClassName":"","contClassName":"row","editContClassName":"custom-edit-cont","className":"styled","enabled":false,"events":{"change":function(){self.onChangeExpertiseType();}}}),new EditRadio(id+":grp:eng_survey",{"name":"expertise_type","value":"eng_survey","labelCaption":"РИИ","labelAlign":"right","labelClassName":"","contClassName":"row","editContClassName":"","className":"","events":{"change":function(){self.onChangeExpertiseType();}}}),new EditRadio(id+":grp:pd_eng_survey",{"name":"expertise_type","value":"pd_eng_survey","labelCaption":"ПД и РИИ","labelAlign":"right","labelClassName":"","contClassName":"row","editContClassName":"","className":"","events":{"change":function(){self.onChangeExpertiseType();}}})]}));this.addElement(new ServiceCheckBox(id+":cost_eval_validity",{"inline":true,"labelCaption":"Достоверность","labelAlign":"right","labelClassName":"","events":{"change":function(){var cur_val=this.getValue();self.m_mainView.getElement("limit_cost_eval").setVisible(cur_val);self.m_mainView.getElement("limit_cost_eval").setAttr("percentcalc",cur_val);self.getElement("cost_eval_validity_simult").setEnabled(cur_val);if(!cur_val&&self.getElement("cost_eval_validity_simult").getValue()){self.getElement("cost_eval_validity_simult").setValue(false);}
var doc_types_for_remove=[];var tab_name="cost_eval_validity";if(!cur_val&&self.m_mainView.m_documentTabs[tab_name].control&&self.m_mainView.m_documentTabs[tab_name].control.getTotalFileCount()){doc_types_for_remove.push(tab_name);}
var this_cont=this;self.m_mainView.removeDocumentTypeWithWarn(doc_types_for_remove,function(){var sim_ctrl=self.getElement("cost_eval_validity_simult");if(cur_val){sim_ctrl.setEnabled(self.getElement("expertise").getValue());}
else{sim_ctrl.setValue(false);sim_ctrl.setEnabled(false);}
self.getElement("audit").setEnabled((!cur_val&&!self.getElement("expertise").getValue()&&!self.getElement("modification").getValue()));self.m_mainView.getElement("app_print_cost_eval").setActive(cur_val);self.toggleService("cost_eval_validity",cur_val);self.m_mainView.toggleDocTypeVis();},function(){this_cont.setValue(!cur_val);});}}}));this.addElement(new EditCheckBox(id+":cost_eval_validity_simult",{"inline":true,"labelAlign":"right","labelClassName":"","enabled":false,"labelCaption":"Одновременно с ПД"}));this.addElement(new ServiceCheckBox(id+":modification",{"inline":true,"labelCaption":"Модификация","labelAlign":"right","labelClassName":"","events":{"change":function(){var cur_val=this.getValue();self.getElement("primary_application").setEnabled(cur_val);if(!cur_val&&!self.getElement("primary_application").isNull()){self.getElement("primary_application").reset();}
var doc_types_for_remove=[];var tab_name="modification";if(!cur_val&&self.m_mainView.m_documentTabs[tab_name].control&&self.m_mainView.m_documentTabs[tab_name].control.getTotalFileCount()){doc_types_for_remove.push(tab_name);}
var this_cont=this;self.m_mainView.removeDocumentTypeWithWarn(doc_types_for_remove,function(){var ctrl=self.getElement("primary_application");if(cur_val){ctrl.setEnabled(true);}
else{ctrl.reset();ctrl.setEnabled(false);}
self.getElement("expertise").setEnabled(!cur_val);self.getElement("audit").setEnabled((!cur_val&&!self.getElement("cost_eval_validity").getValue()));self.m_mainView.getElement("app_print_modification").setActive(cur_val);self.toggleService("modification",cur_val);self.m_mainView.toggleDocTypeVis();},function(){this_cont.setValue(!cur_val);});}}}));this.addElement(new ApplicationPrimaryCont(id+":primary_application",{"isModification":true,"editClass":ApplicationEditRef,"editLabelCaption":"Первичное заявление:","primaryFieldId":"primary_application_reg_number","mainView":options.mainView}));this.addElement(new ServiceCheckBox(id+":audit",{"inline":true,"labelCaption":"Аудит","labelAlign":"right","labelClassName":"","events":{"change":function(){var cur_val=this.getValue();self.toggleService("audit",cur_val);var exp_ctrl=self.getElement("expertise");var mofid_ctrl=self.getElement("modification");var ev_ctrl=self.getElement("cost_eval_validity");self.m_mainView.getElement("app_print_audit").setActive(cur_val);if(this.m_started&&!cur_val){var this_cont=this;var doc_types_for_remove=[];var tab_name="audit";if(self.m_mainView.m_documentTabs[tab_name].control&&self.m_mainView.m_documentTabs[tab_name].control.getTotalFileCount()){doc_types_for_remove.push(tab_name);}
self.m_mainView.removeDocumentTypeWithWarn(doc_types_for_remove,function(){self.getElement("expertise").setEnabled(!cur_val);self.getElement("cost_eval_validity").setEnabled(!cur_val);self.getElement("modification").setEnabled(!cur_val);self.m_mainView.toggleDocTypeVis();},function(){self.toggleService("audit",true);this_cont.setValue(true);});}
else if(this.m_started&&cur_val){self.getElement("expertise").setEnabled(!cur_val);self.getElement("cost_eval_validity").setEnabled(!cur_val);self.getElement("modification").setEnabled(!cur_val);self.m_mainView.toggleDocTypeVis();}
else if(!this.m_started){this.m_started=true;}}}}));}
ApplicationServiceCont.superclass.constructor.call(this,id,"TEMPLATE",options);this.tabId="common_inf-tab";this.setAttr("percentcalc","true");this.getFillPercent=function(){var perc;if(this.isNull()){perc=0;}
else if(self.getElement("modification").getValue()){perc=self.getElement("primary_application").isNull()?0:100;}
else{perc=100;}
return perc;}}
extend(ApplicationServiceCont,ControlContainer);ApplicationServiceCont.prototype.serviceNotSelectedClass="bg-grey-300";ApplicationServiceCont.prototype.serviceSelectedClass="bg-info service-type-selected";ApplicationServiceCont.prototype.m_mainView;ApplicationServiceCont.prototype.onChangeExpertiseType=function(){var cur_val=this.getElement("expertise_type").getValue();var doc_types_for_remove=[];if((this.m_mainView.m_prevExpertiseType=="pd"||this.m_mainView.m_prevExpertiseType=="pd_eng_survey")&&cur_val=="eng_survey"&&this.m_mainView.m_documentTabs["pd"].control&&this.m_mainView.m_documentTabs["pd"].control.getTotalFileCount()){doc_types_for_remove.push("pd");}
else if((this.m_mainView.m_prevExpertiseType=="eng_survey"||this.m_mainView.m_prevExpertiseType=="pd_eng_survey")&&cur_val=="pd"&&this.m_mainView.m_documentTabs["eng_survey"].control&&this.m_mainView.m_documentTabs["eng_survey"].control.getTotalFileCount()){doc_types_for_remove.push("eng_survey");}
var self=this;this.m_mainView.removeDocumentTypeWithWarn(doc_types_for_remove,function(){var pd_usage_info_vis=(cur_val=="pd"||cur_val=="pd_eng_survey");self.m_mainView.getElement("pd_usage_info").setVisible(pd_usage_info_vis);self.m_mainView.getElement("pd_usage_info").setAttr("percentcalc",pd_usage_info_vis);self.m_mainView.toggleDocTypeVis();},function(){self.getElement("expertise_type").setValue(self.m_mainView.m_prevExpertiseType);});}
ApplicationServiceCont.prototype.isNull=function(){var r=(!this.getElement("expertise").getValue()&&!this.getElement("cost_eval_validity").getValue()&&!this.getElement("modification").getValue()&&!this.getElement("audit").getValue());return r;}
ApplicationServiceCont.prototype.toggleService=function(serviceId,enable){DOMHelper.swapClasses(document.getElementById(this.getId()+":"+serviceId+"-panel"),enable?this.serviceSelectedClass:this.serviceNotSelectedClass,!enable?this.serviceSelectedClass:this.serviceNotSelectedClass);} 
function ApplicationRegNumber(id,options){options=options||{};options.maxLength="20";ApplicationRegNumber.superclass.constructor.call(this,id,options);}
extend(ApplicationRegNumber,EditString); 
function ReportTemplateFileApplyCmd(id,options){options=options||{};options.caption="Создать файл по шаблону  ";options.showCmdControl=true;options.glyph="glyphicon glyphicon-duplicate";ReportTemplateFileApplyCmd.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFileApplyCmd,GridCmd);ReportTemplateFileApplyCmd.prototype.onCommand=function(){var ctrl=this.getGrid();var fields=ctrl.getModelRow();if(!fields)return;var self=this;var pm=(new ReportTemplateFile_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",fields.id.getValue());pm.run({"ok":function(resp){var m=resp.getModel("ReportTemplateFileDialog_Model");if(m.getNextRow()){(new ReportTemplateFileApplyCmd_Form(self.getId()+":form",{"inParams":m.getFieldValue("in_params").rows,"templateId":m.getFieldValue("report_templates_ref").getKey()})).open();}}})} 
function DocFlowOutEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Исх.документ:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["doc_flow_out_id"];this.m_descrFunc=function(fields){return(window.getApp().getDataType("doc_flow_out").dataTypeDescrLoc+" "+
(fields.reg_number.getValue()?("№"+fields.reg_number.getValue()):fields.subject.getValue())+" от "+
DateHelper.format(fields.date_time.getValue(),"d/m/Y"));};options.selectWinClass=DocFlowOutList_Form;options.selectFormatFunction=this.m_descrFunc;options.editWinClass=DocFlowOutDialog_Form;options.acMinLengthForQuery=1;options.acController=new DocFlowOut_Controller();options.acModel=new DocFlowOutList_Model();options.acPatternFieldId=options.acPatternFieldId||"reg_number";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=this.m_descrFunc;options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DocFlowOutEditRef.superclass.constructor.call(this,id,options);}
extend(DocFlowOutEditRef,EditRef); 
function DocFlowInEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Вход.документ:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["doc_flow_in_id"];this.m_descrFunc=function(fields){return(window.getApp().getDataType("doc_flow_in").dataTypeDescrLoc+" "+
(fields.reg_number.getValue()?("№"+fields.reg_number.getValue()):fields.subject.getValue())+" от "+
DateHelper.format(fields.date_time.getValue(),"d/m/Y"));};options.selectWinClass=DocFlowInList_Form;options.selectFormatFunction=this.m_descrFunc;options.editWinClass=DocFlowInDialog_Form;options.acMinLengthForQuery=1;options.acController=new DocFlowIn_Controller();options.acModel=new DocFlowInList_Model();options.acPatternFieldId=options.acPatternFieldId||"reg_number";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=this.m_descrFunc;options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DocFlowInEditRef.superclass.constructor.call(this,id,options);}
extend(DocFlowInEditRef,EditRef); 
function DocFlowInsideEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Внутренний документ:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["doc_flow_inside_id"];this.m_descrFunc=function(fields){return(window.getApp().getDataType("doc_flow_inside").dataTypeDescrLoc+" "+
fields.id.getValue()+" от "+
DateHelper.format(fields.date_time.getValue(),"d/m/Y"));};options.selectWinClass=DocFlowInsideList_Form;options.selectFormatFunction=this.m_descrFunc;options.editWinClass=DocFlowInsideDialog_Form;options.acMinLengthForQuery=1;options.acController=new DocFlowInside_Controller();options.acModel=new DocFlowInsideList_Model();options.acPatternFieldId=options.acPatternFieldId||"id";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFunction=this.m_descrFunc;options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";DocFlowInsideEditRef.superclass.constructor.call(this,id,options);}
extend(DocFlowInsideEditRef,EditRef); 
function DocFlowRecipientRef(id,options){options=options||{};var app=window.getApp();options.possibleDataTypes={"departments":app.getDataType("departments"),"employees":app.getDataType("employees")};DocFlowRecipientRef.superclass.constructor.call(this,id,options);}
extend(DocFlowRecipientRef,EditCompound); 
function EditContactList(id,options){options=options||{};options.viewClass=ViewContact;options.headTitle="Контакты";options.labelCaption="Контакты:";EditContactList.superclass.constructor.call(this,id,options);}
extend(EditContactList,EditModalDialog);EditContactList.prototype.CONTACT_CNT=1;EditContactList.prototype.formatValue=function(val){var res="";if(this.m_valueJSON&&this.m_valueJSON.contacts){var model=new ContactName_Model({"fields":["name"],"data":CommonHelper.unserialize(this.m_valueJSON.contacts)});var cnt=0;while(model.getNextRow()){res+=(res=="")?"":", ";res+=model.getFieldValue("name");cnt++;if(cnt==this.CONTACT_CNT){var rest=model.getRowCount()-cnt;if(rest){res+=", еще "+rest+"...";}
break;}}}
return res;} 
function EditContact(id,options){options=options||{};options.labelCaption=(options.labelCaption!=undefined)?options.labelCaption:"Контакт:",options.placeholder="Адрес электронной почты и имя получателя";options.cmdAutoComplete=true;options.acMinLengthForQuery=1;var ac_m=new ContactList_Model();options.acModel=ac_m;options.acPublicMethod=(new Contact_Controller()).getPublicMethod("get_complete_list");options.acPatternFieldId="search";options.acKeyFields=[ac_m.getField("contact")];options.acDescrFields=[ac_m.getField("contact")];options.acICase=1;options.acMid=1;options.control=this;EditContact.superclass.constructor.call(this,id,options);}
extend(EditContact,EditString); 
function Reminder(checkInterval,shortMessage){this.m_checkInterval=checkInterval||this.CHECK_INTERVAL;this.m_controller=new Reminder_Controller();this.m_updMeth=this.m_controller.getPublicMethod("set_viewed");this.m_shortMessage=shortMessage;}
Reminder.prototype.CHECK_INTERVAL=30;Reminder.prototype.m_checkInterval;Reminder.prototype.m_timerId;Reminder.prototype.m_controller;Reminder.prototype.m_updMeth;Reminder.prototype.m_shortMessage;Reminder.prototype.start=function(){var self=this;this.check();this.m_timerId=setInterval(function(){self.check();},this.m_checkInterval*1000);}
Reminder.prototype.stop=function(){clearInterval(this.m_timerId);this.m_timerId=undefined;}
Reminder.prototype.check=function(){var self=this;this.m_controller.run("get_unviewed_list",{"ok":function(resp){var m=resp.getModel("ReminderUnviewedList_Model");var id_list="";while(m.getNextRow()){var tp_ref=m.getFieldValue("doc_flow_importance_types_ref");var com_imp=(tp_ref.isNull()||tp_ref.getKey("id")==window.getApp().getPredefinedItem("doc_flow_importance_types","common").getKey("id"));var sender=m.getFieldValue("short_message_sender");var cont=m.getFieldValue("content");if(sender){cont=sender+": "+cont;}
window.showMsg(com_imp?WindowMessage.prototype.TP_INFO:WindowMessage.prototype.TP_ER,{"value":cont,"attrs":{"style":"cursor:pointer;","docs_ref":CommonHelper.serialize(m.getFieldValue("docs_ref"))},"events":{"click":function(e){e=EventHelper.fixMouseEvent(e);var el=e.target;while(!el.attributes||!el.attributes.docs_ref){el=el.parentNode;}
var ref=el.getAttribute("docs_ref");if(ref){self.openDoc(CommonHelper.unserialize(ref));}}}});id_list+=(id_list=="")?"":",";id_list+=m.getFieldValue("id");}
if(id_list.length){self.m_updMeth.setFieldValue("id_list",id_list);self.m_updMeth.run();}
var m=resp.getModel("DocFlowTaskShortList_Model");if(m){self.updateTaskList(m);}}});}
Reminder.prototype.updateTaskList=function(model){if(document.getElementById("DocFlowTaskActive")){var cnt=model.getRowCount();$("#unclosed_task_cnt").text(((cnt==0)?"":cnt));var v=new DocFlowTaskShortList_View("DocFlowTaskActive",{"models":{"DocFlowTaskShortList_Model":model}});v.toDOM();}}
Reminder.prototype.setCheckInterval=function(v){this.m_checkInterval=v;}
Reminder.prototype.getCheckInterval=function(){return this.m_checkInterval;}
Reminder.prototype.openDoc=function(ref){var cl=window.getApp().getDataType(ref.getDataType()).dialogClass;(new cl({"id":CommonHelper.uniqid(),"keys":ref.getKeys(),"params":{"cmd":"edit","editViewOptions":{}}})).open();} 
function ShortMessage(){var self=this;$("#ShortMessage-toggle").click(function(){self.showView();});$("#ShortMessage-status").click(function(){self.selectState();});this.m_state=CommonHelper.unserialize(window.getApp().getServVar("recipient_states_ref"));this.updateState();}
ShortMessage.prototype.m_state;ShortMessage.prototype.m_model;ShortMessage.prototype.m_stateModel;ShortMessage.prototype.updateCount=function(resp){var m=new ModelXML("ShortMessageUnviewedCount_Model",{"data":resp.getModelData("ShortMessageUnviewedCount_Model")});var cnt=0;if(m.getNextRow()){cnt=m.getFieldValue("count");}
$("#ShortMessage-unviewd_cnt").text((cnt==0)?"":cnt);}
ShortMessage.prototype.getStateClass=function(stateId){var res;if(this.m_stateModel){this.m_stateModel.reset();while(this.m_stateModel.getNextRow()){if(this.m_stateModel.getFieldValue("id")==stateId){res=this.m_stateModel.getFieldValue("bg_class");break;}}}
else{var self=this;(new ShortMessageRecipientState_Controller).getPublicMethod("get_list").run({"async":false,"ok":function(resp){self.m_stateModel=resp.getModel("ShortMessageRecipientState_Model");self.res=self.getStateClass(stateId);}});res=this.res;}
return res;}
ShortMessage.prototype.updateState=function(){$("#ShortMessage-status").text(this.getState().getDescr());$("#ShortMessage-status").attr("class","label "+this.getStateClass(this.getState().getKey("id")));}
ShortMessage.prototype.getState=function(){return this.m_state;}
ShortMessage.prototype.setState=function(stateRef){var pm=(new ShortMessage_Controller).getPublicMethod("set_recipient_state");pm.setFieldValue("recipient_state_id",stateRef.getKey("id"));var self=this;pm.run({"ok":function(){self.m_state=stateRef;self.updateState();}})}
ShortMessage.prototype.selectState=function(){if(this.m_model){this.doSelectState();}
else{var pm=(new ShortMessageRecipientState_Controller).getPublicMethod("get_list");var self=this;pm.run({"ok":function(resp){self.m_model=resp.getModel("ShortMessageRecipientState_Model");self.doSelectState();}});}}
ShortMessage.prototype.doSelectState=function(){this.m_stateSelectMenu=new PopUpMenu({"caption":"Ваш статус:"});var cur_st_id=this.getState().getKey("id");var self=this;this.m_model.reset();while(this.m_model.getNextRow()){if(this.m_model.getFieldValue("id")!=cur_st_id){this.m_stateSelectMenu.add({"id":this.m_model.getFieldValue("id"),"caption":this.m_model.getFieldValue("name"),"onClick":function(el,id){self.m_model.reset();while(self.m_model.getNextRow()){if(self.m_model.getFieldValue("id")==id){self.setState(new RefType({"keys":{"id":id},"descr":self.m_model.getFieldValue("name")}));break;}}}});}}
this.m_stateSelectMenu.show(null,CommonHelper.nd("ShortMessage-status"));}
ShortMessage.prototype.showView=function(){if(this.m_form){this.m_form.setVisible(true);this.m_recipients.setRefreshInterval(this.m_recipients.oldRefreshInterval);}
else{var self=this;this.m_recipients=new ShortMessageRecipientGrid("ShortMessage:recipients",{"hideView":function(){self.m_form.setVisible(false);},"showView":function(){self.m_form.setVisible(true);},"getStateClass":function(stateId){return self.getStateClass(stateId);}});this.m_form=new PopOver("ShortMessage-form",{"caption":"Чат","contentElements":[this.m_recipients],"onHide":function(){self.m_recipients.oldRefreshInterval=self.m_recipients.getRefreshInterval();self.m_recipients.setRefreshInterval(0);}});this.m_form.toDOM(null,CommonHelper.nd("ShortMessage-cont"));}} 
function EditColorPalette(id,options){options=options||{};var self=this;options.buttonSelect=new ButtonCtrl(id+":btnSel",{"glyph":"glyphicon-menu-hamburger","onClick":function(e){self.selectColor(this.getEditControl());}});EditColorPalette.superclass.constructor.call(this,id,options);}
extend(EditColorPalette,EditString);EditColorPalette.prototype.selectColor=function(editCtrl){var self=this;this.m_view=new View(this.getId()+":view:body:view",{"template":window.getApp().getTemplate("ColorPaletteList"),"events":{"click":function(e){if(e.target.tagName.toUpperCase()=="DIV"){var color=e.target.attributes.color_palette.value;editCtrl.setValue(color);self.closeSelect();var old_color=window.getApp().getColorClass();window.getApp().setColorClass(color);var sl=$(document.body);$(".bg-"+old_color).toggleClass(".bg-"+old_color+" bg-"+color);$(".text-"+old_color).toggleClass(".text-"+old_color+" text-"+color);$(".border-"+old_color).toggleClass(".border-"+old_color+" border-"+color);}}}});this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":false,"controlOkCaption":null,"controlOkTitle":null,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){self.closeSelect();},"content":this.m_view,"contentHead":"Цветовая схема"});this.m_form.open();}
EditColorPalette.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}} 
function BtnNextNum(id,options){options.glyph="glyphicon-chevron-left";options.title="Сформировать номер";var self=this;options.onClick=function(){self.getNextNum();}
this.m_view=options.view;BtnNextNum.superclass.constructor.call(this,id,options);}
extend(BtnNextNum,ButtonCtrl);BtnNextNum.prototype.getNextNum=function(){var key=this.m_view.checkDocFlowType();var pm=this.m_view.getController().getPublicMethod("get_next_num");pm.setFieldValue("doc_flow_type_id",key);var self=this.m_view;pm.run({"ok":function(resp){var m=new ModelXML("NewNum_Model",{"fields":["num"],"data":resp.getModelData("NewNum_Model")});if(m.getNextRow()){self.getElement("reg_number").setValue(m.getFieldValue("num"));}}})} 
function BtnNextContractNum(id,options){options.glyph="glyphicon-chevron-left";options.title="Сформировать номер контракта";var self=this;options.onClick=function(){self.getNextNum();}
this.m_view=options.view;BtnNextContractNum.superclass.constructor.call(this,id,options);}
extend(BtnNextContractNum,ButtonCtrl);BtnNextContractNum.prototype.getNextNum=function(){var pm=this.m_view.getController().getPublicMethod("get_next_contract_number");pm.setFieldValue("application_id",this.m_view.getElement("to_applications_ref").getValue().getKey("id"));var self=this.m_view;pm.run({"ok":function(resp){var m=new ModelXML("NewNum_Model",{"fields":["num"],"data":resp.getModelData("NewNum_Model")});if(m.getNextRow()){self.getElement("new_contract_number").setValue(m.getFieldValue("num"));}}})} 
function BtnEndDate(id,options){options.glyph="glyphicon-chevron-left";options.title="Рассчитать дату окончания";var self=this;options.onClick=function(){self.calcDate();}
this.m_view=options.view;BtnEndDate.superclass.constructor.call(this,id,options);}
extend(BtnEndDate,ButtonCtrl);BtnEndDate.prototype.calcDate=function(){er=false;if(!this.m_view.getElement("expertise_day_count").getValue()){this.m_view.getElement("expertise_day_count").setNotValid("Неверное значение");er=true;}
if(!this.m_view.getElement("expert_work_day_count").getValue()){this.m_view.getElement("expert_work_day_count").setNotValid("Неверное значение");er=true;}
if(er){throw Error("Неверные значения");}
var pm=this.m_view.getController().getPublicMethod("get_work_end_date");pm.setFieldValue("contract_id",this.m_view.getElement("id").getValue());pm.setFieldValue("date_type",this.m_view.getElement("date_type").getValue());pm.setFieldValue("work_start_date",this.m_view.getElement("work_start_date").getValue());pm.setFieldValue("expertise_day_count",this.m_view.getElement("expertise_day_count").getValue());pm.setFieldValue("expert_work_day_count",this.m_view.getElement("expert_work_day_count").getValue());var self=this.m_view;pm.run({"ok":function(resp){var m=new ModelXML("Date_Model",{"fields":["end_dt","work_end_dt"],"data":resp.getModelData("Date_Model")});if(m.getNextRow()){self.getElement("work_end_date").setValue(m.getFieldValue("end_dt"));self.getElement("expert_work_end_date").setValue(m.getFieldValue("work_end_dt"));}}})} 
function ReportTemplateFieldGrid(id,options){options=options||{};var model=new ReportTemplateField_Model();var cmd=(options.readOnly!=undefined&&options.readOnly)?new GridCmdContainerAjx(id+":fields:cmd",{"cmdInsert":false,"cmdEdit":false,"cmdDelete":false,"cmdSearch":false,"cmdExport":false}):new GridCmdContainerAjx(id+":fields:cmd",{"cmdSearch":false,"cmdExport":false});var popup_menu=(options.enabled==undefined||options.enabled)?new PopUpMenu():null;CommonHelper.merge(options,{"model":model,"keyIds":["id"],"controller":new ReportTemplateField_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":cmd,"head":new GridHead(id+":fields:head",{"elements":[new GridRow(id+":fields:head:row0",{"elements":[new GridCellHead(id+":fields:head:id",{"value":"Поле","columns":[new GridColumn({"field":model.getField("id"),"ctrlClass":EditString,"maxLength":"50","ctrlOptions":{"required":true}})]}),new GridCellHead(id+":fields:head:descr",{"value":"Описание","columns":[new GridColumn({"field":model.getField("descr"),"ctrlClass":EditString,"maxLength":"250","ctrlOptions":{"required":true}})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true,"focus":true});ReportTemplateFieldGrid.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFieldGrid,GridAjx); 
function ReportTemplateEditRef(id,options){options=options||{};if(options.labelCaption!=""){options.labelCaption=options.labelCaption||"Сотрудник:";}
options.cmdInsert=(options.cmdInsert!=undefined)?options.cmdInsert:false;options.keyIds=options.keyIds||["id"];options.selectWinClass=ReportTemplateList_Form;options.selectDescrIds=options.selectDescrIds||["name"];options.editWinClass=ReportTemplate_Form;options.acMinLengthForQuery=1;options.acController=new ReportTemplate_Controller();options.acModel=new ReportTemplateList_Model();options.acPatternFieldId=options.acPatternFieldId||"name";options.acKeyFields=options.acKeyFields||[options.acModel.getField("id")];options.acDescrFields=options.acDescrFields||[options.acModel.getField("name")];options.acICase=options.acICase||"1";options.acMid=options.acMid||"1";ReportTemplateEditRef.superclass.constructor.call(this,id,options);}
extend(ReportTemplateEditRef,EditRef); 
function ReportTemplateFileApplyCmd(id,options){options=options||{};options.caption="Создать файл по шаблону  ";options.showCmdControl=true;options.glyph="glyphicon glyphicon-duplicate";ReportTemplateFileApplyCmd.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFileApplyCmd,GridCmd);ReportTemplateFileApplyCmd.prototype.onCommand=function(){var ctrl=this.getGrid();var fields=ctrl.getModelRow();if(!fields)return;var self=this;var pm=(new ReportTemplateFile_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",fields.id.getValue());pm.run({"ok":function(resp){var m=resp.getModel("ReportTemplateFileDialog_Model");if(m.getNextRow()){(new ReportTemplateFileApplyCmd_Form(self.getId()+":form",{"inParams":m.getFieldValue("in_params").rows,"templateId":m.getFieldValue("report_templates_ref").getKey()})).open();}}})} 
function DocFlowApprovementRecipientGrid(id,options){var model=new DocFlowApprovementRecipientList_Model({"sequences":{"id":0}});this.m_orig_recMove=model.recMove;var self=this;model.recMove=function(ind,cnt){self.m_orig_recMove.call(this,ind,cnt);self.calcSteps();}
this.m_mainView=options.view;options={"model":model,"keyIds":["id"],"controller":new DocFlowApprovementRecipientList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerObj(id+":cmd",{"cmdSearch":false,"cmdExport":false,"addCustomCommands":function(commands){commands.push(new DocFlowApprovementSelectRecipientTmplCmd(id+":cmd:apply",{"mainView":self.m_mainView}));}}),"head":new GridHead(id+":recipient_list:head",{"elements":[new GridRow(id+":head:row0",{"elements":[new GridCellHead(id+":head:row0:step",{"value":"Шаг","columns":[new GridColumn({"field":model.getField("step"),"ctrlClass":Edit,"ctrlOptions":{"enabled":false}})]}),new GridCellHead(id+":head:row0:employee",{"value":"С кем согласовать","columns":[new GridColumnRef({"field":model.getField("employee"),"ctrlClass":EmployeeEditRef,"form":EmployeeDialog_Form,"ctrlBindField":model.getField("employee"),"ctrlOptions":{"labelCaption":"",}})]}),new GridCellHead(id+":head:row0:employee_comment",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("employee_comment"),"ctrlClass":EditString})]}),new GridCellHead(id+":head:row0:approvement_order",{"value":"Порядок","columns":[new EnumGridColumn_doc_flow_approvement_orders({"field":model.getField("approvement_order"),"ctrlClass":Enum_doc_flow_approvement_orders})]}),new GridCellHead(id+":head:row0:approvement_dt",{"value":"Когда согласовано","columns":[new GridColumnDateTime({"field":model.getField("approvement_dt"),"ctrlClass":EditDateTime,"ctrlOptions":{"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","cmdClear":false}})]}),new GridCellHead(id+":head:row0:approvement_result",{"value":"Резальтат","columns":[new EnumGridColumn_doc_flow_approvement_results({"field":model.getField("approvement_result"),"ctrlClass":Enum_doc_flow_approvement_results})]})]})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};DocFlowApprovementRecipientGrid.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementRecipientGrid,GridAjx);DocFlowApprovementRecipientGrid.prototype.edit=function(cmd){if(!this.m_mainView.getEnabled())return;if(cmd=="edit"){var sel_n=this.getSelectedRow();this.setModelToCurrentRow(sel_n);}
this.m_view=new DocFlowApprovementRecipientEdit(this.getId()+":view:body:view",{"ord_vis":(this.m_mainView.getElement("doc_flow_approvement_type").getValue()=="mixed")?true:false,"valueJSON":{"employee":(cmd=="edit")?this.getModel().getFieldValue("employee"):null,"approvement_order":(cmd=="edit")?this.getModel().getFieldValue("approvement_order"):"after_preceding"},"template":window.getApp().getTemplate("DocFlowApprovementRecipientEdit")});var self=this;this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":true,"controlCancelCaption":this.BTN_CANCEL_CAP,"controlCancelTitle":this.BTN_CANCEL_TITLE,"cmdOk":true,"controlOkCaption":this.BTN_OK_CAP,"controlOkTitle":this.BTN_OK_TITLE,"onClickCancel":function(){self.closeSelect();},"onClickOk":function(){var v=self.m_view.getValueJSON();var pm=(cmd=="edit")?self.getUpdatePublicMethod():self.getInsertPublicMethod();if(cmd=="edit")pm.setFieldValue("old_id",self.getModel().getFieldValue("id"));if(v.employee)pm.setFieldValue("employee",v.employee);if(v.approvement_order)pm.setFieldValue("approvement_order",v.approvement_order);pm.run({"ok":function(){self.calcSteps();self.closeSelect();}});},"content":this.m_view,"contentHead":"Редактирование строки"});this.m_form.open();}
DocFlowApprovementRecipientGrid.prototype.closeSelect=function(){if(this.m_view){this.m_view.delDOM();delete this.m_view;}
if(this.m_form){this.m_form.close();delete this.m_form;}}
DocFlowApprovementRecipientGrid.prototype.calcSteps=function(){var m=this.getModel();var appr_order=this.m_mainView.getElement("doc_flow_approvement_type").getValue();var step=0;m.reset();while(m.getNextRow()){step+=((appr_order=="to_one")||(appr_order=="mixed"&&m.getFieldValue("approvement_order")=="after_preceding")||(!step))?1:0;m.m_currentRow.fields.step=step;}
this.onRefresh();}
DocFlowApprovementRecipientGrid.prototype.afterServerDelRow=function(){DocFlowApprovementRecipientGrid.superclass.afterServerDelRow.call(this);this.calcSteps();} 
function DocFlowApprovementRecipientEdit(id,options){options=options||{};self=this;options.addElement=function(){var id=this.getId();this.addElement(new EmployeeEditRef(id+":employee",{"attrs":{"autofocus":true}}));this.addElement(new Enum_doc_flow_approvement_orders(id+":approvement_order",{"labelCaption":"Порядок согласования:","required":options.ord_vis,"visible":options.ord_vis,"value":"after_preceding"}));}
DocFlowApprovementRecipientEdit.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementRecipientEdit,EditJSON); 
function ApplicationTemplateContentTree(id,options){options=options||{};this.m_mainView=options.mainView;var content_model=new ApplicationTemplateContent_Model({"sequences":{"id":0},"primaryKeyIndex":true});var self=this;var cmd_list={};if(options.cmdCopyFromMain){cmd_list.addElement=function(){this.addElement(new ButtonCmd(this.getId()+":cmdCopyFromMain",{"caption":"Скопировать из основного дерева","onClick":function(){self.m_mainView.getElement("content_for_experts").setValue(self.m_mainView.getElement("content").getValue());}}));}}
CommonHelper.merge(options,{"keyIds":["id"],"labelCaption":"Шаблон:","model":content_model,"className":"menuConstructor","controller":new ApplicationTemplateContent_Controller({"clientModel":content_model}),"commands":new GridCmdContainerAjx(id+":grid:cmd",cmd_list),"rootCaption":"РАЗДЕЛЫ","head":new GridHead(id+":head",{"rowOptions":[{"tagName":"LI"}],"elements":[new GridRow(id+":content-tree:head:row0",{"elements":[new GridCellHead(id+":content-tree:head:row0:descr",{"columns":[new GridColumn({"field":content_model.getField("descr"),"model":content_model,"cellOptions":{"tagName":"SPAN"}}),new GridColumnBool({"field":content_model.getField("required"),"model":content_model,"cellOptions":{"tagName":"SPAN"},"ctrlOptions":{"labelCaption":"Обязательно наличие файлов:","contTagName":"DIV","ctrlClass":EditCheckBox,"labelClassName":"control-label "+window.getBsCol(2),"editContClassName":"input-group "+window.getBsCol(1)}}),]})]})]})});ApplicationTemplateContentTree.superclass.constructor.call(this,id,options);}
extend(ApplicationTemplateContentTree,TreeAjx); 
function AccessPermissionGrid(id,options){var model=new AccessPermission_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:obj",{"value":"Объект","columns":[new GridColumnRef({"field":model.getField("obj"),"ctrlClass":PermissionEditRef,"ctrlOptions":{}})]})];options={"model":model,"keyIds":["id"],"controller":new AccessPermission_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};AccessPermissionGrid.superclass.constructor.call(this,id,options);}
extend(AccessPermissionGrid,GridAjx); 
function PermissionEditRef(id,options){options=options||{};var app=window.getApp();options.possibleDataTypes={"departments":app.getDataType("departments"),"employees":app.getDataType("employees")};PermissionEditRef.superclass.constructor.call(this,id,options);}
extend(PermissionEditRef,EditCompound); 
function ExpertWorkGrid(id,options){options=options||{};var model=new ExpertWorkList_Model();var contr=new ExpertWork_Controller();var popup_menu=new PopUpMenu();var self=this;CommonHelper.merge(options,{"contClassName":"sectionGrid","model":model,"keyIds":["id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"commands":new GridCmdContainerAjx(id+":grid:cmd",{"cmdSearch":false}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:date_time",{"value":"Дата","columns":[new GridColumnDateTime({"field":model.getField("date_time"),"dateFormat":"d/m/Y H:i","ctrlClass":EditDateTime,"ctrlOptions":{"cmdClear":false,"editMask":"99/99/9999 99:99","dateFormat":"d/m/Y H:i","enabled":(window.getApp().getServVar("role_id")=="admin"),"value":DateHelper.time()}})],"sortable":true,"sort":"desc"}),new GridCellHead(id+":grid:head:experts_ref",{"value":"Эксперт","columns":[new GridColumnRef({"field":model.getField("experts_ref"),"ctrlClass":EmployeeEditRef,"ctrlBindFieldId":"expert_id","ctrlOptions":{"cmdOpen":false,"cmdClear":false,"labelCaption":"","value":CommonHelper.unserialize(window.getApp().getServVar("employees_ref")),"enabled":(window.getApp().getServVar("role_id")=="admin"),"keyIds":["expert_id"]}})],"sortable":true}),new GridCellHead(id+":grid:head:comment_text",{"value":"Комментарий","columns":[new GridColumn({"field":model.getField("comment_text"),"ctrlClass":EditText,"ctrlOptions":{"attrs":{"autofocus":"autofocus"}}})]}),new GridCellHead(id+":grid:head:files",{"value":"Файлы","columns":[new GridColumn({"field":model.getField("files"),"ctrlClass":EditFile,"ctrlBindFieldId":"file_data","ctrlOptions":{"multipleFiles":true,"onDownload":function(fileId){self.onDownload(fileId);},"onDeleteFile":function(fileId,callBack){self.onDeleteFile(fileId,callBack);}}})]})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":null,"rowSelect":false,"focus":true,"filters":[{"field":"contract_id","sign":"e","val":options.contract_id},{"field":"section_id","sign":"e","val":options.section_id}]});this.m_contractId=options.contract_id;this.m_sectionId=options.section_id;ExpertWorkGrid.superclass.constructor.call(this,id,options);this.m_origCreateNewCell=this.createNewCell;this.createNewCell=function(column,row){if(column.getId()=="files"){var cell_class=column.getCellClass();var elements=[];var files=column.getField().getValue();if(files){var self=this;for(var i=0;i<files.length;i++){elements.push(new ControlContainer(null,"P",{"elements":[new Control(null,"A",{"value":files[i].name+"("+CommonHelper.byteFormat(files[i].size,2)+")","attrs":{"href":"#","file_id":files[i].id,"expert_id":this.getModel().getFieldValue("experts_ref").getKey("id")},"title":"Добавлен "+DateHelper.format(DateHelper.strtotime(files[i].date),"d/m/y"),"events":{"click":function(){self.downloadFile(this.getAttr("expert_id"),this.getAttr("file_id"));}}})]}));}}
return(new cell_class(row.getId()+":"+column.getId(),{"elements":elements}));}
else{return this.m_origCreateNewCell(column,row);}};var pm=contr.getPublicMethod("insert");pm.setFieldValue("contract_id",options.contract_id);pm.setFieldValue("section_id",options.section_id);var pm=contr.getPublicMethod("update");pm.setFieldValue("contract_id",options.contract_id);pm.setFieldValue("section_id",options.section_id);}
extend(ExpertWorkGrid,GridAjx);ExpertWorkGrid.prototype.onDownload=function(fileId){var f=this.getModel().getField("experts_ref");if(f.isSet()){this.downloadFile(f.getValue().getKey("id"),fileId);}}
ExpertWorkGrid.prototype.downloadFile=function(expertId,fileId){var pm=this.getReadPublicMethod().getController().getPublicMethod("download_file");pm.setFieldValue("contract_id",this.m_contractId);pm.setFieldValue("section_id",this.m_sectionId);pm.setFieldValue("expert_id",expertId);pm.setFieldValue("file_id",fileId);pm.download();}
ExpertWorkGrid.prototype.onDeleteFile=function(fileId,callBack){var f=this.getModel().getField("experts_ref");if(f.isSet()){var self=this;WindowQuestion.show({"text":"Удалить загруженный файл?","no":false,"callBack":function(res){if(res==WindowQuestion.RES_YES){var pm=self.getReadPublicMethod().getController().getPublicMethod("delete_file");pm.setFieldValue("contract_id",self.m_contractId);pm.setFieldValue("section_id",self.m_sectionId);pm.setFieldValue("expert_id",f.getValue().getKey("id"));pm.setFieldValue("file_id",fileId);pm.run({"ok":callBack});}}});}} 
function WorkHoursEdit(id,options){options=options||{};options.tagName="TEMPLATE";var self=this;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"9";var labelClassName="control-label "+bs+"3";for(var i=0;i<this.DAYS.length;i++){this.addElement(new EditCheckBox(id+":"+this.DAYS[i],{"labelCaption":this.DAYS_ALIAS[i],"contClassName":"form-group "+bs+"4","editContClassName":editContClassName,"labelClassName":labelClassName,"labelAlign":"right"}));this.addElement(new EditInterval(id+":"+this.DAYS[i]+"_from",{"labelCaption":"с","contClassName":"form-group "+bs+"4","editMask":"99:99","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new EditInterval(id+":"+this.DAYS[i]+"_to",{"labelCaption":"по","contClassName":"form-group "+bs+"4","editMask":"99:99","editContClassName":editContClassName,"labelClassName":labelClassName}));}}
WorkHoursEdit.superclass.constructor.call(this,id,options);}
extend(WorkHoursEdit,EditJSON);WorkHoursEdit.prototype.DAYS=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];WorkHoursEdit.prototype.DAYS_ALIAS=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"];WorkHoursEdit.prototype.getValueJSON=function(){var o=[];for(var i=0;i<this.DAYS.length;i++){o.push({"checked":this.getElement(this.DAYS[i]).getValue(),"from":this.getElement(this.DAYS[i]+"_from").getValue(),"to":this.getElement(this.DAYS[i]+"_to").getValue()});}
return o;}
WorkHoursEdit.prototype.setValueOrInit=function(v,isInit){var o;if(typeof(v)=="string"){o=CommonHelper.unserialize(v);}
else{o=v;}
console.dir(o)
for(var i=0;i<this.DAYS.length;i++){this.getElement(this.DAYS[i]).setValue(o[i].checked);this.getElement(this.DAYS[i]+"_from").setValue(o[i].from);this.getElement(this.DAYS[i]+"_to").setValue(o[i].to);}} 
function WorkHourEdit(id,options){options=options||{};options.tagName="DIV";var self=this;options.addElement=function(){var bs=window.getBsCol();var editContClassName="input-group "+bs+"9";var labelClassName="control-label "+bs+"3";this.addElement(new EditInterval(id+":from",{"labelCaption":"с","contClassName":"form-group "+bs+"4","editMask":"99:99","editContClassName":editContClassName,"labelClassName":labelClassName}));this.addElement(new EditInterval(id+":to",{"labelCaption":"по","contClassName":"form-group "+bs+"4","editMask":"99:99","editContClassName":editContClassName,"labelClassName":labelClassName}));}
WorkHourEdit.superclass.constructor.call(this,id,options);}
extend(WorkHourEdit,EditJSON); 
function ViewLocalGrid(id,options){var model=new ViewLocal_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:view",{"value":"Форма","columns":[new GridColumnRef({"field":model.getField("view"),"ctrlClass":ViewEditRef,"ctrlOptions":{}})]})];options={"model":model,"keyIds":["id"],"controller":new ViewLocal_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false}),"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};ViewLocalGrid.superclass.constructor.call(this,id,options);}
extend(ViewLocalGrid,GridAjx); 
function DocFlowApprovementTypeEdit(id,options){options=options||{};this.m_mainView=options.view;var bs=window.getBsCol();var editContClassName="input-group "+bs+"10";var labelClassName="control-label "+bs+"2";options.editContClassName="input-group "+bs+"9";options.labelClassName="control-label "+bs+"3";options.required=true;options.labelCaption="Направлять на согласование:";var self=this;options.elements=[new EditRadio(id+":doc_flow_approvement_type:to_all",{"name":"doc_flow_approvement_type","value":"to_all","labelCaption":"Всем","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(6),"checked":true,"events":{"change":function(){self.changeType();}}}),new EditRadio(id+":doc_flow_approvement_type:to_one",{"name":"doc_flow_approvement_type","value":"to_one","labelCaption":"По очереди","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(6),"checked":true,"events":{"change":function(){self.changeType();}}}),new EditRadio(id+":doc_flow_approvement_type:mixed",{"name":"doc_flow_approvement_type","value":"mixed","labelCaption":"Смешанно","contClassName":window.getBsCol(4),"labelClassName":"control-label "+window.getBsCol(6),"checked":true,"events":{"change":function(){self.changeType();}}})];DocFlowApprovementTypeEdit.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementTypeEdit,EditRadioGroup);DocFlowApprovementTypeEdit.prototype.m_mainView;DocFlowApprovementTypeEdit.prototype.changeType=function(){var ord_vis=(this.getValue()=="mixed")?true:false;this.m_mainView.getElement("recipient_list_ref").setColumnVisible("approvement_order",ord_vis);this.m_mainView.getElement("recipient_list_ref").calcSteps();} 
function DocFlowApprovementSelectRecipientTmplCmd(id,options){options=options||{};options.caption="Заполнить по шаблону  ";options.showCmdControl=true;options.glyph="glyphicon glyphicon-open-file";this.m_mainView=options.mainView;DocFlowApprovementSelectRecipientTmplCmd.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementSelectRecipientTmplCmd,GridCmd);DocFlowApprovementSelectRecipientTmplCmd.prototype.onCommand=function(){var self=this;var win=(new DocFlowApprovementTemplateList_Form().open());win.onSelect=function(fields){var pm=(new DocFlowApprovementTemplate_Controller()).getPublicMethod("get_object");pm.setFieldValue("id",fields.id.getValue());pm.run({"ok":function(resp){var m=resp.getModel("DocFlowApprovementTemplateDialog_Model");if(m.getNextRow()){self.m_mainView.getElement("doc_flow_approvement_type").setValue(m.getFieldValue("doc_flow_approvement_type"));var gr_model=self.getGrid().getModel();gr_model.clear();gr_model.setData(m.getFieldValue("recipient_list_ref"));self.getGrid().onRefresh();}}})
win.close();}} 
function ClientPaymentLoaderCmd(id,options){options=options||{};options.caption="Загрузить оплаты из 1с  ";options.showCmdControl=true;options.glyph="glyphicon glyphicon-import";this.m_mainView=options.mainView;ClientPaymentLoaderCmd.superclass.constructor.call(this,id,options);}
extend(ClientPaymentLoaderCmd,GridCmd);ClientPaymentLoaderCmd.prototype.onCommand=function(e){var self=this;if(this.m_panel){this.m_panel.delDOM();}
this.m_panel=new PopOver(this.getId()+":ClientPaymentLoaderPopOver",{"caption":"Загрузка оплат из 1с","contentElements":[new ClientPaymentLoader_View(this.getId()+":ClientPaymentLoader",{"onClose":function(res){if(res){self.getGrid().onRefresh();}
self.m_panel.delDOM();delete self.m_panel;}})]});this.m_panel.toDOM(e,this.getControl().getNode());} 
function Doc1c(id,options){options=options||{};this.m_getContractId=options.getContractId;var self=this;options.addElement=function(){this.addElement(new ButtonCmd(id+":makeDoc",{"caption":options.caption,"onClick":function(e){self.makeDoc(e)}}));this.addElement(new ControlContainer(id+":docList","TEMPLATE",{"elements":options.elements}));}
options.template=window.getApp().getTemplate("Doc1c");Doc1c.superclass.constructor.call(this,id,"TEMPLATE",options);}
extend(Doc1c,ControlContainer);Doc1c.prototype.createDocElement=function(docExtId,docNumber,docDate,docTotal,docType){var self=this;return new ControlContainer(this.getId()+":docList:cont-"+docExtId,"LI",{"elements":[new Control(this.getId()+":docList:"+docExtId,"A",{"attrs":{"href":"#","doc_ext_id":docExtId,"doc_number":docNumber,"doc_type":docType},"value":self.getDocDescr(docNumber,docDate,docTotal,docType),"events":{"click":function(e){self.printDoc(this.getAttr("doc_ext_id"),this.getAttr("doc_number"),this.getAttr("doc_type"));}}})]})}
Doc1c.prototype.getPrintWinParams=function(){var h=$(window).width()/3*2;var left=$(window).width()/2;var w=left-20;return{"top":50,"left":left,"width":w,"height":h};} 
function Doc1cOrder(id,options){options=options||{};options.caption="Создать счет";Doc1cOrder.superclass.constructor.call(this,id,options);if(options.contractId){this.updateList(options.contractId);}}
extend(Doc1cOrder,Doc1c);Doc1cOrder.prototype.makeDoc=function(e){var self=this;if(this.m_panel){this.m_panel.delDOM();}
this.m_panel=new PopOver(this.getId()+":newOrderParams",{"caption":"Новый счет","contentElements":[new NewOrder_View(this.getId()+":NewOrderTotal",{"onNewOrderCreated":function(model){self.m_panel.delDOM();if(model&&model.getNextRow()){window.showNote("Создан новый счет: "+self.getDocDescr(model.getFieldValue("doc_number"),model.getFieldValue("doc_date"),model.getFieldValue("doc_total")));self.getElement("docList").addElement(self.createDocElement(model.getFieldValue("doc_ext_id"),model.getFieldValue("doc_number"),model.getFieldValue("doc_date"),model.getFieldValue("doc_total")));self.getElement("docList").toDOM(self.getNode());}},"getContractId":self.m_getContractId})]});this.m_panel.toDOM(e,this.getElement("makeDoc").getNode());}
Doc1cOrder.prototype.getDocDescr=function(docNumber,docDate,docTotal){return"Счет №"+docNumber+" от "+DateHelper.format(docDate,"d/m/Y")+" сумма:"+docTotal.toFixed(2);}
Doc1cOrder.prototype.printDoc=function(docExtId,docNumber){var pm=(new Contract_Controller()).getPublicMethod("print_order");pm.setFieldValue("order_ext_id",docExtId);pm.setFieldValue("order_number",docNumber);var win_params=this.getPrintWinParams();pm.openHref("ViewXML","location=0,menubar=0,status=0,titlebar=0,top="+win_params.top+",left="+win_params.left+",width="+win_params.w+",height="+win_params.h);}
Doc1cOrder.prototype.updateList=function(contractId){if(!contractId){var ctrl_list=self.getElement("docList");ctrl_list.clear();ctrl_list.toDOM();return;}
var pm=(new Contract_Controller()).getPublicMethod("get_order_list");pm.setFieldValue("id",contractId);var self=this;pm.run({"ok":function(resp){var m=new ModelXML("OrderList_Model",{"fields":{"list":new FieldJSON("list")},"data":resp.getModelData("OrderList_Model")});if(m.getNextRow()){var ctrl_list=self.getElement("docList");ctrl_list.clear();var list=m.getFieldValue("list");if(list){for(var i=0;i<list.length;i++){ctrl_list.addElement(self.createDocElement(list[i].ext_id,list[i].number,DateHelper.strtotime(list[i].date),parseFloat(list[i].total)));}}
ctrl_list.toDOM(self.getNode());}},"fail":function(resp,errCode,errStr){window.showError("Невозможно получить выписанные счета из 1с: "+errStr);}})} 
function Doc1cAkt(id,options){options=options||{};options.caption="Создать акт";Doc1cAkt.superclass.constructor.call(this,id,options);if(options.contractId){this.updateList(options.contractId);}}
extend(Doc1cAkt,Doc1c);Doc1cAkt.prototype.makeDoc=function(e){var self=this;var pm=(new Contract_Controller()).getPublicMethod("make_akt");pm.setFieldValue("id",this.m_getContractId());this.getElement("makeDoc").setEnabled(false);pm.run({"ok":function(resp){self.getElement("makeDoc").setEnabled(true);self.onGetResp(resp,true);}});}
Doc1cAkt.prototype.getDocDescr=function(docNumber,docDate,docTotal,docType){return docType+" №"+docNumber+" от "+DateHelper.format(docDate,"d/m/Y")+((docType=="Акт")?", сумма:"+(docTotal?docTotal.toFixed(2):0):"");}
Doc1cAkt.prototype.printDoc=function(docExtId,docNumber,docType){var pm=(new Contract_Controller()).getPublicMethod((docType=="Акт")?"print_akt":"print_invoice");pm.setFieldValue("id",this.m_getContractId());var win_params=this.getPrintWinParams();pm.openHref("ViewXML","location=0,menubar=0,status=0,titlebar=0,top="+win_params.top+",left="+win_params.left+",width="+win_params.w+",height="+win_params.h);}
Doc1cAkt.prototype.update=function(fields){var list=this.getElement("docList");list.clear();if(fields.akt_ext_id.getValue()){list.addElement(this.createDocElement(fields.akt_ext_id.getValue(),fields.akt_number.getValue(),fields.akt_date.getValue(),fields.akt_total.getValue(),"Акт"));list.addElement(this.createDocElement(fields.invoice_ext_id.getValue(),fields.invoice_number.getValue(),fields.invoice_date.getValue(),fields.akt_total.getValue(),"Счет-фактура"));}
list.toDOM();}
Doc1cAkt.prototype.updateList=function(contractId){if(!contractId){var ctrl_list=self.getElement("docList");ctrl_list.clear();ctrl_list.toDOM();return;}
var pm=(new Contract_Controller()).getPublicMethod("get_ext_data");pm.setFieldValue("id",contractId);var self=this;pm.run({"ok":function(resp){self.onGetResp(resp,false);}});}
Doc1cAkt.prototype.onGetResp=function(resp,newAkt){var m=new ModelXML("ExtDoc_Model",{"fields":{"akt_ext_id":new FieldString("akt_ext_id"),"akt_number":new FieldString("akt_number"),"akt_date":new FieldDate("akt_date"),"akt_total":new FieldFloat("akt_total"),"invoice_ext_id":new FieldString("invoice_ext_id"),"invoice_date":new FieldDate("invoice_date"),"invoice_number":new FieldString("invoice_number")},"data":resp.getModelData("ExtDoc_Model")});if(m.getNextRow()){if(newAkt){window.showNote("Создан новый акт и счет-фактура: "+this.getDocDescr(m.getFieldValue("akt_number"),m.getFieldValue("akt_date"),m.getFieldValue("akt_total"),"Акт"));}
this.update(m.getFields());}} 
function LinkedContractListGrid(id,options){var model=new LinkedContractList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:contracts_ref",{"columns":[new GridColumnRef({"field":model.getField("contracts_ref"),"form":ContractDialog_Form,"ctrlClass":ContractEditRef})]})];var commands;if(options.enabled){commands=new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false});}
options={"showHead":false,"model":model,"keyIds":["id"],"controller":new LinkedContractList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":commands,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};LinkedContractListGrid.superclass.constructor.call(this,id,options);}
extend(LinkedContractListGrid,GridAjx); 
function ContractorListGrid(id,options){var model=new ContractorList_Model({});var cells=[new GridCellHead(id+":head:name",{"columns":[new GridColumn({"field":model.getField("name")})]})];options={"showHead":false,"model":model,"keyIds":["name"],"controller":new ContractorList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":null,"commands":null,"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};ContractorListGrid.superclass.constructor.call(this,id,options);}
extend(ContractorListGrid,GridAjx); 
function EmployeeListGrid(id,options){var model=new EmployeeLocalList_Model({"sequences":{"id":0}});var cells=[new GridCellHead(id+":head:employees_ref",{"columns":[new GridColumnRef({"field":model.getField("employees_ref"),"form":EmployeeDialog_Form,"ctrlClass":EmployeeEditRef})]})];options={"showHead":false,"model":model,"keyIds":["id"],"controller":new EmployeeLocalList_Controller({"clientModel":model}),"editInline":true,"editWinClass":null,"popUpMenu":new PopUpMenu(),"commands":new GridCmdContainerAjx(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":options.notExpert,"cmdEdit":options.notExpert,"cmdDelete":options.notExpert}),"readOnly":true,"head":new GridHead(id+":head",{"elements":[new GridRow(id+":head:row0",{"elements":cells})]}),"pagination":null,"autoRefresh":false,"refreshInterval":0,"rowSelect":true};EmployeeListGrid.superclass.constructor.call(this,id,options);}
extend(EmployeeListGrid,GridAjx); 
function ClientResponsablePersonEdit(id,options){options=options||{};self=this;options.addElement=function(){var id=this.getId();var bs=window.getBsCol(4);if(!options.clientTypePerson){this.addElement(new EditString(id+":dep",{"labelCaption":"Отдел:","attrs":{"autofocus":!options.calcPercent},"maxLength":"150","autofocus":true}));}
this.addElement(new EditString(id+":name",{"labelClassName":"control-label "+bs+(options.calcPercent?" percentcalc":""),"labelCaption":"ФИО:","attrs":{"autofocus":options.calcPercent},"maxLength":"150","autofocus":(options.clientTypePerson===true)}));if(options.showPost||!options.clientTypePerson){this.addElement(new EditString(id+":post",{"labelClassName":"control-label "+bs+(options.showPost?" percentcalc":""),"labelCaption":"Должность:","maxLength":"150"}));}
this.addElement(new EditPhone(id+":tel",{"labelClassName":"control-label "+bs+(options.calcPercent?" percentcalc":""),"labelCaption":"Телефон:"}));this.addElement(new EditEmail(id+":email",{"labelClassName":"control-label "+bs+(options.calcPercent?" percentcalc":""),"labelCaption":"Эл.почта:"}));if(!options.clientTypePerson&&!options.calcPercent){this.addElement(new Enum_responsable_person_types(id+":person_type",{"labelCaption":"Вид должн.лица:"}));}}
ClientResponsablePersonEdit.superclass.constructor.call(this,id,options);if(options.calcPercent){this.getElement("name").setRequired(true);this.getElement("tel").setRequired(true);this.getElement("email").setRequired(true);}}
extend(ClientResponsablePersonEdit,EditJSON); 
function ShortMessageRecipientGrid(id,options){options=options||{};this.m_getStateClass=options.getStateClass;this.m_hideView=options.hideView;this.m_showView=options.showView;var model=new ShortMessageRecipientList_Model();var contr=new ShortMessage_Controller();var popup_menu=null;var self=this;var gr_options={"model":model,"keyIds":["recipient_id"],"controller":contr,"editInline":true,"editWinClass":null,"popUpMenu":popup_menu,"readPublicMethod":contr.getPublicMethod("get_recipient_list"),"showHead":false,"navigate":false,"navigateClick":false,"className":"noBorder","onEventSetRowOptions":function(opts){if(!this.getModel().getFieldValue("is_online")){opts.className=((opts.className&&opts.className.length)?opts.className+" ":"")+"noBorder recipientUnavail recipient";opts.attrs=opts.attrs||{};opts.attrs.title="Не в сети";}
else{var cl=this.m_getStateClass(this.getModel().getFieldValue("recipient_states_ref").getKey("id"));opts.className=((opts.className&&opts.className.length)?opts.className+" ":"")+"noBorder recipient "+cl;opts.attrs.title="В сети. "+this.getModel().getFieldValue("recipient_states_ref").getDescr()+".";}
opts.events={"click":function(e){if(e.target.tagName!="INPUT"){self.getModel().getRow(this.getAttr("modelindex"));self.openMessageForm(self.getModel().getFields());}}}},"onEventSetCellOptions":function(opts){opts.className=((opts.className&&opts.className.length)?opts.className+" ":"")+"noBorder";},"commands":new GridCmdContainer(id+":cmd",{"cmdSearch":false,"cmdExport":false,"cmdInsert":false,"cmdEdit":false,"cmdAllCommands":false,"addCustomCommands":function(commands){commands.push(new GridCmd(id+":cmd:check",{"showCmdControl":true,"glyph":"glyphicon glyphicon-check","buttonClass":ButtonCtrl,"title":"Отметить всех","onCommand":function(){self.setCheck(true);}}));commands.push(new GridCmd(id+":cmd:uncheck",{"showCmdControl":true,"glyph":"glyphicon glyphicon-unchecked","buttonClass":ButtonCtrl,"title":"Отменить отметку у всех","onCommand":function(){self.setCheck(false);}}));}}),"head":new GridHead(id+":grid:head",{"elements":[new GridRow(id+":grid:head:row0",{"elements":[new GridCellHead(id+":grid:head:recipient_check",{"columns":[new GridColumn({"id":"recipient_check","cellElements":[{"elementClass":Control,"elementOptions":{"tagName":"input","className":"recipientCheck","attrs":{"type":"checkbox"}}}]})]}),new GridCellHead(id+":grid:head:recipient_descr",{"value":"Сотрудник","columns":[new GridColumn({"field":model.getField("recipient_descr")})],"sortable":true}),new GridCellHead(id+":grid:head:department_descr",{"value":"Отдел","columns":[new GridColumn({"field":model.getField("department_descr")})],"sort":"asc","sortable":true})]})]}),"pagination":null,"autoRefresh":true,"refreshInterval":5000,"rowSelect":false,"focus":true,"filters":null};ShortMessageRecipientGrid.superclass.constructor.call(this,id,gr_options);}
extend(ShortMessageRecipientGrid,GridAjx);ShortMessageRecipientGrid.prototype.setCheck=function(v){var recipients=DOMHelper.getElementsByAttr("recipientCheck",this.getNode(),"class",false);for(var i=0;i<recipients.length;i++){recipients[i].checked=v;}}
ShortMessageRecipientGrid.prototype.openMessageForm=function(rowFields){this.m_hideView();var recipients=DOMHelper.getElementsByAttr("recipientCheck",this.getNode(),"class",false);var recipient_ids=[];var recipient_descrs=[];var ind=0;var SHOW_CNT=10;var recipients_cnt=0;for(var i=0;i<recipients.length;i++){if(recipients[i].checked&&DOMHelper.getParentByTagName(recipients[i],"TR")){recipients_cnt++;}}
for(var i=0;i<recipients.length;i++){if(recipients[i].checked){var row=DOMHelper.getParentByTagName(recipients[i],"TR");if(row){this.getModel().getRow(row.getAttribute("modelindex"));recipient_ids.push(this.getModel().getFieldValue("recipients_ref").getKey("id"));if(ind==SHOW_CNT&&recipients_cnt>=SHOW_CNT*2){recipient_descrs.push({"recipient":"еще "+(recipients_cnt-10)+"...","ind":ind});}
else if(ind>SHOW_CNT&&recipients_cnt>=SHOW_CNT*2){}
else{recipient_descrs.push({"recipient":this.getModel().getFieldValue("recipient_init"),"ind":ind});}
ind++;}}}
var multy_rec=recipient_ids.length?true:false;if(!multy_rec){recipient_ids.push(rowFields.recipients_ref.getValue().getKey("id"));recipient_descrs.push({"recipient":rowFields.recipient_init.getValue(),"ind":0});}
var self=this;this.m_view=new ShortMessage_View(this.getId()+":form:view",{"multyRecipients":multy_rec,"recipient_ids":recipient_ids,"templateOptions":{"recipients":recipient_descrs,"multyRecipients":multy_rec,"notMultyRecipients":!multy_rec},"onClose":function(res){if(self.m_view){self.m_view.delDOM();delete self.m_view;}
if(self.m_form){self.m_form.close();delete self.m_form;}
if(res&&res.updated){window.showNote("Сообщение отправлено");}
else{self.m_showView();}}});this.m_form=new WindowFormModalBS(this.getId()+":form",{"cmdCancel":false,"cmdClose":true,"cmdOk":false,"content":this.m_view,"contentHead":"Новое сообщение"});this.m_form.open();} 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_admin":"Администратор","ru_client":"Клиент","ru_lawyer":"Юрист отдела приема","ru_expert":"Эксперт","ru_boss":"Руководитель","ru_accountant":"Бухгалтер"};options.options=[{"value":"admin","descr":multy_lang_values[window.getApp().getLocale()+"_"+"admin"],checked:(options.defaultValue&&options.defaultValue=="admin")},{"value":"client","descr":multy_lang_values[window.getApp().getLocale()+"_"+"client"],checked:(options.defaultValue&&options.defaultValue=="client")},{"value":"lawyer","descr":multy_lang_values[window.getApp().getLocale()+"_"+"lawyer"],checked:(options.defaultValue&&options.defaultValue=="lawyer")},{"value":"expert","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expert"],checked:(options.defaultValue&&options.defaultValue=="expert")},{"value":"boss","descr":multy_lang_values[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"accountant","descr":multy_lang_values[window.getApp().getLocale()+"_"+"accountant"],checked:(options.defaultValue&&options.defaultValue=="accountant")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect); 
Login_View.prototype.ER_LOGIN="Неправильный логин или пароль.";Login_View.prototype.CTRL_USER_LAB="Пользователь (email)";Login_View.prototype.CTRL_PWD_LAB="Пароль";PasswordRecovery_View.prototype.SUBMITED="Новый пароль направлен на Вашу электронную почту.";UserList_View.prototype.HEAD_TITLE="Пользолватели";UserProfile_View.prototype.HEAD_TITLE="Профиль пользователя";TimeZoneLocale_View.prototype.HEAD_TITLE="Профиль пользователя";Client_View.prototype.HEAD_TITLE="Данные контрагента";ClientList_View.prototype.HEAD_TITLE="Контрагенты";OfficeList_View.prototype.HEAD_TITLE="Места проведения экспертизы";DepartmentList_View.prototype.HEAD_TITLE="Отделы";ConstructionTypeList_View.prototype.HEAD_TITLE="Технические характеристики объектов строительства";ConstructionTypeDialog_View.prototype.HEAD_TITLE="Технические характеристики объекта строительства";DocFlowTypeList_View.prototype.HEAD_TITLE="Виды писем";DocFlowTypeDialog_View.prototype.HEAD_TITLE="Вид письма";DocFlowImportanceTypeList_View.prototype.HEAD_TITLE="Виды важностей писем";DocFlowOutList_View.prototype.HEAD_TITLE="Исходящие документы";DocFlowOutDialog_View.prototype.HEAD_TITLE="Исходящее документы";DocFlowInList_View.prototype.HEAD_TITLE="Входящие документы";DocFlowInDialog_View.prototype.HEAD_TITLE="Входящий документ";FundSourceList_View.prototype.HEAD_TITLE="Источники финансирования";FundSourceList_View.prototype.COL_CAP_name="Наименование";ReportTemplateList_View.prototype.HEAD_TITLE="Шаблоны отчетов";DocFlowExaminationList_View.prototype.HEAD_TITLE="Рассмотрения";DocFlowInClientList_View.prototype.HEAD_TITLE="Входящие письма";DocFlowOutClientList_View.prototype.HEAD_TITLE="Исходящие письма";DocFlowTaskList_View.prototype.HEAD_TITLE="Задачи (все)";DocFlowRegistrationList_View.prototype.HEAD_TITLE="Регистрации";ContractList_View.prototype.HEAD_TITLE="Контракты";ContractPdList_View.prototype.HEAD_TITLE="Контракты по проектной документации";ContractCostEvalValidityList_View.prototype.HEAD_TITLE="Контракты по достоверности";ContractModificationList_View.prototype.HEAD_TITLE="Контракты по модификации";ContractAuditList_View.prototype.HEAD_TITLE="Контракты по аудиту";DocFlowApprovementList_View.prototype.HEAD_TITLE="Согласования";Reminder_View.prototype.HEAD_TITLE="Напоминание";ReportTemplateFileList_View.prototype.HEAD_TITLE="Шаблоны печатных форм";ReportTemplateFile_View.prototype.HEAD_TITLE="Шаблон печатной формы";HolidayList_View.prototype.HEAD_TITLE="Государственные праздники";ContactList_View.prototype.HEAD_TITLE="Контакты";BankList_View.prototype.HEAD_TITLE="Банки";EmployeeList_View.prototype.HEAD_TITLE="Сотрудники";DocFlowApprovementTemplateList_View.prototype.HEAD_TITLE="Шаблоны согласований";DocFlowApprovementTemplate_View.prototype.HEAD_TITLE="Шаблон согласования";BuildTypeList_View.prototype.HEAD_TITLE="Виды строительства";ExpertiseRejectTypeList_View.prototype.HEAD_TITLE="Виды отрицательных заключений";ClientPaymentList_View.prototype.HEAD_TITLE="Оплаты клиентов";ProjectManager_View.prototype.HEAD_TITLE="Управление проектом";ApplicationProcessList_View.prototype.HEAD_TITLE="Статусы контрактов";DocFlowInsideList_View.prototype.HEAD_TITLE="Внутренние документы";DocFlowInsideDialog_View.prototype.HEAD_TITLE="Внутренний документ"; 
ViewList_View.prototype.OPEN_TITLE="Открыть объект";ViewList_View.prototype.OPEN_WIN_TITLE="Открыть в новом окне";ViewList_View.prototype.GRID_COL_CAP="Объект";ViewList_View.prototype.HEAD_TITLE="Все формы";ConstantList_View.prototype.GRID_COL_CAP="Константы";ConstantList_View.prototype.HEAD_TITLE="Константы";ViewSectionSelect.prototype.LABEL_CAPTION="Вид объекта:";MainMenuConstructorList_View.prototype.HEAD_TITLE="Конструктор меню";MainMenuConstructorList_View.prototype.GRID_ROLE_ID_COL_CAP="Код роли";MainMenuConstructorList_View.prototype.GRID_ROLE_DESCR_COL_CAP="Роль";MainMenuConstructorList_View.prototype.GRID_USER_DESCR_COL_CAP="Пользователь";About_View.prototype.LB_APP_NAME="Приложение:";About_View.prototype.LB_VERSION="Версия:";About_View.prototype.LB_AUTHOR="Разработчик:";About_View.prototype.LB_DB_NAME="База данных:";About_View.prototype.LB_TECH_MAIL="Тех.поддержка:";About_View.prototype.LB_FW_SERVER_VERSION="Версия платформы (сервер):";About_View.prototype.LB_FW_CLIENT_VERSION="Версия платформы (клиент):";UserList_View.prototype.HEAD_TITLE="Пользователи";MailForSendingList_View.prototype.HEAD_TITLE="Письма электронной почты";MailForSending_View.prototype.HEAD_TITLE="Письмо электронной почты"; 
function Constant_Controller(options){options=options||{};options.listModelClass=ConstantList_Model;options.objModelClass=ConstantList_Model;Constant_Controller.superclass.constructor.call(this,options);this.add_set_value();this.addGetList();this.addGetObject();this.add_get_values();}
extend(Constant_Controller,ControllerObjServer);Constant_Controller.prototype.add_set_value=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_value',opts);var options={};options.required=true;pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldString("val",options));this.addPublicMethod(pm);}
Constant_Controller.prototype.addGetList=function(){Constant_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldText("descr",f_opts));var f_opts={};pm.addField(new FieldText("val",f_opts));var f_opts={};pm.addField(new FieldText("val_type",f_opts));var f_opts={};pm.addField(new FieldText("ctrl_class",f_opts));var f_opts={};pm.addField(new FieldJSON("ctrl_options",f_opts));var f_opts={};pm.addField(new FieldText("view_class",f_opts));var f_opts={};pm.addField(new FieldJSON("view_options",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Constant_Controller.prototype.addGetObject=function(){Constant_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));pm.addField(new FieldString("mode"));}
Constant_Controller.prototype.add_get_values=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_values',opts);var options={};pm.addField(new FieldString("id_list",options));var options={};options.maxlength="1";pm.addField(new FieldString("field_sep",options));this.addPublicMethod(pm);} 
function Enum_Controller(options){options=options||{};Enum_Controller.superclass.constructor.call(this,options);this.add_get_enum_list();}
extend(Enum_Controller,ControllerObjServer);Enum_Controller.prototype.add_get_enum_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_enum_list',opts);var options={};pm.addField(new FieldString("id",options));this.addPublicMethod(pm);} 
function MainMenuConstructor_Controller(options){options=options||{};options.listModelClass=MainMenuConstructorList_Model;options.objModelClass=MainMenuConstructorDialog_Model;MainMenuConstructor_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(MainMenuConstructor_Controller,ControllerObjServer);MainMenuConstructor_Controller.prototype.addInsert=function(){MainMenuConstructor_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;options.enumValues='admin,client,lawyer,expert,boss,accountant';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Содержание";options.required=true;var field=new FieldText("content",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MainMenuConstructor_Controller.prototype.addUpdate=function(){MainMenuConstructor_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.alias="Код";options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.enumValues='admin,client,lawyer,expert,boss,accountant';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.alias="Содержание";var field=new FieldText("content",options);pm.addField(field);}
MainMenuConstructor_Controller.prototype.addDelete=function(){MainMenuConstructor_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};options.alias="Код";pm.addField(new FieldInt("id",options));}
MainMenuConstructor_Controller.prototype.addGetList=function(){MainMenuConstructor_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("role_id",f_opts));var f_opts={};pm.addField(new FieldString("role_descr",f_opts));var f_opts={};pm.addField(new FieldString("user_id",f_opts));var f_opts={};pm.addField(new FieldString("user_descr",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));}
MainMenuConstructor_Controller.prototype.addGetObject=function(){MainMenuConstructor_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function MainMenuContent_Controller(options){options=options||{};options.listModelClass=MainMenuContent_Model;options.objModelClass=MainMenuContent_Model;MainMenuContent_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(MainMenuContent_Controller,ControllerObjClient);MainMenuContent_Controller.prototype.addInsert=function(){MainMenuContent_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldString("viewid",options);pm.addField(field);var options={};var field=new FieldString("viewdescr",options);pm.addField(field);var options={};var field=new FieldBool("default",options);pm.addField(field);var options={};var field=new FieldString("glyphclass",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
MainMenuContent_Controller.prototype.addUpdate=function(){MainMenuContent_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldString("viewid",options);pm.addField(field);var options={};var field=new FieldString("viewdescr",options);pm.addField(field);var options={};var field=new FieldBool("default",options);pm.addField(field);var options={};var field=new FieldString("glyphclass",options);pm.addField(field);}
MainMenuContent_Controller.prototype.addDelete=function(){MainMenuContent_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
MainMenuContent_Controller.prototype.addGetList=function(){MainMenuContent_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));var f_opts={};pm.addField(new FieldString("viewid",f_opts));var f_opts={};pm.addField(new FieldString("viewdescr",f_opts));var f_opts={};pm.addField(new FieldBool("default",f_opts));var f_opts={};pm.addField(new FieldString("glyphclass",f_opts));}
MainMenuContent_Controller.prototype.addGetObject=function(){MainMenuContent_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function View_Controller(options){options=options||{};options.listModelClass=ViewList_Model;View_Controller.superclass.constructor.call(this,options);this.addGetList();this.addComplete();this.add_get_section_list();}
extend(View_Controller,ControllerObjServer);View_Controller.prototype.addGetList=function(){View_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldText("c",f_opts));var f_opts={};pm.addField(new FieldText("f",f_opts));var f_opts={};pm.addField(new FieldText("t",f_opts));var f_opts={};pm.addField(new FieldText("href",f_opts));var f_opts={};pm.addField(new FieldText("user_descr",f_opts));var f_opts={};pm.addField(new FieldText("section",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("user_descr");}
View_Controller.prototype.addComplete=function(){View_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldText("user_descr",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("user_descr");}
View_Controller.prototype.add_get_section_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_section_list',opts);this.addPublicMethod(pm);} 
function VariantStorage_Controller(options){options=options||{};options.objModelClass=VariantStorage_Model;VariantStorage_Controller.superclass.constructor.call(this,options);this.addInsert();this.add_upsert_filter_data();this.add_upsert_col_visib_data();this.add_upsert_col_order_data();this.add_upsert_all_data();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_get_filter_data();this.add_get_col_visib_data();this.add_get_col_order_data();this.add_get_all_data();}
extend(VariantStorage_Controller,ControllerObjServer);VariantStorage_Controller.prototype.addInsert=function(){VariantStorage_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldText("storage_name",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldText("variant_name",options);pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldJSON("filter_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_visib_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_order_data",options);pm.addField(field);}
VariantStorage_Controller.prototype.add_upsert_filter_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_filter_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("filter_data",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_col_visib_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_col_visib_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("col_visib",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_col_order_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_col_order_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("col_order",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_upsert_all_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('upsert_all_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};options.required=true;pm.addField(new FieldString("variant_name",options));var options={};options.required=true;pm.addField(new FieldJSON("all_data",options));var options={};options.required=true;pm.addField(new FieldBool("default_variant",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.addUpdate=function(){VariantStorage_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("user_id",options);pm.addField(field);field=new FieldInt("old_user_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldText("storage_name",options);pm.addField(field);field=new FieldText("old_storage_name",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldText("variant_name",options);pm.addField(field);field=new FieldText("old_variant_name",{});pm.addField(field);var options={};var field=new FieldBool("default_variant",options);pm.addField(field);var options={};var field=new FieldJSON("filter_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_visib_data",options);pm.addField(field);var options={};var field=new FieldJSON("col_order_data",options);pm.addField(field);}
VariantStorage_Controller.prototype.addDelete=function(){VariantStorage_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("user_id",options));var options={"required":true};pm.addField(new FieldText("storage_name",options));var options={"required":true};pm.addField(new FieldText("variant_name",options));}
VariantStorage_Controller.prototype.addGetList=function(){VariantStorage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));}
VariantStorage_Controller.prototype.addGetObject=function(){VariantStorage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldText("storage_name",f_opts));var f_opts={};pm.addField(new FieldText("variant_name",f_opts));pm.addField(new FieldString("mode"));}
VariantStorage_Controller.prototype.add_get_filter_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_filter_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_col_visib_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_col_visib_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_col_order_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_col_order_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);}
VariantStorage_Controller.prototype.add_get_all_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_all_data',opts);var options={};options.required=true;pm.addField(new FieldString("storage_name",options));var options={};pm.addField(new FieldString("variant_name",options));this.addPublicMethod(pm);} 
function Bank_Controller(options){options=options||{};options.listModelClass=BankList_Model;options.objModelClass=BankList_Model;Bank_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();this.addComplete();}
extend(Bank_Controller,ControllerObjServer);Bank_Controller.prototype.addGetList=function(){Bank_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};f_opts.alias="БИК";pm.addField(new FieldString("bik",f_opts));var f_opts={};pm.addField(new FieldString("codegr",f_opts));var f_opts={};f_opts.alias="Регион";pm.addField(new FieldString("gr_descr",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Кoр.счет";pm.addField(new FieldString("korshet",f_opts));var f_opts={};f_opts.alias="Адрес";pm.addField(new FieldString("adres",f_opts));var f_opts={};f_opts.alias="Город";pm.addField(new FieldString("gor",f_opts));var f_opts={};pm.addField(new FieldInt("tgoup",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("codegr,bik");}
Bank_Controller.prototype.addGetObject=function(){Bank_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="БИК";pm.addField(new FieldString("bik",f_opts));pm.addField(new FieldString("mode"));}
Bank_Controller.prototype.addComplete=function(){Bank_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("bik",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("bik");} 
function About_Controller(options){options=options||{};options.objModelClass=About_Model;About_Controller.superclass.constructor.call(this,options);this.addGetObject();}
extend(About_Controller,ControllerObjServer);About_Controller.prototype.addGetObject=function(){About_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();pm.addField(new FieldString("mode"));} 
function User_Controller(options){options=options||{};options.listModelClass=UserList_Model;options.objModelClass=UserDialog_Model;User_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_get_profile();this.add_password_recover();this.add_register();this.add_name_check();this.add_login();this.add_logout();this.add_logout_html();this.add_email_confirm();this.add_hide();}
extend(User_Controller,ControllerObjServer);User_Controller.prototype.addInsert=function(){User_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name_full",options);pm.addField(field);var options={};var field=new FieldBool("banned",options);pm.addField(field);var options={};options.required=true;options.enumValues='admin,client,lawyer,expert,boss,accountant';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};var field=new FieldInt("time_zone_locale_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.enumValues='ru';var field=new FieldEnum("locale_id",options);pm.addField(field);var options={};options.alias="Согласие на обработку персональных данных";var field=new FieldBool("pers_data_proc_agreement",options);pm.addField(field);var options={};options.alias="Дата создания";var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};options.alias="Адрес электр.почты подтвержден";var field=new FieldBool("email_confirmed",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Цветовая схема";var field=new FieldText("color_palette",options);pm.addField(field);var options={};options.alias="Дублировать напоминания на электронную почту";var field=new FieldBool("reminders_to_email",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
User_Controller.prototype.addUpdate=function(){User_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("name_full",options);pm.addField(field);var options={};var field=new FieldBool("banned",options);pm.addField(field);var options={};options.enumValues='admin,client,lawyer,expert,boss,accountant';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("role_id",options);pm.addField(field);var options={};var field=new FieldPassword("pwd",options);pm.addField(field);var options={};var field=new FieldString("phone_cel",options);pm.addField(field);var options={};var field=new FieldInt("time_zone_locale_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.enumValues='ru';var field=new FieldEnum("locale_id",options);pm.addField(field);var options={};options.alias="Согласие на обработку персональных данных";var field=new FieldBool("pers_data_proc_agreement",options);pm.addField(field);var options={};options.alias="Дата создания";var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};options.alias="Адрес электр.почты подтвержден";var field=new FieldBool("email_confirmed",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Цветовая схема";var field=new FieldText("color_palette",options);pm.addField(field);var options={};options.alias="Дублировать напоминания на электронную почту";var field=new FieldBool("reminders_to_email",options);pm.addField(field);}
User_Controller.prototype.addDelete=function(){User_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
User_Controller.prototype.addGetList=function(){User_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Логин";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="ФИО";pm.addField(new FieldString("name_full",f_opts));var f_opts={};f_opts.alias="Email";pm.addField(new FieldString("email",f_opts));var f_opts={};f_opts.alias="Телефон";pm.addField(new FieldString("phone_cel",f_opts));var f_opts={};pm.addField(new FieldEnum("role_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("create_dt",f_opts));}
User_Controller.prototype.addGetObject=function(){User_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
User_Controller.prototype.addComplete=function(){User_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
User_Controller.prototype.add_get_profile=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_profile',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_password_recover=function(){var opts={"controller":this};var pm=new PublicMethodServer('password_recover',opts);var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("email",options));var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("captcha_key",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_register=function(){var opts={"controller":this};var pm=new PublicMethodServer('register',opts);pm.setRequestType('post');var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.required=true;options.maxlength="250";pm.addField(new FieldString("name_full",options));var options={};options.required=true;options.maxlength="50";pm.addField(new FieldString("pwd",options));var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("email",options));var options={};options.required=true;pm.addField(new FieldBool("pers_data_proc_agreement",options));var options={};options.required=true;options.maxlength="10";pm.addField(new FieldString("captcha_key",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_name_check=function(){var opts={"controller":this};var pm=new PublicMethodServer('name_check',opts);var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("name",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_login=function(){var opts={"controller":this};var pm=new PublicMethodServer('login',opts);var options={};options.alias="Имя пользователя";options.required=true;options.maxlength="50";pm.addField(new FieldString("name",options));var options={};options.alias="Пароль";options.required=true;options.maxlength="50";pm.addField(new FieldPassword("pwd",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_logout=function(){var opts={"controller":this};var pm=new PublicMethodServer('logout',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_logout_html=function(){var opts={"controller":this};var pm=new PublicMethodServer('logout_html',opts);this.addPublicMethod(pm);}
User_Controller.prototype.add_email_confirm=function(){var opts={"controller":this};var pm=new PublicMethodServer('email_confirm',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("key",options));this.addPublicMethod(pm);}
User_Controller.prototype.add_hide=function(){var opts={"controller":this};var pm=new PublicMethodServer('hide',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);} 
function MailForSending_Controller(options){options=options||{};options.listModelClass=MailForSendingList_Model;options.objModelClass=MailForSending_Model;MailForSending_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(MailForSending_Controller,ControllerObjServer);MailForSending_Controller.prototype.addGetList=function(){MailForSending_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Дата письма";pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};f_opts.alias="Адрес отправителя";pm.addField(new FieldString("from_addr",f_opts));var f_opts={};f_opts.alias="Отправитель";pm.addField(new FieldString("from_name",f_opts));var f_opts={};f_opts.alias="Адрес получателя";pm.addField(new FieldString("to_addr",f_opts));var f_opts={};f_opts.alias="Получатель";pm.addField(new FieldString("to_name",f_opts));var f_opts={};pm.addField(new FieldString("reply_addr",f_opts));var f_opts={};pm.addField(new FieldString("reply_name",f_opts));var f_opts={};pm.addField(new FieldText("body",f_opts));var f_opts={};pm.addField(new FieldString("sender_addr",f_opts));var f_opts={};f_opts.alias="Тема";pm.addField(new FieldString("subject",f_opts));var f_opts={};f_opts.alias="Отправлено";pm.addField(new FieldBool("sent",f_opts));var f_opts={};f_opts.alias="Дата отправки";pm.addField(new FieldDateTimeTZ("sent_date_time",f_opts));var f_opts={};f_opts.alias="Тип";pm.addField(new FieldEnum("email_type",f_opts));}
MailForSending_Controller.prototype.addGetObject=function(){MailForSending_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function TimeZoneLocale_Controller(options){options=options||{};options.listModelClass=TimeZoneLocale_Model;options.objModelClass=TimeZoneLocale_Model;TimeZoneLocale_Controller.superclass.constructor.call(this,options);this.addGetList();this.addGetObject();}
extend(TimeZoneLocale_Controller,ControllerObjServer);TimeZoneLocale_Controller.prototype.addGetList=function(){TimeZoneLocale_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Описание";pm.addField(new FieldString("descr",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};f_opts.alias="Смещение в часах";pm.addField(new FieldInt("hour_dif",f_opts));}
TimeZoneLocale_Controller.prototype.addGetObject=function(){TimeZoneLocale_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};f_opts.alias="Код";pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function Application_Controller(options){options=options||{};options.listModelClass=ApplicationList_Model;options.objModelClass=ApplicationDialog_Model;Application_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.add_get_print();this.addGetList();this.addComplete();this.add_get_client_list();this.add_remove_file();this.add_get_file();this.add_get_file_sig();this.add_get_file_out_sig();this.add_zip_all();this.add_get_document_templates();this.add_remove_document_types();this.add_download_app_print_expertise();this.add_download_app_print_expertise_sig();this.add_delete_app_print_expertise();this.add_download_app_print_modification();this.add_download_app_print_modification_sig();this.add_delete_app_print_modification();this.add_download_app_print_audit();this.add_download_app_print_audit_sig();this.add_delete_app_print_audit();this.add_download_app_print_cost_eval();this.add_download_app_print_cost_eval_sig();this.add_delete_app_print_cost_eval();this.add_set_user();this.add_download_auth_letter_file();this.add_download_auth_letter_file_sig();this.add_delete_auth_letter_file();}
extend(Application_Controller,ControllerObjServer);Application_Controller.prototype.addInsert=function(){Application_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,pd_eng_survey';var field=new FieldEnum("expertise_type",options);pm.addField(field);var options={};var field=new FieldBool("cost_eval_validity",options);pm.addField(field);var options={};var field=new FieldBool("cost_eval_validity_simult",options);pm.addField(field);var options={};var field=new FieldBool("modification",options);pm.addField(field);var options={};var field=new FieldBool("audit",options);pm.addField(field);var options={};var field=new FieldInt("fund_source_id",options);pm.addField(field);var options={};var field=new FieldInt("construction_type_id",options);pm.addField(field);var options={};var field=new FieldJSONB("applicant",options);pm.addField(field);var options={};var field=new FieldJSONB("customer",options);pm.addField(field);var options={};var field=new FieldJSONB("contractors",options);pm.addField(field);var options={};var field=new FieldJSONB("developer",options);pm.addField(field);var options={};var field=new FieldText("constr_name",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_address",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features_in_compound_obj",options);pm.addField(field);var options={};var field=new FieldFloat("total_cost_eval",options);pm.addField(field);var options={};var field=new FieldFloat("limit_cost_eval",options);pm.addField(field);var options={};var field=new FieldInt("filled_percent",options);pm.addField(field);var options={};var field=new FieldInt("office_id",options);pm.addField(field);var options={};var field=new FieldInt("primary_application_id",options);pm.addField(field);var options={};var field=new FieldString("primary_application_reg_number",options);pm.addField(field);var options={};var field=new FieldInt("modif_primary_application_id",options);pm.addField(field);var options={};var field=new FieldString("modif_primary_application_reg_number",options);pm.addField(field);var options={};var field=new FieldInt("build_type_id",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_expertise",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_cost_eval",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_modification",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_audit",options);pm.addField(field);var options={};var field=new FieldInt("base_application_id",options);pm.addField(field);var options={};var field=new FieldInt("derived_application_id",options);pm.addField(field);var options={};var field=new FieldText("pd_usage_info",options);pm.addField(field);var options={};var field=new FieldText("auth_letter",options);pm.addField(field);var options={};var field=new FieldJSONB("auth_letter_file",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldBool("set_sent",options));var options={};pm.addField(new FieldText("app_print_expertise_files",options));var options={};pm.addField(new FieldText("app_print_cost_eval_files",options));var options={};pm.addField(new FieldText("app_print_modification_files",options));var options={};pm.addField(new FieldText("app_print_audit_files",options));var options={};pm.addField(new FieldText("auth_letter_files",options));}
Application_Controller.prototype.addUpdate=function(){Application_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("create_dt",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,pd_eng_survey';var field=new FieldEnum("expertise_type",options);pm.addField(field);var options={};var field=new FieldBool("cost_eval_validity",options);pm.addField(field);var options={};var field=new FieldBool("cost_eval_validity_simult",options);pm.addField(field);var options={};var field=new FieldBool("modification",options);pm.addField(field);var options={};var field=new FieldBool("audit",options);pm.addField(field);var options={};var field=new FieldInt("fund_source_id",options);pm.addField(field);var options={};var field=new FieldInt("construction_type_id",options);pm.addField(field);var options={};var field=new FieldJSONB("applicant",options);pm.addField(field);var options={};var field=new FieldJSONB("customer",options);pm.addField(field);var options={};var field=new FieldJSONB("contractors",options);pm.addField(field);var options={};var field=new FieldJSONB("developer",options);pm.addField(field);var options={};var field=new FieldText("constr_name",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_address",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features_in_compound_obj",options);pm.addField(field);var options={};var field=new FieldFloat("total_cost_eval",options);pm.addField(field);var options={};var field=new FieldFloat("limit_cost_eval",options);pm.addField(field);var options={};var field=new FieldInt("filled_percent",options);pm.addField(field);var options={};var field=new FieldInt("office_id",options);pm.addField(field);var options={};var field=new FieldInt("primary_application_id",options);pm.addField(field);var options={};var field=new FieldString("primary_application_reg_number",options);pm.addField(field);var options={};var field=new FieldInt("modif_primary_application_id",options);pm.addField(field);var options={};var field=new FieldString("modif_primary_application_reg_number",options);pm.addField(field);var options={};var field=new FieldInt("build_type_id",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_expertise",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_cost_eval",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_modification",options);pm.addField(field);var options={};var field=new FieldJSONB("app_print_audit",options);pm.addField(field);var options={};var field=new FieldInt("base_application_id",options);pm.addField(field);var options={};var field=new FieldInt("derived_application_id",options);pm.addField(field);var options={};var field=new FieldText("pd_usage_info",options);pm.addField(field);var options={};var field=new FieldText("auth_letter",options);pm.addField(field);var options={};var field=new FieldJSONB("auth_letter_file",options);pm.addField(field);var options={};pm.addField(new FieldBool("set_sent",options));var options={};pm.addField(new FieldText("app_print_expertise_files",options));var options={};pm.addField(new FieldText("app_print_cost_eval_files",options));var options={};pm.addField(new FieldText("app_print_modification_files",options));var options={};pm.addField(new FieldText("app_print_audit_files",options));var options={};pm.addField(new FieldText("auth_letter_files",options));}
Application_Controller.prototype.addDelete=function(){Application_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Application_Controller.prototype.addGetObject=function(){Application_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Application_Controller.prototype.add_get_print=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_print',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;pm.addField(new FieldInt("inline",options));var options={};options.required=true;options.maxlength="100";pm.addField(new FieldString("templ",options));this.addPublicMethod(pm);}
Application_Controller.prototype.addGetList=function(){Application_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("create_dt",f_opts));var f_opts={};pm.addField(new FieldEnum("expertise_type",f_opts));var f_opts={};pm.addField(new FieldBool("cost_eval_validity",f_opts));var f_opts={};pm.addField(new FieldBool("cost_eval_validity_simult",f_opts));var f_opts={};pm.addField(new FieldBool("modification",f_opts));var f_opts={};pm.addField(new FieldBool("audit",f_opts));var f_opts={};pm.addField(new FieldInt("fund_source_id",f_opts));var f_opts={};pm.addField(new FieldInt("construction_type_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("applicant",f_opts));var f_opts={};pm.addField(new FieldJSONB("customer",f_opts));var f_opts={};pm.addField(new FieldJSONB("contractors",f_opts));var f_opts={};pm.addField(new FieldJSONB("developer",f_opts));var f_opts={};pm.addField(new FieldText("constr_name",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_address",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_technical_features",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_technical_features_in_compound_obj",f_opts));var f_opts={};pm.addField(new FieldFloat("total_cost_eval",f_opts));var f_opts={};pm.addField(new FieldFloat("limit_cost_eval",f_opts));var f_opts={};pm.addField(new FieldInt("filled_percent",f_opts));var f_opts={};pm.addField(new FieldInt("office_id",f_opts));var f_opts={};pm.addField(new FieldInt("primary_application_id",f_opts));var f_opts={};pm.addField(new FieldString("primary_application_reg_number",f_opts));var f_opts={};pm.addField(new FieldInt("modif_primary_application_id",f_opts));var f_opts={};pm.addField(new FieldString("modif_primary_application_reg_number",f_opts));var f_opts={};pm.addField(new FieldInt("build_type_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("app_print_expertise",f_opts));var f_opts={};pm.addField(new FieldJSONB("app_print_cost_eval",f_opts));var f_opts={};pm.addField(new FieldJSONB("app_print_modification",f_opts));var f_opts={};pm.addField(new FieldJSONB("app_print_audit",f_opts));var f_opts={};pm.addField(new FieldInt("base_application_id",f_opts));var f_opts={};pm.addField(new FieldInt("derived_application_id",f_opts));var f_opts={};pm.addField(new FieldText("pd_usage_info",f_opts));var f_opts={};pm.addField(new FieldText("auth_letter",f_opts));var f_opts={};pm.addField(new FieldJSONB("auth_letter_file",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("create_dt");}
Application_Controller.prototype.addComplete=function(){Application_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldInt("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
Application_Controller.prototype.add_get_client_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_client_list',opts);this.addPublicMethod(pm);}
Application_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_get_file_out_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_out_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_zip_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('zip_all',opts);var options={};options.required=true;pm.addField(new FieldInt("application_id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_get_document_templates=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_document_templates',opts);this.addPublicMethod(pm);}
Application_Controller.prototype.add_remove_document_types=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_document_types',opts);var options={};options.required=true;pm.addField(new FieldInt("application_id",options));var options={};options.required=true;pm.addField(new FieldJSON("document_types",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_expertise=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_expertise',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_expertise_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_expertise_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_delete_app_print_expertise=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_app_print_expertise',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_modification=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_modification',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_modification_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_modification_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_delete_app_print_modification=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_app_print_modification',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_audit=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_audit',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_audit_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_audit_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_delete_app_print_audit=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_app_print_audit',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_cost_eval=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_cost_eval',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_app_print_cost_eval_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_app_print_cost_eval_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_delete_app_print_cost_eval=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_app_print_cost_eval',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_set_user=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_user',opts);var options={};options.required=true;pm.addField(new FieldInt("user_id",options));var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_auth_letter_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_auth_letter_file',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_download_auth_letter_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_auth_letter_file_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Application_Controller.prototype.add_delete_auth_letter_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_auth_letter_file',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);} 
function Department_Controller(options){options=options||{};options.listModelClass=DepartmentList_Model;options.objModelClass=DepartmentDialog_Model;Department_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();}
extend(Department_Controller,ControllerObjServer);Department_Controller.prototype.addInsert=function(){Department_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("boss_employee_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Department_Controller.prototype.addUpdate=function(){Department_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("boss_employee_id",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);}
Department_Controller.prototype.addDelete=function(){Department_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Department_Controller.prototype.addGetObject=function(){Department_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Department_Controller.prototype.addGetList=function(){Department_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldInt("boss_employee_id",f_opts));var f_opts={};pm.addField(new FieldString("email",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Department_Controller.prototype.addComplete=function(){Department_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldInt("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");} 
function Employee_Controller(options){options=options||{};options.listModelClass=EmployeeList_Model;options.objModelClass=EmployeeDialog_Model;Employee_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();this.add_download_picture();this.add_delete_picture();}
extend(Employee_Controller,ControllerObjServer);Employee_Controller.prototype.addInsert=function(){Employee_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("department_id",options);pm.addField(field);var options={};var field=new FieldInt("post_id",options);pm.addField(field);var options={};var field=new FieldText("picture",options);pm.addField(field);var options={};var field=new FieldJSON("picture_info",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldText("picture_file",options));}
Employee_Controller.prototype.addUpdate=function(){Employee_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("department_id",options);pm.addField(field);var options={};var field=new FieldInt("post_id",options);pm.addField(field);var options={};var field=new FieldText("picture",options);pm.addField(field);var options={};var field=new FieldJSON("picture_info",options);pm.addField(field);var options={};pm.addField(new FieldText("picture_file",options));}
Employee_Controller.prototype.addDelete=function(){Employee_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Employee_Controller.prototype.addGetObject=function(){Employee_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Employee_Controller.prototype.addGetList=function(){Employee_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("department_id",f_opts));var f_opts={};pm.addField(new FieldInt("post_id",f_opts));var f_opts={};pm.addField(new FieldText("picture",f_opts));var f_opts={};pm.addField(new FieldJSON("picture_info",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Employee_Controller.prototype.addComplete=function(){Employee_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Employee_Controller.prototype.add_download_picture=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_picture',opts);this.addPublicMethod(pm);}
Employee_Controller.prototype.add_delete_picture=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_picture',opts);this.addPublicMethod(pm);} 
function ConstantList_Model(options){var id='ConstantList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val=new FieldText("val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.val_type=new FieldText("val_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ctrl_class=new FieldText("ctrl_class",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ctrl_options=new FieldJSON("ctrl_options",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_class=new FieldText("view_class",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_options=new FieldJSON("view_options",filed_options);ConstantList_Model.superclass.constructor.call(this,id,options);}
extend(ConstantList_Model,ModelXML); 
function View_Model(options){var id='View_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.c=new FieldText("c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.t=new FieldText("t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);options.fields.section.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldText("descr",filed_options);options.fields.descr.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limited=new Fieldboolean("limited",filed_options);View_Model.superclass.constructor.call(this,id,options);}
extend(View_Model,ModelXML); 
function ViewList_Model(options){var id='ViewList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.c=new FieldText("c",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.f=new FieldText("f",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.t=new FieldText("t",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.href=new FieldText("href",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldText("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);ViewList_Model.superclass.constructor.call(this,id,options);}
extend(ViewList_Model,ModelXML); 
function ViewSectionList_Model(options){var id='ViewSectionList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section=new FieldText("section",filed_options);ViewSectionList_Model.superclass.constructor.call(this,id,options);}
extend(ViewSectionList_Model,ModelXML); 
function MainMenuConstructor_Model(options){var id='MainMenuConstructor_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,client,lawyer,expert,boss,accountant';options.fields.role_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержание';filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);options.fields.content.getValidator().setRequired(true);MainMenuConstructor_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructor_Model,ModelXML); 
function MainMenuConstructorList_Model(options){var id='MainMenuConstructorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldString("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);MainMenuConstructorList_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructorList_Model,ModelXML); 
function MainMenuContent_Model(options){var id='MainMenuContent_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viewid=new FieldString("viewid",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.viewdescr=new FieldString("viewdescr",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields["default"]=new FieldBool("default",filed_options);var filed_options={};filed_options.primaryKey=false;options.fields.glyphclass=new FieldString("glyphclass",filed_options);options.tagModel="menu";options.tagRow="menuitem";options.primaryKeyIndex=true;options.markOnDelete=false;options.sequences={"id":0};options.namespace="http://www.katren.org/crm/doc/mainmenu"
MainMenuContent_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuContent_Model,ModelXMLTree);MainMenuContent_Model.prototype.getParentId=function(){var par_id;if(this.m_currentRow&&this.m_currentRow.parentNode&&this.m_currentRow.parentNode!=this.m_node){par_id=this.m_currentRow.parentNode.getAttribute("id");}
return par_id;}
MainMenuContent_Model.prototype.setRowValues=function(row){for(var id in this.m_fields){if(this.m_fields[id].isSet()){row.setAttribute(id,this.m_fields[id].getValue());}}}
MainMenuContent_Model.prototype.makeRow=function(){var row=document.createElement(this.getTagRow());for(var fid in this.m_fields){var cell=document.createElement(fid);var v="";if(this.m_fields[fid].isSet()){v=this.m_fields[fid].getValue();}
row.setAttribute(fid,v);}
return row;}
MainMenuContent_Model.prototype.fetchRow=function(row){var attrs=row.attributes;if(attrs){if(attrs.descr)this.m_fields.descr.setValue(attrs.descr.nodeValue);if(attrs.viewid)this.m_fields.viewid.setValue(attrs.viewid.nodeValue);this.m_fields.glyphclass.setValue((attrs.glyphclass)?attrs.glyphclass.nodeValue:undefined);if(attrs["default"])this.m_fields["default"].setValue(attrs["default"].nodeValue);this.m_fields.viewdescr.setValue(((attrs.viewdescr)?attrs.viewdescr.nodeValue:""));this.m_fields.id.setValue(attrs.id.nodeValue);}
return true;}
ModelXML.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];var rows=this.getRows();for(var r=0;r<rows.length;r++){if(rows[r].attributes&&rows[r].attributes.id){var dv=parseInt(rows[r].attributes.id.nodeValue,10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}}}}} 
function Bank_Model(options){var id='Bank_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.bik=new FieldString("bik",filed_options);options.fields.bik.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.codegr=new FieldString("codegr",filed_options);options.fields.codegr.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.korshet=new FieldString("korshet",filed_options);options.fields.korshet.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.adres=new FieldString("adres",filed_options);options.fields.adres.getValidator().setMaxLength('70');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.gor=new FieldString("gor",filed_options);options.fields.gor.getValidator().setMaxLength('31');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tgroup=new FieldBool("tgroup",filed_options);Bank_Model.superclass.constructor.call(this,id,options);}
extend(Bank_Model,ModelXML); 
function BankList_Model(options){var id='BankList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='БИК';filed_options.autoInc=false;options.fields.bik=new FieldString("bik",filed_options);options.fields.bik.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.codegr=new FieldString("codegr",filed_options);options.fields.codegr.getValidator().setMaxLength('9');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Регион';filed_options.autoInc=false;options.fields.gr_descr=new FieldString("gr_descr",filed_options);options.fields.gr_descr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Кoр.счет';filed_options.autoInc=false;options.fields.korshet=new FieldString("korshet",filed_options);options.fields.korshet.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес';filed_options.autoInc=false;options.fields.adres=new FieldString("adres",filed_options);options.fields.adres.getValidator().setMaxLength('70');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Город';filed_options.autoInc=false;options.fields.gor=new FieldString("gor",filed_options);options.fields.gor.getValidator().setMaxLength('31');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tgoup=new FieldInt("tgoup",filed_options);options.fields.tgoup.getValidator().setMaxLength('31');BankList_Model.superclass.constructor.call(this,id,options);}
extend(BankList_Model,ModelXML); 
function VariantStorage_Model(options){var id='VariantStorage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.variant_name=new FieldText("variant_name",filed_options);options.fields.variant_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.filter_data=new FieldJSON("filter_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.col_visib_data=new FieldJSON("col_visib_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.col_order_data=new FieldJSON("col_order_data",filed_options);VariantStorage_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorage_Model,ModelXML); 
function VariantStorageList_Model(options){var id='VariantStorageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.storage_name=new FieldText("storage_name",filed_options);options.fields.storage_name.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.default_variant=new FieldBool("default_variant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.variant_name=new FieldText("variant_name",filed_options);VariantStorageList_Model.superclass.constructor.call(this,id,options);}
extend(VariantStorageList_Model,ModelXML); 
function About_Model(options){var id='About_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.author=new FieldString("author",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tech_mail=new FieldString("tech_mail",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_name=new FieldString("app_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fw_version=new FieldString("fw_version",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_version=new FieldString("app_version",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.db_name=new FieldString("db_name",filed_options);About_Model.superclass.constructor.call(this,id,options);}
extend(About_Model,ModelXML); 
function TimeZoneLocale_Model(options){var id='TimeZoneLocale_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Описание';filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);options.fields.descr.getValidator().setRequired(true);options.fields.descr.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Смещение в часах';filed_options.autoInc=false;options.fields.hour_dif=new FieldInt("hour_dif",filed_options);options.fields.hour_dif.getValidator().setRequired(true);TimeZoneLocale_Model.superclass.constructor.call(this,id,options);}
extend(TimeZoneLocale_Model,ModelXML); 
function User_Model(options){var id='User_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldString("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);options.fields.name_full.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,client,lawyer,expert,boss,accountant';options.fields.role_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pwd=new FieldPassword("pwd",filed_options);options.fields.pwd.getValidator().setMaxLength('32');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_zone_locale_id=new FieldInt("time_zone_locale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.locale_id=new FieldEnum("locale_id",filed_options);filed_options.enumValues='ru';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Согласие на обработку персональных данных';filed_options.autoInc=false;options.fields.pers_data_proc_agreement=new FieldBool("pers_data_proc_agreement",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата создания';filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Адрес электр.почты подтвержден';filed_options.autoInc=false;options.fields.email_confirmed=new FieldBool("email_confirmed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цветовая схема';filed_options.autoInc=false;options.fields.color_palette=new FieldText("color_palette",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Дублировать напоминания на электронную почту';filed_options.autoInc=false;options.fields.reminders_to_email=new FieldBool("reminders_to_email",filed_options);User_Model.superclass.constructor.call(this,id,options);}
extend(User_Model,ModelXML); 
function UserList_Model(options){var id='UserList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Логин';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='ФИО';filed_options.autoInc=false;options.fields.name_full=new FieldString("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);options.fields.name_full.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Email';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldEnum("role_id",filed_options);filed_options.enumValues='admin,client,lawyer,expert,boss,accountant';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);UserList_Model.superclass.constructor.call(this,id,options);}
extend(UserList_Model,ModelXML); 
function MailForSending_Model(options){var id='MailForSending_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr=new FieldString("from_addr",filed_options);options.fields.from_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_name=new FieldText("from_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr=new FieldText("to_addr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_name=new FieldText("to_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_addr=new FieldText("reply_addr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_name=new FieldText("reply_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.body=new FieldText("body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_addr=new FieldText("sender_addr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTimeTZ("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email_type=new FieldEnum("email_type",filed_options);filed_options.enumValues='new_account,reset_pwd,user_email_conf,out_mail,new_app,app_change,new_remind,out_mail_to_app,contract_state_change,app_to_correction,contr_return,expert_work_change';MailForSending_Model.superclass.constructor.call(this,id,options);}
extend(MailForSending_Model,ModelXML); 
function MailForSendingList_Model(options){var id='MailForSendingList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата письма';filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес отправителя';filed_options.autoInc=false;options.fields.from_addr=new FieldString("from_addr",filed_options);options.fields.from_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Отправитель';filed_options.autoInc=false;options.fields.from_name=new FieldString("from_name",filed_options);options.fields.from_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Адрес получателя';filed_options.autoInc=false;options.fields.to_addr=new FieldString("to_addr",filed_options);options.fields.to_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Получатель';filed_options.autoInc=false;options.fields.to_name=new FieldString("to_name",filed_options);options.fields.to_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_addr=new FieldString("reply_addr",filed_options);options.fields.reply_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reply_name=new FieldString("reply_name",filed_options);options.fields.reply_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.body=new FieldText("body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_addr=new FieldString("sender_addr",filed_options);options.fields.sender_addr.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.subject=new FieldString("subject",filed_options);options.fields.subject.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.alias='Отправлено';filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Дата отправки';filed_options.autoInc=false;options.fields.sent_date_time=new FieldDateTimeTZ("sent_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип';filed_options.autoInc=false;options.fields.email_type=new FieldEnum("email_type",filed_options);filed_options.enumValues='new_account,reset_pwd,user_email_conf,out_mail,new_app,app_change,new_remind,out_mail_to_app,contract_state_change,app_to_correction,contr_return,expert_work_change';MailForSendingList_Model.superclass.constructor.call(this,id,options);}
extend(MailForSendingList_Model,ModelXML); 
function MailForSendingAttachment_Model(options){var id='MailForSendingAttachment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.mail_for_sending_id=new FieldInt("mail_for_sending_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldString("file_name",filed_options);options.fields.file_name.getValidator().setMaxLength('255');MailForSendingAttachment_Model.superclass.constructor.call(this,id,options);}
extend(MailForSendingAttachment_Model,ModelXML); 
function ApplicationList_Model(options){var id='ApplicationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity=new FieldBool("cost_eval_validity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity_simult=new FieldBool("cost_eval_validity_simult",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.modification=new FieldBool("modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.audit=new FieldBool("audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_source_id=new FieldInt("fund_source_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant=new FieldJSONB("applicant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer=new FieldJSONB("customer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contractors=new FieldJSONB("contractors",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.developer=new FieldJSONB("developer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_cost_eval=new FieldFloat("total_cost_eval",filed_options);options.fields.total_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limit_cost_eval=new FieldFloat("limit_cost_eval",filed_options);options.fields.limit_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.filled_percent=new FieldInt("filled_percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.office_id=new FieldInt("office_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_id=new FieldInt("primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_reg_number=new FieldString("primary_application_reg_number",filed_options);options.fields.primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_id=new FieldInt("modif_primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_reg_number=new FieldString("modif_primary_application_reg_number",filed_options);options.fields.modif_primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.build_type_id=new FieldInt("build_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_expertise=new FieldJSONB("app_print_expertise",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_cost_eval=new FieldJSONB("app_print_cost_eval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_modification=new FieldJSONB("app_print_modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_audit=new FieldJSONB("app_print_audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_application_id=new FieldInt("base_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.derived_application_id=new FieldInt("derived_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pd_usage_info=new FieldText("pd_usage_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter=new FieldText("auth_letter",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter_file=new FieldJSONB("auth_letter_file",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state=new FieldString("application_state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state_dt=new FieldDateTimeTZ("application_state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state_end_date=new FieldDate("application_state_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.office_descr=new FieldText("office_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.select_descr=new FieldText("select_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant_name=new FieldString("applicant_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer_name=new FieldString("customer_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.service_list=new FieldString("service_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.unviewed_in_docs=new FieldJSON("unviewed_in_docs",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_number=new FieldString("contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_date=new FieldString("contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_number=new FieldString("expertise_result_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_date=new FieldDate("expertise_result_date",filed_options);ApplicationList_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationList_Model,ModelXML); 
function ApplicationDialog_Model(options){var id='ApplicationDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity=new FieldBool("cost_eval_validity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity_simult=new FieldBool("cost_eval_validity_simult",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.modification=new FieldBool("modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.audit=new FieldBool("audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_source_id=new FieldInt("fund_source_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant=new FieldJSONB("applicant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer=new FieldJSONB("customer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contractors=new FieldJSONB("contractors",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.developer=new FieldJSONB("developer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_cost_eval=new FieldFloat("total_cost_eval",filed_options);options.fields.total_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limit_cost_eval=new FieldFloat("limit_cost_eval",filed_options);options.fields.limit_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.filled_percent=new FieldInt("filled_percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.office_id=new FieldInt("office_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_id=new FieldInt("primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_reg_number=new FieldString("primary_application_reg_number",filed_options);options.fields.primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_id=new FieldInt("modif_primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_reg_number=new FieldString("modif_primary_application_reg_number",filed_options);options.fields.modif_primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.build_type_id=new FieldInt("build_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_expertise=new FieldJSONB("app_print_expertise",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_cost_eval=new FieldJSONB("app_print_cost_eval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_modification=new FieldJSONB("app_print_modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_audit=new FieldJSONB("app_print_audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_application_id=new FieldInt("base_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.derived_application_id=new FieldInt("derived_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pd_usage_info=new FieldText("pd_usage_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter=new FieldText("auth_letter",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter_file=new FieldJSONB("auth_letter_file",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_types_ref=new FieldJSON("construction_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_sources_ref=new FieldJSON("fund_sources_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state=new FieldString("application_state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state_dt=new FieldDateTimeTZ("application_state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_state_end_date=new FieldDate("application_state_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.documents=new FieldJSON("documents",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.offices_ref=new FieldJSON("offices_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application=new FieldJSON("primary_application",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application=new FieldJSON("modif_primary_application",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.build_types_ref=new FieldJSON("build_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.select_descr=new FieldText("select_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_applications_ref=new FieldJSON("base_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.derived_applications_ref=new FieldJSON("derived_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_folders=new FieldJSON("doc_folders",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_start_date=new FieldDate("work_start_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_number=new FieldString("contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_date=new FieldDate("contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_number=new FieldString("expertise_result_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_date=new FieldDate("expertise_result_date",filed_options);ApplicationDialog_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationDialog_Model,ModelXML); 
function DepartmentList_Model(options){var id='DepartmentList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.boss_employee_id=new FieldInt("boss_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.boss_employees_ref=new FieldJSON("boss_employees_ref",filed_options);DepartmentList_Model.superclass.constructor.call(this,id,options);}
extend(DepartmentList_Model,ModelXML); 
function DepartmentDialog_Model(options){var id='DepartmentDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.boss_employee_id=new FieldInt("boss_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.boss_employees_ref=new FieldJSON("boss_employees_ref",filed_options);DepartmentDialog_Model.superclass.constructor.call(this,id,options);}
extend(DepartmentDialog_Model,ModelXML); 
function EmployeeList_Model(options){var id='EmployeeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.department_id=new FieldInt("department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_id=new FieldInt("post_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture=new FieldText("picture",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture_info=new FieldJSON("picture_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.departments_ref=new FieldJSON("departments_ref",filed_options);EmployeeList_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeList_Model,ModelXML); 
function EmployeeDialog_Model(options){var id='EmployeeDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.department_id=new FieldInt("department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_id=new FieldInt("post_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture=new FieldText("picture",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture_info=new FieldJSON("picture_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.users_ref=new FieldJSON("users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.posts_ref=new FieldJSON("posts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.departments_ref=new FieldJSON("departments_ref",filed_options);EmployeeDialog_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeDialog_Model,ModelXML); 
function Enum_locales(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_ru":"Русский"};options.options=[{"value":"ru","descr":multy_lang_values[window.getApp().getLocale()+"_"+"ru"],checked:(options.defaultValue&&options.defaultValue=="ru")}];Enum_locales.superclass.constructor.call(this,id,options);}
extend(Enum_locales,EditSelect); 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_admin":"Администратор","ru_client":"Клиент","ru_lawyer":"Юрист отдела приема","ru_expert":"Эксперт","ru_boss":"Руководитель","ru_accountant":"Бухгалтер"};options.options=[{"value":"admin","descr":multy_lang_values[window.getApp().getLocale()+"_"+"admin"],checked:(options.defaultValue&&options.defaultValue=="admin")},{"value":"client","descr":multy_lang_values[window.getApp().getLocale()+"_"+"client"],checked:(options.defaultValue&&options.defaultValue=="client")},{"value":"lawyer","descr":multy_lang_values[window.getApp().getLocale()+"_"+"lawyer"],checked:(options.defaultValue&&options.defaultValue=="lawyer")},{"value":"expert","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expert"],checked:(options.defaultValue&&options.defaultValue=="expert")},{"value":"boss","descr":multy_lang_values[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"accountant","descr":multy_lang_values[window.getApp().getLocale()+"_"+"accountant"],checked:(options.defaultValue&&options.defaultValue=="accountant")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect); 
function Enum_role_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_admin":"Администратор","ru_client":"Клиент","ru_lawyer":"Юрист отдела приема","ru_expert":"Эксперт","ru_boss":"Руководитель","ru_accountant":"Бухгалтер"};options.options=[{"value":"admin","descr":multy_lang_values[window.getApp().getLocale()+"_"+"admin"],checked:(options.defaultValue&&options.defaultValue=="admin")},{"value":"client","descr":multy_lang_values[window.getApp().getLocale()+"_"+"client"],checked:(options.defaultValue&&options.defaultValue=="client")},{"value":"lawyer","descr":multy_lang_values[window.getApp().getLocale()+"_"+"lawyer"],checked:(options.defaultValue&&options.defaultValue=="lawyer")},{"value":"expert","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expert"],checked:(options.defaultValue&&options.defaultValue=="expert")},{"value":"boss","descr":multy_lang_values[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"accountant","descr":multy_lang_values[window.getApp().getLocale()+"_"+"accountant"],checked:(options.defaultValue&&options.defaultValue=="accountant")}];Enum_role_types.superclass.constructor.call(this,id,options);}
extend(Enum_role_types,EditSelect); 
function UserDialog_Model(options){var id='UserDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldString("name_full",filed_options);options.fields.name_full.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.banned=new FieldBool("banned",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Роль';filed_options.autoInc=false;options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_zone_locale_id=new FieldInt("time_zone_locale_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.time_zone_locale_descr=new FieldString("time_zone_locale_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цветовая схема';filed_options.autoInc=false;options.fields.color_palette=new FieldText("color_palette",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reminders_to_email=new FieldBool("reminders_to_email",filed_options);UserDialog_Model.superclass.constructor.call(this,id,options);}
extend(UserDialog_Model,ModelXML); 
function EmailTemplate_Controller(options){options=options||{};options.listModelClass=EmailTemplateList_Model;options.objModelClass=EmailTemplate_Model;EmailTemplate_Controller.superclass.constructor.call(this,options);this.addUpdate();this.addGetList();this.addGetObject();}
extend(EmailTemplate_Controller,ControllerObjServer);EmailTemplate_Controller.prototype.addUpdate=function(){EmailTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Тип email";options.enumValues='new_account,reset_pwd,user_email_conf,out_mail,new_app,app_change,new_remind,out_mail_to_app,contract_state_change,app_to_correction,contr_return,expert_work_change';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("email_type",options);pm.addField(field);var options={};options.alias="Шаблон";var field=new FieldText("template",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Тема";var field=new FieldText("mes_subject",options);pm.addField(field);var options={};options.alias="Поля";var field=new FieldJSON("fields",options);pm.addField(field);}
EmailTemplate_Controller.prototype.addGetList=function(){EmailTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("email_type",f_opts));var f_opts={};pm.addField(new FieldText("template",f_opts));}
EmailTemplate_Controller.prototype.addGetObject=function(){EmailTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function EmailTemplate_Model(options){var id='EmailTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тип email';filed_options.autoInc=false;options.fields.email_type=new FieldEnum("email_type",filed_options);filed_options.enumValues='new_account,reset_pwd,user_email_conf,out_mail,new_app,app_change,new_remind,out_mail_to_app,contract_state_change,app_to_correction,contr_return,expert_work_change';options.fields.email_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Шаблон';filed_options.autoInc=false;options.fields.template=new FieldText("template",filed_options);options.fields.template.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);options.fields.comment_text.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Тема';filed_options.autoInc=false;options.fields.mes_subject=new FieldText("mes_subject",filed_options);options.fields.mes_subject.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поля';filed_options.autoInc=false;options.fields.fields=new FieldJSON("fields",filed_options);options.fields.fields.getValidator().setRequired(true);EmailTemplate_Model.superclass.constructor.call(this,id,options);}
extend(EmailTemplate_Model,ModelXML); 
function EmailTemplateList_Model(options){var id='EmailTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email_type=new FieldString("email_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.template=new FieldText("template",filed_options);EmailTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(EmailTemplateList_Model,ModelXML); 
function Enum_email_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_new_account":"Новый акаунт","ru_reset_pwd":"Установка пароля","ru_user_email_conf":"Подтверждение пароля","ru_out_mail":"Исходящее письмо","ru_new_app":"Новое заявление","ru_app_change":"Ответы на замечания","ru_new_remind":"Новая задача","ru_out_mail_to_app":"Исходящее письмо по заявлению/контракту","ru_contract_state_change":"Смена статуса контракта","ru_app_to_correction":"Возврат заявления на корректировку","ru_contr_return":"Возврат подписанного контракта","ru_expert_work_change":"Изменния по локальным заключениям"};options.options=[{"value":"new_account","descr":multy_lang_values[window.getApp().getLocale()+"_"+"new_account"],checked:(options.defaultValue&&options.defaultValue=="new_account")},{"value":"reset_pwd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"reset_pwd"],checked:(options.defaultValue&&options.defaultValue=="reset_pwd")},{"value":"user_email_conf","descr":multy_lang_values[window.getApp().getLocale()+"_"+"user_email_conf"],checked:(options.defaultValue&&options.defaultValue=="user_email_conf")},{"value":"out_mail","descr":multy_lang_values[window.getApp().getLocale()+"_"+"out_mail"],checked:(options.defaultValue&&options.defaultValue=="out_mail")},{"value":"new_app","descr":multy_lang_values[window.getApp().getLocale()+"_"+"new_app"],checked:(options.defaultValue&&options.defaultValue=="new_app")},{"value":"app_change","descr":multy_lang_values[window.getApp().getLocale()+"_"+"app_change"],checked:(options.defaultValue&&options.defaultValue=="app_change")},{"value":"new_remind","descr":multy_lang_values[window.getApp().getLocale()+"_"+"new_remind"],checked:(options.defaultValue&&options.defaultValue=="new_remind")},{"value":"out_mail_to_app","descr":multy_lang_values[window.getApp().getLocale()+"_"+"out_mail_to_app"],checked:(options.defaultValue&&options.defaultValue=="out_mail_to_app")},{"value":"contract_state_change","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contract_state_change"],checked:(options.defaultValue&&options.defaultValue=="contract_state_change")},{"value":"app_to_correction","descr":multy_lang_values[window.getApp().getLocale()+"_"+"app_to_correction"],checked:(options.defaultValue&&options.defaultValue=="app_to_correction")},{"value":"contr_return","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contr_return"],checked:(options.defaultValue&&options.defaultValue=="contr_return")},{"value":"expert_work_change","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expert_work_change"],checked:(options.defaultValue&&options.defaultValue=="expert_work_change")}];Enum_email_types.superclass.constructor.call(this,id,options);}
extend(Enum_email_types,EditSelect); 
function UserEmailConfirmation_Model(options){var id='UserEmailConfirmation_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.key=new FieldString("key",filed_options);options.fields.key.getValidator().setRequired(true);options.fields.key.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.dt=new FieldDateTimeTZ("dt",filed_options);options.fields.dt.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.confirmed=new FieldBool("confirmed",filed_options);UserEmailConfirmation_Model.superclass.constructor.call(this,id,options);}
extend(UserEmailConfirmation_Model,ModelXML); 
function EnumGridColumn_locales(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["ru"]="Русский";EnumGridColumn_locales.superclass.constructor.call(this,options);}
extend(EnumGridColumn_locales,GridColumnEnum); 
function EnumGridColumn_role_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["admin"]="Администратор";options.multyLangValues["ru"]["client"]="Клиент";options.multyLangValues["ru"]["lawyer"]="Юрист отдела приема";options.multyLangValues["ru"]["expert"]="Эксперт";options.multyLangValues["ru"]["boss"]="Руководитель";options.multyLangValues["ru"]["accountant"]="Бухгалтер";EnumGridColumn_role_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_role_types,GridColumnEnum); 
function EnumGridColumn_email_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["new_account"]="Новый акаунт";options.multyLangValues["ru"]["reset_pwd"]="Установка пароля";options.multyLangValues["ru"]["user_email_conf"]="Подтверждение пароля";options.multyLangValues["ru"]["out_mail"]="Исходящее письмо";options.multyLangValues["ru"]["new_app"]="Новое заявление";options.multyLangValues["ru"]["app_change"]="Ответы на замечания";options.multyLangValues["ru"]["new_remind"]="Новая задача";options.multyLangValues["ru"]["out_mail_to_app"]="Исходящее письмо по заявлению/контракту";options.multyLangValues["ru"]["contract_state_change"]="Смена статуса контракта";options.multyLangValues["ru"]["app_to_correction"]="Возврат заявления на корректировку";options.multyLangValues["ru"]["contr_return"]="Возврат подписанного контракта";options.multyLangValues["ru"]["expert_work_change"]="Изменния по локальным заключениям";EnumGridColumn_email_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_email_types,GridColumnEnum); 
function UserProfile_Model(options){var id='UserProfile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.alias='Код';filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Имя';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldString("name_full",filed_options);options.fields.name_full.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Эл.почта';filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Моб.телефон';filed_options.autoInc=false;options.fields.phone_cel=new FieldString("phone_cel",filed_options);options.fields.phone_cel.getValidator().setMaxLength('11');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Цветовая схема';filed_options.autoInc=false;options.fields.color_palette=new FieldText("color_palette",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reminders_to_email=new FieldBool("reminders_to_email",filed_options);UserProfile_Model.superclass.constructor.call(this,id,options);}
extend(UserProfile_Model,ModelXML); 
function Client_Model(options){var id='Client_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setRequired(true);options.fields.inn.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);options.fields.kpp.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ogrn=new FieldString("ogrn",filed_options);options.fields.ogrn.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.okpo=new FieldString("okpo",filed_options);options.fields.okpo.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.okved=new FieldText("okved",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_id=new FieldString("ext_id",filed_options);options.fields.ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_address=new FieldJSONB("post_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.legal_address=new FieldJSONB("legal_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bank_accounts=new FieldJSONB("bank_accounts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.client_type=new FieldEnum("client_type",filed_options);filed_options.enumValues='enterprise,person,pboul';options.fields.client_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_document_for_contract=new FieldText("base_document_for_contract",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_id_paper=new FieldJSONB("person_id_paper",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_registr_paper=new FieldJSONB("person_registr_paper",filed_options);Client_Model.superclass.constructor.call(this,id,options);}
extend(Client_Model,ModelXML); 
function Client_Controller(options){options=options||{};options.listModelClass=ClientList_Model;options.objModelClass=ClientDialog_Model;Client_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();}
extend(Client_Controller,ControllerObjServer);Client_Controller.prototype.addInsert=function(){Client_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;var field=new FieldText("name_full",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldString("ogrn",options);pm.addField(field);var options={};var field=new FieldString("okpo",options);pm.addField(field);var options={};var field=new FieldText("okved",options);pm.addField(field);var options={};var field=new FieldString("ext_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldJSONB("post_address",options);pm.addField(field);var options={};var field=new FieldJSONB("legal_address",options);pm.addField(field);var options={};var field=new FieldJSONB("bank_accounts",options);pm.addField(field);var options={};options.required=true;options.enumValues='enterprise,person,pboul';var field=new FieldEnum("client_type",options);pm.addField(field);var options={};var field=new FieldText("base_document_for_contract",options);pm.addField(field);var options={};var field=new FieldJSONB("person_id_paper",options);pm.addField(field);var options={};var field=new FieldJSONB("person_registr_paper",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldJSON("responsable_persons",options));}
Client_Controller.prototype.addUpdate=function(){Client_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldText("name_full",options);pm.addField(field);var options={};var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldString("ogrn",options);pm.addField(field);var options={};var field=new FieldString("okpo",options);pm.addField(field);var options={};var field=new FieldText("okved",options);pm.addField(field);var options={};var field=new FieldString("ext_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldJSONB("post_address",options);pm.addField(field);var options={};var field=new FieldJSONB("legal_address",options);pm.addField(field);var options={};var field=new FieldJSONB("bank_accounts",options);pm.addField(field);var options={};options.enumValues='enterprise,person,pboul';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("client_type",options);pm.addField(field);var options={};var field=new FieldText("base_document_for_contract",options);pm.addField(field);var options={};var field=new FieldJSONB("person_id_paper",options);pm.addField(field);var options={};var field=new FieldJSONB("person_registr_paper",options);pm.addField(field);var options={};pm.addField(new FieldJSON("responsable_persons",options));}
Client_Controller.prototype.addDelete=function(){Client_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Client_Controller.prototype.addGetList=function(){Client_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("inn",f_opts));var f_opts={};pm.addField(new FieldString("kpp",f_opts));var f_opts={};pm.addField(new FieldString("user_id",f_opts));}
Client_Controller.prototype.addGetObject=function(){Client_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Client_Controller.prototype.addComplete=function(){Client_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ClientList_Model(options){var id='ClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldString("user_id",filed_options);ClientList_Model.superclass.constructor.call(this,id,options);}
extend(ClientList_Model,ModelXML); 
function ClientSearch_Controller(options){options=options||{};ClientSearch_Controller.superclass.constructor.call(this,options);this.add_search();}
extend(ClientSearch_Controller,ControllerObjServer);ClientSearch_Controller.prototype.add_search=function(){var opts={"controller":this};var pm=new PublicMethodServer('search',opts);var options={};options.required=true;options.maxlength="250";pm.addField(new FieldString("query",options));this.addPublicMethod(pm);} 
function Kladr_Controller(options){options=options||{};Kladr_Controller.superclass.constructor.call(this,options);this.add_get_region_list();this.add_get_raion_list();this.add_get_naspunkt_list();this.add_get_gorod_list();this.add_get_ulitsa_list();this.add_get_from_naspunkt();}
extend(Kladr_Controller,ControllerObjServer);Kladr_Controller.prototype.add_get_region_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_region_list',opts);var options={};options.required=true;pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Kladr_Controller.prototype.add_get_raion_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_raion_list',opts);var options={};pm.addField(new FieldString("region_code",options));var options={};options.required=true;options.maxlength="40";pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Kladr_Controller.prototype.add_get_naspunkt_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_naspunkt_list',opts);var options={};pm.addField(new FieldString("region_code",options));var options={};pm.addField(new FieldString("raion_code",options));var options={};options.required=true;options.maxlength="40";pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Kladr_Controller.prototype.add_get_gorod_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_gorod_list',opts);var options={};pm.addField(new FieldString("region_code",options));var options={};pm.addField(new FieldString("raion_code",options));var options={};options.required=true;options.maxlength="40";pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Kladr_Controller.prototype.add_get_ulitsa_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_ulitsa_list',opts);var options={};pm.addField(new FieldString("region_code",options));var options={};pm.addField(new FieldString("raion_code",options));var options={};pm.addField(new FieldString("naspunkt_code",options));var options={};pm.addField(new FieldString("gorod_code",options));var options={};options.required=true;options.maxlength="40";pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);}
Kladr_Controller.prototype.add_get_from_naspunkt=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_from_naspunkt',opts);var options={};pm.addField(new FieldString("region_code",options));var options={};options.required=true;options.maxlength="40";pm.addField(new FieldString("pattern",options));var options={};pm.addField(new FieldInt("from",options));var options={};pm.addField(new FieldInt("count",options));var options={};pm.addField(new FieldInt("ic",options));var options={};pm.addField(new FieldInt("mid",options));this.addPublicMethod(pm);} 
function Kladr_Model(options){var id='Kladr_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.region_code=new FieldString("region_code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.raion_code=new FieldString("raion_code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.naspunkt_code=new FieldString("naspunkt_code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ulitsa_code=new FieldString("ulitsa_code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.gorod_code=new FieldString("gorod_code",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.full_name=new FieldString("full_name",filed_options);Kladr_Model.superclass.constructor.call(this,id,options);}
extend(Kladr_Model,ModelXML); 
function ClientResponsablePerson_Controller(options){options=options||{};options.listModelClass=ClientResponsablePerson_Model;options.objModelClass=ClientResponsablePerson_Model;ClientResponsablePerson_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ClientResponsablePerson_Controller,ControllerObjClient);ClientResponsablePerson_Controller.prototype.addInsert=function(){ClientResponsablePerson_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("dep",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("post",options);pm.addField(field);var options={};var field=new FieldString("tel",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.enumValues='boss,chef_accountant,other';var field=new FieldEnum("person_type",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientResponsablePerson_Controller.prototype.addUpdate=function(){ClientResponsablePerson_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("dep",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("post",options);pm.addField(field);var options={};var field=new FieldString("tel",options);pm.addField(field);var options={};var field=new FieldString("email",options);pm.addField(field);var options={};options.enumValues='boss,chef_accountant,other';var field=new FieldEnum("person_type",options);pm.addField(field);}
ClientResponsablePerson_Controller.prototype.addDelete=function(){ClientResponsablePerson_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientResponsablePerson_Controller.prototype.addGetList=function(){ClientResponsablePerson_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("dep",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("post",f_opts));var f_opts={};pm.addField(new FieldString("tel",f_opts));var f_opts={};pm.addField(new FieldString("email",f_opts));var f_opts={};pm.addField(new FieldEnum("person_type",f_opts));}
ClientResponsablePerson_Controller.prototype.addGetObject=function(){ClientResponsablePerson_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function ClientResponsablePerson_Model(options){var id='ClientResponsablePerson_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dep=new FieldString("dep",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldString("post",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_type=new FieldEnum("person_type",filed_options);filed_options.enumValues='boss,chef_accountant,other';ClientResponsablePerson_Model.superclass.constructor.call(this,id,options);}
extend(ClientResponsablePerson_Model,ModelJSON); 
function DocumentTemplate_Model(options){var id='DocumentTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.fields.document_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);options.fields.construction_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.alias='Дата создания';filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);options.fields.create_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое шаблона';filed_options.autoInc=false;options.fields.content=new FieldJSON("content",filed_options);options.fields.content.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое шаблона';filed_options.autoInc=false;options.fields.content_for_experts=new FieldJSON("content_for_experts",filed_options);options.fields.content_for_experts.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DocumentTemplate_Model.superclass.constructor.call(this,id,options);}
extend(DocumentTemplate_Model,ModelXML); 
function DocumentTemplate_Controller(options){options=options||{};options.listModelClass=DocumentTemplateList_Model;options.objModelClass=DocumentTemplate_Model;DocumentTemplate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DocumentTemplate_Controller,ControllerObjServer);DocumentTemplate_Controller.prototype.addInsert=function(){DocumentTemplate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var field=new FieldEnum("document_type",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("construction_type_id",options);pm.addField(field);var options={};options.alias="Дата создания";options.primaryKey=true;options.required=true;var field=new FieldDate("create_date",options);pm.addField(field);var options={};options.alias="Содержимое шаблона";options.required=true;var field=new FieldJSON("content",options);pm.addField(field);var options={};options.alias="Содержимое шаблона";options.required=true;var field=new FieldJSON("content_for_experts",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);}
DocumentTemplate_Controller.prototype.addUpdate=function(){DocumentTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("document_type",options);pm.addField(field);field=new FieldEnum("old_document_type",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldInt("construction_type_id",options);pm.addField(field);field=new FieldInt("old_construction_type_id",{});pm.addField(field);var options={};options.alias="Дата создания";options.primaryKey=true;var field=new FieldDate("create_date",options);pm.addField(field);field=new FieldDate("old_create_date",{});pm.addField(field);var options={};options.alias="Содержимое шаблона";var field=new FieldJSON("content",options);pm.addField(field);var options={};options.alias="Содержимое шаблона";var field=new FieldJSON("content_for_experts",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);}
DocumentTemplate_Controller.prototype.addDelete=function(){DocumentTemplate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldEnum("document_type",options));var options={"required":true};pm.addField(new FieldInt("construction_type_id",options));var options={"required":true};options.alias="Дата создания";pm.addField(new FieldDate("create_date",options));}
DocumentTemplate_Controller.prototype.addGetList=function(){DocumentTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("document_type",f_opts));var f_opts={};pm.addField(new FieldDate("create_date",f_opts));var f_opts={};pm.addField(new FieldInt("construction_type_id",f_opts));var f_opts={};pm.addField(new FieldJSON("construction_types_ref",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));}
DocumentTemplate_Controller.prototype.addGetObject=function(){DocumentTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldEnum("document_type",f_opts));var f_opts={};pm.addField(new FieldInt("construction_type_id",f_opts));var f_opts={};f_opts.alias="Дата создания";pm.addField(new FieldDate("create_date",f_opts));pm.addField(new FieldString("mode"));} 
function DocumentTemplateList_Model(options){var id='DocumentTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.document_type=new FieldString("document_type",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_types_ref=new FieldJSON("construction_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DocumentTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(DocumentTemplateList_Model,ModelXML); 
function ApplicationTemplateContent_Controller(options){options=options||{};options.listModelClass=ApplicationTemplateContent_Model;options.objModelClass=ApplicationTemplateContent_Model;ApplicationTemplateContent_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ApplicationTemplateContent_Controller,ControllerObjClient);ApplicationTemplateContent_Controller.prototype.addInsert=function(){ApplicationTemplateContent_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldBool("required",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ApplicationTemplateContent_Controller.prototype.addUpdate=function(){ApplicationTemplateContent_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);var options={};var field=new FieldBool("required",options);pm.addField(field);}
ApplicationTemplateContent_Controller.prototype.addDelete=function(){ApplicationTemplateContent_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ApplicationTemplateContent_Controller.prototype.addGetList=function(){ApplicationTemplateContent_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));var f_opts={};pm.addField(new FieldBool("required",f_opts));}
ApplicationTemplateContent_Controller.prototype.addGetObject=function(){ApplicationTemplateContent_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function ApplicationTemplateContent_Model(options){var id='ApplicationTemplateContent_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.required=new FieldBool("required",filed_options);ApplicationTemplateContent_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationTemplateContent_Model,ModelJSONTree);ModelJSON.prototype.initSequences=function(){for(sid in this.m_sequences){this.m_sequences[sid]=(this.m_sequences[sid]==undefined)?0:this.m_sequences[sid];if(!this.m_model[this.getTagRows()]){return;}
for(var r=0;r<this.m_model[this.getTagRows()].length;r++){var row=this.m_model[this.getTagRows()][r];for(var c in row.fields){if(c==sid){var dv=parseInt(row.fields[c],10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}
break;}}
var items=row.items;if(items){for(var it=0;it<row.items.length;it++){if(row.items[it].fields.id){var dv=parseInt(row.items[it].fields.id,10);if(this.m_sequences[sid]<dv){this.m_sequences[sid]=dv;}}}}}}} 
function ClientBankAccount_Controller(options){options=options||{};options.listModelClass=ClientBankAccount_Model;options.objModelClass=ClientBankAccount_Model;ClientBankAccount_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ClientBankAccount_Controller,ControllerObjClient);ClientBankAccount_Controller.prototype.addInsert=function(){ClientBankAccount_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("acc_number",options);pm.addField(field);var options={};var field=new FieldString("bank_bik",options);pm.addField(field);var options={};var field=new FieldString("bank_descr",options);pm.addField(field);}
ClientBankAccount_Controller.prototype.addUpdate=function(){ClientBankAccount_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("acc_number",options);pm.addField(field);field=new FieldString("old_acc_number",{});pm.addField(field);var options={};var field=new FieldString("bank_bik",options);pm.addField(field);var options={};var field=new FieldString("bank_descr",options);pm.addField(field);}
ClientBankAccount_Controller.prototype.addDelete=function(){ClientBankAccount_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("acc_number",options));}
ClientBankAccount_Controller.prototype.addGetList=function(){ClientBankAccount_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("acc_number",f_opts));var f_opts={};pm.addField(new FieldString("bank_bik",f_opts));var f_opts={};pm.addField(new FieldString("bank_descr",f_opts));}
ClientBankAccount_Controller.prototype.addGetObject=function(){ClientBankAccount_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("acc_number",f_opts));pm.addField(new FieldString("mode"));} 
function ClientBankAccount_Model(options){var id='ClientBankAccount_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.acc_number=new FieldString("acc_number",filed_options);options.fields.acc_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bank_bik=new FieldString("bank_bik",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bank_descr=new FieldString("bank_descr",filed_options);ClientBankAccount_Model.superclass.constructor.call(this,id,options);}
extend(ClientBankAccount_Model,ModelJSON); 
function Office_Controller(options){options=options||{};options.listModelClass=OfficeList_Model;options.objModelClass=OfficeList_Model;Office_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(Office_Controller,ControllerObjServer);Office_Controller.prototype.addInsert=function(){Office_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldJSONB("work_hours",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Office_Controller.prototype.addUpdate=function(){Office_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldJSONB("work_hours",options);pm.addField(field);}
Office_Controller.prototype.addDelete=function(){Office_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Office_Controller.prototype.addGetList=function(){Office_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldText("address",f_opts));var f_opts={};pm.addField(new FieldJSONB("work_hours",f_opts));}
Office_Controller.prototype.addGetObject=function(){Office_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function Office_Model(options){var id='Office_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_hours=new FieldJSONB("work_hours",filed_options);Office_Model.superclass.constructor.call(this,id,options);}
extend(Office_Model,ModelXML); 
function OfficeList_Model(options){var id='OfficeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.address=new FieldText("address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_hours=new FieldJSONB("work_hours",filed_options);OfficeList_Model.superclass.constructor.call(this,id,options);}
extend(OfficeList_Model,ModelXML); 
function Captcha_Controller(options){options=options||{};Captcha_Controller.superclass.constructor.call(this,options);this.add_get();}
extend(Captcha_Controller,ControllerObjServer);Captcha_Controller.prototype.add_get=function(){var opts={"controller":this};var pm=new PublicMethodServer('get',opts);this.addPublicMethod(pm);} 
function Enum_client_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_enterprise":"Юридическое лицо","ru_person":"Физическое лицо","ru_pboul":"Индивидуальный предприниматель"};options.options=[{"value":"enterprise","descr":multy_lang_values[window.getApp().getLocale()+"_"+"enterprise"],checked:(options.defaultValue&&options.defaultValue=="enterprise")},{"value":"person","descr":multy_lang_values[window.getApp().getLocale()+"_"+"person"],checked:(options.defaultValue&&options.defaultValue=="person")},{"value":"pboul","descr":multy_lang_values[window.getApp().getLocale()+"_"+"pboul"],checked:(options.defaultValue&&options.defaultValue=="pboul")}];Enum_client_types.superclass.constructor.call(this,id,options);}
extend(Enum_client_types,EditSelect); 
function EnumGridColumn_client_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["enterprise"]="Юридическое лицо";options.multyLangValues["ru"]["person"]="Физическое лицо";options.multyLangValues["ru"]["pboul"]="Индивидуальный предприниматель";EnumGridColumn_client_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_client_types,GridColumnEnum); 
function Application_Model(options){var id='Application_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.create_dt=new FieldDateTimeTZ("create_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity=new FieldBool("cost_eval_validity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.cost_eval_validity_simult=new FieldBool("cost_eval_validity_simult",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.modification=new FieldBool("modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.audit=new FieldBool("audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_source_id=new FieldInt("fund_source_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant=new FieldJSONB("applicant",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer=new FieldJSONB("customer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contractors=new FieldJSONB("contractors",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.developer=new FieldJSONB("developer",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_cost_eval=new FieldFloat("total_cost_eval",filed_options);options.fields.total_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limit_cost_eval=new FieldFloat("limit_cost_eval",filed_options);options.fields.limit_cost_eval.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.filled_percent=new FieldInt("filled_percent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.office_id=new FieldInt("office_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_id=new FieldInt("primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_application_reg_number=new FieldString("primary_application_reg_number",filed_options);options.fields.primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_id=new FieldInt("modif_primary_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_application_reg_number=new FieldString("modif_primary_application_reg_number",filed_options);options.fields.modif_primary_application_reg_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.build_type_id=new FieldInt("build_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_expertise=new FieldJSONB("app_print_expertise",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_cost_eval=new FieldJSONB("app_print_cost_eval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_modification=new FieldJSONB("app_print_modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.app_print_audit=new FieldJSONB("app_print_audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_application_id=new FieldInt("base_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.derived_application_id=new FieldInt("derived_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pd_usage_info=new FieldText("pd_usage_info",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter=new FieldText("auth_letter",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter_file=new FieldJSONB("auth_letter_file",filed_options);Application_Model.superclass.constructor.call(this,id,options);}
extend(Application_Model,ModelXML); 
function Enum_expertise_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_pd":"Государственная экспертиза проектной документации","ru_eng_survey":"Государственная экспертиза результатов инженерных изысканий","ru_pd_eng_survey":"Государственная экспертиза проектной документации и Государственная экспертиза результатов инженерных изысканий"};options.options=[{"value":"pd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"pd"],checked:(options.defaultValue&&options.defaultValue=="pd")},{"value":"eng_survey","descr":multy_lang_values[window.getApp().getLocale()+"_"+"eng_survey"],checked:(options.defaultValue&&options.defaultValue=="eng_survey")},{"value":"pd_eng_survey","descr":multy_lang_values[window.getApp().getLocale()+"_"+"pd_eng_survey"],checked:(options.defaultValue&&options.defaultValue=="pd_eng_survey")}];Enum_expertise_types.superclass.constructor.call(this,id,options);}
extend(Enum_expertise_types,EditSelect); 
function EnumGridColumn_expertise_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["pd"]="Государственная экспертиза проектной документации";options.multyLangValues["ru"]["eng_survey"]="Государственная экспертиза результатов инженерных изысканий";options.multyLangValues["ru"]["pd_eng_survey"]="Государственная экспертиза проектной документации и Государственная экспертиза результатов инженерных изысканий";EnumGridColumn_expertise_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_expertise_types,GridColumnEnum); 
function ApplicationContractor_Controller(options){options=options||{};options.listModelClass=ApplicationContractor_Model;options.objModelClass=ApplicationContractor_Model;ApplicationContractor_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ApplicationContractor_Controller,ControllerObjClient);ApplicationContractor_Controller.prototype.addInsert=function(){ApplicationContractor_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);}
ApplicationContractor_Controller.prototype.addUpdate=function(){ApplicationContractor_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);}
ApplicationContractor_Controller.prototype.addDelete=function(){ApplicationContractor_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ApplicationContractor_Controller.prototype.addGetList=function(){ApplicationContractor_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));}
ApplicationContractor_Controller.prototype.addGetObject=function(){ApplicationContractor_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function TechnicalFeature_Controller(options){options=options||{};options.listModelClass=TechnicalFeature_Model;options.objModelClass=TechnicalFeature_Model;TechnicalFeature_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(TechnicalFeature_Controller,ControllerObjClient);TechnicalFeature_Controller.prototype.addInsert=function(){TechnicalFeature_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("value",options);pm.addField(field);}
TechnicalFeature_Controller.prototype.addUpdate=function(){TechnicalFeature_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("name",options);pm.addField(field);field=new FieldString("old_name",{});pm.addField(field);var options={};var field=new FieldString("value",options);pm.addField(field);}
TechnicalFeature_Controller.prototype.addDelete=function(){TechnicalFeature_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("name",options));}
TechnicalFeature_Controller.prototype.addGetList=function(){TechnicalFeature_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldString("value",f_opts));}
TechnicalFeature_Controller.prototype.addGetObject=function(){TechnicalFeature_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("name",f_opts));pm.addField(new FieldString("mode"));} 
function TechnicalFeature_Model(options){var id='TechnicalFeature_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.value=new FieldString("value",filed_options);options.fields.value.getValidator().setMaxLength('100');TechnicalFeature_Model.superclass.constructor.call(this,id,options);}
extend(TechnicalFeature_Model,ModelJSON); 
function ApplicationContractor_Model(options){var id='ApplicationContractor_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);ApplicationContractor_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationContractor_Model,ModelJSON); 
function ApplicationStateHistory_Model(options){var id='ApplicationStateHistory_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='filling,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);ApplicationStateHistory_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationStateHistory_Model,ModelXML); 
function Enum_application_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_filling":"Заполнение анкеты","ru_correcting":"Исправление анкеты","ru_sent":"Анкета отправлена на проверку","ru_checking":"Проверка анкеты","ru_returned":"Возврат без рассмотрения","ru_closed_no_expertise":"Возврат без экспертизы","ru_waiting_for_contract":"Контракт по заявлению","ru_waiting_for_pay":"Ожидание оплаты","ru_expertise":"Экспертиза проекта","ru_closed":"Заключение"};options.options=[{"value":"filling","descr":multy_lang_values[window.getApp().getLocale()+"_"+"filling"],checked:(options.defaultValue&&options.defaultValue=="filling")},{"value":"correcting","descr":multy_lang_values[window.getApp().getLocale()+"_"+"correcting"],checked:(options.defaultValue&&options.defaultValue=="correcting")},{"value":"sent","descr":multy_lang_values[window.getApp().getLocale()+"_"+"sent"],checked:(options.defaultValue&&options.defaultValue=="sent")},{"value":"checking","descr":multy_lang_values[window.getApp().getLocale()+"_"+"checking"],checked:(options.defaultValue&&options.defaultValue=="checking")},{"value":"returned","descr":multy_lang_values[window.getApp().getLocale()+"_"+"returned"],checked:(options.defaultValue&&options.defaultValue=="returned")},{"value":"closed_no_expertise","descr":multy_lang_values[window.getApp().getLocale()+"_"+"closed_no_expertise"],checked:(options.defaultValue&&options.defaultValue=="closed_no_expertise")},{"value":"waiting_for_contract","descr":multy_lang_values[window.getApp().getLocale()+"_"+"waiting_for_contract"],checked:(options.defaultValue&&options.defaultValue=="waiting_for_contract")},{"value":"waiting_for_pay","descr":multy_lang_values[window.getApp().getLocale()+"_"+"waiting_for_pay"],checked:(options.defaultValue&&options.defaultValue=="waiting_for_pay")},{"value":"expertise","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expertise"],checked:(options.defaultValue&&options.defaultValue=="expertise")},{"value":"closed","descr":multy_lang_values[window.getApp().getLocale()+"_"+"closed"],checked:(options.defaultValue&&options.defaultValue=="closed")}];Enum_application_states.superclass.constructor.call(this,id,options);}
extend(Enum_application_states,EditSelect); 
function EnumGridColumn_application_states(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["filling"]="Заполнение анкеты";options.multyLangValues["ru"]["correcting"]="Исправление анкеты";options.multyLangValues["ru"]["sent"]="Анкета отправлена на проверку";options.multyLangValues["ru"]["checking"]="Проверка анкеты";options.multyLangValues["ru"]["returned"]="Возврат без рассмотрения";options.multyLangValues["ru"]["closed_no_expertise"]="Возврат без экспертизы";options.multyLangValues["ru"]["waiting_for_contract"]="Контракт по заявлению";options.multyLangValues["ru"]["waiting_for_pay"]="Ожидание оплаты";options.multyLangValues["ru"]["expertise"]="Экспертиза проекта";options.multyLangValues["ru"]["closed"]="Заключение";EnumGridColumn_application_states.superclass.constructor.call(this,options);}
extend(EnumGridColumn_application_states,GridColumnEnum); 
function ApplicationClient_Controller(options){options=options||{};options.listModelClass=ApplicationClient_Model;options.objModelClass=ApplicationClient_Model;ApplicationClient_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ApplicationClient_Controller,ControllerObjClient);ApplicationClient_Controller.prototype.addInsert=function(){ApplicationClient_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldText("name_full",options);pm.addField(field);var options={};var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldString("ogrn",options);pm.addField(field);var options={};var field=new FieldJSONB("post_address",options);pm.addField(field);var options={};var field=new FieldJSONB("legal_address",options);pm.addField(field);var options={};var field=new FieldJSONB("responsable_persons",options);pm.addField(field);var options={};var field=new FieldJSONB("bank_accounts",options);pm.addField(field);var options={};options.required=true;options.enumValues='enterprise,person,pboul';var field=new FieldEnum("client_type",options);pm.addField(field);var options={};var field=new FieldText("base_document_for_contract",options);pm.addField(field);var options={};var field=new FieldJSONB("person_id_paper",options);pm.addField(field);var options={};var field=new FieldJSONB("person_registr_paper",options);pm.addField(field);}
ApplicationClient_Controller.prototype.addUpdate=function(){ApplicationClient_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldText("name_full",options);pm.addField(field);var options={};var field=new FieldString("inn",options);pm.addField(field);var options={};var field=new FieldString("kpp",options);pm.addField(field);var options={};var field=new FieldString("ogrn",options);pm.addField(field);var options={};var field=new FieldJSONB("post_address",options);pm.addField(field);var options={};var field=new FieldJSONB("legal_address",options);pm.addField(field);var options={};var field=new FieldJSONB("responsable_persons",options);pm.addField(field);var options={};var field=new FieldJSONB("bank_accounts",options);pm.addField(field);var options={};options.enumValues='enterprise,person,pboul';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("client_type",options);pm.addField(field);var options={};var field=new FieldText("base_document_for_contract",options);pm.addField(field);var options={};var field=new FieldJSONB("person_id_paper",options);pm.addField(field);var options={};var field=new FieldJSONB("person_registr_paper",options);pm.addField(field);}
ApplicationClient_Controller.prototype.addDelete=function(){ApplicationClient_Controller.superclass.addDelete.call(this);var pm=this.getDelete();}
ApplicationClient_Controller.prototype.addGetList=function(){ApplicationClient_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldText("name_full",f_opts));var f_opts={};pm.addField(new FieldString("inn",f_opts));var f_opts={};pm.addField(new FieldString("kpp",f_opts));var f_opts={};pm.addField(new FieldString("ogrn",f_opts));var f_opts={};pm.addField(new FieldJSONB("post_address",f_opts));var f_opts={};pm.addField(new FieldJSONB("legal_address",f_opts));var f_opts={};pm.addField(new FieldJSONB("responsable_persons",f_opts));var f_opts={};pm.addField(new FieldJSONB("bank_accounts",f_opts));var f_opts={};pm.addField(new FieldEnum("client_type",f_opts));var f_opts={};pm.addField(new FieldText("base_document_for_contract",f_opts));var f_opts={};pm.addField(new FieldJSONB("person_id_paper",f_opts));var f_opts={};pm.addField(new FieldJSONB("person_registr_paper",f_opts));}
ApplicationClient_Controller.prototype.addGetObject=function(){ApplicationClient_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();pm.addField(new FieldString("mode"));} 
function ApplicationClient_Model(options){var id='ApplicationClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);options.fields.kpp.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ogrn=new FieldString("ogrn",filed_options);options.fields.ogrn.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_address=new FieldJSONB("post_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.legal_address=new FieldJSONB("legal_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.responsable_persons=new FieldJSONB("responsable_persons",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bank_accounts=new FieldJSONB("bank_accounts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.client_type=new FieldEnum("client_type",filed_options);filed_options.enumValues='enterprise,person,pboul';options.fields.client_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_document_for_contract=new FieldText("base_document_for_contract",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_id_paper=new FieldJSONB("person_id_paper",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_registr_paper=new FieldJSONB("person_registr_paper",filed_options);ApplicationClient_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationClient_Model,ModelJSON); 
function PersonIdPaper_Model(options){var id='PersonIdPaper_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');PersonIdPaper_Model.superclass.constructor.call(this,id,options);}
extend(PersonIdPaper_Model,ModelXML); 
function PersonIdPaper_Controller(options){options=options||{};options.listModelClass=PersonIdPaper_Model;options.objModelClass=PersonIdPaper_Model;PersonIdPaper_Controller.superclass.constructor.call(this,options);this.addGetObject();this.addGetList();this.addComplete();}
extend(PersonIdPaper_Controller,ControllerObjServer);PersonIdPaper_Controller.prototype.addGetObject=function(){PersonIdPaper_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
PersonIdPaper_Controller.prototype.addGetList=function(){PersonIdPaper_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
PersonIdPaper_Controller.prototype.addComplete=function(){PersonIdPaper_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ClientPersonIdPaper_Model(options){var id='ClientPersonIdPaper_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.paper=new FieldString("paper",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.series=new FieldString("series",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldString("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_body=new FieldString("issue_body",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_date=new FieldDate("issue_date",filed_options);ClientPersonIdPaper_Model.superclass.constructor.call(this,id,options);}
extend(ClientPersonIdPaper_Model,ModelJSON); 
function ClientPersonRegistrPaper_Model(options){var id='ClientPersonRegistrPaper_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.issue_date=new FieldDate("issue_date",filed_options);ClientPersonRegistrPaper_Model.superclass.constructor.call(this,id,options);}
extend(ClientPersonRegistrPaper_Model,ModelJSON); 
function ApplicationClientList_Model(options){var id='ApplicationClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ogrn=new FieldString("ogrn",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_type=new FieldString("client_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_data=new FieldText("client_data",filed_options);ApplicationClientList_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationClientList_Model,ModelXML); 
function ApplicationDocumentFile_Model(options){var id='ApplicationDocumentFile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.file_id=new FieldString("file_id",filed_options);options.fields.file_id.getValidator().setRequired(true);options.fields.file_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_id=new FieldInt("document_id",filed_options);options.fields.document_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.fields.document_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldText("file_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_path=new FieldText("file_path",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.file_signed=new FieldBool("file_signed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_size=new FieldInt("file_size",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.deleted_dt=new FieldDateTimeTZ("deleted_dt",filed_options);ApplicationDocumentFile_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationDocumentFile_Model,ModelXML); 
function ApplicationPrint_Model(options){var id='ApplicationPrint_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_descr=new FieldString("date_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldString("expertise_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.estim_cost_type=new FieldString("estim_cost_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_source=new FieldEnum("fund_source",filed_options);filed_options.enumValues='fed_budget,own';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant_name_full=new FieldString("applicant_name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer_name_full=new FieldString("customer_name_full",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contractors=new FieldText("contractors",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldString("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldText("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_construction_type=new FieldString("constr_construction_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_total_est_cost=new FieldString("constr_total_est_cost",filed_options);options.fields.constr_total_est_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_land_area_unit=new FieldString("constr_land_area_unit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_land_area_val=new FieldString("constr_land_area_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_total_area_unit=new FieldString("constr_total_area_unit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_total_area_val=new FieldString("constr_total_area_val",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.office_descr=new FieldString("office_descr",filed_options);ApplicationPrint_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationPrint_Model,ModelXML); 
function ApplicationDocumentFile_Model(options){var id='ApplicationDocumentFile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.file_id=new FieldString("file_id",filed_options);options.fields.file_id.getValidator().setRequired(true);options.fields.file_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_id=new FieldInt("document_id",filed_options);options.fields.document_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.fields.document_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldText("file_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_path=new FieldText("file_path",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.file_signed=new FieldBool("file_signed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_size=new FieldInt("file_size",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.deleted=new FieldBool("deleted",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.deleted_dt=new FieldDateTimeTZ("deleted_dt",filed_options);ApplicationDocumentFile_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationDocumentFile_Model,ModelXML); 
function DownloadFileType_Controller(options){options=options||{};options.listModelClass=DownloadFileType_Model;options.objModelClass=DownloadFileType_Model;DownloadFileType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DownloadFileType_Controller,ControllerObjClient);DownloadFileType_Controller.prototype.addInsert=function(){DownloadFileType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("ext",options);pm.addField(field);}
DownloadFileType_Controller.prototype.addUpdate=function(){DownloadFileType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("ext",options);pm.addField(field);field=new FieldString("old_ext",{});pm.addField(field);}
DownloadFileType_Controller.prototype.addDelete=function(){DownloadFileType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("ext",options));}
DownloadFileType_Controller.prototype.addGetList=function(){DownloadFileType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("ext",f_opts));}
DownloadFileType_Controller.prototype.addGetObject=function(){DownloadFileType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("ext",f_opts));pm.addField(new FieldString("mode"));} 
function DownloadFileType_Model(options){var id='DownloadFileType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.ext=new FieldString("ext",filed_options);options.fields.ext.getValidator().setMaxLength('5');DownloadFileType_Model.superclass.constructor.call(this,id,options);}
extend(DownloadFileType_Model,ModelJSON); 
function Enum_responsable_person_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_boss":"Руководитель","ru_chef_accountant":"Главны бухгалтер","ru_other":"Прочий"};options.options=[{"value":"boss","descr":multy_lang_values[window.getApp().getLocale()+"_"+"boss"],checked:(options.defaultValue&&options.defaultValue=="boss")},{"value":"chef_accountant","descr":multy_lang_values[window.getApp().getLocale()+"_"+"chef_accountant"],checked:(options.defaultValue&&options.defaultValue=="chef_accountant")},{"value":"other","descr":multy_lang_values[window.getApp().getLocale()+"_"+"other"],checked:(options.defaultValue&&options.defaultValue=="other")}];Enum_responsable_person_types.superclass.constructor.call(this,id,options);}
extend(Enum_responsable_person_types,EditSelect); 
function EnumGridColumn_responsable_person_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["boss"]="Руководитель";options.multyLangValues["ru"]["chef_accountant"]="Главны бухгалтер";options.multyLangValues["ru"]["other"]="Прочий";EnumGridColumn_responsable_person_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_responsable_person_types,GridColumnEnum); 
function Morpher_Model(options){var id='Morpher_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.src=new FieldText("src",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.res=new FieldXML("res",filed_options);Morpher_Model.superclass.constructor.call(this,id,options);}
extend(Morpher_Model,ModelXML); 
function Holiday_Controller(options){options=options||{};options.listModelClass=Holiday_Model;options.objModelClass=Holiday_Model;Holiday_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(Holiday_Controller,ControllerObjServer);Holiday_Controller.prototype.addInsert=function(){Holiday_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
Holiday_Controller.prototype.addUpdate=function(){Holiday_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldDate("date",options);pm.addField(field);field=new FieldDate("old_date",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
Holiday_Controller.prototype.addDelete=function(){Holiday_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldDate("date",options));}
Holiday_Controller.prototype.addGetList=function(){Holiday_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date");}
Holiday_Controller.prototype.addGetObject=function(){Holiday_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldDate("date",f_opts));pm.addField(new FieldString("mode"));} 
function Holiday_Model(options){var id='Holiday_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');Holiday_Model.superclass.constructor.call(this,id,options);}
extend(Holiday_Model,ModelXML); 
function DocFlowOut_Model(options){var id='DocFlowOut_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employee_id=new FieldInt("signed_by_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_names=new FieldJSONB("to_addr_names",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_application_id=new FieldInt("to_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contract_id=new FieldInt("to_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_client_id=new FieldInt("to_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.new_contract_number=new FieldText("new_contract_number",filed_options);DocFlowOut_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOut_Model,ModelXML); 
function DocFlowOut_Controller(options){options=options||{};options.listModelClass=DocFlowOutList_Model;options.objModelClass=DocFlowOutDialog_Model;DocFlowOut_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.add_remove_file();this.add_get_file();this.add_get_file_sig();this.add_get_next_num();this.addComplete();this.add_get_app_state();this.add_get_next_contract_number();}
extend(DocFlowOut_Controller,ControllerObjServer);DocFlowOut_Controller.prototype.addInsert=function(){DocFlowOut_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("signed_by_employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("to_addr_names",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("to_user_id",options);pm.addField(field);var options={};var field=new FieldInt("to_application_id",options);pm.addField(field);var options={};var field=new FieldInt("to_contract_id",options);pm.addField(field);var options={};var field=new FieldInt("to_client_id",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_in_id",options);pm.addField(field);var options={};var field=new FieldText("new_contract_number",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldEnum("expertise_result",options));var options={};pm.addField(new FieldInt("expertise_reject_type_id",options));}
DocFlowOut_Controller.prototype.addUpdate=function(){DocFlowOut_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("signed_by_employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("to_addr_names",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("to_user_id",options);pm.addField(field);var options={};var field=new FieldInt("to_application_id",options);pm.addField(field);var options={};var field=new FieldInt("to_contract_id",options);pm.addField(field);var options={};var field=new FieldInt("to_client_id",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_in_id",options);pm.addField(field);var options={};var field=new FieldText("new_contract_number",options);pm.addField(field);var options={};pm.addField(new FieldEnum("expertise_result",options));var options={};pm.addField(new FieldInt("expertise_reject_type_id",options));}
DocFlowOut_Controller.prototype.addDelete=function(){DocFlowOut_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowOut_Controller.prototype.addGetList=function(){DocFlowOut_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldString("reg_number",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldInt("signed_by_employee_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("to_addr_names",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldInt("to_user_id",f_opts));var f_opts={};pm.addField(new FieldInt("to_application_id",f_opts));var f_opts={};pm.addField(new FieldInt("to_contract_id",f_opts));var f_opts={};pm.addField(new FieldInt("to_client_id",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_in_id",f_opts));var f_opts={};pm.addField(new FieldText("new_contract_number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
DocFlowOut_Controller.prototype.addGetObject=function(){DocFlowOut_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowOut_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowOut_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowOut_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowOut_Controller.prototype.add_get_next_num=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_next_num',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_flow_type_id",options));this.addPublicMethod(pm);}
DocFlowOut_Controller.prototype.addComplete=function(){DocFlowOut_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("reg_number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("reg_number");}
DocFlowOut_Controller.prototype.add_get_app_state=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_app_state',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
DocFlowOut_Controller.prototype.add_get_next_contract_number=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_next_contract_number',opts);var options={};options.required=true;pm.addField(new FieldInt("application_id",options));this.addPublicMethod(pm);} 
function DocFlowOutList_Model(options){var id='DocFlowOutList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employee_id=new FieldInt("signed_by_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_names=new FieldJSONB("to_addr_names",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_application_id=new FieldInt("to_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contract_id=new FieldInt("to_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_client_id=new FieldInt("to_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.new_contract_number=new FieldText("new_contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_short_name=new FieldString("employee_short_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_applications_ref=new FieldJSON("to_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_constr_name=new FieldString("to_constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_ref=new FieldJSON("doc_flow_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant_descr=new FieldText("applicant_descr",filed_options);DocFlowOutList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutList_Model,ModelXML); 
function Department_Model(options){var id='Department_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.boss_employee_id=new FieldInt("boss_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');Department_Model.superclass.constructor.call(this,id,options);}
extend(Department_Model,ModelXML); 
function Employe_Model(options){var id='Employe_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);Employe_Model.superclass.constructor.call(this,id,options);}
extend(Employe_Model,ModelXML); 
function Employee_Model(options){var id='Employee_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.department_id=new FieldInt("department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_id=new FieldInt("post_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture=new FieldText("picture",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture_info=new FieldJSON("picture_info",filed_options);Employee_Model.superclass.constructor.call(this,id,options);}
extend(Employee_Model,ModelXML); 
function DocFlowIn_Model(options){var id='DocFlowIn_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_id=new FieldInt("from_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_signed_by=new FieldString("from_client_signed_by",filed_options);options.fields.from_client_signed_by.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_number=new FieldString("from_client_number",filed_options);options.fields.from_client_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_date=new FieldDate("from_client_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr_name=new FieldString("from_addr_name",filed_options);options.fields.from_addr_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user_id=new FieldInt("from_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_application_id=new FieldInt("from_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_doc_flow_out_client_id=new FieldInt("from_doc_flow_out_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.from_client_app=new FieldBool("from_client_app",filed_options);DocFlowIn_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowIn_Model,ModelXML); 
function DocFlowInList_Model(options){var id='DocFlowInList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr_name=new FieldString("from_addr_name",filed_options);options.fields.from_addr_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_application_id=new FieldInt("from_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_ref=new FieldJSON("doc_flow_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSON("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender=new FieldString("sender",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.sender_construction_name=new FieldString("sender_construction_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);DocFlowInList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInList_Model,ModelXML); 
function DocFlow_Controller(options){options=options||{};DocFlow_Controller.superclass.constructor.call(this,options);this.add_remove_file();}
extend(DocFlow_Controller,ControllerObjServer);DocFlow_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("id",options));this.addPublicMethod(pm);} 
function DocFlowIn_Controller(options){options=options||{};options.listModelClass=DocFlowInList_Model;options.objModelClass=DocFlowInDialog_Model;DocFlowIn_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_remove_file();this.add_get_file();this.add_get_file_sig();this.add_get_next_num();}
extend(DocFlowIn_Controller,ControllerObjServer);DocFlowIn_Controller.prototype.addInsert=function(){DocFlowIn_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("from_client_id",options);pm.addField(field);var options={};var field=new FieldString("from_client_signed_by",options);pm.addField(field);var options={};var field=new FieldString("from_client_number",options);pm.addField(field);var options={};var field=new FieldDate("from_client_date",options);pm.addField(field);var options={};var field=new FieldString("from_addr_name",options);pm.addField(field);var options={};var field=new FieldInt("from_user_id",options);pm.addField(field);var options={};var field=new FieldInt("from_application_id",options);pm.addField(field);var options={};var field=new FieldInt("from_doc_flow_out_client_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_out_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldBool("from_client_app",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowIn_Controller.prototype.addUpdate=function(){DocFlowIn_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("from_client_id",options);pm.addField(field);var options={};var field=new FieldString("from_client_signed_by",options);pm.addField(field);var options={};var field=new FieldString("from_client_number",options);pm.addField(field);var options={};var field=new FieldDate("from_client_date",options);pm.addField(field);var options={};var field=new FieldString("from_addr_name",options);pm.addField(field);var options={};var field=new FieldInt("from_user_id",options);pm.addField(field);var options={};var field=new FieldInt("from_application_id",options);pm.addField(field);var options={};var field=new FieldInt("from_doc_flow_out_client_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_out_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldBool("from_client_app",options);pm.addField(field);}
DocFlowIn_Controller.prototype.addDelete=function(){DocFlowIn_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowIn_Controller.prototype.addGetList=function(){DocFlowIn_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldString("reg_number",f_opts));var f_opts={};pm.addField(new FieldString("from_addr_name",f_opts));var f_opts={};pm.addField(new FieldInt("from_application_id",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_types_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("recipient",f_opts));var f_opts={};pm.addField(new FieldString("sender",f_opts));var f_opts={};pm.addField(new FieldString("sender_construction_name",f_opts));var f_opts={};pm.addField(new FieldString("state",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("state_dt",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("state_end_dt",f_opts));var f_opts={};pm.addField(new FieldJSON("state_register_doc",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
DocFlowIn_Controller.prototype.addGetObject=function(){DocFlowIn_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowIn_Controller.prototype.addComplete=function(){DocFlowIn_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("reg_number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("reg_number");}
DocFlowIn_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_next_num=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_next_num',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_flow_type_id",options));this.addPublicMethod(pm);} 
function DocFlowInDialog_Model(options){var id='DocFlowInDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_clients_ref=new FieldJSON("from_clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_signed_by=new FieldString("from_client_signed_by",filed_options);options.fields.from_client_signed_by.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_number=new FieldString("from_client_number",filed_options);options.fields.from_client_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_date=new FieldDate("from_client_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr_name=new FieldString("from_addr_name",filed_options);options.fields.from_addr_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_users_ref=new FieldJSON("from_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_applications_ref=new FieldJSON("from_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_application_id=new FieldInt("from_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_ref=new FieldJSON("doc_flow_out_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_ref=new FieldJSON("doc_flow_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.from_client_app=new FieldBool("from_client_app",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_processes_chain=new FieldJSON("doc_flow_in_processes_chain",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_doc_flow_out_client_id=new FieldInt("from_doc_flow_out_client_id",filed_options);DocFlowInDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInDialog_Model,ModelXML); 
function DocFlowType_Controller(options){options=options||{};options.listModelClass=DocFlowTypeList_Model;options.objModelClass=DocFlowTypeDialog_Model;DocFlowType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();}
extend(DocFlowType_Controller,ControllerObjServer);DocFlowType_Controller.prototype.addInsert=function(){DocFlowType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("num_prefix",options);pm.addField(field);var options={};var field=new FieldInterval("def_interval",options);pm.addField(field);var options={};var field=new FieldJSONB("def_intervals",options);pm.addField(field);var options={};options.enumValues='in,out,inside';var field=new FieldEnum("doc_flow_types_type_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowType_Controller.prototype.addUpdate=function(){DocFlowType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("num_prefix",options);pm.addField(field);var options={};var field=new FieldInterval("def_interval",options);pm.addField(field);var options={};var field=new FieldJSONB("def_intervals",options);pm.addField(field);var options={};options.enumValues='in,out,inside';var field=new FieldEnum("doc_flow_types_type_id",options);pm.addField(field);}
DocFlowType_Controller.prototype.addDelete=function(){DocFlowType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowType_Controller.prototype.addGetObject=function(){DocFlowType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowType_Controller.prototype.addGetList=function(){DocFlowType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldInterval("def_interval",f_opts));var f_opts={};pm.addField(new FieldString("doc_flow_types_type_id",f_opts));var f_opts={};pm.addField(new FieldString("num_prefix",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
DocFlowType_Controller.prototype.addComplete=function(){DocFlowType_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldInt("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");} 
function DocFlowType_Model(options){var id='DocFlowType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num_prefix=new FieldString("num_prefix",filed_options);options.fields.num_prefix.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_interval=new FieldInterval("def_interval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_intervals=new FieldJSONB("def_intervals",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_type_id=new FieldEnum("doc_flow_types_type_id",filed_options);filed_options.enumValues='in,out,inside';DocFlowType_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowType_Model,ModelXML); 
function ApplicationRespPerson_Model(options){var id='ApplicationRespPerson_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_type=new FieldString("client_type",filed_options);options.fields.client_type.getValidator().setRequired(true);options.fields.client_type.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');ApplicationRespPerson_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationRespPerson_Model,ModelXML); 
function ApplicationContact_Model(options){var id='ApplicationContact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.client_type=new FieldString("client_type",filed_options);options.fields.client_type.getValidator().setRequired(true);options.fields.client_type.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);options.fields.email.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldString("post",filed_options);options.fields.post.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firm_name=new FieldString("firm_name",filed_options);options.fields.firm_name.getValidator().setMaxLength('250');ApplicationContact_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationContact_Model,ModelXML); 
function Contact_Model(options){var id='Contact_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.parent_id=new FieldInt("parent_id",filed_options);options.fields.parent_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.parent_type=new FieldEnum("parent_type",filed_options);filed_options.enumValues='users,employees,departments,clients,doc_flow_out,doc_flow_in,doc_flow_inside,doc_flow_approvements,doc_flow_confirmations,doc_flow_acqaintances,doc_flow_examinations,doc_flow_fulfilments,doc_flow_registrations,applications,application_applicants,application_customers,application_contractors,doc_flow_importance_types,expertise_reject_types,services,contracts,short_messages';options.fields.parent_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.parent_ind=new FieldInt("parent_ind",filed_options);options.fields.parent_ind.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firm_name=new FieldString("firm_name",filed_options);options.fields.firm_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dep=new FieldString("dep",filed_options);options.fields.dep.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldText("post",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_type=new FieldEnum("person_type",filed_options);filed_options.enumValues='boss,chef_accountant,other';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldText("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);options.fields.tel.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact=new FieldText("contact",filed_options);Contact_Model.superclass.constructor.call(this,id,options);}
extend(Contact_Model,ModelXML); 
function Post_Model(options){var id='Post_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');Post_Model.superclass.constructor.call(this,id,options);}
extend(Post_Model,ModelXML); 
function Post_Controller(options){options=options||{};options.listModelClass=Post_Model;options.objModelClass=Post_Model;Post_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();}
extend(Post_Controller,ControllerObjServer);Post_Controller.prototype.addInsert=function(){Post_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Post_Controller.prototype.addUpdate=function(){Post_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
Post_Controller.prototype.addDelete=function(){Post_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Post_Controller.prototype.addGetObject=function(){Post_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Post_Controller.prototype.addGetList=function(){Post_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
Post_Controller.prototype.addComplete=function(){Post_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ClientDialog_Model(options){var id='ClientDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name_full=new FieldText("name_full",filed_options);options.fields.name_full.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.inn=new FieldString("inn",filed_options);options.fields.inn.getValidator().setRequired(true);options.fields.inn.getValidator().setMaxLength('12');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kpp=new FieldString("kpp",filed_options);options.fields.kpp.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ogrn=new FieldString("ogrn",filed_options);options.fields.ogrn.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.okpo=new FieldString("okpo",filed_options);options.fields.okpo.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.okved=new FieldText("okved",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.ext_id=new FieldString("ext_id",filed_options);options.fields.ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post_address=new FieldJSONB("post_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.legal_address=new FieldJSONB("legal_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bank_accounts=new FieldJSONB("bank_accounts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.client_type=new FieldEnum("client_type",filed_options);filed_options.enumValues='enterprise,person,pboul';options.fields.client_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.base_document_for_contract=new FieldText("base_document_for_contract",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_id_paper=new FieldJSONB("person_id_paper",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.person_registr_paper=new FieldJSONB("person_registr_paper",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.responsable_persons=new FieldJSON("responsable_persons",filed_options);ClientDialog_Model.superclass.constructor.call(this,id,options);}
extend(ClientDialog_Model,ModelXML); 
function Contact_Controller(options){options=options||{};options.listModelClass=Contact_Model;Contact_Controller.superclass.constructor.call(this,options);this.add_get_complete_list();this.addGetList();}
extend(Contact_Controller,ControllerObjServer);Contact_Controller.prototype.add_get_complete_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_complete_list',opts);var options={};options.maxlength="250";pm.addField(new FieldString("search",options));var options={};pm.addField(new FieldInt("mid",options));var options={};pm.addField(new FieldInt("ic",options));this.addPublicMethod(pm);}
Contact_Controller.prototype.addGetList=function(){Contact_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("parent_id",f_opts));var f_opts={};pm.addField(new FieldEnum("parent_type",f_opts));var f_opts={};pm.addField(new FieldInt("parent_ind",f_opts));var f_opts={};pm.addField(new FieldString("firm_name",f_opts));var f_opts={};pm.addField(new FieldString("dep",f_opts));var f_opts={};pm.addField(new FieldText("post",f_opts));var f_opts={};pm.addField(new FieldEnum("person_type",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldText("email",f_opts));var f_opts={};pm.addField(new FieldString("tel",f_opts));var f_opts={};pm.addField(new FieldText("contact",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("contact");} 
function ContactList_Model(options){var id='ContactList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.email=new FieldString("email",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.tel=new FieldString("tel",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.post=new FieldString("post",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.firm_name=new FieldString("firm_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.dep=new FieldString("dep",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact=new FieldText("contact",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contact_descr=new FieldText("contact_descr",filed_options);ContactList_Model.superclass.constructor.call(this,id,options);}
extend(ContactList_Model,ModelXML); 
function DocFlowType_Model(options){var id='DocFlowType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num_prefix=new FieldString("num_prefix",filed_options);options.fields.num_prefix.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_interval=new FieldInterval("def_interval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_intervals=new FieldJSONB("def_intervals",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_type_id=new FieldEnum("doc_flow_types_type_id",filed_options);filed_options.enumValues='in,out,inside';DocFlowType_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowType_Model,ModelXML); 
function DocFlowImportanceType_Model(options){var id='DocFlowImportanceType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approve_interval=new FieldInterval("approve_interval",filed_options);DocFlowImportanceType_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowImportanceType_Model,ModelXML); 
function DocFlowOut_Model(options){var id='DocFlowOut_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employee_id=new FieldInt("signed_by_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_names=new FieldJSONB("to_addr_names",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_application_id=new FieldInt("to_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contract_id=new FieldInt("to_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_client_id=new FieldInt("to_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.new_contract_number=new FieldText("new_contract_number",filed_options);DocFlowOut_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOut_Model,ModelXML); 
function DocFlowAttachment_Model(options){var id='DocFlowAttachment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.file_id=new FieldString("file_id",filed_options);options.fields.file_id.getValidator().setRequired(true);options.fields.file_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_type=new FieldEnum("doc_type",filed_options);filed_options.enumValues='users,employees,departments,clients,doc_flow_out,doc_flow_in,doc_flow_inside,doc_flow_approvements,doc_flow_confirmations,doc_flow_acqaintances,doc_flow_examinations,doc_flow_fulfilments,doc_flow_registrations,applications,application_applicants,application_customers,application_contractors,doc_flow_importance_types,expertise_reject_types,services,contracts,short_messages';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_id=new FieldInt("doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldString("file_name",filed_options);options.fields.file_name.getValidator().setMaxLength('255');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_size=new FieldInt("file_size",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_signed=new FieldBool("file_signed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.file_date=new FieldDateTime("file_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_path=new FieldText("file_path",filed_options);DocFlowAttachment_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowAttachment_Model,ModelXML); 
function DocFlowOutList_Model(options){var id='DocFlowOutList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employee_id=new FieldInt("signed_by_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_names=new FieldJSONB("to_addr_names",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_application_id=new FieldInt("to_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contract_id=new FieldInt("to_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_client_id=new FieldInt("to_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.new_contract_number=new FieldText("new_contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_short_name=new FieldString("employee_short_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_applications_ref=new FieldJSON("to_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_constr_name=new FieldString("to_constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_ref=new FieldJSON("doc_flow_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant_descr=new FieldText("applicant_descr",filed_options);DocFlowOutList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutList_Model,ModelXML); 
function DocFlowOutProcess_Model(options){var id='DocFlowOutProcess_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);options.fields.doc_flow_out_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='approving,not_approved,approved_with_notes,approved,confirming,not_confirmed,registered,registering';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);DocFlowOutProcess_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutProcess_Model,ModelXML); 
function Enum_doc_flow_out_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_approving":"На согласовании","ru_not_approved":"Не согласован","ru_approved_with_notes":"Согласован с замечаниями","ru_approved":"Согласован","ru_confirming":"На утверждении","ru_not_confirmed":"Не утвержден","ru_registered":"Отправлено","ru_registering":"На регистрации"};options.options=[{"value":"approving","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approving"],checked:(options.defaultValue&&options.defaultValue=="approving")},{"value":"not_approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"not_approved"],checked:(options.defaultValue&&options.defaultValue=="not_approved")},{"value":"approved_with_notes","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved_with_notes"],checked:(options.defaultValue&&options.defaultValue=="approved_with_notes")},{"value":"approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved"],checked:(options.defaultValue&&options.defaultValue=="approved")},{"value":"confirming","descr":multy_lang_values[window.getApp().getLocale()+"_"+"confirming"],checked:(options.defaultValue&&options.defaultValue=="confirming")},{"value":"not_confirmed","descr":multy_lang_values[window.getApp().getLocale()+"_"+"not_confirmed"],checked:(options.defaultValue&&options.defaultValue=="not_confirmed")},{"value":"registered","descr":multy_lang_values[window.getApp().getLocale()+"_"+"registered"],checked:(options.defaultValue&&options.defaultValue=="registered")},{"value":"registering","descr":multy_lang_values[window.getApp().getLocale()+"_"+"registering"],checked:(options.defaultValue&&options.defaultValue=="registering")}];Enum_doc_flow_out_states.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_out_states,EditSelect); 
function Enum_data_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_users":"Пользователи","ru_employees":"Сотрудники","ru_departments":"Отделы","ru_clients":"Контрагенты","ru_doc_flow_out":"Исходящие документы","ru_doc_flow_in":"Входящие документы","ru_doc_flow_inside":"Внутренние документы","ru_doc_flow_approvements":"Согласования","ru_doc_flow_confirmations":"Утвержения","ru_doc_flow_acqaintances":"Ознакомления","ru_doc_flow_examinations":"Рассмотрения","ru_doc_flow_fulfilments":"Исполнения","ru_doc_flow_registrations":"Регистрации","ru_applications":"Заявления","ru_application_applicants":"Заявители заявлений","ru_application_customers":"Заказчики заявлений","ru_application_contractors":"Исполнители заявлений","ru_doc_flow_importance_types":"Виды важностей","ru_expertise_reject_types":"Виды отрицательных заключений","ru_services":"Услуги","ru_contracts":"Контракты","ru_short_messages":"Сообщения чата"};options.options=[{"value":"users","descr":multy_lang_values[window.getApp().getLocale()+"_"+"users"],checked:(options.defaultValue&&options.defaultValue=="users")},{"value":"employees","descr":multy_lang_values[window.getApp().getLocale()+"_"+"employees"],checked:(options.defaultValue&&options.defaultValue=="employees")},{"value":"departments","descr":multy_lang_values[window.getApp().getLocale()+"_"+"departments"],checked:(options.defaultValue&&options.defaultValue=="departments")},{"value":"clients","descr":multy_lang_values[window.getApp().getLocale()+"_"+"clients"],checked:(options.defaultValue&&options.defaultValue=="clients")},{"value":"doc_flow_out","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_out"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_out")},{"value":"doc_flow_in","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_in"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_in")},{"value":"doc_flow_inside","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_inside"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_inside")},{"value":"doc_flow_approvements","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_approvements"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_approvements")},{"value":"doc_flow_confirmations","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_confirmations"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_confirmations")},{"value":"doc_flow_acqaintances","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_acqaintances"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_acqaintances")},{"value":"doc_flow_examinations","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_examinations"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_examinations")},{"value":"doc_flow_fulfilments","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_fulfilments"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_fulfilments")},{"value":"doc_flow_registrations","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_registrations"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_registrations")},{"value":"applications","descr":multy_lang_values[window.getApp().getLocale()+"_"+"applications"],checked:(options.defaultValue&&options.defaultValue=="applications")},{"value":"application_applicants","descr":multy_lang_values[window.getApp().getLocale()+"_"+"application_applicants"],checked:(options.defaultValue&&options.defaultValue=="application_applicants")},{"value":"application_customers","descr":multy_lang_values[window.getApp().getLocale()+"_"+"application_customers"],checked:(options.defaultValue&&options.defaultValue=="application_customers")},{"value":"application_contractors","descr":multy_lang_values[window.getApp().getLocale()+"_"+"application_contractors"],checked:(options.defaultValue&&options.defaultValue=="application_contractors")},{"value":"doc_flow_importance_types","descr":multy_lang_values[window.getApp().getLocale()+"_"+"doc_flow_importance_types"],checked:(options.defaultValue&&options.defaultValue=="doc_flow_importance_types")},{"value":"expertise_reject_types","descr":multy_lang_values[window.getApp().getLocale()+"_"+"expertise_reject_types"],checked:(options.defaultValue&&options.defaultValue=="expertise_reject_types")},{"value":"services","descr":multy_lang_values[window.getApp().getLocale()+"_"+"services"],checked:(options.defaultValue&&options.defaultValue=="services")},{"value":"contracts","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contracts"],checked:(options.defaultValue&&options.defaultValue=="contracts")},{"value":"short_messages","descr":multy_lang_values[window.getApp().getLocale()+"_"+"short_messages"],checked:(options.defaultValue&&options.defaultValue=="short_messages")}];Enum_data_types.superclass.constructor.call(this,id,options);}
extend(Enum_data_types,EditSelect); 
function EnumGridColumn_doc_flow_out_states(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["approving"]="На согласовании";options.multyLangValues["ru"]["not_approved"]="Не согласован";options.multyLangValues["ru"]["approved_with_notes"]="Согласован с замечаниями";options.multyLangValues["ru"]["approved"]="Согласован";options.multyLangValues["ru"]["confirming"]="На утверждении";options.multyLangValues["ru"]["not_confirmed"]="Не утвержден";options.multyLangValues["ru"]["registered"]="Отправлено";options.multyLangValues["ru"]["registering"]="На регистрации";EnumGridColumn_doc_flow_out_states.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_out_states,GridColumnEnum); 
function EnumGridColumn_data_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["users"]="Пользователи";options.multyLangValues["ru"]["employees"]="Сотрудники";options.multyLangValues["ru"]["departments"]="Отделы";options.multyLangValues["ru"]["clients"]="Контрагенты";options.multyLangValues["ru"]["doc_flow_out"]="Исходящие документы";options.multyLangValues["ru"]["doc_flow_in"]="Входящие документы";options.multyLangValues["ru"]["doc_flow_inside"]="Внутренние документы";options.multyLangValues["ru"]["doc_flow_approvements"]="Согласования";options.multyLangValues["ru"]["doc_flow_confirmations"]="Утвержения";options.multyLangValues["ru"]["doc_flow_acqaintances"]="Ознакомления";options.multyLangValues["ru"]["doc_flow_examinations"]="Рассмотрения";options.multyLangValues["ru"]["doc_flow_fulfilments"]="Исполнения";options.multyLangValues["ru"]["doc_flow_registrations"]="Регистрации";options.multyLangValues["ru"]["applications"]="Заявления";options.multyLangValues["ru"]["application_applicants"]="Заявители заявлений";options.multyLangValues["ru"]["application_customers"]="Заказчики заявлений";options.multyLangValues["ru"]["application_contractors"]="Исполнители заявлений";options.multyLangValues["ru"]["doc_flow_importance_types"]="Виды важностей";options.multyLangValues["ru"]["expertise_reject_types"]="Виды отрицательных заключений";options.multyLangValues["ru"]["services"]="Услуги";options.multyLangValues["ru"]["contracts"]="Контракты";options.multyLangValues["ru"]["short_messages"]="Сообщения чата";EnumGridColumn_data_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_data_types,GridColumnEnum); 
function ApplicationProcess_Model(options){var id='ApplicationProcess_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_examination_id=new FieldInt("doc_flow_examination_id",filed_options);ApplicationProcess_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationProcess_Model,ModelXML); 
function DocFlowApprovement_Model(options){var id='DocFlowApprovement_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_result=new FieldEnum("close_result",filed_options);filed_options.enumValues='approved,not_approved,approved_with_notes';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc=new FieldJSONB("subject_doc",filed_options);options.fields.subject_doc.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_list=new FieldJSONB("recipient_list",filed_options);options.fields.recipient_list.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);options.fields.doc_flow_importance_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);options.fields.end_date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);options.fields.employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.step_count=new FieldInt("step_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.current_step=new FieldInt("current_step",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_approvement_type=new FieldEnum("doc_flow_approvement_type",filed_options);filed_options.enumValues='to_all,to_one,mixed';options.fields.doc_flow_approvement_type.getValidator().setRequired(true);DocFlowApprovement_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovement_Model,ModelXML); 
function DocFlowIn_Model(options){var id='DocFlowIn_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_id=new FieldInt("from_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_signed_by=new FieldString("from_client_signed_by",filed_options);options.fields.from_client_signed_by.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_number=new FieldString("from_client_number",filed_options);options.fields.from_client_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_client_date=new FieldDate("from_client_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_addr_name=new FieldString("from_addr_name",filed_options);options.fields.from_addr_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_user_id=new FieldInt("from_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_application_id=new FieldInt("from_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.from_doc_flow_out_client_id=new FieldInt("from_doc_flow_out_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.from_client_app=new FieldBool("from_client_app",filed_options);DocFlowIn_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowIn_Model,ModelXML); 
function DocFlowIn_Controller(options){options=options||{};options.listModelClass=DocFlowInList_Model;options.objModelClass=DocFlowInDialog_Model;DocFlowIn_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();this.addComplete();this.add_remove_file();this.add_get_file();this.add_get_file_sig();this.add_get_next_num();}
extend(DocFlowIn_Controller,ControllerObjServer);DocFlowIn_Controller.prototype.addInsert=function(){DocFlowIn_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("from_client_id",options);pm.addField(field);var options={};var field=new FieldString("from_client_signed_by",options);pm.addField(field);var options={};var field=new FieldString("from_client_number",options);pm.addField(field);var options={};var field=new FieldDate("from_client_date",options);pm.addField(field);var options={};var field=new FieldString("from_addr_name",options);pm.addField(field);var options={};var field=new FieldInt("from_user_id",options);pm.addField(field);var options={};var field=new FieldInt("from_application_id",options);pm.addField(field);var options={};var field=new FieldInt("from_doc_flow_out_client_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_out_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldBool("from_client_app",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowIn_Controller.prototype.addUpdate=function(){DocFlowIn_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("from_client_id",options);pm.addField(field);var options={};var field=new FieldString("from_client_signed_by",options);pm.addField(field);var options={};var field=new FieldString("from_client_number",options);pm.addField(field);var options={};var field=new FieldDate("from_client_date",options);pm.addField(field);var options={};var field=new FieldString("from_addr_name",options);pm.addField(field);var options={};var field=new FieldInt("from_user_id",options);pm.addField(field);var options={};var field=new FieldInt("from_application_id",options);pm.addField(field);var options={};var field=new FieldInt("from_doc_flow_out_client_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_out_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldBool("from_client_app",options);pm.addField(field);}
DocFlowIn_Controller.prototype.addDelete=function(){DocFlowIn_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowIn_Controller.prototype.addGetList=function(){DocFlowIn_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldString("reg_number",f_opts));var f_opts={};pm.addField(new FieldString("from_addr_name",f_opts));var f_opts={};pm.addField(new FieldInt("from_application_id",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_types_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("recipient",f_opts));var f_opts={};pm.addField(new FieldString("sender",f_opts));var f_opts={};pm.addField(new FieldString("sender_construction_name",f_opts));var f_opts={};pm.addField(new FieldString("state",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("state_dt",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("state_end_dt",f_opts));var f_opts={};pm.addField(new FieldJSON("state_register_doc",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
DocFlowIn_Controller.prototype.addGetObject=function(){DocFlowIn_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowIn_Controller.prototype.addComplete=function(){DocFlowIn_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("reg_number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("reg_number");}
DocFlowIn_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowIn_Controller.prototype.add_get_next_num=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_next_num',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_flow_type_id",options));this.addPublicMethod(pm);} 
function DocFlowInProcess_Model(options){var id='DocFlowInProcess_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);options.fields.doc_flow_in_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='examining,examined,fulfilling,fulfilled,acquainting,acquainted,registered,registering';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);DocFlowInProcess_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInProcess_Model,ModelXML); 
function DocFlowAcqaintance_Model(options){var id='DocFlowAcqaintance_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc_type=new FieldEnum("subject_doc_type",filed_options);filed_options.enumValues='users,employees,departments,clients,doc_flow_out,doc_flow_in,doc_flow_inside,doc_flow_approvements,doc_flow_confirmations,doc_flow_acqaintances,doc_flow_examinations,doc_flow_fulfilments,doc_flow_registrations,applications,application_applicants,application_customers,application_contractors,doc_flow_importance_types,expertise_reject_types,services,contracts,short_messages';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc_id=new FieldInt("subject_doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients=new FieldJSONB("recipients",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);DocFlowAcqaintance_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowAcqaintance_Model,ModelXML); 
function DocFlowFilfilment_Model(options){var id='DocFlowFilfilment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc_type=new FieldEnum("subject_doc_type",filed_options);filed_options.enumValues='users,employees,departments,clients,doc_flow_out,doc_flow_in,doc_flow_inside,doc_flow_approvements,doc_flow_confirmations,doc_flow_acqaintances,doc_flow_examinations,doc_flow_fulfilments,doc_flow_registrations,applications,application_applicants,application_customers,application_contractors,doc_flow_importance_types,expertise_reject_types,services,contracts,short_messages';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc_id=new FieldInt("subject_doc_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients=new FieldJSONB("recipients",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.check_employee_id=new FieldInt("check_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.supervise_employee_id=new FieldInt("supervise_employee_id",filed_options);DocFlowFilfilment_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowFilfilment_Model,ModelXML); 
function DocFlowExamination_Model(options){var id='DocFlowExamination_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);options.fields.subject.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc=new FieldJSONB("subject_doc",filed_options);options.fields.subject_doc.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);options.fields.recipient.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);options.fields.description.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);options.fields.doc_flow_importance_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);options.fields.end_date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);options.fields.employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.resolution=new FieldText("resolution",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employee_id=new FieldInt("close_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_resolution_state=new FieldEnum("application_resolution_state",filed_options);filed_options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';DocFlowExamination_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowExamination_Model,ModelXML); 
function Enum_doc_flow_in_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_examining":"На рассмотрении","ru_examined":"Рассмотрен","ru_fulfilling":"На исполнении","ru_fulfilled":"Исполнен","ru_acquainting":"На ознакомлении","ru_acquainted":"Ознакомлен","ru_registered":"Зарегистрирован","ru_registering":"На регистрации"};options.options=[{"value":"examining","descr":multy_lang_values[window.getApp().getLocale()+"_"+"examining"],checked:(options.defaultValue&&options.defaultValue=="examining")},{"value":"examined","descr":multy_lang_values[window.getApp().getLocale()+"_"+"examined"],checked:(options.defaultValue&&options.defaultValue=="examined")},{"value":"fulfilling","descr":multy_lang_values[window.getApp().getLocale()+"_"+"fulfilling"],checked:(options.defaultValue&&options.defaultValue=="fulfilling")},{"value":"fulfilled","descr":multy_lang_values[window.getApp().getLocale()+"_"+"fulfilled"],checked:(options.defaultValue&&options.defaultValue=="fulfilled")},{"value":"acquainting","descr":multy_lang_values[window.getApp().getLocale()+"_"+"acquainting"],checked:(options.defaultValue&&options.defaultValue=="acquainting")},{"value":"acquainted","descr":multy_lang_values[window.getApp().getLocale()+"_"+"acquainted"],checked:(options.defaultValue&&options.defaultValue=="acquainted")},{"value":"registered","descr":multy_lang_values[window.getApp().getLocale()+"_"+"registered"],checked:(options.defaultValue&&options.defaultValue=="registered")},{"value":"registering","descr":multy_lang_values[window.getApp().getLocale()+"_"+"registering"],checked:(options.defaultValue&&options.defaultValue=="registering")}];Enum_doc_flow_in_states.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_in_states,EditSelect); 
function EnumGridColumn_doc_flow_in_states(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["examining"]="На рассмотрении";options.multyLangValues["ru"]["examined"]="Рассмотрен";options.multyLangValues["ru"]["fulfilling"]="На исполнении";options.multyLangValues["ru"]["fulfilled"]="Исполнен";options.multyLangValues["ru"]["acquainting"]="На ознакомлении";options.multyLangValues["ru"]["acquainted"]="Ознакомлен";options.multyLangValues["ru"]["registered"]="Зарегистрирован";options.multyLangValues["ru"]["registering"]="На регистрации";EnumGridColumn_doc_flow_in_states.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_in_states,GridColumnEnum); 
function DocFlowTypeList_Model(options){var id='DocFlowTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_interval=new FieldInterval("def_interval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_type_id=new FieldString("doc_flow_types_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num_prefix=new FieldString("num_prefix",filed_options);options.fields.num_prefix.getValidator().setMaxLength('10');DocFlowTypeList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowTypeList_Model,ModelXML); 
function DocFlowTypeDialog_Model(options){var id='DocFlowTypeDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.num_prefix=new FieldString("num_prefix",filed_options);options.fields.num_prefix.getValidator().setMaxLength('10');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_type_id=new FieldString("doc_flow_types_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_intervals=new FieldJSONB("def_intervals",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.def_interval=new FieldInterval("def_interval",filed_options);DocFlowTypeDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowTypeDialog_Model,ModelXML); 
function DocFlowImportanceType_Controller(options){options=options||{};options.listModelClass=DocFlowImportanceTypeList_Model;options.objModelClass=DocFlowImportanceTypeDialog_Model;DocFlowImportanceType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(DocFlowImportanceType_Controller,ControllerObjServer);DocFlowImportanceType_Controller.prototype.addInsert=function(){DocFlowImportanceType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInterval("approve_interval",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowImportanceType_Controller.prototype.addUpdate=function(){DocFlowImportanceType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldInterval("approve_interval",options);pm.addField(field);}
DocFlowImportanceType_Controller.prototype.addDelete=function(){DocFlowImportanceType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowImportanceType_Controller.prototype.addGetObject=function(){DocFlowImportanceType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowImportanceType_Controller.prototype.addGetList=function(){DocFlowImportanceType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldInterval("approve_interval",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function DocFlowImportanceTypeList_Model(options){var id='DocFlowImportanceTypeList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approve_interval=new FieldInterval("approve_interval",filed_options);DocFlowImportanceTypeList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowImportanceTypeList_Model,ModelXML); 
function DocFlowImportanceTypeDialog_Model(options){var id='DocFlowImportanceTypeDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approve_interval=new FieldInterval("approve_interval",filed_options);DocFlowImportanceTypeDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowImportanceTypeDialog_Model,ModelXML); 
function DocFlowOutDialog_Model(options){var id='DocFlowOutDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employee_id=new FieldInt("signed_by_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_names=new FieldJSONB("to_addr_names",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_user_id=new FieldInt("to_user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_application_id=new FieldInt("to_application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contract_id=new FieldInt("to_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_client_id=new FieldInt("to_client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_id=new FieldInt("doc_flow_in_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.new_contract_number=new FieldText("new_contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.signed_by_employees_ref=new FieldJSON("signed_by_employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_addr_name=new FieldString("to_addr_name",filed_options);options.fields.to_addr_name.getValidator().setMaxLength('250');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_applications_ref=new FieldJSON("to_applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_contracts_ref=new FieldJSON("to_contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_users_ref=new FieldJSON("to_users_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_types_ref=new FieldJSON("doc_flow_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_ref=new FieldJSON("doc_flow_in_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_processes_chain=new FieldJSON("doc_flow_out_processes_chain",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result=new FieldString("expertise_result",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_types_ref=new FieldJSON("expertise_reject_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_type_id=new FieldInt("expertise_reject_type_id",filed_options);DocFlowOutDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutDialog_Model,ModelXML); 
function FundSource_Model(options){var id='FundSource_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');FundSource_Model.superclass.constructor.call(this,id,options);}
extend(FundSource_Model,ModelXML); 
function ConstructionType_Model(options){var id='ConstructionType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('200');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.technical_features=new FieldJSONB("technical_features",filed_options);ConstructionType_Model.superclass.constructor.call(this,id,options);}
extend(ConstructionType_Model,ModelXML); 
function ConstructionType_Controller(options){options=options||{};options.listModelClass=ConstructionType_Model;options.objModelClass=ConstructionType_Model;ConstructionType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(ConstructionType_Controller,ControllerObjServer);ConstructionType_Controller.prototype.addInsert=function(){ConstructionType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldJSONB("technical_features",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ConstructionType_Controller.prototype.addUpdate=function(){ConstructionType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldJSONB("technical_features",options);pm.addField(field);}
ConstructionType_Controller.prototype.addDelete=function(){ConstructionType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ConstructionType_Controller.prototype.addGetObject=function(){ConstructionType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ConstructionType_Controller.prototype.addGetList=function(){ConstructionType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldJSONB("technical_features",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function FundSource_Controller(options){options=options||{};options.listModelClass=FundSource_Model;options.objModelClass=FundSource_Model;FundSource_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(FundSource_Controller,ControllerObjServer);FundSource_Controller.prototype.addInsert=function(){FundSource_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
FundSource_Controller.prototype.addUpdate=function(){FundSource_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
FundSource_Controller.prototype.addDelete=function(){FundSource_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
FundSource_Controller.prototype.addGetObject=function(){FundSource_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
FundSource_Controller.prototype.addGetList=function(){FundSource_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function Enum_document_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_pd":"ПД","ru_eng_survey":"РИИ","ru_cost_eval_validity":"Проверка достоверности","ru_modification":"Модификация","ru_audit":"Аудит","ru_documents":"Документы"};options.options=[{"value":"pd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"pd"],checked:(options.defaultValue&&options.defaultValue=="pd")},{"value":"eng_survey","descr":multy_lang_values[window.getApp().getLocale()+"_"+"eng_survey"],checked:(options.defaultValue&&options.defaultValue=="eng_survey")},{"value":"cost_eval_validity","descr":multy_lang_values[window.getApp().getLocale()+"_"+"cost_eval_validity"],checked:(options.defaultValue&&options.defaultValue=="cost_eval_validity")},{"value":"modification","descr":multy_lang_values[window.getApp().getLocale()+"_"+"modification"],checked:(options.defaultValue&&options.defaultValue=="modification")},{"value":"audit","descr":multy_lang_values[window.getApp().getLocale()+"_"+"audit"],checked:(options.defaultValue&&options.defaultValue=="audit")},{"value":"documents","descr":multy_lang_values[window.getApp().getLocale()+"_"+"documents"],checked:(options.defaultValue&&options.defaultValue=="documents")}];Enum_document_types.superclass.constructor.call(this,id,options);}
extend(Enum_document_types,EditSelect); 
function EnumGridColumn_document_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["pd"]="ПД";options.multyLangValues["ru"]["eng_survey"]="РИИ";options.multyLangValues["ru"]["cost_eval_validity"]="Проверка достоверности";options.multyLangValues["ru"]["modification"]="Модификация";options.multyLangValues["ru"]["audit"]="Аудит";options.multyLangValues["ru"]["documents"]="Документы";EnumGridColumn_document_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_document_types,GridColumnEnum); 
function DocumentTemplate_Model(options){var id='DocumentTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.fields.document_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);options.fields.construction_type_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.alias='Дата создания';filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);options.fields.create_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое шаблона';filed_options.autoInc=false;options.fields.content=new FieldJSON("content",filed_options);options.fields.content.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Содержимое шаблона';filed_options.autoInc=false;options.fields.content_for_experts=new FieldJSON("content_for_experts",filed_options);options.fields.content_for_experts.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DocumentTemplate_Model.superclass.constructor.call(this,id,options);}
extend(DocumentTemplate_Model,ModelXML); 
function DocumentTemplateAllList_Model(options){var id='DocumentTemplateAllList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.documents=new FieldJSON("documents",filed_options);DocumentTemplateAllList_Model.superclass.constructor.call(this,id,options);}
extend(DocumentTemplateAllList_Model,ModelXML); 
function ReportTemplate_Controller(options){options=options||{};options.listModelClass=ReportTemplateList_Model;options.objModelClass=ReportTemplateDialog_Model;ReportTemplate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();}
extend(ReportTemplate_Controller,ControllerObjServer);ReportTemplate_Controller.prototype.addInsert=function(){ReportTemplate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("db_entity",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Поля шаблона";options.required=true;var field=new FieldJSON("fields",options);pm.addField(field);var options={};options.alias="Параметры выборки данных";var field=new FieldJSON("in_params",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ReportTemplate_Controller.prototype.addUpdate=function(){ReportTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldString("db_entity",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.alias="Поля шаблона";var field=new FieldJSON("fields",options);pm.addField(field);var options={};options.alias="Параметры выборки данных";var field=new FieldJSON("in_params",options);pm.addField(field);}
ReportTemplate_Controller.prototype.addDelete=function(){ReportTemplate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ReportTemplate_Controller.prototype.addGetObject=function(){ReportTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ReportTemplate_Controller.prototype.addGetList=function(){ReportTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");}
ReportTemplate_Controller.prototype.addComplete=function(){ReportTemplate_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ReportTemplate_Model(options){var id='ReportTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.db_entity=new FieldString("db_entity",filed_options);options.fields.db_entity.getValidator().setRequired(true);options.fields.db_entity.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поля шаблона';filed_options.autoInc=false;options.fields.fields=new FieldJSON("fields",filed_options);options.fields.fields.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Параметры выборки данных';filed_options.autoInc=false;options.fields.in_params=new FieldJSON("in_params",filed_options);ReportTemplate_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplate_Model,ModelXML); 
function ReportTemplateList_Model(options){var id='ReportTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');ReportTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateList_Model,ModelXML); 
function ReportTemplateField_Controller(options){options=options||{};options.listModelClass=ReportTemplateField_Model;options.objModelClass=ReportTemplateField_Model;ReportTemplateField_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ReportTemplateField_Controller,ControllerObjClient);ReportTemplateField_Controller.prototype.addInsert=function(){ReportTemplateField_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);}
ReportTemplateField_Controller.prototype.addUpdate=function(){ReportTemplateField_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);field=new FieldString("old_id",{});pm.addField(field);var options={};var field=new FieldString("descr",options);pm.addField(field);}
ReportTemplateField_Controller.prototype.addDelete=function(){ReportTemplateField_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("id",options));}
ReportTemplateField_Controller.prototype.addGetList=function(){ReportTemplateField_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};pm.addField(new FieldString("descr",f_opts));}
ReportTemplateField_Controller.prototype.addGetObject=function(){ReportTemplateField_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));pm.addField(new FieldString("mode"));} 
function ReportTemplateField_Model(options){var id='ReportTemplateField_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);options.fields.id.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.descr=new FieldString("descr",filed_options);ReportTemplateField_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateField_Model,ModelJSON); 
function ReportTemplateDialog_Model(options){var id='ReportTemplateDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.db_entity=new FieldString("db_entity",filed_options);options.fields.db_entity.getValidator().setRequired(true);options.fields.db_entity.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поля шаблона';filed_options.autoInc=false;options.fields.fields=new FieldJSON("fields",filed_options);options.fields.fields.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Параметры выборки данных';filed_options.autoInc=false;options.fields.in_params=new FieldJSON("in_params",filed_options);ReportTemplateDialog_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateDialog_Model,ModelXML); 
function ReportTemplateInParam_Controller(options){options=options||{};options.listModelClass=ReportTemplateInParam_Model;options.objModelClass=ReportTemplateInParam_Model;ReportTemplateInParam_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ReportTemplateInParam_Controller,ControllerObjClient);ReportTemplateInParam_Controller.prototype.addInsert=function(){ReportTemplateInParam_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);var options={};var field=new FieldBool("cond",options);pm.addField(field);var options={};var field=new FieldString("editCtrlClass",options);pm.addField(field);var options={};var field=new FieldString("editCtrlOptions",options);pm.addField(field);}
ReportTemplateInParam_Controller.prototype.addUpdate=function(){ReportTemplateInParam_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("id",options);pm.addField(field);field=new FieldString("old_id",{});pm.addField(field);var options={};var field=new FieldBool("cond",options);pm.addField(field);var options={};var field=new FieldString("editCtrlClass",options);pm.addField(field);var options={};var field=new FieldString("editCtrlOptions",options);pm.addField(field);}
ReportTemplateInParam_Controller.prototype.addDelete=function(){ReportTemplateInParam_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("id",options));}
ReportTemplateInParam_Controller.prototype.addGetList=function(){ReportTemplateInParam_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("id",f_opts));var f_opts={};pm.addField(new FieldBool("cond",f_opts));var f_opts={};pm.addField(new FieldString("editCtrlClass",f_opts));var f_opts={};pm.addField(new FieldString("editCtrlOptions",f_opts));}
ReportTemplateInParam_Controller.prototype.addGetObject=function(){ReportTemplateInParam_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("id",f_opts));pm.addField(new FieldString("mode"));} 
function ReportTemplateInParam_Model(options){var id='ReportTemplateInParam_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldString("id",filed_options);options.fields.id.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cond=new FieldBool("cond",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.editCtrlClass=new FieldString("editCtrlClass",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.editCtrlOptions=new FieldString("editCtrlOptions",filed_options);ReportTemplateInParam_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateInParam_Model,ModelJSON); 
function DocFlowOutClientList_Model(options){var id='DocFlowOutClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_client_type=new FieldEnum("doc_flow_out_client_type",filed_options);filed_options.enumValues='app,contr_resp,contr_return,contr_other';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number_in=new FieldString("reg_number_in",filed_options);options.fields.reg_number_in.getValidator().setMaxLength('15');DocFlowOutClientList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutClientList_Model,ModelXML); 
function DocFlowInClientList_Model(options){var id='DocFlowInClientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed_dt=new FieldDateTime("viewed_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number_out=new FieldString("reg_number_out",filed_options);options.fields.reg_number_out.getValidator().setMaxLength('30');DocFlowInClientList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInClientList_Model,ModelXML); 
function DocFlowExaminationList_Model(options){var id='DocFlowExaminationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employees_ref=new FieldJSON("close_employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employee_id=new FieldInt("close_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_resolution_state=new FieldString("application_resolution_state",filed_options);DocFlowExaminationList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowExaminationList_Model,ModelXML); 
function DocFlowExamination_Controller(options){options=options||{};options.listModelClass=DocFlowExaminationList_Model;options.objModelClass=DocFlowExaminationDialog_Model;DocFlowExamination_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_resolve();this.add_unresolve();this.add_return_app_to_correction();}
extend(DocFlowExamination_Controller,ControllerObjServer);DocFlowExamination_Controller.prototype.addInsert=function(){DocFlowExamination_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldText("subject",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("subject_doc",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};options.required=true;var field=new FieldText("description",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldText("resolution",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);var options={};var field=new FieldInt("close_employee_id",options);pm.addField(field);var options={};options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';var field=new FieldEnum("application_resolution_state",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowExamination_Controller.prototype.addUpdate=function(){DocFlowExamination_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldJSONB("subject_doc",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient",options);pm.addField(field);var options={};var field=new FieldText("description",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldText("resolution",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);var options={};var field=new FieldInt("close_employee_id",options);pm.addField(field);var options={};options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';var field=new FieldEnum("application_resolution_state",options);pm.addField(field);}
DocFlowExamination_Controller.prototype.addDelete=function(){DocFlowExamination_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowExamination_Controller.prototype.addGetObject=function(){DocFlowExamination_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowExamination_Controller.prototype.addGetList=function(){DocFlowExamination_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldJSON("subject_docs_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_importance_types_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("end_date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("recipients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("close_date_time",f_opts));var f_opts={};pm.addField(new FieldBool("closed",f_opts));var f_opts={};pm.addField(new FieldJSON("close_employees_ref",f_opts));var f_opts={};pm.addField(new FieldInt("close_employee_id",f_opts));var f_opts={};pm.addField(new FieldString("application_resolution_state",f_opts));}
DocFlowExamination_Controller.prototype.add_resolve=function(){var opts={"controller":this};var pm=new PublicMethodServer('resolve',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldText("resolution",options));var options={};pm.addField(new FieldDateTimeTZ("close_date_time",options));var options={};pm.addField(new FieldInt("close_employee_id",options));var options={};pm.addField(new FieldEnum("application_resolution_state",options));this.addPublicMethod(pm);}
DocFlowExamination_Controller.prototype.add_unresolve=function(){var opts={"controller":this};var pm=new PublicMethodServer('unresolve',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
DocFlowExamination_Controller.prototype.add_return_app_to_correction=function(){var opts={"controller":this};var pm=new PublicMethodServer('return_app_to_correction',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);} 
function BuildType_Controller(options){options=options||{};options.listModelClass=BuildType_Model;options.objModelClass=BuildType_Model;BuildType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(BuildType_Controller,ControllerObjServer);BuildType_Controller.prototype.addInsert=function(){BuildType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
BuildType_Controller.prototype.addUpdate=function(){BuildType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
BuildType_Controller.prototype.addDelete=function(){BuildType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
BuildType_Controller.prototype.addGetObject=function(){BuildType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
BuildType_Controller.prototype.addGetList=function(){BuildType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function BuildType_Model(options){var id='BuildType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');BuildType_Model.superclass.constructor.call(this,id,options);}
extend(BuildType_Model,ModelXML); 
function DocFlowOutClient_Model(options){var id='DocFlowOutClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_client_type=new FieldEnum("doc_flow_out_client_type",filed_options);filed_options.enumValues='app,contr_resp,contr_return,contr_other';DocFlowOutClient_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutClient_Model,ModelXML); 
function DocFlowInClient_Model(options){var id='DocFlowInClient_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);DocFlowInClient_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInClient_Model,ModelXML); 
function DocFlowOutClient_Controller(options){options=options||{};options.listModelClass=DocFlowOutClientList_Model;options.objModelClass=DocFlowOutClientDialog_Model;DocFlowOutClient_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_get_application_dialog();this.add_remove_file();this.add_remove_contract_file();this.add_download_contract_file();this.add_download_contract_file_sig();}
extend(DocFlowOutClient_Controller,ControllerObjServer);DocFlowOutClient_Controller.prototype.addInsert=function(){DocFlowOutClient_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("application_id",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldBool("sent",options);pm.addField(field);var options={};options.enumValues='app,contr_resp,contr_return,contr_other';var field=new FieldEnum("doc_flow_out_client_type",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldText("contract_files",options));}
DocFlowOutClient_Controller.prototype.addUpdate=function(){DocFlowOutClient_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldInt("application_id",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldBool("sent",options);pm.addField(field);var options={};options.enumValues='app,contr_resp,contr_return,contr_other';var field=new FieldEnum("doc_flow_out_client_type",options);pm.addField(field);var options={};pm.addField(new FieldText("contract_files",options));}
DocFlowOutClient_Controller.prototype.addDelete=function(){DocFlowOutClient_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowOutClient_Controller.prototype.addGetObject=function(){DocFlowOutClient_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowOutClient_Controller.prototype.addGetList=function(){DocFlowOutClient_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldString("reg_number",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("application_id",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));var f_opts={};pm.addField(new FieldBool("sent",f_opts));var f_opts={};pm.addField(new FieldEnum("doc_flow_out_client_type",f_opts));}
DocFlowOutClient_Controller.prototype.add_get_application_dialog=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_application_dialog',opts);var options={};options.required=true;pm.addField(new FieldInt("application_id",options));var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
DocFlowOutClient_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;pm.addField(new FieldInt("application_id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);}
DocFlowOutClient_Controller.prototype.add_remove_contract_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_contract_file',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);}
DocFlowOutClient_Controller.prototype.add_download_contract_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_contract_file',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);}
DocFlowOutClient_Controller.prototype.add_download_contract_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_contract_file_sig',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);} 
function DocFlowOutClientDialog_Model(options){var id='DocFlowOutClientDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.sent=new FieldBool("sent",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_client_type=new FieldEnum("doc_flow_out_client_type",filed_options);filed_options.enumValues='app,contr_resp,contr_return,contr_other';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number_in=new FieldString("reg_number_in",filed_options);options.fields.reg_number_in.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_file=new FieldJSON("contract_file",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_files=new FieldJSON("contract_files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.attachment_files=new FieldJSON("attachment_files",filed_options);DocFlowOutClientDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutClientDialog_Model,ModelXML); 
function DocFlowInClient_Controller(options){options=options||{};options.listModelClass=DocFlowInClientList_Model;options.objModelClass=DocFlowInClientDialog_Model;DocFlowInClient_Controller.superclass.constructor.call(this,options);this.addUpdate();this.addGetObject();this.addGetList();this.add_get_file();this.add_get_file_sig();this.add_set_viewed();}
extend(DocFlowInClient_Controller,ControllerObjServer);DocFlowInClient_Controller.prototype.addUpdate=function(){DocFlowInClient_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldString("reg_number",options);pm.addField(field);var options={};var field=new FieldInt("application_id",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldJSONB("files",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_type_id",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_out_id",options);pm.addField(field);var options={};pm.addField(new FieldText("reg_number_out",options));}
DocFlowInClient_Controller.prototype.addGetObject=function(){DocFlowInClient_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowInClient_Controller.prototype.addGetList=function(){DocFlowInClient_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldString("reg_number",f_opts));var f_opts={};pm.addField(new FieldInt("application_id",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldJSONB("files",f_opts));var f_opts={};pm.addField(new FieldBool("viewed",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_out_id",f_opts));}
DocFlowInClient_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowInClient_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowInClient_Controller.prototype.add_set_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_viewed',opts);var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);} 
function DocFlowInClientDialog_Model(options){var id='DocFlowInClientDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setMaxLength('30');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_type_id=new FieldInt("doc_flow_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_id=new FieldInt("doc_flow_out_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number_out=new FieldString("reg_number_out",filed_options);options.fields.reg_number_out.getValidator().setMaxLength('30');DocFlowInClientDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInClientDialog_Model,ModelXML); 
function DocFlowOutClientDocumentFile_Model(options){var id='DocFlowOutClientDocumentFile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.file_id=new FieldString("file_id",filed_options);options.fields.file_id.getValidator().setRequired(true);options.fields.file_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_client_id=new FieldInt("doc_flow_out_client_id",filed_options);options.fields.doc_flow_out_client_id.getValidator().setRequired(true);DocFlowOutClientDocumentFile_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutClientDocumentFile_Model,ModelXML); 
function DocFlowExaminationDialog_Model(options){var id='DocFlowExaminationDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.resolution=new FieldText("resolution",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_resolution_state=new FieldString("application_resolution_state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_based=new FieldBool("application_based",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employees_ref=new FieldJSON("close_employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_in_processes_chain=new FieldJSON("doc_flow_in_processes_chain",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_ref=new FieldJSON("doc_flow_out_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);DocFlowExaminationDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowExaminationDialog_Model,ModelXML); 
function DocFlowTask_Model(options){var id='DocFlowTask_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_doc=new FieldJSONB("close_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employee_id=new FieldInt("close_employee_id",filed_options);DocFlowTask_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowTask_Model,ModelXML); 
function DocFlowTask_Controller(options){options=options||{};options.listModelClass=DocFlowTaskList_Model;DocFlowTask_Controller.superclass.constructor.call(this,options);this.addGetList();this.add_get_short_list();this.add_get_unviewed_task_list();this.add_set_task_viewed();}
extend(DocFlowTask_Controller,ControllerObjServer);DocFlowTask_Controller.prototype.addGetList=function(){DocFlowTask_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("register_docs_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("end_date_time",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_importance_types_ref",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_importance_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("recipients_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("close_date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("close_docs_ref",f_opts));var f_opts={};pm.addField(new FieldText("description",f_opts));var f_opts={};pm.addField(new FieldBool("closed",f_opts));var f_opts={};pm.addField(new FieldInt("close_employee_id",f_opts));var f_opts={};pm.addField(new FieldJSON("close_employees_ref",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
DocFlowTask_Controller.prototype.add_get_short_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_short_list',opts);this.addPublicMethod(pm);}
DocFlowTask_Controller.prototype.add_get_unviewed_task_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_unviewed_task_list',opts);this.addPublicMethod(pm);}
DocFlowTask_Controller.prototype.add_set_task_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_task_viewed',opts);var options={};options.required=true;pm.addField(new FieldInt("task_view_id",options));this.addPublicMethod(pm);} 
function DocFlowTaskList_Model(options){var id='DocFlowTaskList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_doc=new FieldJSONB("close_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employee_id=new FieldInt("close_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_docs_ref=new FieldJSON("register_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_docs_ref=new FieldJSON("close_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employees_ref=new FieldJSON("close_employees_ref",filed_options);DocFlowTaskList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowTaskList_Model,ModelXML); 
function Enum_doc_flow_type_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_in":"Входящие","ru_out":"Исходящие","ru_inside":"Внутренние"};options.options=[{"value":"in","descr":multy_lang_values[window.getApp().getLocale()+"_"+"in"],checked:(options.defaultValue&&options.defaultValue=="in")},{"value":"out","descr":multy_lang_values[window.getApp().getLocale()+"_"+"out"],checked:(options.defaultValue&&options.defaultValue=="out")},{"value":"inside","descr":multy_lang_values[window.getApp().getLocale()+"_"+"inside"],checked:(options.defaultValue&&options.defaultValue=="inside")}];Enum_doc_flow_type_types.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_type_types,EditSelect); 
function EnumGridColumn_doc_flow_type_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["in"]="Входящие";options.multyLangValues["ru"]["out"]="Исходящие";options.multyLangValues["ru"]["inside"]="Внутренние";EnumGridColumn_doc_flow_type_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_type_types,GridColumnEnum); 
function ContactName_Controller(options){options=options||{};options.listModelClass=ContactName_Model;options.objModelClass=ContactName_Model;ContactName_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ContactName_Controller,ControllerObjClient);ContactName_Controller.prototype.addInsert=function(){ContactName_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ContactName_Controller.prototype.addUpdate=function(){ContactName_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
ContactName_Controller.prototype.addDelete=function(){ContactName_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ContactName_Controller.prototype.addGetList=function(){ContactName_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));}
ContactName_Controller.prototype.addGetObject=function(){ContactName_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function ContactName_Model(options){var id='ContactName_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);ContactName_Model.superclass.constructor.call(this,id,options);}
extend(ContactName_Model,ModelJSON); 
function DocFlowRegistration_Model(options){var id='DocFlowRegistration_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_doc=new FieldJSONB("subject_doc",filed_options);options.fields.subject_doc.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);options.fields.employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DocFlowRegistration_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowRegistration_Model,ModelXML); 
function DocFlowRegistrationList_Model(options){var id='DocFlowRegistrationList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);DocFlowRegistrationList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowRegistrationList_Model,ModelXML); 
function DocFlowRegistrationDialog_Model(options){var id='DocFlowRegistrationDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);DocFlowRegistrationDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowRegistrationDialog_Model,ModelXML); 
function DocFlowRegistration_Controller(options){options=options||{};options.listModelClass=DocFlowRegistrationList_Model;options.objModelClass=DocFlowRegistrationDialog_Model;DocFlowRegistration_Controller.superclass.constructor.call(this,options);this.addInsert();this.addDelete();this.addGetObject();this.addGetList();this.add_register();}
extend(DocFlowRegistration_Controller,ControllerObjServer);DocFlowRegistration_Controller.prototype.addInsert=function(){DocFlowRegistration_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("subject_doc",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowRegistration_Controller.prototype.addDelete=function(){DocFlowRegistration_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowRegistration_Controller.prototype.addGetObject=function(){DocFlowRegistration_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowRegistration_Controller.prototype.addGetList=function(){DocFlowRegistration_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("subject_docs_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));}
DocFlowRegistration_Controller.prototype.add_register=function(){var opts={"controller":this};var pm=new PublicMethodServer('register',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldText("comment_text",options));var options={};pm.addField(new FieldDateTimeTZ("close_date_time",options));this.addPublicMethod(pm);} 
function Reminder_Controller(options){options=options||{};options.listModelClass=Reminder_Model;options.objModelClass=Reminder_Model;Reminder_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_get_unviewed_list();this.add_set_viewed();}
extend(Reminder_Controller,ControllerObjServer);Reminder_Controller.prototype.addInsert=function(){Reminder_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("recipient_employee_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("viewed_dt",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldJSONB("register_docs_ref",options);pm.addField(field);var options={};var field=new FieldJSONB("docs_ref",options);pm.addField(field);var options={};var field=new FieldJSONB("files",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Reminder_Controller.prototype.addUpdate=function(){Reminder_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("recipient_employee_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldBool("viewed",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("viewed_dt",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);var options={};var field=new FieldJSONB("register_docs_ref",options);pm.addField(field);var options={};var field=new FieldJSONB("docs_ref",options);pm.addField(field);var options={};var field=new FieldJSONB("files",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);}
Reminder_Controller.prototype.addDelete=function(){Reminder_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Reminder_Controller.prototype.addGetObject=function(){Reminder_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Reminder_Controller.prototype.addGetList=function(){Reminder_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("recipient_employee_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldBool("viewed",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("viewed_dt",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));var f_opts={};pm.addField(new FieldJSONB("register_docs_ref",f_opts));var f_opts={};pm.addField(new FieldJSONB("docs_ref",f_opts));var f_opts={};pm.addField(new FieldJSONB("files",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_importance_type_id",f_opts));}
Reminder_Controller.prototype.add_get_unviewed_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_unviewed_list',opts);this.addPublicMethod(pm);}
Reminder_Controller.prototype.add_set_viewed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_viewed',opts);var options={};options.required=true;pm.addField(new FieldText("id_list",options));this.addPublicMethod(pm);} 
function Reminder_Model(options){var id='Reminder_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_employee_id=new FieldInt("recipient_employee_id",filed_options);options.fields.recipient_employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed_dt=new FieldDateTimeTZ("viewed_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_docs_ref=new FieldJSONB("register_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.docs_ref=new FieldJSONB("docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);Reminder_Model.superclass.constructor.call(this,id,options);}
extend(Reminder_Model,ModelXML); 
function ReminderUnviewedList_Model(options){var id='ReminderUnviewedList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.docs_ref=new FieldJSON("docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.short_message_sender=new FieldString("short_message_sender",filed_options);ReminderUnviewedList_Model.superclass.constructor.call(this,id,options);}
extend(ReminderUnviewedList_Model,ModelXML); 
function ShortMessage_Model(options){var id='ShortMessage_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_recipient_id=new FieldInt("to_recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reminder_id=new FieldInt("reminder_id",filed_options);options.fields.reminder_id.getValidator().setRequired(true);ShortMessage_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessage_Model,ModelXML); 
function DocFlowTaskShortList_Model(options){var id='DocFlowTaskShortList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);options.fields.id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient=new FieldJSONB("recipient",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_doc=new FieldJSONB("close_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_employee_id=new FieldInt("close_employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_docs_ref=new FieldJSON("register_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.passed_time=new FieldString("passed_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.docs_ref=new FieldJSON("docs_ref",filed_options);DocFlowTaskShortList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowTaskShortList_Model,ModelXML); 
function MainMenuConstructorDialog_Model(options){var id='MainMenuConstructorDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_id=new FieldString("role_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.role_descr=new FieldString("role_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldString("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_descr=new FieldString("user_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);MainMenuConstructorDialog_Model.superclass.constructor.call(this,id,options);}
extend(MainMenuConstructorDialog_Model,ModelXML); 
function Contract_Model(options){var id='Contract_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldText("reg_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_number=new FieldText("contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_date=new FieldDate("contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_return_date=new FieldDate("contract_return_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_number=new FieldText("expertise_result_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_budget=new FieldFloat("expertise_cost_budget",filed_options);options.fields.expertise_cost_budget.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_self_fund=new FieldFloat("expertise_cost_self_fund",filed_options);options.fields.expertise_cost_self_fund.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cost_eval_validity_pd_order=new FieldEnum("cost_eval_validity_pd_order",filed_options);filed_options.enumValues='no_pd,simult_with_pd,after_pd';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_start_date=new FieldDate("work_start_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_end_date=new FieldDate("work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_end_date=new FieldDate("expert_work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_day_count=new FieldInt("expert_work_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_day_count=new FieldInt("expertise_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_number=new FieldText("akt_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.akt_date=new FieldDate("akt_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_total=new FieldFloat("akt_total",filed_options);options.fields.akt_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_ext_id=new FieldString("akt_ext_id",filed_options);options.fields.akt_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kadastr_number=new FieldText("kadastr_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.grad_plan_number=new FieldText("grad_plan_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.area_document=new FieldText("area_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result=new FieldEnum("expertise_result",filed_options);filed_options.enumValues='positive,negative';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_date=new FieldDate("expertise_result_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_type_id=new FieldInt("expertise_reject_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_department_id=new FieldInt("main_department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_expert_id=new FieldInt("main_expert_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_contract_id=new FieldInt("primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_contract_id=new FieldInt("modif_primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_ext_id=new FieldString("contract_ext_id",filed_options);options.fields.contract_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payment=new FieldFloat("payment",filed_options);options.fields.payment.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_ext_id=new FieldString("invoice_ext_id",filed_options);options.fields.invoice_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_number=new FieldText("invoice_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_date=new FieldDate("invoice_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.linked_contracts=new FieldJSON("linked_contracts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_type=new FieldEnum("date_type",filed_options);filed_options.enumValues='calendar,bank';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.argument_document=new FieldText("argument_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_document=new FieldText("order_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost=new FieldFloat("in_estim_cost",filed_options);options.fields.in_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost_recommend=new FieldFloat("in_estim_cost_recommend",filed_options);options.fields.in_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost=new FieldFloat("cur_estim_cost",filed_options);options.fields.cur_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost_recommend=new FieldFloat("cur_estim_cost_recommend",filed_options);options.fields.cur_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.result_sign_expert_list=new FieldJSONB("result_sign_expert_list",filed_options);Contract_Model.superclass.constructor.call(this,id,options);}
extend(Contract_Model,ModelXML); 
function Contract_Controller(options){options=options||{};options.listModelClass=ContractList_Model;options.objModelClass=ContractDialog_Model;Contract_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();this.add_get_pd_list();this.add_get_eng_survey_list();this.add_get_cost_eval_validity_list();this.add_get_modification_list();this.add_get_audit_list();this.add_print_order();this.add_get_order_list();this.add_make_order();this.add_print_akt();this.add_print_invoice();this.add_make_akt();this.add_get_ext_data();this.add_get_work_end_date();}
extend(Contract_Controller,ControllerObjServer);Contract_Controller.prototype.addInsert=function(){Contract_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("application_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldText("reg_number",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,pd_eng_survey';var field=new FieldEnum("expertise_type",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var field=new FieldEnum("document_type",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("contract_number",options);pm.addField(field);var options={};var field=new FieldDate("contract_date",options);pm.addField(field);var options={};var field=new FieldDate("contract_return_date",options);pm.addField(field);var options={};var field=new FieldText("expertise_result_number",options);pm.addField(field);var options={};var field=new FieldFloat("expertise_cost_budget",options);pm.addField(field);var options={};var field=new FieldFloat("expertise_cost_self_fund",options);pm.addField(field);var options={};options.enumValues='no_pd,simult_with_pd,after_pd';var field=new FieldEnum("cost_eval_validity_pd_order",options);pm.addField(field);var options={};var field=new FieldDate("work_start_date",options);pm.addField(field);var options={};var field=new FieldDate("work_end_date",options);pm.addField(field);var options={};var field=new FieldDate("expert_work_end_date",options);pm.addField(field);var options={};var field=new FieldInt("expert_work_day_count",options);pm.addField(field);var options={};var field=new FieldInt("expertise_day_count",options);pm.addField(field);var options={};var field=new FieldText("akt_number",options);pm.addField(field);var options={};var field=new FieldDate("akt_date",options);pm.addField(field);var options={};var field=new FieldFloat("akt_total",options);pm.addField(field);var options={};var field=new FieldString("akt_ext_id",options);pm.addField(field);var options={};var field=new FieldText("kadastr_number",options);pm.addField(field);var options={};var field=new FieldText("grad_plan_number",options);pm.addField(field);var options={};var field=new FieldText("area_document",options);pm.addField(field);var options={};options.enumValues='positive,negative';var field=new FieldEnum("expertise_result",options);pm.addField(field);var options={};var field=new FieldDate("expertise_result_date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("expertise_reject_type_id",options);pm.addField(field);var options={};var field=new FieldInt("main_department_id",options);pm.addField(field);var options={};var field=new FieldInt("main_expert_id",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_employees",options);pm.addField(field);var options={};var field=new FieldInt("primary_contract_id",options);pm.addField(field);var options={};var field=new FieldInt("modif_primary_contract_id",options);pm.addField(field);var options={};var field=new FieldString("contract_ext_id",options);pm.addField(field);var options={};var field=new FieldFloat("payment",options);pm.addField(field);var options={};var field=new FieldString("invoice_ext_id",options);pm.addField(field);var options={};var field=new FieldText("invoice_number",options);pm.addField(field);var options={};var field=new FieldDate("invoice_date",options);pm.addField(field);var options={};var field=new FieldJSON("linked_contracts",options);pm.addField(field);var options={};options.enumValues='calendar,bank';var field=new FieldEnum("date_type",options);pm.addField(field);var options={};var field=new FieldText("argument_document",options);pm.addField(field);var options={};var field=new FieldText("order_document",options);pm.addField(field);var options={};var field=new FieldText("constr_name",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_address",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features_in_compound_obj",options);pm.addField(field);var options={};var field=new FieldFloat("in_estim_cost",options);pm.addField(field);var options={};var field=new FieldFloat("in_estim_cost_recommend",options);pm.addField(field);var options={};var field=new FieldFloat("cur_estim_cost",options);pm.addField(field);var options={};var field=new FieldFloat("cur_estim_cost_recommend",options);pm.addField(field);var options={};var field=new FieldJSONB("result_sign_expert_list",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Contract_Controller.prototype.addUpdate=function(){Contract_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("application_id",options);pm.addField(field);var options={};var field=new FieldInt("client_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldText("reg_number",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,pd_eng_survey';var field=new FieldEnum("expertise_type",options);pm.addField(field);var options={};options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var field=new FieldEnum("document_type",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldText("contract_number",options);pm.addField(field);var options={};var field=new FieldDate("contract_date",options);pm.addField(field);var options={};var field=new FieldDate("contract_return_date",options);pm.addField(field);var options={};var field=new FieldText("expertise_result_number",options);pm.addField(field);var options={};var field=new FieldFloat("expertise_cost_budget",options);pm.addField(field);var options={};var field=new FieldFloat("expertise_cost_self_fund",options);pm.addField(field);var options={};options.enumValues='no_pd,simult_with_pd,after_pd';var field=new FieldEnum("cost_eval_validity_pd_order",options);pm.addField(field);var options={};var field=new FieldDate("work_start_date",options);pm.addField(field);var options={};var field=new FieldDate("work_end_date",options);pm.addField(field);var options={};var field=new FieldDate("expert_work_end_date",options);pm.addField(field);var options={};var field=new FieldInt("expert_work_day_count",options);pm.addField(field);var options={};var field=new FieldInt("expertise_day_count",options);pm.addField(field);var options={};var field=new FieldText("akt_number",options);pm.addField(field);var options={};var field=new FieldDate("akt_date",options);pm.addField(field);var options={};var field=new FieldFloat("akt_total",options);pm.addField(field);var options={};var field=new FieldString("akt_ext_id",options);pm.addField(field);var options={};var field=new FieldText("kadastr_number",options);pm.addField(field);var options={};var field=new FieldText("grad_plan_number",options);pm.addField(field);var options={};var field=new FieldText("area_document",options);pm.addField(field);var options={};options.enumValues='positive,negative';var field=new FieldEnum("expertise_result",options);pm.addField(field);var options={};var field=new FieldDate("expertise_result_date",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("expertise_reject_type_id",options);pm.addField(field);var options={};var field=new FieldInt("main_department_id",options);pm.addField(field);var options={};var field=new FieldInt("main_expert_id",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_employees",options);pm.addField(field);var options={};var field=new FieldInt("primary_contract_id",options);pm.addField(field);var options={};var field=new FieldInt("modif_primary_contract_id",options);pm.addField(field);var options={};var field=new FieldString("contract_ext_id",options);pm.addField(field);var options={};var field=new FieldFloat("payment",options);pm.addField(field);var options={};var field=new FieldString("invoice_ext_id",options);pm.addField(field);var options={};var field=new FieldText("invoice_number",options);pm.addField(field);var options={};var field=new FieldDate("invoice_date",options);pm.addField(field);var options={};var field=new FieldJSON("linked_contracts",options);pm.addField(field);var options={};options.enumValues='calendar,bank';var field=new FieldEnum("date_type",options);pm.addField(field);var options={};var field=new FieldText("argument_document",options);pm.addField(field);var options={};var field=new FieldText("order_document",options);pm.addField(field);var options={};var field=new FieldText("constr_name",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_address",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features",options);pm.addField(field);var options={};var field=new FieldJSONB("constr_technical_features_in_compound_obj",options);pm.addField(field);var options={};var field=new FieldFloat("in_estim_cost",options);pm.addField(field);var options={};var field=new FieldFloat("in_estim_cost_recommend",options);pm.addField(field);var options={};var field=new FieldFloat("cur_estim_cost",options);pm.addField(field);var options={};var field=new FieldFloat("cur_estim_cost_recommend",options);pm.addField(field);var options={};var field=new FieldJSONB("result_sign_expert_list",options);pm.addField(field);}
Contract_Controller.prototype.addDelete=function(){Contract_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Contract_Controller.prototype.addGetObject=function(){Contract_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Contract_Controller.prototype.addGetList=function(){Contract_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("application_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldText("reg_number",f_opts));var f_opts={};pm.addField(new FieldEnum("expertise_type",f_opts));var f_opts={};pm.addField(new FieldEnum("document_type",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldText("contract_number",f_opts));var f_opts={};pm.addField(new FieldDate("contract_date",f_opts));var f_opts={};pm.addField(new FieldDate("contract_return_date",f_opts));var f_opts={};pm.addField(new FieldText("expertise_result_number",f_opts));var f_opts={};pm.addField(new FieldFloat("expertise_cost_budget",f_opts));var f_opts={};pm.addField(new FieldFloat("expertise_cost_self_fund",f_opts));var f_opts={};pm.addField(new FieldEnum("cost_eval_validity_pd_order",f_opts));var f_opts={};pm.addField(new FieldDate("work_start_date",f_opts));var f_opts={};pm.addField(new FieldDate("work_end_date",f_opts));var f_opts={};pm.addField(new FieldDate("expert_work_end_date",f_opts));var f_opts={};pm.addField(new FieldInt("expert_work_day_count",f_opts));var f_opts={};pm.addField(new FieldInt("expertise_day_count",f_opts));var f_opts={};pm.addField(new FieldText("akt_number",f_opts));var f_opts={};pm.addField(new FieldDate("akt_date",f_opts));var f_opts={};pm.addField(new FieldFloat("akt_total",f_opts));var f_opts={};pm.addField(new FieldString("akt_ext_id",f_opts));var f_opts={};pm.addField(new FieldText("kadastr_number",f_opts));var f_opts={};pm.addField(new FieldText("grad_plan_number",f_opts));var f_opts={};pm.addField(new FieldText("area_document",f_opts));var f_opts={};pm.addField(new FieldEnum("expertise_result",f_opts));var f_opts={};pm.addField(new FieldDate("expertise_result_date",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldInt("expertise_reject_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("main_department_id",f_opts));var f_opts={};pm.addField(new FieldInt("main_expert_id",f_opts));var f_opts={};pm.addField(new FieldJSONB("permissions",f_opts));var f_opts={};pm.addField(new FieldArray("permission_ar",f_opts));var f_opts={};pm.addField(new FieldBool("for_all_employees",f_opts));var f_opts={};pm.addField(new FieldInt("primary_contract_id",f_opts));var f_opts={};pm.addField(new FieldInt("modif_primary_contract_id",f_opts));var f_opts={};pm.addField(new FieldString("contract_ext_id",f_opts));var f_opts={};pm.addField(new FieldFloat("payment",f_opts));var f_opts={};pm.addField(new FieldString("invoice_ext_id",f_opts));var f_opts={};pm.addField(new FieldText("invoice_number",f_opts));var f_opts={};pm.addField(new FieldDate("invoice_date",f_opts));var f_opts={};pm.addField(new FieldJSON("linked_contracts",f_opts));var f_opts={};pm.addField(new FieldEnum("date_type",f_opts));var f_opts={};pm.addField(new FieldText("argument_document",f_opts));var f_opts={};pm.addField(new FieldText("order_document",f_opts));var f_opts={};pm.addField(new FieldText("constr_name",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_address",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_technical_features",f_opts));var f_opts={};pm.addField(new FieldJSONB("constr_technical_features_in_compound_obj",f_opts));var f_opts={};pm.addField(new FieldFloat("in_estim_cost",f_opts));var f_opts={};pm.addField(new FieldFloat("in_estim_cost_recommend",f_opts));var f_opts={};pm.addField(new FieldFloat("cur_estim_cost",f_opts));var f_opts={};pm.addField(new FieldFloat("cur_estim_cost_recommend",f_opts));var f_opts={};pm.addField(new FieldJSONB("result_sign_expert_list",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
Contract_Controller.prototype.addComplete=function(){Contract_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldText("expertise_result_number",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("expertise_result_number");}
Contract_Controller.prototype.add_get_pd_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_pd_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_eng_survey_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_eng_survey_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_cost_eval_validity_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_cost_eval_validity_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_modification_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_modification_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_audit_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_audit_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_print_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('print_order',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("order_ext_id",options));var options={};options.required=true;pm.addField(new FieldString("order_number",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_order_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_order_list',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_make_order=function(){var opts={"controller":this};var pm=new PublicMethodServer('make_order',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};options.required=true;options.maxlength="15";pm.addField(new FieldFloat("total",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_print_akt=function(){var opts={"controller":this};var pm=new PublicMethodServer('print_akt',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_print_invoice=function(){var opts={"controller":this};var pm=new PublicMethodServer('print_invoice',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_make_akt=function(){var opts={"controller":this};var pm=new PublicMethodServer('make_akt',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_ext_data=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_ext_data',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
Contract_Controller.prototype.add_get_work_end_date=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_work_end_date',opts);var options={};options.required=true;pm.addField(new FieldInt("contract_id",options));var options={};options.required=true;pm.addField(new FieldEnum("date_type",options));var options={};options.required=true;pm.addField(new FieldInt("expertise_day_count",options));var options={};options.required=true;pm.addField(new FieldInt("expert_work_day_count",options));var options={};options.required=true;pm.addField(new FieldDate("work_start_date",options));this.addPublicMethod(pm);} 
function ContractList_Model(options){var id='ContractList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldText("reg_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_number=new FieldText("contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_date=new FieldDate("contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_return_date=new FieldDate("contract_return_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_number=new FieldText("expertise_result_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_budget=new FieldFloat("expertise_cost_budget",filed_options);options.fields.expertise_cost_budget.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_self_fund=new FieldFloat("expertise_cost_self_fund",filed_options);options.fields.expertise_cost_self_fund.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cost_eval_validity_pd_order=new FieldEnum("cost_eval_validity_pd_order",filed_options);filed_options.enumValues='no_pd,simult_with_pd,after_pd';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_start_date=new FieldDate("work_start_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_end_date=new FieldDate("work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_end_date=new FieldDate("expert_work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_day_count=new FieldInt("expert_work_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_day_count=new FieldInt("expertise_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_number=new FieldText("akt_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.akt_date=new FieldDate("akt_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_total=new FieldFloat("akt_total",filed_options);options.fields.akt_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_ext_id=new FieldString("akt_ext_id",filed_options);options.fields.akt_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kadastr_number=new FieldText("kadastr_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.grad_plan_number=new FieldText("grad_plan_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.area_document=new FieldText("area_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result=new FieldEnum("expertise_result",filed_options);filed_options.enumValues='positive,negative';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_date=new FieldDate("expertise_result_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_type_id=new FieldInt("expertise_reject_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_department_id=new FieldInt("main_department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_expert_id=new FieldInt("main_expert_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_contract_id=new FieldInt("primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_contract_id=new FieldInt("modif_primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_ext_id=new FieldString("contract_ext_id",filed_options);options.fields.contract_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payment=new FieldFloat("payment",filed_options);options.fields.payment.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_ext_id=new FieldString("invoice_ext_id",filed_options);options.fields.invoice_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_number=new FieldText("invoice_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_date=new FieldDate("invoice_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.linked_contracts=new FieldJSON("linked_contracts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_type=new FieldEnum("date_type",filed_options);filed_options.enumValues='calendar,bank';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.argument_document=new FieldText("argument_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_document=new FieldText("order_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost=new FieldFloat("in_estim_cost",filed_options);options.fields.in_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost_recommend=new FieldFloat("in_estim_cost_recommend",filed_options);options.fields.in_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost=new FieldFloat("cur_estim_cost",filed_options);options.fields.cur_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost_recommend=new FieldFloat("cur_estim_cost_recommend",filed_options);options.fields.cur_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.result_sign_expert_list=new FieldJSONB("result_sign_expert_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_descr=new FieldString("client_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.self_ref=new FieldJSON("self_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_expert_descr=new FieldString("main_expert_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_date=new FieldDate("state_end_date",filed_options);ContractList_Model.superclass.constructor.call(this,id,options);}
extend(ContractList_Model,ModelXML); 
function ContractDialog_Model(options){var id='ContractDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldText("reg_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_type=new FieldEnum("expertise_type",filed_options);filed_options.enumValues='pd,eng_survey,pd_eng_survey';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_number=new FieldText("contract_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_date=new FieldDate("contract_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_return_date=new FieldDate("contract_return_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_number=new FieldText("expertise_result_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_budget=new FieldFloat("expertise_cost_budget",filed_options);options.fields.expertise_cost_budget.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_cost_self_fund=new FieldFloat("expertise_cost_self_fund",filed_options);options.fields.expertise_cost_self_fund.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cost_eval_validity_pd_order=new FieldEnum("cost_eval_validity_pd_order",filed_options);filed_options.enumValues='no_pd,simult_with_pd,after_pd';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_start_date=new FieldDate("work_start_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_end_date=new FieldDate("work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_end_date=new FieldDate("expert_work_end_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_work_day_count=new FieldInt("expert_work_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_day_count=new FieldInt("expertise_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_number=new FieldText("akt_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.akt_date=new FieldDate("akt_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_total=new FieldFloat("akt_total",filed_options);options.fields.akt_total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.akt_ext_id=new FieldString("akt_ext_id",filed_options);options.fields.akt_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.kadastr_number=new FieldText("kadastr_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.grad_plan_number=new FieldText("grad_plan_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.area_document=new FieldText("area_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result=new FieldEnum("expertise_result",filed_options);filed_options.enumValues='positive,negative';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_result_date=new FieldDate("expertise_result_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_type_id=new FieldInt("expertise_reject_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_department_id=new FieldInt("main_department_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_expert_id=new FieldInt("main_expert_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_contract_id=new FieldInt("primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_contract_id=new FieldInt("modif_primary_contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_ext_id=new FieldString("contract_ext_id",filed_options);options.fields.contract_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.payment=new FieldFloat("payment",filed_options);options.fields.payment.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_ext_id=new FieldString("invoice_ext_id",filed_options);options.fields.invoice_ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_number=new FieldText("invoice_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.invoice_date=new FieldDate("invoice_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.linked_contracts=new FieldJSON("linked_contracts",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_type=new FieldEnum("date_type",filed_options);filed_options.enumValues='calendar,bank';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.argument_document=new FieldText("argument_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.order_document=new FieldText("order_document",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_name=new FieldText("constr_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_address=new FieldJSONB("constr_address",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features=new FieldJSONB("constr_technical_features",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.constr_technical_features_in_compound_obj=new FieldJSONB("constr_technical_features_in_compound_obj",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost=new FieldFloat("in_estim_cost",filed_options);options.fields.in_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.in_estim_cost_recommend=new FieldFloat("in_estim_cost_recommend",filed_options);options.fields.in_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost=new FieldFloat("cur_estim_cost",filed_options);options.fields.cur_estim_cost.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cur_estim_cost_recommend=new FieldFloat("cur_estim_cost_recommend",filed_options);options.fields.cur_estim_cost_recommend.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.result_sign_expert_list=new FieldJSONB("result_sign_expert_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applicant_descr=new FieldText("applicant_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.customer_descr=new FieldText("customer_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contractors_list=new FieldJSON("contractors_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.developer_descr=new FieldText("developer_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.build_types_ref=new FieldJSON("build_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.construction_types_ref=new FieldJSON("construction_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_period_days=new FieldInt("expertise_period_days",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_reject_types_ref=new FieldJSON("expertise_reject_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_departments_ref=new FieldJSON("main_departments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.main_experts_ref=new FieldJSON("main_experts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_sections=new FieldJSON("expertise_sections",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total_cost_eval=new FieldFloat("total_cost_eval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.limit_cost_eval=new FieldFloat("limit_cost_eval",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cost_eval_validity_simult=new FieldBool("cost_eval_validity_simult",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.fund_sources_ref=new FieldJSON("fund_sources_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_contract_reg_number=new FieldString("primary_contract_reg_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.primary_contracts_ref=new FieldJSON("primary_contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_contract_reg_number=new FieldString("modif_primary_contract_reg_number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modif_primary_contracts_ref=new FieldJSON("modif_primary_contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.documents=new FieldJSON("documents",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.cost_eval_validity=new FieldBool("cost_eval_validity",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.modification=new FieldBool("modification",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.audit=new FieldBool("audit",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.auth_letter=new FieldText("auth_letter",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_folders=new FieldJSON("doc_folders",filed_options);ContractDialog_Model.superclass.constructor.call(this,id,options);}
extend(ContractDialog_Model,ModelXML); 
function ReportTemplateFile_Model(options){var id='ReportTemplateFile_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.report_template_id=new FieldInt("report_template_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_inf=new FieldJSONB("file_inf",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_data=new FieldText("file_data",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_views=new FieldBool("for_all_views",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.views=new FieldJSONB("views",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_ar=new FieldArray("view_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);ReportTemplateFile_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFile_Model,ModelXML); 
function ReportTemplateFileDialog_Model(options){var id='ReportTemplateFileDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.report_templates_ref=new FieldJSON("report_templates_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Поля шаблона';filed_options.autoInc=false;options.fields.fields=new FieldJSON("fields",filed_options);options.fields.fields.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Параметры выборки данных';filed_options.autoInc=false;options.fields.in_params=new FieldJSON("in_params",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_inf=new FieldJSONB("file_inf",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_views=new FieldBool("for_all_views",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.views=new FieldJSONB("views",filed_options);ReportTemplateFileDialog_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFileDialog_Model,ModelXML); 
function ReportTemplateFileList_Model(options){var id='ReportTemplateFileList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.report_templates_name=new FieldString("report_templates_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.file_name=new FieldString("file_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);ReportTemplateFileList_Model.superclass.constructor.call(this,id,options);}
extend(ReportTemplateFileList_Model,ModelXML); 
function ReportTemplateFile_Controller(options){options=options||{};options.listModelClass=ReportTemplateFileList_Model;options.objModelClass=ReportTemplateFileDialog_Model;ReportTemplateFile_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_download_file();this.add_delete_file();this.add_apply_template_file();}
extend(ReportTemplateFile_Controller,ControllerObjServer);ReportTemplateFile_Controller.prototype.addInsert=function(){ReportTemplateFile_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldInt("report_template_id",options);pm.addField(field);var options={};var field=new FieldJSONB("file_inf",options);pm.addField(field);var options={};var field=new FieldText("file_data",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_views",options);pm.addField(field);var options={};var field=new FieldJSONB("views",options);pm.addField(field);var options={};var field=new FieldArray("view_ar",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldText("template_file",options));}
ReportTemplateFile_Controller.prototype.addUpdate=function(){ReportTemplateFile_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("report_template_id",options);pm.addField(field);var options={};var field=new FieldJSONB("file_inf",options);pm.addField(field);var options={};var field=new FieldText("file_data",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_views",options);pm.addField(field);var options={};var field=new FieldJSONB("views",options);pm.addField(field);var options={};var field=new FieldArray("view_ar",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};pm.addField(new FieldText("template_file",options));}
ReportTemplateFile_Controller.prototype.addDelete=function(){ReportTemplateFile_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ReportTemplateFile_Controller.prototype.addGetObject=function(){ReportTemplateFile_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ReportTemplateFile_Controller.prototype.addGetList=function(){ReportTemplateFile_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("report_templates_name",f_opts));var f_opts={};pm.addField(new FieldString("file_name",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("file_name");}
ReportTemplateFile_Controller.prototype.add_download_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_file',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
ReportTemplateFile_Controller.prototype.add_delete_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_file',opts);var options={};pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);}
ReportTemplateFile_Controller.prototype.add_apply_template_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('apply_template_file',opts);var options={};pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldJSON("params",options));this.addPublicMethod(pm);} 
function DocFlowApprovementList_Model(options){var id='DocFlowApprovementList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_list=new FieldText("recipient_list",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.step_count=new FieldInt("step_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.current_step=new FieldInt("current_step",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_result=new FieldEnum("close_result",filed_options);filed_options.enumValues='approved,not_approved,approved_with_notes';DocFlowApprovementList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementList_Model,ModelXML); 
function DocFlowApprovementDialog_Model(options){var id='DocFlowApprovementDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject_docs_ref=new FieldJSON("subject_docs_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_list_ref=new FieldJSON("recipient_list_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_date_time=new FieldDateTimeTZ("close_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_approvement_type=new FieldString("doc_flow_approvement_type",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_out_processes_chain=new FieldJSON("doc_flow_out_processes_chain",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.close_result=new FieldEnum("close_result",filed_options);filed_options.enumValues='approved,not_approved,approved_with_notes';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.current_step=new FieldInt("current_step",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.step_count=new FieldInt("step_count",filed_options);DocFlowApprovementDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementDialog_Model,ModelXML); 
function Enum_doc_flow_approvement_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_to_all":"Всем сразу","ru_to_one":"По очереди","ru_mixed":"Смешанно"};options.options=[{"value":"to_all","descr":multy_lang_values[window.getApp().getLocale()+"_"+"to_all"],checked:(options.defaultValue&&options.defaultValue=="to_all")},{"value":"to_one","descr":multy_lang_values[window.getApp().getLocale()+"_"+"to_one"],checked:(options.defaultValue&&options.defaultValue=="to_one")},{"value":"mixed","descr":multy_lang_values[window.getApp().getLocale()+"_"+"mixed"],checked:(options.defaultValue&&options.defaultValue=="mixed")}];Enum_doc_flow_approvement_types.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_approvement_types,EditSelect); 
function Enum_doc_flow_approvement_orders(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_after_preceding":"После предыдущего","ru_with_preceding":"Вместе с предыдущим"};options.options=[{"value":"after_preceding","descr":multy_lang_values[window.getApp().getLocale()+"_"+"after_preceding"],checked:(options.defaultValue&&options.defaultValue=="after_preceding")},{"value":"with_preceding","descr":multy_lang_values[window.getApp().getLocale()+"_"+"with_preceding"],checked:(options.defaultValue&&options.defaultValue=="with_preceding")}];Enum_doc_flow_approvement_orders.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_approvement_orders,EditSelect); 
function EnumGridColumn_doc_flow_approvement_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["to_all"]="Всем сразу";options.multyLangValues["ru"]["to_one"]="По очереди";options.multyLangValues["ru"]["mixed"]="Смешанно";EnumGridColumn_doc_flow_approvement_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_approvement_types,GridColumnEnum); 
function EnumGridColumn_doc_flow_approvement_orders(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["after_preceding"]="После предыдущего";options.multyLangValues["ru"]["with_preceding"]="Вместе с предыдущим";EnumGridColumn_doc_flow_approvement_orders.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_approvement_orders,GridColumnEnum); 
function DocFlowApprovement_Controller(options){options=options||{};options.listModelClass=DocFlowApprovementList_Model;options.objModelClass=DocFlowApprovementDialog_Model;DocFlowApprovement_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_set_approved();this.add_set_approved_with_remarks();this.add_set_disapproved();this.add_set_closed();}
extend(DocFlowApprovement_Controller,ControllerObjServer);DocFlowApprovement_Controller.prototype.addInsert=function(){DocFlowApprovement_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};options.enumValues='approved,not_approved,approved_with_notes';var field=new FieldEnum("close_result",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("subject_doc",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("recipient_list",options);pm.addField(field);var options={};var field=new FieldText("description",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("step_count",options);pm.addField(field);var options={};var field=new FieldInt("current_step",options);pm.addField(field);var options={};options.required=true;options.enumValues='to_all,to_one,mixed';var field=new FieldEnum("doc_flow_approvement_type",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowApprovement_Controller.prototype.addUpdate=function(){DocFlowApprovement_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("close_date_time",options);pm.addField(field);var options={};options.enumValues='approved,not_approved,approved_with_notes';var field=new FieldEnum("close_result",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldJSONB("subject_doc",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient_list",options);pm.addField(field);var options={};var field=new FieldText("description",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("step_count",options);pm.addField(field);var options={};var field=new FieldInt("current_step",options);pm.addField(field);var options={};options.enumValues='to_all,to_one,mixed';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("doc_flow_approvement_type",options);pm.addField(field);}
DocFlowApprovement_Controller.prototype.addDelete=function(){DocFlowApprovement_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowApprovement_Controller.prototype.addGetObject=function(){DocFlowApprovement_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowApprovement_Controller.prototype.addGetList=function(){DocFlowApprovement_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldJSON("subject_docs_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_importance_types_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("end_date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("close_date_time",f_opts));var f_opts={};pm.addField(new FieldBool("closed",f_opts));var f_opts={};pm.addField(new FieldText("recipient_list",f_opts));var f_opts={};pm.addField(new FieldInt("step_count",f_opts));var f_opts={};pm.addField(new FieldInt("current_step",f_opts));var f_opts={};pm.addField(new FieldEnum("close_result",f_opts));}
DocFlowApprovement_Controller.prototype.add_set_approved=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_approved',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldText("employee_comment",options));this.addPublicMethod(pm);}
DocFlowApprovement_Controller.prototype.add_set_approved_with_remarks=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_approved_with_remarks',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldText("employee_comment",options));this.addPublicMethod(pm);}
DocFlowApprovement_Controller.prototype.add_set_disapproved=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_disapproved',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));var options={};pm.addField(new FieldText("employee_comment",options));this.addPublicMethod(pm);}
DocFlowApprovement_Controller.prototype.add_set_closed=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_closed',opts);var options={};options.required=true;pm.addField(new FieldInt("id",options));this.addPublicMethod(pm);} 
function DocFlowApprovementRecipientList_Controller(options){options=options||{};options.listModelClass=DocFlowApprovementRecipientList_Model;options.objModelClass=DocFlowApprovementRecipientList_Model;DocFlowApprovementRecipientList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(DocFlowApprovementRecipientList_Controller,ControllerObjClient);DocFlowApprovementRecipientList_Controller.prototype.addInsert=function(){DocFlowApprovementRecipientList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSONB("employee",options);pm.addField(field);var options={};var field=new FieldInt("step",options);pm.addField(field);var options={};var field=new FieldText("employee_comment",options);pm.addField(field);var options={};options.enumValues='approved,not_approved,approved_with_notes';var field=new FieldEnum("approvement_result",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("approvement_dt",options);pm.addField(field);var options={};options.enumValues='after_preceding,with_preceding';var field=new FieldEnum("approvement_order",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowApprovementRecipientList_Controller.prototype.addUpdate=function(){DocFlowApprovementRecipientList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSONB("employee",options);pm.addField(field);var options={};var field=new FieldInt("step",options);pm.addField(field);var options={};var field=new FieldText("employee_comment",options);pm.addField(field);var options={};options.enumValues='approved,not_approved,approved_with_notes';var field=new FieldEnum("approvement_result",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("approvement_dt",options);pm.addField(field);var options={};options.enumValues='after_preceding,with_preceding';var field=new FieldEnum("approvement_order",options);pm.addField(field);var options={};var field=new FieldBool("closed",options);pm.addField(field);}
DocFlowApprovementRecipientList_Controller.prototype.addDelete=function(){DocFlowApprovementRecipientList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowApprovementRecipientList_Controller.prototype.addGetList=function(){DocFlowApprovementRecipientList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSONB("employee",f_opts));var f_opts={};pm.addField(new FieldInt("step",f_opts));var f_opts={};pm.addField(new FieldText("employee_comment",f_opts));var f_opts={};pm.addField(new FieldEnum("approvement_result",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("approvement_dt",f_opts));var f_opts={};pm.addField(new FieldEnum("approvement_order",f_opts));var f_opts={};pm.addField(new FieldBool("closed",f_opts));}
DocFlowApprovementRecipientList_Controller.prototype.addGetObject=function(){DocFlowApprovementRecipientList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function DocFlowApprovementRecipientList_Model(options){var id='DocFlowApprovementRecipientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee=new FieldJSONB("employee",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.step=new FieldInt("step",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_comment=new FieldText("employee_comment",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approvement_result=new FieldEnum("approvement_result",filed_options);filed_options.enumValues='approved,not_approved,approved_with_notes';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approvement_dt=new FieldDateTimeTZ("approvement_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.approvement_order=new FieldEnum("approvement_order",filed_options);filed_options.enumValues='after_preceding,with_preceding';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.closed=new FieldBool("closed",filed_options);DocFlowApprovementRecipientList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementRecipientList_Model,ModelJSON); 
function Enum_doc_flow_approvement_results(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_approved":"Согласовано","ru_not_approved":"Не согласовано","ru_approved_with_notes":"Согласовано с замечаниями"};options.options=[{"value":"approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved"],checked:(options.defaultValue&&options.defaultValue=="approved")},{"value":"not_approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"not_approved"],checked:(options.defaultValue&&options.defaultValue=="not_approved")},{"value":"approved_with_notes","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved_with_notes"],checked:(options.defaultValue&&options.defaultValue=="approved_with_notes")}];Enum_doc_flow_approvement_results.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_approvement_results,EditSelect); 
function EnumGridColumn_doc_flow_approvement_results(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["approved"]="Согласовано";options.multyLangValues["ru"]["not_approved"]="Не согласовано";options.multyLangValues["ru"]["approved_with_notes"]="Согласовано с замечаниями";EnumGridColumn_doc_flow_approvement_results.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_approvement_results,GridColumnEnum); 
function ExpertiseRejectType_Controller(options){options=options||{};options.listModelClass=ExpertiseRejectType_Model;options.objModelClass=ExpertiseRejectType_Model;ExpertiseRejectType_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(ExpertiseRejectType_Controller,ControllerObjServer);ExpertiseRejectType_Controller.prototype.addInsert=function(){ExpertiseRejectType_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldString("name",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ExpertiseRejectType_Controller.prototype.addUpdate=function(){ExpertiseRejectType_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);}
ExpertiseRejectType_Controller.prototype.addDelete=function(){ExpertiseRejectType_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ExpertiseRejectType_Controller.prototype.addGetObject=function(){ExpertiseRejectType_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ExpertiseRejectType_Controller.prototype.addGetList=function(){ExpertiseRejectType_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ExpertiseRejectType_Model(options){var id='ExpertiseRejectType_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setRequired(true);options.fields.name.getValidator().setMaxLength('250');ExpertiseRejectType_Model.superclass.constructor.call(this,id,options);}
extend(ExpertiseRejectType_Model,ModelXML); 
function ExpertWork_Model(options){var id='ExpertWork_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);options.fields.contract_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section_id=new FieldInt("section_id",filed_options);options.fields.section_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expert_id=new FieldInt("expert_id",filed_options);options.fields.expert_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);ExpertWork_Model.superclass.constructor.call(this,id,options);}
extend(ExpertWork_Model,ModelXML); 
function ExpertWork_Controller(options){options=options||{};options.listModelClass=ExpertWorkList_Model;options.objModelClass=ExpertWorkList_Model;ExpertWork_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_download_file();this.add_delete_file();}
extend(ExpertWork_Controller,ControllerObjServer);ExpertWork_Controller.prototype.addInsert=function(){ExpertWork_Controller.superclass.addInsert.call(this);var pm=this.getInsert();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("contract_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("section_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("expert_id",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};options.required=true;var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldJSONB("files",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));var options={};pm.addField(new FieldText("file_data",options));}
ExpertWork_Controller.prototype.addUpdate=function(){ExpertWork_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("contract_id",options);pm.addField(field);var options={};var field=new FieldInt("section_id",options);pm.addField(field);var options={};var field=new FieldInt("expert_id",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldDateTime("date_time",options);pm.addField(field);var options={};var field=new FieldJSONB("files",options);pm.addField(field);var options={};pm.addField(new FieldText("file_data",options));}
ExpertWork_Controller.prototype.addDelete=function(){ExpertWork_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ExpertWork_Controller.prototype.addGetObject=function(){ExpertWork_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ExpertWork_Controller.prototype.addGetList=function(){ExpertWork_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldInt("contract_id",f_opts));var f_opts={};pm.addField(new FieldInt("section_id",f_opts));var f_opts={};pm.addField(new FieldJSON("experts_ref",f_opts));var f_opts={};f_opts.alias="Комментарий";pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldDateTime("date_time",f_opts));var f_opts={};pm.addField(new FieldJSONB("files",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("date_time");}
ExpertWork_Controller.prototype.add_download_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_file',opts);var options={};options.required=true;pm.addField(new FieldInt("contract_id",options));var options={};options.required=true;pm.addField(new FieldInt("section_id",options));var options={};options.required=true;pm.addField(new FieldInt("expert_id",options));var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);}
ExpertWork_Controller.prototype.add_delete_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('delete_file',opts);var options={};options.required=true;pm.addField(new FieldInt("contract_id",options));var options={};options.required=true;pm.addField(new FieldInt("section_id",options));var options={};options.required=true;pm.addField(new FieldInt("expert_id",options));var options={};options.required=true;options.maxlength="32";pm.addField(new FieldString("file_id",options));this.addPublicMethod(pm);} 
function AccessPermission_Controller(options){options=options||{};options.listModelClass=AccessPermission_Model;options.objModelClass=AccessPermission_Model;AccessPermission_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(AccessPermission_Controller,ControllerObjClient);AccessPermission_Controller.prototype.addInsert=function(){AccessPermission_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSON("obj",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
AccessPermission_Controller.prototype.addUpdate=function(){AccessPermission_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSON("obj",options);pm.addField(field);}
AccessPermission_Controller.prototype.addDelete=function(){AccessPermission_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
AccessPermission_Controller.prototype.addGetList=function(){AccessPermission_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("obj",f_opts));}
AccessPermission_Controller.prototype.addGetObject=function(){AccessPermission_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function AccessPermission_Model(options){var id='AccessPermission_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.obj=new FieldJSON("obj",filed_options);AccessPermission_Model.superclass.constructor.call(this,id,options);}
extend(AccessPermission_Model,ModelJSON); 
function ExpertSection_Model(options){var id='ExpertSection_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.document_type=new FieldEnum("document_type",filed_options);filed_options.enumValues='pd,eng_survey,cost_eval_validity,modification,audit,documents';options.fields.document_type.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.construction_type_id=new FieldInt("construction_type_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.create_date=new FieldDate("create_date",filed_options);options.fields.create_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.section_id=new FieldInt("section_id",filed_options);options.fields.section_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section_name=new FieldText("section_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section_index=new FieldInt("section_index",filed_options);ExpertSection_Model.superclass.constructor.call(this,id,options);}
extend(ExpertSection_Model,ModelXML); 
function ContractSection_Controller(options){options=options||{};options.listModelClass=ContractSection_Model;ContractSection_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(ContractSection_Controller,ControllerObjClient);ContractSection_Controller.prototype.addGetList=function(){ContractSection_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("section_id",f_opts));var f_opts={};pm.addField(new FieldString("section_name",f_opts));var f_opts={};pm.addField(new FieldString("experts_list",f_opts));} 
function ContractSection_Model(options){var id='ContractSection_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.section_id=new FieldInt("section_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section_name=new FieldString("section_name",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.experts_list=new FieldString("experts_list",filed_options);ContractSection_Model.superclass.constructor.call(this,id,options);}
extend(ContractSection_Model,ModelJSON); 
function ExpertWorkList_Model(options){var id='ExpertWorkList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);options.fields.contract_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.section_id=new FieldInt("section_id",filed_options);options.fields.section_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.experts_ref=new FieldJSON("experts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_time=new FieldDateTime("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSONB("files",filed_options);ExpertWorkList_Model.superclass.constructor.call(this,id,options);}
extend(ExpertWorkList_Model,ModelXML); 
function OfficeDaySchedule_Model(options){var id='OfficeDaySchedule_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.office_id=new FieldInt("office_id",filed_options);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.day=new FieldDate("day",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_hours=new FieldJSONB("work_hours",filed_options);OfficeDaySchedule_Model.superclass.constructor.call(this,id,options);}
extend(OfficeDaySchedule_Model,ModelXML); 
function OfficeDaySchedule_Controller(options){options=options||{};options.listModelClass=OfficeDaySchedule_Model;options.objModelClass=OfficeDaySchedule_Model;OfficeDaySchedule_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(OfficeDaySchedule_Controller,ControllerObjServer);OfficeDaySchedule_Controller.prototype.addInsert=function(){OfficeDaySchedule_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("office_id",options);pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDate("day",options);pm.addField(field);var options={};var field=new FieldJSONB("work_hours",options);pm.addField(field);}
OfficeDaySchedule_Controller.prototype.addUpdate=function(){OfficeDaySchedule_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("office_id",options);pm.addField(field);field=new FieldInt("old_office_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDate("day",options);pm.addField(field);field=new FieldDate("old_day",{});pm.addField(field);var options={};var field=new FieldJSONB("work_hours",options);pm.addField(field);}
OfficeDaySchedule_Controller.prototype.addDelete=function(){OfficeDaySchedule_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("office_id",options));var options={"required":true};pm.addField(new FieldDate("day",options));}
OfficeDaySchedule_Controller.prototype.addGetList=function(){OfficeDaySchedule_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("office_id",f_opts));var f_opts={};pm.addField(new FieldDate("day",f_opts));var f_opts={};pm.addField(new FieldJSONB("work_hours",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("office_id,day");}
OfficeDaySchedule_Controller.prototype.addGetObject=function(){OfficeDaySchedule_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("office_id",f_opts));var f_opts={};pm.addField(new FieldDate("day",f_opts));pm.addField(new FieldString("mode"));} 
function Enum_expertise_results(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_positive":"Положительное заключение","ru_negative":"Отрицательное заключение"};options.options=[{"value":"positive","descr":multy_lang_values[window.getApp().getLocale()+"_"+"positive"],checked:(options.defaultValue&&options.defaultValue=="positive")},{"value":"negative","descr":multy_lang_values[window.getApp().getLocale()+"_"+"negative"],checked:(options.defaultValue&&options.defaultValue=="negative")}];Enum_expertise_results.superclass.constructor.call(this,id,options);}
extend(Enum_expertise_results,EditSelect); 
function EnumGridColumn_expertise_results(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["positive"]="Положительное заключение";options.multyLangValues["ru"]["negative"]="Отрицательное заключение";EnumGridColumn_expertise_results.superclass.constructor.call(this,options);}
extend(EnumGridColumn_expertise_results,GridColumnEnum); 
function ViewLocal_Controller(options){options=options||{};options.listModelClass=ViewLocal_Model;options.objModelClass=ViewLocal_Model;ViewLocal_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(ViewLocal_Controller,ControllerObjClient);ViewLocal_Controller.prototype.addInsert=function(){ViewLocal_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSON("view",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ViewLocal_Controller.prototype.addUpdate=function(){ViewLocal_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSON("view",options);pm.addField(field);}
ViewLocal_Controller.prototype.addDelete=function(){ViewLocal_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ViewLocal_Controller.prototype.addGetList=function(){ViewLocal_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("view",f_opts));}
ViewLocal_Controller.prototype.addGetObject=function(){ViewLocal_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function ViewLocal_Model(options){var id='ViewLocal_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view=new FieldJSON("view",filed_options);ViewLocal_Model.superclass.constructor.call(this,id,options);}
extend(ViewLocal_Model,ModelJSON); 
function DocFlowApprovementTemplate_Model(options){var id='DocFlowApprovementTemplate_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_list=new FieldJSONB("recipient_list",filed_options);options.fields.recipient_list.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_approvement_type=new FieldEnum("doc_flow_approvement_type",filed_options);filed_options.enumValues='to_all,to_one,mixed';options.fields.doc_flow_approvement_type.getValidator().setRequired(true);DocFlowApprovementTemplate_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementTemplate_Model,ModelXML); 
function DocFlowApprovementTemplate_Controller(options){options=options||{};options.listModelClass=DocFlowApprovementTemplateList_Model;options.objModelClass=DocFlowApprovementTemplateDialog_Model;DocFlowApprovementTemplate_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();}
extend(DocFlowApprovementTemplate_Controller,ControllerObjServer);DocFlowApprovementTemplate_Controller.prototype.addInsert=function(){DocFlowApprovementTemplate_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldJSONB("recipient_list",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_employees",options);pm.addField(field);var options={};options.required=true;options.enumValues='to_all,to_one,mixed';var field=new FieldEnum("doc_flow_approvement_type",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowApprovementTemplate_Controller.prototype.addUpdate=function(){DocFlowApprovementTemplate_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};options.alias="Наименование";var field=new FieldString("name",options);pm.addField(field);var options={};options.alias="Комментарий";var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldJSONB("recipient_list",options);pm.addField(field);var options={};var field=new FieldJSONB("permissions",options);pm.addField(field);var options={};var field=new FieldArray("permission_ar",options);pm.addField(field);var options={};var field=new FieldBool("for_all_employees",options);pm.addField(field);var options={};options.enumValues='to_all,to_one,mixed';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("doc_flow_approvement_type",options);pm.addField(field);}
DocFlowApprovementTemplate_Controller.prototype.addDelete=function(){DocFlowApprovementTemplate_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowApprovementTemplate_Controller.prototype.addGetObject=function(){DocFlowApprovementTemplate_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowApprovementTemplate_Controller.prototype.addGetList=function(){DocFlowApprovementTemplate_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};f_opts.alias="Наименование";pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldArray("permission_ar",f_opts));var f_opts={};pm.addField(new FieldBool("for_all_employees",f_opts));}
DocFlowApprovementTemplate_Controller.prototype.addComplete=function(){DocFlowApprovementTemplate_Controller.superclass.addComplete.call(this);var f_opts={};f_opts.alias="";var pm=this.getComplete();pm.addField(new FieldString("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function DocFlowApprovementTemplateList_Model(options){var id='DocFlowApprovementTemplateList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);options.fields.employee_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);DocFlowApprovementTemplateList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementTemplateList_Model,ModelXML); 
function DocFlowApprovementTemplateDialog_Model(options){var id='DocFlowApprovementTemplateDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.alias='Наименование';filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('100');var filed_options={};filed_options.primaryKey=false;filed_options.alias='Комментарий';filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_list_ref=new FieldJSONB("recipient_list_ref",filed_options);options.fields.recipient_list_ref.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permissions=new FieldJSONB("permissions",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.permission_ar=new FieldArray("permission_ar",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.for_all_employees=new FieldBool("for_all_employees",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_approvement_type=new FieldString("doc_flow_approvement_type",filed_options);DocFlowApprovementTemplateDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowApprovementTemplateDialog_Model,ModelXML); 
function ClientPayment_Model(options){var id='ClientPayment_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);options.fields.contract_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_date=new FieldDate("pay_date",filed_options);options.fields.pay_date.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_docum_date=new FieldDate("pay_docum_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_docum_number=new FieldString("pay_docum_number",filed_options);options.fields.pay_docum_number.getValidator().setMaxLength('20');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);options.fields.total.getValidator().setMaxLength('15');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);ClientPayment_Model.superclass.constructor.call(this,id,options);}
extend(ClientPayment_Model,ModelXML); 
function ClientPayment_Controller(options){options=options||{};options.listModelClass=ClientPaymentList_Model;options.objModelClass=ClientPayment_Model;ClientPayment_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.add_get_from_1c();}
extend(ClientPayment_Controller,ControllerObjServer);ClientPayment_Controller.prototype.addInsert=function(){ClientPayment_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("contract_id",options);pm.addField(field);var options={};options.required=true;var field=new FieldDate("pay_date",options);pm.addField(field);var options={};var field=new FieldDate("pay_docum_date",options);pm.addField(field);var options={};var field=new FieldString("pay_docum_number",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ClientPayment_Controller.prototype.addUpdate=function(){ClientPayment_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldInt("contract_id",options);pm.addField(field);var options={};var field=new FieldDate("pay_date",options);pm.addField(field);var options={};var field=new FieldDate("pay_docum_date",options);pm.addField(field);var options={};var field=new FieldString("pay_docum_number",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);}
ClientPayment_Controller.prototype.addDelete=function(){ClientPayment_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ClientPayment_Controller.prototype.addGetObject=function(){ClientPayment_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ClientPayment_Controller.prototype.addGetList=function(){ClientPayment_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("clients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("contracts_ref",f_opts));var f_opts={};pm.addField(new FieldInt("contract_id",f_opts));var f_opts={};pm.addField(new FieldInt("clients_id",f_opts));var f_opts={};pm.addField(new FieldDate("pay_date",f_opts));var f_opts={};pm.addField(new FieldFloat("total",f_opts));var f_opts={};pm.addField(new FieldInt("contract_id",f_opts));var f_opts={};pm.addField(new FieldInt("client_id",f_opts));var f_opts={};pm.addField(new FieldDate("pay_docum_date",f_opts));var f_opts={};pm.addField(new FieldString("pay_docum_number",f_opts));}
ClientPayment_Controller.prototype.add_get_from_1c=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_from_1c',opts);var options={};pm.addField(new FieldDate("date_from",options));var options={};pm.addField(new FieldDate("date_to",options));var options={};pm.addField(new FieldInt("interactive",options));this.addPublicMethod(pm);} 
function ClientPaymentList_Model(options){var id='ClientPaymentList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_ref=new FieldJSON("clients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contracts_ref=new FieldJSON("contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.clients_id=new FieldInt("clients_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_date=new FieldDate("pay_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.client_id=new FieldInt("client_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_docum_date=new FieldDate("pay_docum_date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.pay_docum_number=new FieldString("pay_docum_number",filed_options);ClientPaymentList_Model.superclass.constructor.call(this,id,options);}
extend(ClientPaymentList_Model,ModelXML); 
function Order1CList_Controller(options){options=options||{};options.listModelClass=Order1CList_Model;options.objModelClass=Order1CList_Model;Order1CList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(Order1CList_Controller,ControllerObjClient);Order1CList_Controller.prototype.addInsert=function(){Order1CList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldString("ext_id",options);pm.addField(field);var options={};var field=new FieldText("number",options);pm.addField(field);var options={};var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);}
Order1CList_Controller.prototype.addUpdate=function(){Order1CList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldString("ext_id",options);pm.addField(field);field=new FieldString("old_ext_id",{});pm.addField(field);var options={};var field=new FieldText("number",options);pm.addField(field);var options={};var field=new FieldDate("date",options);pm.addField(field);var options={};var field=new FieldFloat("total",options);pm.addField(field);}
Order1CList_Controller.prototype.addDelete=function(){Order1CList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldString("ext_id",options));}
Order1CList_Controller.prototype.addGetList=function(){Order1CList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("ext_id",f_opts));var f_opts={};pm.addField(new FieldText("number",f_opts));var f_opts={};pm.addField(new FieldDate("date",f_opts));var f_opts={};pm.addField(new FieldFloat("total",f_opts));}
Order1CList_Controller.prototype.addGetObject=function(){Order1CList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldString("ext_id",f_opts));pm.addField(new FieldString("mode"));} 
function Order1CList_Model(options){var id='Order1CList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.ext_id=new FieldString("ext_id",filed_options);options.fields.ext_id.getValidator().setMaxLength('36');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.number=new FieldText("number",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date=new FieldDate("date",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.total=new FieldFloat("total",filed_options);Order1CList_Model.superclass.constructor.call(this,id,options);}
extend(Order1CList_Model,ModelJSON); 
function ProjectManager_Controller(options){options=options||{};ProjectManager_Controller.superclass.constructor.call(this,options);this.add_open_version();this.add_close_version();this.add_minify_js();this.add_build_all();this.add_create_symlinks();this.add_pull();this.add_push();this.add_zip_project();this.add_zip_db();this.add_get_version();this.add_apply_patch();this.add_apply_sql();}
extend(ProjectManager_Controller,ControllerObjServer);ProjectManager_Controller.prototype.add_open_version=function(){var opts={"controller":this};var pm=new PublicMethodServer('open_version',opts);var options={};options.maxlength="15";pm.addField(new FieldString("version",options));this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_close_version=function(){var opts={"controller":this};var pm=new PublicMethodServer('close_version',opts);var options={};pm.addField(new FieldText("commit_description",options));this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_minify_js=function(){var opts={"controller":this};var pm=new PublicMethodServer('minify_js',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_build_all=function(){var opts={"controller":this};var pm=new PublicMethodServer('build_all',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_create_symlinks=function(){var opts={"controller":this};var pm=new PublicMethodServer('create_symlinks',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_pull=function(){var opts={"controller":this};var pm=new PublicMethodServer('pull',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_push=function(){var opts={"controller":this};var pm=new PublicMethodServer('push',opts);var options={};pm.addField(new FieldText("commit_description",options));this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_zip_project=function(){var opts={"controller":this};var pm=new PublicMethodServer('zip_project',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_zip_db=function(){var opts={"controller":this};var pm=new PublicMethodServer('zip_db',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_get_version=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_version',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_apply_patch=function(){var opts={"controller":this};var pm=new PublicMethodServer('apply_patch',opts);this.addPublicMethod(pm);}
ProjectManager_Controller.prototype.add_apply_sql=function(){var opts={"controller":this};var pm=new PublicMethodServer('apply_sql',opts);this.addPublicMethod(pm);} 
function LinkedContractList_Controller(options){options=options||{};options.listModelClass=LinkedContractList_Model;options.objModelClass=LinkedContractList_Model;LinkedContractList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetList();this.addGetObject();}
extend(LinkedContractList_Controller,ControllerObjClient);LinkedContractList_Controller.prototype.addInsert=function(){LinkedContractList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSON("contracts_ref",options);pm.addField(field);}
LinkedContractList_Controller.prototype.addUpdate=function(){LinkedContractList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSON("contracts_ref",options);pm.addField(field);}
LinkedContractList_Controller.prototype.addDelete=function(){LinkedContractList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
LinkedContractList_Controller.prototype.addGetList=function(){LinkedContractList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("contracts_ref",f_opts));}
LinkedContractList_Controller.prototype.addGetObject=function(){LinkedContractList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));} 
function LinkedContractList_Model(options){var id='LinkedContractList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contracts_ref=new FieldJSON("contracts_ref",filed_options);LinkedContractList_Model.superclass.constructor.call(this,id,options);}
extend(LinkedContractList_Model,ModelJSON); 
function Enum_cost_eval_validity_pd_orders(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_no_pd":"ПД не подлежит","ru_simult_with_pd":"Одновременно с ПД","ru_after_pd":"После ПД"};options.options=[{"value":"no_pd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"no_pd"],checked:(options.defaultValue&&options.defaultValue=="no_pd")},{"value":"simult_with_pd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"simult_with_pd"],checked:(options.defaultValue&&options.defaultValue=="simult_with_pd")},{"value":"after_pd","descr":multy_lang_values[window.getApp().getLocale()+"_"+"after_pd"],checked:(options.defaultValue&&options.defaultValue=="after_pd")}];Enum_cost_eval_validity_pd_orders.superclass.constructor.call(this,id,options);}
extend(Enum_cost_eval_validity_pd_orders,EditSelect); 
function EnumGridColumn_cost_eval_validity_pd_orders(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["no_pd"]="ПД не подлежит";options.multyLangValues["ru"]["simult_with_pd"]="Одновременно с ПД";options.multyLangValues["ru"]["after_pd"]="После ПД";EnumGridColumn_cost_eval_validity_pd_orders.superclass.constructor.call(this,options);}
extend(EnumGridColumn_cost_eval_validity_pd_orders,GridColumnEnum); 
function Enum_date_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_calendar":"Календарные","ru_bank":"Рабочие"};options.options=[{"value":"calendar","descr":multy_lang_values[window.getApp().getLocale()+"_"+"calendar"],checked:(options.defaultValue&&options.defaultValue=="calendar")},{"value":"bank","descr":multy_lang_values[window.getApp().getLocale()+"_"+"bank"],checked:(options.defaultValue&&options.defaultValue=="bank")}];Enum_date_types.superclass.constructor.call(this,id,options);}
extend(Enum_date_types,EditSelect); 
function EnumGridColumn_date_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["calendar"]="Календарные";options.multyLangValues["ru"]["bank"]="Рабочие";EnumGridColumn_date_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_date_types,GridColumnEnum); 
function ContractorList_Controller(options){options=options||{};options.listModelClass=ContractorList_Model;ContractorList_Controller.superclass.constructor.call(this,options);this.addGetList();}
extend(ContractorList_Controller,ControllerObjClient);ContractorList_Controller.prototype.addGetList=function(){ContractorList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldString("name",f_opts));} 
function ContractorList_Model(options){var id='ContractorList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);ContractorList_Model.superclass.constructor.call(this,id,options);}
extend(ContractorList_Model,ModelJSON); 
function DocFlowOutClientRegNumber_Model(options){var id='DocFlowOutClientRegNumber_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_flow_out_client_id=new FieldInt("doc_flow_out_client_id",filed_options);options.fields.doc_flow_out_client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setRequired(true);options.fields.reg_number.getValidator().setMaxLength('15');DocFlowOutClientRegNumber_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowOutClientRegNumber_Model,ModelXML); 
function DocFlowInClientRegNumber_Model(options){var id='DocFlowInClientRegNumber_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_flow_in_client_id=new FieldInt("doc_flow_in_client_id",filed_options);options.fields.doc_flow_in_client_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.reg_number=new FieldString("reg_number",filed_options);options.fields.reg_number.getValidator().setRequired(true);options.fields.reg_number.getValidator().setMaxLength('30');DocFlowInClientRegNumber_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInClientRegNumber_Model,ModelXML); 
function ApplicationProcess_Controller(options){options=options||{};options.listModelClass=ApplicationProcessList_Model;options.objModelClass=ApplicationProcessList_Model;ApplicationProcess_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(ApplicationProcess_Controller,ControllerObjServer);ApplicationProcess_Controller.prototype.addInsert=function(){ApplicationProcess_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.required=true;var field=new FieldInt("application_id",options);pm.addField(field);var options={};options.primaryKey=true;options.required=true;var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};options.required=true;options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';var field=new FieldEnum("state",options);pm.addField(field);var options={};options.required=true;var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_examination_id",options);pm.addField(field);}
ApplicationProcess_Controller.prototype.addUpdate=function(){ApplicationProcess_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("application_id",options);pm.addField(field);field=new FieldInt("old_application_id",{});pm.addField(field);var options={};options.primaryKey=true;var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);field=new FieldDateTimeTZ("old_date_time",{});pm.addField(field);var options={};options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';options.enumValues+=(options.enumValues=='')?'':',';options.enumValues+='null';var field=new FieldEnum("state",options);pm.addField(field);var options={};var field=new FieldInt("user_id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("end_date_time",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_examination_id",options);pm.addField(field);}
ApplicationProcess_Controller.prototype.addDelete=function(){ApplicationProcess_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("application_id",options));var options={"required":true};pm.addField(new FieldDateTimeTZ("date_time",options));}
ApplicationProcess_Controller.prototype.addGetObject=function(){ApplicationProcess_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("application_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));pm.addField(new FieldString("mode"));}
ApplicationProcess_Controller.prototype.addGetList=function(){ApplicationProcess_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("application_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldEnum("state",f_opts));var f_opts={};pm.addField(new FieldInt("user_id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));var f_opts={};pm.addField(new FieldInt("contract_id",f_opts));var f_opts={};pm.addField(new FieldJSON("contracts_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("applications_ref",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("end_date_time",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_examination_id",f_opts));} 
function ApplicationProcessList_Model(options){var id='ApplicationProcessList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='filling,correcting,sent,checking,returned,closed_no_expertise,waiting_for_contract,waiting_for_pay,expertise,closed';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contracts_ref=new FieldJSON("contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.applications_ref=new FieldJSON("applications_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_examination_id=new FieldInt("doc_flow_examination_id",filed_options);ApplicationProcessList_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationProcessList_Model,ModelXML); 
function Service_Controller(options){options=options||{};options.listModelClass=Service_Model;options.objModelClass=Service_Model;Service_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(Service_Controller,ControllerObjServer);Service_Controller.prototype.addInsert=function(){Service_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.enumValues='calendar,bank';var field=new FieldEnum("date_type",options);pm.addField(field);var options={};var field=new FieldInt("work_day_count",options);pm.addField(field);var options={};var field=new FieldInt("expertise_day_count",options);pm.addField(field);var options={};var field=new FieldString("contract_postf",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
Service_Controller.prototype.addUpdate=function(){Service_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};options.enumValues='calendar,bank';var field=new FieldEnum("date_type",options);pm.addField(field);var options={};var field=new FieldInt("work_day_count",options);pm.addField(field);var options={};var field=new FieldInt("expertise_day_count",options);pm.addField(field);var options={};var field=new FieldString("contract_postf",options);pm.addField(field);}
Service_Controller.prototype.addDelete=function(){Service_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
Service_Controller.prototype.addGetObject=function(){Service_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
Service_Controller.prototype.addGetList=function(){Service_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldEnum("date_type",f_opts));var f_opts={};pm.addField(new FieldInt("work_day_count",f_opts));var f_opts={};pm.addField(new FieldInt("expertise_day_count",f_opts));var f_opts={};pm.addField(new FieldString("contract_postf",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");} 
function Service_Model(options){var id='Service_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('50');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.date_type=new FieldEnum("date_type",filed_options);filed_options.enumValues='calendar,bank';var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.work_day_count=new FieldInt("work_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.expertise_day_count=new FieldInt("expertise_day_count",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_postf=new FieldString("contract_postf",filed_options);options.fields.contract_postf.getValidator().setMaxLength('5');Service_Model.superclass.constructor.call(this,id,options);}
extend(Service_Model,ModelXML); 
function Enum_doc_flow_out_client_types(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_app":"Заявление","ru_contr_resp":"Ответы на замечания по контракту","ru_contr_return":"Возврат контракта","ru_contr_other":"Прочее"};options.options=[{"value":"app","descr":multy_lang_values[window.getApp().getLocale()+"_"+"app"],checked:(options.defaultValue&&options.defaultValue=="app")},{"value":"contr_resp","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contr_resp"],checked:(options.defaultValue&&options.defaultValue=="contr_resp")},{"value":"contr_return","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contr_return"],checked:(options.defaultValue&&options.defaultValue=="contr_return")},{"value":"contr_other","descr":multy_lang_values[window.getApp().getLocale()+"_"+"contr_other"],checked:(options.defaultValue&&options.defaultValue=="contr_other")}];Enum_doc_flow_out_client_types.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_out_client_types,EditSelect); 
function EnumGridColumn_doc_flow_out_client_types(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["app"]="Заявление";options.multyLangValues["ru"]["contr_resp"]="Ответы на замечания по контракту";options.multyLangValues["ru"]["contr_return"]="Возврат контракта";options.multyLangValues["ru"]["contr_other"]="Прочее";EnumGridColumn_doc_flow_out_client_types.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_out_client_types,GridColumnEnum); 
function ApplicationDocFolder_Model(options){var id='ApplicationDocFolder_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldText("name",filed_options);ApplicationDocFolder_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationDocFolder_Model,ModelXML); 
function ApplicationDocFolder_Controller(options){options=options||{};options.listModelClass=ApplicationDocFolder_Model;options.objModelClass=ApplicationDocFolder_Model;ApplicationDocFolder_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(ApplicationDocFolder_Controller,ControllerObjServer);ApplicationDocFolder_Controller.prototype.addInsert=function(){ApplicationDocFolder_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);}
ApplicationDocFolder_Controller.prototype.addUpdate=function(){ApplicationDocFolder_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldText("name",options);pm.addField(field);}
ApplicationDocFolder_Controller.prototype.addDelete=function(){ApplicationDocFolder_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ApplicationDocFolder_Controller.prototype.addGetObject=function(){ApplicationDocFolder_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ApplicationDocFolder_Controller.prototype.addGetList=function(){ApplicationDocFolder_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldText("name",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");} 
function ShortMessageRecipientState_Controller(options){options=options||{};options.listModelClass=ShortMessageRecipientState_Model;options.objModelClass=ShortMessageRecipientState_Model;ShortMessageRecipientState_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(ShortMessageRecipientState_Controller,ControllerObjServer);ShortMessageRecipientState_Controller.prototype.addInsert=function(){ShortMessageRecipientState_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldText("bg_class",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
ShortMessageRecipientState_Controller.prototype.addUpdate=function(){ShortMessageRecipientState_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldString("name",options);pm.addField(field);var options={};var field=new FieldText("bg_class",options);pm.addField(field);}
ShortMessageRecipientState_Controller.prototype.addDelete=function(){ShortMessageRecipientState_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
ShortMessageRecipientState_Controller.prototype.addGetObject=function(){ShortMessageRecipientState_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ShortMessageRecipientState_Controller.prototype.addGetList=function(){ShortMessageRecipientState_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldString("name",f_opts));var f_opts={};pm.addField(new FieldText("bg_class",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("name");} 
function ShortMessage_Controller(options){options=options||{};options.listModelClass=ShortMessageList_Model;options.objModelClass=ShortMessageList_Model;ShortMessage_Controller.superclass.constructor.call(this,options);this.add_send_message();this.addGetObject();this.addGetList();this.add_get_chat_list();this.add_get_recipient_list();this.add_get_unviewed_list();this.add_set_recipient_state();this.add_get_recipient_state();this.add_download_file();}
extend(ShortMessage_Controller,ControllerObjServer);ShortMessage_Controller.prototype.add_send_message=function(){var opts={"controller":this};var pm=new PublicMethodServer('send_message',opts);pm.setRequestType('post');pm.setEncType(ServConnector.prototype.ENCTYPES.MULTIPART);var options={};options.required=true;pm.addField(new FieldText("content",options));var options={};pm.addField(new FieldText("files",options));var options={};options.required=true;pm.addField(new FieldText("recipient_ids",options));var options={};options.required=true;pm.addField(new FieldInt("doc_flow_importance_type_id",options));this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.addGetObject=function(){ShortMessage_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
ShortMessage_Controller.prototype.addGetList=function(){ShortMessage_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldJSON("recipients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("to_recipients_ref",f_opts));var f_opts={};pm.addField(new FieldJSON("doc_flow_importance_types_ref",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));var f_opts={};pm.addField(new FieldJSON("files",f_opts));var f_opts={};pm.addField(new FieldInt("recipient_id",f_opts));var f_opts={};pm.addField(new FieldInt("to_recipient_id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("view_date_time",f_opts));var f_opts={};pm.addField(new FieldBool("viewed",f_opts));var options={};options.required=true;pm.addField(new FieldInt("to_recipient_id",options));}
ShortMessage_Controller.prototype.add_get_chat_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_chat_list',opts);var options={};options.required=true;pm.addField(new FieldInt("to_recipient_id",options));this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.add_get_recipient_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_recipient_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.add_get_unviewed_list=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_unviewed_list',opts);pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.add_set_recipient_state=function(){var opts={"controller":this};var pm=new PublicMethodServer('set_recipient_state',opts);var options={};pm.addField(new FieldInt("recipient_state_id",options));this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.add_get_recipient_state=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_recipient_state',opts);this.addPublicMethod(pm);}
ShortMessage_Controller.prototype.add_download_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('download_file',opts);var options={};options.maxlength="36";pm.addField(new FieldString("id",options));var options={};pm.addField(new FieldInt("message_id",options));this.addPublicMethod(pm);} 
function ShortMessageRecipientState_Model(options){var id='ShortMessageRecipientState_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.name=new FieldString("name",filed_options);options.fields.name.getValidator().setMaxLength('150');var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.bg_class=new FieldText("bg_class",filed_options);ShortMessageRecipientState_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageRecipientState_Model,ModelXML); 
function ShortMessageRecipientList_Model(options){var id='ShortMessageRecipientList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_descr=new FieldString("recipient_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.departments_ref=new FieldJSON("departments_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.department_descr=new FieldString("department_descr",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.is_online=new FieldBool("is_online",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_states_ref=new FieldJSON("recipient_states_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_init=new FieldString("recipient_init",filed_options);ShortMessageRecipientList_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageRecipientList_Model,ModelXML); 
function ShortMessageRecipientCurrentState_Model(options){var id='ShortMessageRecipientCurrentState_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);options.fields.recipient_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_state_id=new FieldInt("recipient_state_id",filed_options);options.fields.recipient_state_id.getValidator().setRequired(true);ShortMessageRecipientCurrentState_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageRecipientCurrentState_Model,ModelXML); 
function ShortMessageList_Model(options){var id='ShortMessageList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_recipients_ref=new FieldJSON("to_recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_recipient_id=new FieldInt("to_recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_date_time=new FieldDateTimeTZ("view_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);ShortMessageList_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageList_Model,ModelXML); 
function ShortMessageView_Model(options){var id='ShortMessageView_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.short_message_id=new FieldInt("short_message_id",filed_options);options.fields.short_message_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);options.fields.recipient_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);ShortMessageView_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageView_Model,ModelXML); 
function DocFlowInside_Model(options){var id='DocFlowInside_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);DocFlowInside_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInside_Model,ModelXML); 
function DocFlowInside_Controller(options){options=options||{};options.listModelClass=DocFlowInsideList_Model;options.objModelClass=DocFlowInsideDialog_Model;DocFlowInside_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();this.addComplete();this.add_remove_file();this.add_get_file();this.add_get_file_sig();}
extend(DocFlowInside_Controller,ControllerObjServer);DocFlowInside_Controller.prototype.addInsert=function(){DocFlowInside_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("contract_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
DocFlowInside_Controller.prototype.addUpdate=function(){DocFlowInside_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldDateTimeTZ("date_time",options);pm.addField(field);var options={};var field=new FieldInt("doc_flow_importance_type_id",options);pm.addField(field);var options={};var field=new FieldInt("employee_id",options);pm.addField(field);var options={};var field=new FieldInt("contract_id",options);pm.addField(field);var options={};var field=new FieldText("comment_text",options);pm.addField(field);var options={};var field=new FieldText("subject",options);pm.addField(field);var options={};var field=new FieldText("content",options);pm.addField(field);}
DocFlowInside_Controller.prototype.addDelete=function(){DocFlowInside_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
DocFlowInside_Controller.prototype.addGetObject=function(){DocFlowInside_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
DocFlowInside_Controller.prototype.addGetList=function(){DocFlowInside_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldDateTimeTZ("date_time",f_opts));var f_opts={};pm.addField(new FieldInt("doc_flow_importance_type_id",f_opts));var f_opts={};pm.addField(new FieldInt("employee_id",f_opts));var f_opts={};pm.addField(new FieldInt("contract_id",f_opts));var f_opts={};pm.addField(new FieldText("comment_text",f_opts));var f_opts={};pm.addField(new FieldText("subject",f_opts));var f_opts={};pm.addField(new FieldText("content",f_opts));}
DocFlowInside_Controller.prototype.addComplete=function(){DocFlowInside_Controller.superclass.addComplete.call(this);var f_opts={};var pm=this.getComplete();pm.addField(new FieldInt("id",f_opts));pm.getField(this.PARAM_ORD_FIELDS).setValue("id");}
DocFlowInside_Controller.prototype.add_remove_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('remove_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowInside_Controller.prototype.add_get_file=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);}
DocFlowInside_Controller.prototype.add_get_file_sig=function(){var opts={"controller":this};var pm=new PublicMethodServer('get_file_sig',opts);var options={};options.required=true;options.maxlength="36";pm.addField(new FieldString("file_id",options));var options={};options.required=true;pm.addField(new FieldInt("doc_id",options));this.addPublicMethod(pm);} 
function DocFlowInsideDialog_Model(options){var id='DocFlowInsideDialog_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contracts_ref=new FieldJSON("contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_inside_processes_chain=new FieldJSON("doc_flow_inside_processes_chain",filed_options);DocFlowInsideDialog_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInsideDialog_Model,ModelXML); 
function DocFlowInsideList_Model(options){var id='DocFlowInsideList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employee_id=new FieldInt("employee_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contract_id=new FieldInt("contract_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.comment_text=new FieldText("comment_text",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.subject=new FieldText("subject",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.contracts_ref=new FieldJSON("contracts_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldString("state",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_dt=new FieldDateTimeTZ("state_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_end_dt=new FieldDateTimeTZ("state_end_dt",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state_register_doc=new FieldJSON("state_register_doc",filed_options);DocFlowInsideList_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInsideList_Model,ModelXML); 
function Enum_doc_flow_inside_states(id,options){options=options||{};options.addNotSelected=(options.addNotSelected!=undefined)?options.addNotSelected:true;var multy_lang_values={"ru_approving":"На согласовании","ru_not_approved":"Не согласован","ru_approved_with_notes":"Согласован с замечаниями","ru_approved":"Согласован","ru_confirming":"На утверждении","ru_not_confirmed":"Не утвержден","ru_examining":"На рассмотрении","ru_examined":"Рассмотрен","ru_fulfilling":"На исполнении","ru_fulfilled":"Исполнен","ru_acquainting":"На ознакомлении","ru_acquainted":"Ознакомлен"};options.options=[{"value":"approving","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approving"],checked:(options.defaultValue&&options.defaultValue=="approving")},{"value":"not_approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"not_approved"],checked:(options.defaultValue&&options.defaultValue=="not_approved")},{"value":"approved_with_notes","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved_with_notes"],checked:(options.defaultValue&&options.defaultValue=="approved_with_notes")},{"value":"approved","descr":multy_lang_values[window.getApp().getLocale()+"_"+"approved"],checked:(options.defaultValue&&options.defaultValue=="approved")},{"value":"confirming","descr":multy_lang_values[window.getApp().getLocale()+"_"+"confirming"],checked:(options.defaultValue&&options.defaultValue=="confirming")},{"value":"not_confirmed","descr":multy_lang_values[window.getApp().getLocale()+"_"+"not_confirmed"],checked:(options.defaultValue&&options.defaultValue=="not_confirmed")},{"value":"examining","descr":multy_lang_values[window.getApp().getLocale()+"_"+"examining"],checked:(options.defaultValue&&options.defaultValue=="examining")},{"value":"examined","descr":multy_lang_values[window.getApp().getLocale()+"_"+"examined"],checked:(options.defaultValue&&options.defaultValue=="examined")},{"value":"fulfilling","descr":multy_lang_values[window.getApp().getLocale()+"_"+"fulfilling"],checked:(options.defaultValue&&options.defaultValue=="fulfilling")},{"value":"fulfilled","descr":multy_lang_values[window.getApp().getLocale()+"_"+"fulfilled"],checked:(options.defaultValue&&options.defaultValue=="fulfilled")},{"value":"acquainting","descr":multy_lang_values[window.getApp().getLocale()+"_"+"acquainting"],checked:(options.defaultValue&&options.defaultValue=="acquainting")},{"value":"acquainted","descr":multy_lang_values[window.getApp().getLocale()+"_"+"acquainted"],checked:(options.defaultValue&&options.defaultValue=="acquainted")}];Enum_doc_flow_inside_states.superclass.constructor.call(this,id,options);}
extend(Enum_doc_flow_inside_states,EditSelect); 
function EnumGridColumn_doc_flow_inside_states(options){options=options||{};options.multyLangValues={};options.multyLangValues["ru"]={};options.multyLangValues["ru"]["approving"]="На согласовании";options.multyLangValues["ru"]["not_approved"]="Не согласован";options.multyLangValues["ru"]["approved_with_notes"]="Согласован с замечаниями";options.multyLangValues["ru"]["approved"]="Согласован";options.multyLangValues["ru"]["confirming"]="На утверждении";options.multyLangValues["ru"]["not_confirmed"]="Не утвержден";options.multyLangValues["ru"]["examining"]="На рассмотрении";options.multyLangValues["ru"]["examined"]="Рассмотрен";options.multyLangValues["ru"]["fulfilling"]="На исполнении";options.multyLangValues["ru"]["fulfilled"]="Исполнен";options.multyLangValues["ru"]["acquainting"]="На ознакомлении";options.multyLangValues["ru"]["acquainted"]="Ознакомлен";EnumGridColumn_doc_flow_inside_states.superclass.constructor.call(this,options);}
extend(EnumGridColumn_doc_flow_inside_states,GridColumnEnum); 
function DocFlowInsideProcess_Model(options){var id='DocFlowInsideProcess_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.doc_flow_inside_id=new FieldInt("doc_flow_inside_id",filed_options);options.fields.doc_flow_inside_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.state=new FieldEnum("state",filed_options);filed_options.enumValues='approving,not_approved,approved_with_notes,approved,confirming,not_confirmed,examining,examined,fulfilling,fulfilled,acquainting,acquainted';options.fields.state.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.register_doc=new FieldJSONB("register_doc",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.description=new FieldText("description",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_type_id=new FieldInt("doc_flow_importance_type_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);DocFlowInsideProcess_Model.superclass.constructor.call(this,id,options);}
extend(DocFlowInsideProcess_Model,ModelXML); 
function EmployeeLocalList_Controller(options){options=options||{};options.listModelClass=EmployeeLocalList_Model;options.objModelClass=EmployeeLocalList_Model;EmployeeLocalList_Controller.superclass.constructor.call(this,options);this.addInsert();this.addUpdate();this.addDelete();this.addGetObject();this.addGetList();}
extend(EmployeeLocalList_Controller,ControllerObjClient);EmployeeLocalList_Controller.prototype.addInsert=function(){EmployeeLocalList_Controller.superclass.addInsert.call(this);var pm=this.getInsert();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);var options={};var field=new FieldJSON("employees_ref",options);pm.addField(field);pm.addField(new FieldInt("ret_id",{}));}
EmployeeLocalList_Controller.prototype.addUpdate=function(){EmployeeLocalList_Controller.superclass.addUpdate.call(this);var pm=this.getUpdate();var options={};options.primaryKey=true;options.autoInc=true;var field=new FieldInt("id",options);pm.addField(field);field=new FieldInt("old_id",{});pm.addField(field);var options={};var field=new FieldJSON("employees_ref",options);pm.addField(field);}
EmployeeLocalList_Controller.prototype.addDelete=function(){EmployeeLocalList_Controller.superclass.addDelete.call(this);var pm=this.getDelete();var options={"required":true};pm.addField(new FieldInt("id",options));}
EmployeeLocalList_Controller.prototype.addGetObject=function(){EmployeeLocalList_Controller.superclass.addGetObject.call(this);var pm=this.getGetObject();var f_opts={};pm.addField(new FieldInt("id",f_opts));pm.addField(new FieldString("mode"));}
EmployeeLocalList_Controller.prototype.addGetList=function(){EmployeeLocalList_Controller.superclass.addGetList.call(this);var pm=this.getGetList();pm.addField(new FieldInt(this.PARAM_COUNT));pm.addField(new FieldInt(this.PARAM_FROM));pm.addField(new FieldString(this.PARAM_COND_FIELDS));pm.addField(new FieldString(this.PARAM_COND_SGNS));pm.addField(new FieldString(this.PARAM_COND_VALS));pm.addField(new FieldString(this.PARAM_COND_ICASE));pm.addField(new FieldString(this.PARAM_ORD_FIELDS));pm.addField(new FieldString(this.PARAM_ORD_DIRECTS));pm.addField(new FieldString(this.PARAM_FIELD_SEP));var f_opts={};pm.addField(new FieldInt("id",f_opts));var f_opts={};pm.addField(new FieldJSON("employees_ref",f_opts));} 
function EmployeeLocalList_Model(options){var id='EmployeeLocalList_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.employees_ref=new FieldJSON("employees_ref",filed_options);EmployeeLocalList_Model.superclass.constructor.call(this,id,options);}
extend(EmployeeLocalList_Model,ModelJSON); 
function ApplicationCorrection_Model(options){var id='ApplicationCorrection_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=false;options.fields.application_id=new FieldInt("application_id",filed_options);options.fields.application_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=true;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);options.fields.date_time.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.user_id=new FieldInt("user_id",filed_options);options.fields.user_id.getValidator().setRequired(true);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.end_date_time=new FieldDateTimeTZ("end_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_examination_id=new FieldInt("doc_flow_examination_id",filed_options);ApplicationCorrection_Model.superclass.constructor.call(this,id,options);}
extend(ApplicationCorrection_Model,ModelXML); 
function ShortMessageChat_Model(options){var id='ShortMessageChat_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=true;filed_options.autoInc=true;options.fields.id=new FieldInt("id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.defValue=true;filed_options.autoInc=false;options.fields.date_time=new FieldDateTimeTZ("date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipients_ref=new FieldJSON("recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_recipients_ref=new FieldJSON("to_recipients_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.doc_flow_importance_types_ref=new FieldJSON("doc_flow_importance_types_ref",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.content=new FieldText("content",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.files=new FieldJSON("files",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.recipient_id=new FieldInt("recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.to_recipient_id=new FieldInt("to_recipient_id",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.view_date_time=new FieldDateTimeTZ("view_date_time",filed_options);var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.viewed=new FieldBool("viewed",filed_options);ShortMessageChat_Model.superclass.constructor.call(this,id,options);}
extend(ShortMessageChat_Model,ModelXML); 
function RecipientPicture_Model(options){var id='RecipientPicture_Model';options=options||{};options.fields={};var filed_options={};filed_options.primaryKey=false;filed_options.autoInc=false;options.fields.picture=new FieldText("picture",filed_options);RecipientPicture_Model.superclass.constructor.call(this,id,options);}
extend(RecipientPicture_Model,ModelXML);